<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://drowningfish123.github.io/DorwoningFish.github.io">
  <title>æººæ°´çš„é±¼çš„åšå®¢</title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    
    <!-- <meta name="keywords" content="">
    <meta name="description" content=""> -->
  
  <meta property="og:type" content="website">
<meta property="og:title" content="æººæ°´çš„é±¼çš„åšå®¢">
<meta property="og:url" content="https://drowningfish123.github.io/DorwoningFish.github.io/index.html">
<meta property="og:site_name" content="æººæ°´çš„é±¼çš„åšå®¢">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Drowning Fish">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/DorwoningFish.github.io/atom.xml" title="æººæ°´çš„é±¼çš„åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/DorwoningFish.github.io/assets/qq.png">
  
  
    <link rel="apple-touch-icon" href="/DorwoningFish.github.io/apple-touch-icon-180x180.png">
  
  <link rel="stylesheet" type="text/css" href="/DorwoningFish.github.io/./main.a5fda8.css">
  <style type="text/css">
    
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

  
    
 	  <script src="/DorwoningFish.github.io/lib/clickLove.js"></script>
  
  


  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      


<div class="overlay" style="background: #4d4d4d;background: url('/DorwoningFish.github.io/img/biubiubiu.gif') no-repeat ;"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/DorwoningFish.github.io/" class="profilepic">
			<img src="/DorwoningFish.github.io/assets/qq.png" class="js-avatar">
		</a>
		<hgroup>
			<h1 class="header-author"><a href="/DorwoningFish.github.io/">Drowning Fish</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/DorwoningFish.github.io/" target="_blank">ä¸»é¡µ</a></li>
			
				<li><a href="https://drowningfish123.github.io/DorwoningFish.github.io/index/" target="_blank">æŠ€æœ¯ç¬”è®°</a></li>
			
				<li><a href="/DorwoningFish.github.io/tags" target="_blank">éšç¬”</a></li>
			
				<li><a href="/DorwoningFish.github.io/archives/index.html" target="_blank">å½’æ¡£</a></li>
			
				<li><a href="/DorwoningFish.github.io/categories" target="_blank">ä¸ªäººç®€å†</a></li>
			
			</ul>
		</nav>
		<nav class="header-smart-menu">
			
				
					<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
				
			
				
					<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">å‹é“¾</a>
				
			
				
					<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">å…³äºæˆ‘</a>
				
			
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					
						<a class="qq" href="/DorwoningFish.github.io/assets/qq.png" 
												title="QQ" target="_blank"><i class="icon-qq"></i></a>
					
				
					
						<a class="weixin" href="/DorwoningFish.github.io/assets/WeChat.png" 
												title="å¾®ä¿¡" target="_blank"><i class="icon-weixin"></i></a>
					
				
			</div>
		
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
      
      <a class="forkMe" style="position:absolute;z-index:999;top:0;right:0.5em;" 
        href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">
        <img src="/DorwoningFish.github.io/img/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
      
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<a href="/DorwoningFish.github.io/">
					<img src="/DorwoningFish.github.io/assets/qq.png" class="js-avatar">
				</a>
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Drowning Fish</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						
						<a class="qq" target="_blank" 
							href="/DorwoningFish.github.io/assets/qq.png" title="QQ"><i class="icon-qq"></i></a>
						
					
						
						<a class="weixin" target="_blank" 
							href="/DorwoningFish.github.io/assets/WeChat.png" title="å¾®ä¿¡"><i class="icon-weixin"></i></a>
						
					
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 20%"><a href="/DorwoningFish.github.io/">ä¸»é¡µ</a></li>
		        
					<li style="width: 20%"><a href="https://drowningfish123.github.io/DorwoningFish.github.io/index/">æŠ€æœ¯ç¬”è®°</a></li>
		        
					<li style="width: 20%"><a href="/DorwoningFish.github.io/tags">éšç¬”</a></li>
		        
					<li style="width: 20%"><a href="/DorwoningFish.github.io/archives/index.html">å½’æ¡£</a></li>
		        
					<li style="width: 20%"><a href="/DorwoningFish.github.io/categories">ä¸ªäººç®€å†</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1"
              class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            

  
    <article id="post-mysqlç¬”è®°ï¼ˆä¸€ï¼‰" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/06/mysql%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank">mysqlç¬”è®°ï¼ˆä¸€ï¼‰</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/06/mysql%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" class="archive-article-date">
        <time datetime="2022-08-06T00:46:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-06</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="æ•°æ®åº“ä»‹ç»"><a href="#æ•°æ®åº“ä»‹ç»" class="headerlink" title="æ•°æ®åº“ä»‹ç»"></a>æ•°æ®åº“ä»‹ç»</h1><blockquote>
<p>æŒ‰ç…§ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡,ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„ä»“åº“</p>
<p>ç”¨ä»“åº“çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®çš„.ä¸€ä¸ªä»“åº“ä¸‹ä¼šæœ‰å¾ˆå¤šè¡¨.ä¸€ä¸ªè¡¨ç”±è¡Œå’Œåˆ—æ„æˆ.</p>
</blockquote>
<h2 id="æ•°æ®çš„åˆ†ç±»"><a href="#æ•°æ®çš„åˆ†ç±»" class="headerlink" title="æ•°æ®çš„åˆ†ç±»"></a>æ•°æ®çš„åˆ†ç±»</h2><blockquote>
<ol>
<li><p>å…³ç³»å‹æ•°æ®åº“ </p>
<p><code>è¡¨æ ¼å‹æ•°æ®åº“ - æœ‰è¡Œå’Œåˆ—æ¥æ„æˆä¸€å¼ è¡¨,è¡¨ä¸­å­˜æ”¾æ•°æ®</code></p>
<p>å¸¸è§çš„äº§å“:MS-sqlserver,ä¸»æµçš„å…è´¹çš„Oracle-mysql(ä¸­å°å‹çš„åº”ç”¨),æ”¶è´¹çš„Oracle-oracle(å¤§å‹çš„åº”ç”¨)</p>
</li>
<li><p>nosql - ä¸ä»…ä»…æ˜¯sql - éå…³ç³»å‹æ•°æ®åº“</p>
<ul>
<li>é”®å€¼å¯¹æ•°æ®åº“ - redis</li>
<li>æ–‡æ¡£å‹æ•°æ®åº“ - mongodb</li>
<li>åˆ—å¼æ•°æ®åº“ - hbase</li>
<li>å›¾å½¢æ•°æ®åº“</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"><a href="#æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹" class="headerlink" title="æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹"></a>æ•°æ®åº“å®‰è£…æ³¨æ„ç‚¹</h2><blockquote>
<ol>
<li><p>serverå’Œclient</p>
<p>å½“æˆ‘ä»¬å®‰è£…å¥½dbä¹‹å,è‡ªå¸¦å®‰è£…å¥½äº†mysql-serverç«¯å’Œmysql-clientç«¯</p>
<p><code>dbæ­£å¸¸ä½¿ç”¨,ä¸€å®šè¦ä¿éšœmysql-serverç«¯å¤„äºè¿è¡ŒçŠ¶æ€</code></p>
<ul>
<li><p>å³å‡»è®¡ç®—æœº - ç®¡ç† - æœåŠ¡ - æœåŠ¡å’Œåº”ç”¨ç¨‹åº - ğŸ‘‰ğŸ»å³è¾¹çª—å£ - Mysql - å¯åŠ¨æ–¹å¼è®¾ç½®å¼€å¯è‡ªå¯.</p>
</li>
<li><p>å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥å‘½ä»¤æ¥å¯åŠ¨mysql-serverç«¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>mysql-clientå®¢æˆ·ç«¯<ul>
<li>ç¬¬ä¸‰æ–¹çš„æ”¶è´¹navicat</li>
<li>idea</li>
<li>javaä»£ç </li>
<li>è‡ªå¸¦çš„æ§åˆ¶å°</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="ä¸“ä¸šæœ¯è¯­"><a href="#ä¸“ä¸šæœ¯è¯­" class="headerlink" title="ä¸“ä¸šæœ¯è¯­"></a>ä¸“ä¸šæœ¯è¯­</h2><blockquote>
<ol>
<li><p>DB - DataBase æ•°æ®åº“</p>
</li>
<li><p>DBA - æ•°æ®åº“ç®¡ç†å‘˜(ä¾§é‡äºè¿ç»´),DE - æ•°æ®åº“ç ”å‘å·¥ç¨‹å¸ˆ</p>
</li>
<li><p>DBMS - æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ,å®‰è£…åœ¨æ“ä½œç³»ç»Ÿ.ç”¨æˆ·é€šè¿‡dbmsæ¥æ“ä½œdb,dbaé€šè¿‡dbmsæ¥ç®¡ç†db,ä¿è¯dbåœ¨7*24hé«˜æ•ˆè¿è½¬</p>
<p><code>äºº - dbms - db(os)</code></p>
</li>
<li><p>RDBMS - å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ </p>
</li>
<li><p>DBS - æ•°æ®åº“ç³»ç»Ÿ,å¤§çš„èŒƒç•´,dbs &#x3D; dba+db+dbms</p>
</li>
</ol>
</blockquote>
<h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><blockquote>
<p><code>å‰æ:mysqlå®‰è£…å¹¶ä¸”é…ç½®å¥½äº†ç¯å¢ƒå˜é‡</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uç”¨æˆ·å -på¯†ç </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot</span><br></pre></td></tr></table></figure>

<p><code>ä¿®æ”¹å¯†ç </code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;ç”¨æˆ·å&#x27;@&#x27;dbæ‰€åœ¨ä¸»æœºip&#x27; identified by &#x27;æ–°çš„å¯†ç &#x27;;</span><br><span class="line"></span><br><span class="line">use mysql</span><br><span class="line"></span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;root&#x27;;</span><br><span class="line"></span><br><span class="line">-- é€€å‡ºé‡æ–°ç™»å½•</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="å¯¼å…¥è„šæœ¬"><a href="#å¯¼å…¥è„šæœ¬" class="headerlink" title="å¯¼å…¥è„šæœ¬"></a>å¯¼å…¥è„šæœ¬</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-- 1. åˆ›å»ºæ•°æ®åº“  create dabatase æ•°æ®åº“å</span><br><span class="line">create database dy;</span><br><span class="line"></span><br><span class="line">-- æŸ¥çœ‹æ‰€æœ‰çš„db</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">-- 2. ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use dy</span><br><span class="line"></span><br><span class="line">-- 3. å¯¼å…¥è„šæœ¬ - .sqlä¸ºåç¼€çš„sqlæ–‡ä»¶</span><br><span class="line">-- 3-1. åœ¨dyæ•°æ®åº“ä¸­ç”Ÿæˆ5å¼ è¡¨</span><br><span class="line">-- 3-2. æ¯å¼ è¡¨ä¸­æ¨¡æ‹Ÿä¸€äº›æ•°æ®</span><br><span class="line">source è„šæœ¬æ–‡ä»¶çš„ç»å¯¹è·¯å¾„;</span><br><span class="line"></span><br><span class="line">-- 4. æŸ¥çœ‹è¯¥åº“ä¸‹æ‰€æœ‰çš„è¡¨</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">+--------------+</span><br><span class="line">| Tables_in_dy |</span><br><span class="line">+--------------+</span><br><span class="line">| s_customer   |</span><br><span class="line">| s_dept       |</span><br><span class="line">| s_emp        |</span><br><span class="line">| s_ord        |</span><br><span class="line">| s_region     |</span><br><span class="line">+--------------+</span><br><span class="line"></span><br><span class="line">--5. æŸ¥çœ‹è¡¨ç»“æ„</span><br><span class="line">desc s_emp</span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®æ•°æ®åº“ç¼–ç "><a href="#è®¾ç½®æ•°æ®åº“ç¼–ç " class="headerlink" title="è®¾ç½®æ•°æ®åº“ç¼–ç "></a>è®¾ç½®æ•°æ®åº“ç¼–ç </h2><blockquote>
<ol>
<li><p>æŸ¥çœ‹ç¼–ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;character_set%&#x27;;</span><br><span class="line"></span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                     |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                      |</span><br><span class="line">| character_set_connection | utf8                                                      |</span><br><span class="line">| character_set_database   | utf8                                                      |</span><br><span class="line">| character_set_filesystem | binary                                                    |</span><br><span class="line">| character_set_results    | utf8                                                      |</span><br><span class="line">| character_set_server     | utf8                                                      |</span><br><span class="line">| character_set_system     | utf8                                                      |</span><br><span class="line">| character_sets_dir       | /usr/local/mysql-5.7.28-macos10.14-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------------------------------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ç¼–ç </p>
<p>2-1. ä¸´æ—¶ä¿®æ”¹ - setå‘½ä»¤ - ä»…ä»…æ˜¯å¯¹å½“å‰ä¼šè¯(ä¸€æ¬¡è¿æ¥,çª—å£)æœ‰æ•ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set names utf8;</span><br></pre></td></tr></table></figure>

<p>2-2. æ°¸ä¹…ç”Ÿæ•ˆ - æ‰¾åˆ°<strong>my.iniæ–‡ä»¶</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character_set_server</span>=utf8</span><br></pre></td></tr></table></figure>

<p>éœ€è¦é‡å¯mysql-server(mysqlæœåŠ¡å™¨ç«¯),æ‰èƒ½ç”Ÿæ•ˆ.</p>
<ol>
<li><p>é€šè¿‡guiæ–¹å¼</p>
</li>
<li><p>é€šè¿‡å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br><span class="line">net start mysql</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
</blockquote>
<h2 id="SQLä»‹ç»"><a href="#SQLä»‹ç»" class="headerlink" title="SQLä»‹ç»"></a>SQLä»‹ç»</h2><blockquote>
<p>SQL æ˜¯ Structured Query Language çš„ç¼©å†™ï¼Œä¸­æ–‡è¯‘ä¸ºâ€œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€â€ã€‚SQL æ˜¯ä¸€ç§è®¡ç®—æœºè¯­è¨€ï¼Œç”¨æ¥å­˜å‚¨ã€æ£€ç´¢å’Œä¿®æ”¹å…³ç³»å‹æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</p>
<p>â‘ mysql-clientè¾“å…¥åˆæ³•çš„sqlè¯­å¥,å¦‚æœsqléæ³•,ç›´æ¥æŠ¥é”™</p>
<p>â‘¡è¾“å…¥å›è½¦- å®¢æˆ·ç«¯å°†sqlè¯­å¥å‘é€åˆ°mysql-serverç«¯,ç¼–è¯‘å’Œè§£æsqlè¯­å¥çš„.</p>
<p>â‘¢mysql-serverå°†æ‰§è¡Œå®Œsqlè¯­å¥çš„ç»“æœè¿”å›åˆ°mysql-clientè¿›è¡Œå±•ç¤º.</p>
</blockquote>
<h3 id="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"><a href="#æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»" class="headerlink" title="æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»"></a>æŒ‰ç…§åŠŸèƒ½SQLåˆ†ç±»</h3><blockquote>
<ol>
<li><p>DDL(Data Definition Language) - æ•°æ®å®šä¹‰è¯­è¨€</p>
<p>create drop alter truncate rename comment(æ³¨é‡Š)</p>
</li>
<li><p>DML(Data Manipulation Language) - æ•°æ®æ“çºµè¯­è¨€</p>
<p>update delete insert</p>
</li>
<li><p>DQL(Data Query Language) - æ•°æ®æŸ¥è¯¢è¯­è¨€</p>
<p>select</p>
</li>
<li><p>TCL&#x2F;DTL(Transaction Control Language):äº‹åŠ¡æ§åˆ¶è¯­è¨€</p>
<p>commit savepoint rollback</p>
</li>
</ol>
</blockquote>
<h1 id="ç®€å•æŸ¥è¯¢"><a href="#ç®€å•æŸ¥è¯¢" class="headerlink" title="ç®€å•æŸ¥è¯¢"></a>ç®€å•æŸ¥è¯¢</h1><blockquote>
<ol>
<li><p>æŸ¥è¯¢çš„æœ¬è´¨</p>
<ul>
<li>åˆ°å“ªé‡ŒæŸ¥</li>
<li>æŸ¥ä»€ä¹ˆ</li>
</ul>
</li>
<li><p>è¯­æ³• - å…³é”®å­—æ˜¯å¤§å°å†™ä¸æ•æ„Ÿ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> åˆ—å<span class="number">1</span>,åˆ—å<span class="number">2</span>,..åˆ—n</span><br><span class="line"><span class="keyword">FROM</span> è¡¨å;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—å–åˆ«å"><a href="#åˆ—å–åˆ«å" class="headerlink" title="åˆ—å–åˆ«å"></a>åˆ—å–åˆ«å</h2><blockquote>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,è–ªæ°´ä»¥åŠèŒç§°.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary,title from s_emp;</span><br></pre></td></tr></table></figure>

<p><code>æ–¹å¼ä¸€</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 åˆ—åˆ«å,åˆ—å2 åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name åå­—,salary è–ªæ°´,title èŒç§° from s_emp;</span><br></pre></td></tr></table></figure>

<p><code>æ–¹å¼äºŒ</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1 as åˆ—åˆ«å,åˆ—å2 as åˆ—åˆ«å,..åˆ—n</span><br><span class="line">FROM è¡¨å;</span><br><span class="line"></span><br><span class="line">select first_name as åå­—,salary as è–ªæ°´,title as èŒç§° from s_emp;</span><br></pre></td></tr></table></figure>

<p><code>æ–¹å¼ä¸‰</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ—åˆ«åä¸­é—´æœ‰ç©ºæ ¼,éœ€è¦ä½¿ç”¨åŒå¼•å·æ¥åŒ…è£¹æ ¼å¼</span><br><span class="line">select first_name &quot;å å­—&quot;,salary &quot;è–ª æ°´&quot;,title as &quot;èŒ ç§°&quot; from s_emp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢æ‰€æœ‰åˆ—*</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">select * from s_emp;</span><br><span class="line"></span><br><span class="line">select * from s_emp \G;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="å»é‡å…³é”®å­—"><a href="#å»é‡å…³é”®å­—" class="headerlink" title="å»é‡å…³é”®å­—"></a>å»é‡å…³é”®å­—</h2><blockquote>
<p>distinct</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰çš„èŒç§°çš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct title from s_emp;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="åˆ—çš„è®¡ç®—"><a href="#åˆ—çš„è®¡ç®—" class="headerlink" title="åˆ—çš„è®¡ç®—"></a>åˆ—çš„è®¡ç®—</h2><blockquote>
<p>åˆ—æ˜¯å…è®¸è®¡ç®—çš„</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(ä¸å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—,å¹´è–ª(å¸¦ææˆcommission_pct)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+commission_pct/100)*12 å¹´è–ª from s_emp;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢å‡ºæ¥åªæœ‰5ä¸ªäººæœ‰å¹´è–ª,åŸå› æ˜¯å› ä¸ºåªæœ‰5ä¸ªäººæœ‰ææˆ.å…¶ä»–äººçš„ææˆéƒ½æ˜¯nullå€¼</span><br><span class="line">mysql - nullå€¼è®¡ç®—çš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªnullå€¼</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨åˆ°mysqlä¸­æä¾›çš„ç©ºå€¼ç½®æ¢å‡½æ•°</span><br><span class="line">coalesce(m,n) - å¦‚æœmä¸ºnull,è¿”å›n,å¦åˆ™è¿”å›m</span><br><span class="line"></span><br><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>æ‰¾å‡ºå‘˜å·¥çš„å§“å,å·¥èµ„ä»¥åŠå…¥èŒæ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select last_name,first_name,salary,start_date from s_emp;</span><br><span class="line"></span><br><span class="line">-- åˆ—çš„æ‹¼æ¥ concat(m,n,a,b,c,..)</span><br><span class="line">-- mysqlä¸­çš„å­—ç¬¦ä¸²ç»Ÿä¸€ä½¿ç”¨å•å¼•å·</span><br><span class="line">select concat(last_name,&#x27;  &#x27;,first_name) å§“å,salary,start_date from s_emp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºæ‰€æœ‰çš„å®¢æˆ·åä»¥åŠä»–çš„è”ç³»æ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select name,phone from s_customer;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åçš„æ—¶å€™</span><br><span class="line">-- è”¡æ ¹èŠ± - è”¡**</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºæ¯ä¸ªè®¢å•çš„è´¹ç”¨,æ”¯ä»˜æ–¹å¼ä»¥åŠå‡ºè´§æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select total,payment_type,date_ordered from s_ord;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼;</span><br></pre></td></tr></table></figure>

<h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p><code>æ¯”è¾ƒè¿ç®—ç¬¦</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; &lt; &gt;= &lt;= != &lt;&gt; =</span><br></pre></td></tr></table></figure>

<p><code>å…¶ä»–è¿ç®—ç¬¦</code></p>
<blockquote>
<ol>
<li>between â€¦  and ..  åœ¨â€¦åˆ°â€¦ä¹‹é—´</li>
<li>in(é›†åˆ) - åœ¨æŸä¸ªé›†åˆå†…</li>
<li>not in(é›†åˆ) - ä¸åœ¨æŸä¸ªé›†åˆå†…</li>
<li>is - åˆ¤æ–­æ˜¯å¦ä¸ºnull,åˆ¤æ–­nullå€¼ä¸èƒ½ç”¨&#x3D;</li>
<li>is not - åˆ¤æ–­æ˜¯å¦ä¸ä¸ºnull</li>
</ol>
</blockquote>
<p><code>é€»è¾‘è¿æ¥ç¬¦</code></p>
<blockquote>
<ol>
<li>and æ¡ä»¶åŒæ—¶æˆç«‹,è¿”å›true</li>
<li>or æœ‰ä¸€ä¸ªæ¡ä»¶æˆç«‹,å°±è¿”å›true</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢éƒ¨é—¨ç¼–å·(dept_id)ä¸º41,42,45çš„å‘˜å·¥æ‰¾å‡ºæ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp</span><br><span class="line">where dept_id=41 or dept_id=42 or dept_id=45;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id in(41,42,45);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,commission_pct from s_emp where commission_pct is null;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºå·¥èµ„åœ¨[1200,1500]ä¹‹é—´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary between 1200 and 1500;</span><br><span class="line"></span><br><span class="line">-- æ›´åŠ çµæ´»</span><br><span class="line">select first_name,salary from s_emp where salary&gt;=1200 and salary&lt;=1500;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥æ‰¾å·¥èµ„å¤§äº1500å¹¶ä¸”æ²¡æœ‰ææˆçš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary from s_emp where salary&gt;1500 and commission_pct is null;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥æ‰¾å¹´è–ª(åŒ…æ‹¬ææˆ)è¶…è¿‡15000çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp</span><br><span class="line">where salary*(1+coalesce(commission_pct,0)/100)*12&gt;15000;</span><br><span class="line"></span><br><span class="line">-- ç»™åˆ—å–åˆ«åçš„æ„ä¹‰</span><br><span class="line">-- å­æŸ¥è¯¢ - æŸ¥è¯¢çš„ç»“æœä½œä¸ºè™šæ‹Ÿè¡¨ - å­æŸ¥è¯¢ä¸€å®šè¦æ”¾åœ¨()ä¸­</span><br><span class="line">select * from X where _year&gt;15000;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢çš„ç»“æœæ¥æ›¿ä»£X,å­æŸ¥è¯¢çš„ç»“æœä½œä¸ºè¡¨çš„è¯ - éœ€è¦ç»™è¡¨å–åˆ«å</span><br><span class="line">select * from (select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 _year from s_emp) core_ where _year&gt;15000;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºé™¤äº†41éƒ¨é—¨çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select first_name,dept_id from s_emp where dept_id &lt;&gt; 41;</span><br><span class="line"></span><br><span class="line">select first_name,dept_id from s_emp where dept_id not in(41);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºäºšæ´²åŒºåŸŸçš„ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- mysqlä¸­é‡‡ç”¨å•å¼•å·</span><br><span class="line">select * from s_region where name=&#x27;Asia&#x27;;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><blockquote>
<p>å¤§å°å†™ä¸æ•æ„Ÿçš„</p>
</blockquote>
<blockquote>
<ol>
<li>å…³é”®å­—like</li>
<li>å ä½ç¬¦<ul>
<li>% ä»£è¡¨çš„ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦</li>
<li>_ ä»£è¡¨çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h3><blockquote>
<ul>
<li><p>first_nameåç§°æ­£å¥½åŒ…å«äº†%æˆ–è€…_</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update s_emp set first_name=&#x27;Mar%k&#x27; where id=4;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢first_nameåŒ…å«%çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- å®šä¹‰è½¬ä¹‰å­—ç¬¦,é»˜è®¤çš„æ˜¯\</span><br><span class="line">select first_name from s_emp where first_name like &#x27;%\%%&#x27;;</span><br><span class="line"></span><br><span class="line">-- è‡ªå®šä¹‰è½¬ä¹‰å­—ç¬¦,ç”¨escape æ–°çš„è½¬ä¹‰å­—ç¬¦</span><br><span class="line">select first_name from s_emp where first_name like &#x27;%?%%&#x27; escape &#x27;?&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æŸ¥è¯¢first_nameåŒ…å«mçš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like &#x27;%m%&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢ä»¥Cå¼€å¤´çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like &#x27;C%&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢ç¬¬ä¸‰ä¸ªå­—æ¯æ˜¯â€™eâ€™çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name from s_emp where first_name like &#x27;__e%&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢å…¥èŒæ—¶é—´æ˜¯6æœˆä»½çš„å‘˜å·¥ - æ¨¡ç³ŠæŸ¥è¯¢ - ä¸æ˜¯æ­£è§„çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,start_date from s_emp where start_date like &#x27;%-06-%&#x27;;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT åˆ—å1,åˆ—å2,..åˆ—n</span><br><span class="line">FROM è¡¨å</span><br><span class="line">WHERE æ¡ä»¶è¡¨è¾¾å¼</span><br><span class="line">ORDER Byè¯­å¥ [asc|desc]</span><br><span class="line"></span><br><span class="line">ascå¯ä»¥çœç•¥ä¸å†™ - å‡åº</span><br><span class="line">descå¿…é¡»è¦å†™ - é™åº</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’åˆ—</p>
<p><code>æ–¹å¼ä¸€: order by åˆ—å</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 from s_emp </span><br><span class="line">order by salary*(1+coalesce(commission_pct,0)/100)*12 desc;</span><br></pre></td></tr></table></figure>

<p><code>æ–¹å¼äºŒ:</code> order by åˆ—åˆ«å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by å¹´è–ª desc;</span><br></pre></td></tr></table></figure>

<p><code>æ–¹å¼ä¸‰: order by åˆ—çš„åºå·</code>  åˆ—çš„åºå·ä»1å¼€å§‹ &#x3D;&gt; æ¨èæ–¹å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ ¹æ®å¹´è–ªé™åºæ’.å¦‚æœå¹´è–ªä¸€æ ·,åˆ™ç»§ç»­æŒ‰ç…§first_nameå‡åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select first_name,salary*(1+coalesce(commission_pct,0)/100)*12 å¹´è–ª from s_emp </span><br><span class="line">order by 2 desc,1;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="è½¬æ¢å‡½æ•°"><a href="#è½¬æ¢å‡½æ•°" class="headerlink" title="è½¬æ¢å‡½æ•°"></a>è½¬æ¢å‡½æ•°</h2><h3 id="æ•°å­—å’Œå­—ç¬¦ä¸²"><a href="#æ•°å­—å’Œå­—ç¬¦ä¸²" class="headerlink" title="æ•°å­—å’Œå­—ç¬¦ä¸²"></a>æ•°å­—å’Œå­—ç¬¦ä¸²</h3><blockquote>
<ol>
<li><p>å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select &#x27;1&#x27;+0;</span><br><span class="line"></span><br><span class="line">mysqlä¸­å­—ç¬¦æ•°å­—é‡åˆ°æ•°å­—è¿›è¡Œ+,è‡ªåŠ¨å°†å­—ç¬¦è½¬æ¢æˆæ•°å­—æ¥è¿›è¡Œè®¡ç®—.</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸² - concatå‡½æ•° - æ‹¼æ¥åˆ é™¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select concat(1,2);  // 12</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h3 id="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"><a href="#å­—ç¬¦ä¸²å’Œæ—¥æœŸ" class="headerlink" title="å­—ç¬¦ä¸²å’Œæ—¥æœŸ"></a>å­—ç¬¦ä¸²å’Œæ—¥æœŸ</h3><blockquote>
<p>å…³äºæ—¥æœŸæ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(åœ¨formatå­—ç¬¦ä¸²ä¸­å¯ç”¨æ ‡å¿—ç¬¦:  </span><br><span class="line">ã€€%m æœˆåå­—(januaryâ€¦â€¦december)    </span><br><span class="line">ã€€%w æ˜ŸæœŸåå­—(sundayâ€¦â€¦saturday)    </span><br><span class="line">ã€€%d æœ‰è‹±è¯­å‰ç¼€çš„æœˆä»½çš„æ—¥æœŸ(1st, 2nd, 3rd, ç­‰ç­‰ã€‚ï¼‰    </span><br><span class="line">ã€€%Y å¹´, æ•°å­—, 4 ä½    </span><br><span class="line">ã€€%y å¹´, æ•°å­—, 2 ä½    </span><br><span class="line">ã€€%a ç¼©å†™çš„æ˜ŸæœŸåå­—(sunâ€¦â€¦sat)    </span><br><span class="line">ã€€%d æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(00â€¦â€¦31)    </span><br><span class="line">ã€€%e æœˆä»½ä¸­çš„å¤©æ•°, æ•°å­—(0â€¦â€¦31)    </span><br><span class="line">ã€€%m æœˆ, æ•°å­—(01â€¦â€¦12)    </span><br><span class="line">ã€€%c æœˆ, æ•°å­—(1â€¦â€¦12)    </span><br><span class="line">ã€€%b ç¼©å†™çš„æœˆä»½åå­—(janâ€¦â€¦dec)    </span><br><span class="line">ã€€%j ä¸€å¹´ä¸­çš„å¤©æ•°(001â€¦â€¦366)    </span><br><span class="line">ã€€%H 24æ—¶åˆ¶å°æ—¶(00â€¦â€¦23)    </span><br><span class="line">ã€€%k å°æ—¶(0â€¦â€¦23)    </span><br><span class="line">ã€€%h 12æ—¶å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%i å°æ—¶(01â€¦â€¦12)    </span><br><span class="line">ã€€%l å°æ—¶(1â€¦â€¦12)    </span><br><span class="line">ã€€%i åˆ†é’Ÿ, æ•°å­—(00â€¦â€¦59)    </span><br><span class="line">ã€€%r æ—¶é—´,12 å°æ—¶(hh:mm:ss [ap]m)    </span><br><span class="line">ã€€%t æ—¶é—´,24 å°æ—¶(hh:mm:ss)    </span><br><span class="line">ã€€%s ç§’(00â€¦â€¦59)       </span><br><span class="line">ã€€%p amæˆ–pm    </span><br><span class="line">ã€€%w ä¸€ä¸ªæ˜ŸæœŸä¸­çš„å¤©æ•°(0=sunday â€¦â€¦6=saturday ï¼‰  </span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<ol>
<li><p>è·å–å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select now();</span><br><span class="line"></span><br><span class="line">+---------------------+</span><br><span class="line">| now()               |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2022-08-05 11:09:49 |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸² - date_format(æ—¥æœŸ,æ¨¡æ¿)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ¿  %Y   %m    %d  %H  %i   %s</span><br><span class="line"></span><br><span class="line">select date_format(now(),&#x27;%Y/%m/%d %H:%i:%s&#x27;);</span><br><span class="line"></span><br><span class="line">select date_format(now(),&#x27;%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’&#x27;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å­—ç¬¦ä¸²è½¬æˆæ—¥æœŸ - str_to_date(å­—ç¬¦ä¸²,æ¨¡æ¿) - å­—ç¬¦ä¸²æ ¼å¼è¦å’Œæ¨¡æ¿çš„æ ¼å¼åŒ¹é…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ é™¤è¡¨</span><br><span class="line">drop table tt;</span><br><span class="line">-- åˆ›å»ºè¡¨</span><br><span class="line">create table tt(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  birthday date</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- date - å¹´æœˆæ—¥</span><br><span class="line">-- æ’å…¥æ•°æ®</span><br><span class="line">-- mysqlä¸­é»˜è®¤æ”¯æŒçš„æ ¼å¼ - ä¼šå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æˆdateç±»å‹</span><br><span class="line">insert into tt values(1,&#x27;admin&#x27;,&#x27;2022-09-01&#x27;);//ok</span><br><span class="line">insert into tt values(2,&#x27;tom&#x27;,&#x27;2022/09/01&#x27;);//ok</span><br><span class="line">insert into tt values(3,&#x27;jack&#x27;,&#x27;20221001&#x27;);//ok</span><br><span class="line"></span><br><span class="line">-- ä¸æ”¯æŒçš„æ—¶å€™</span><br><span class="line">insert into tt values(4,&#x27;jack&#x27;,&#x27;aa&#x27;);</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: &#x27;aa&#x27; for column &#x27;birthday&#x27; at row 1</span><br><span class="line"></span><br><span class="line">insert into tt values(4,&#x27;jack&#x27;,&#x27;01-05-2022&#x27;);</span><br><span class="line">ERROR 1292 (22007): Incorrect date value: &#x27;01-05-2022&#x27; for column &#x27;birthday&#x27; at row 1</span><br><span class="line"></span><br><span class="line">-- éè¦ä½¿ç”¨&#x27;01-05-2022&#x27;å­—ç¬¦ä¸²æ ¼å¼çš„,æ‰éœ€è¦ä½¿ç”¨str_to_dateå‡½æ•°è¿›è¡Œè½¬æ¢</span><br><span class="line">insert into tt values(4,&#x27;jack&#x27;,str_to_date(&#x27;01-05-2022&#x27;,&#x27;%d-%m-%Y&#x27;));</span><br></pre></td></tr></table></figure>

<p><code>å¯¼å…¥è„šæœ¬çš„æ—¶å€™ - å¤±è´¥åœºæ™¯ - å­—ç¬¦ä¸²æ—¥æœŸæ ¼å¼ä¸æ”¯æŒ</code></p>
</li>
</ol>
</blockquote>
<h1 id="å•è¡Œå‡½æ•°"><a href="#å•è¡Œå‡½æ•°" class="headerlink" title="å•è¡Œå‡½æ•°"></a>å•è¡Œå‡½æ•°</h1><blockquote>
<ul>
<li><p>select å‡½æ•°(å‚æ•°);</p>
</li>
<li><p>å‡½æ•°æ˜¯å¯ä»¥åº”ç”¨åœ¨æŸ¥è¯¢åˆ—ä¸Šçš„.</p>
</li>
<li><p>å‡½æ•°æ˜¯å…è®¸åµŒå¥—ä½¿ç”¨çš„.</p>
</li>
</ul>
</blockquote>
<h2 id="1-å­—ç¬¦ä¸²å‡½æ•°"><a href="#1-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="1. å­—ç¬¦ä¸²å‡½æ•°"></a>1. å­—ç¬¦ä¸²å‡½æ•°</h2><blockquote>
<ol>
<li><p>instr(str,substr) - è¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®(strä¸åŒ…å«substræ—¶è¿”å›0)</p>
</li>
<li><p>lpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå·¦ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å› </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select lpad(&#x27;ab&#x27;,5,&#x27;cd&#x27;);//cdcab</span><br></pre></td></tr></table></figure>
</li>
<li><p>rpad(str,len,padstr) - ç”¨å­—ç¬¦ä¸²padstrå¡«è¡¥strå³ç«¯ç›´åˆ°å­—ä¸²é•¿åº¦ä¸ºlenå¹¶è¿”å›</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select rpad(&#x27;ab&#x27;,5,&#x27;cd&#x27;);//abcdc   5ä»£è¡¨çš„æ˜¯æ€»çš„é•¿åº¦</span><br></pre></td></tr></table></figure>
</li>
<li><p>left(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å·¦ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>right(str,len) - è¿”å›å­—ç¬¦ä¸²strçš„å³ç«¯lenä¸ªå­—ç¬¦ </p>
</li>
<li><p>substring(str,pos,len) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·lenä¸ªå­—ç¬¦  </p>
</li>
<li><p>substring(str,pos) - è¿”å›å­—ç¬¦ä¸²strçš„ä½ç½®posèµ·åé¢çš„å­ä¸² </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åºå·ä»1å¼€å§‹</span><br><span class="line">select substring(&#x27;mysql&#x27;,2);  //ysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>ltrim(str) - è¿”å›åˆ é™¤äº†å·¦ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>rtrim(str)  - è¿”å›åˆ é™¤äº†å³ç©ºæ ¼çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>space(n) - è¿”å›ç”±nä¸ªç©ºæ ¼å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²  </p>
</li>
<li><p><em><strong>replace(str,from_str,to_str)  - ç”¨å­—ç¬¦ä¸²to_stræ›¿æ¢å­—ç¬¦ä¸²strä¸­çš„å­ä¸²from_strå¹¶è¿”å›</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select replace(&#x27;i love java&#x27;,&#x27;java&#x27;,&#x27;mysql&#x27;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>reverse(str) - é¢ å€’å­—ç¬¦ä¸²strçš„å­—ç¬¦é¡ºåºå¹¶è¿”å›</p>
</li>
<li><p>insert(str,pos,len,newstr) - æŠŠå­—ç¬¦ä¸²strç”±ä½ç½®posèµ·lenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select insert(&#x27;xxxxx&#x27;,1,2,&#x27;**&#x27;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>lower(str) - è¿”å›å°å†™çš„å­—ç¬¦ä¸²str  </p>
</li>
<li><p>upper(str) - è¿”å›å¤§å†™çš„å­—ç¬¦ä¸²str</p>
</li>
<li><p>char_length(str) -  ä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>length(str);&#x2F;&#x2F;æ±‰å­—å 3ä¸ª,å…¶ä»–å 1ä¸ª.</p>
</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>é…åˆè¡¨ - å°†first_nameå…¨éƒ¨è½¬æ¢æˆå¤§å†™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select first_name,upper(first_name) from s_emp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>first_name  - æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·æ˜¾ç¤º,åªæ˜¾ç¤ºé¦–å­—æ¯,å…¶ä½™æ¯ä¸ªå­—æ¯ç”¨*è¡¨ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- substringå’Œrpad</span><br><span class="line">select first_name,rpad(substring(first_name,1,1),char_length(first_name),&#x27;*&#x27;) from s_emp;</span><br><span class="line"></span><br><span class="line">-- concat + substring + rpad</span><br><span class="line">select first_name,concat(substring(first_name,1,1),rpad(&#x27;*&#x27;,char_length(first_name)-1,&#x27;*&#x27;)) from s_emp;</span><br><span class="line"></span><br><span class="line">-- replace + substring + rpad</span><br><span class="line">select first_name,replace(first_name,substring(first_name,2),rpad(&#x27;*&#x27;,char_length(first_name)-1,&#x27;*&#x27;))</span><br><span class="line">from s_emp;</span><br><span class="line"></span><br><span class="line">-- insert + rpad</span><br><span class="line">select first_name,insert(first_name,2,char_length(first_name)-1,rpad(&#x27;*&#x27;,char_length(first_name)-1,&#x27;*&#x27;))</span><br><span class="line">from s_emp;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="2-æ•°å­—å‡½æ•°"><a href="#2-æ•°å­—å‡½æ•°" class="headerlink" title="2. æ•°å­—å‡½æ•°"></a>2. æ•°å­—å‡½æ•°</h2><blockquote>
<ol>
<li>abs(n) - æ±‚ç»å¯¹å€¼</li>
<li>mod(n,m) - å–æ¨¡è¿ç®—,è¿”å›nè¢«mé™¤çš„ä½™æ•°(åŒ%æ“ä½œç¬¦)</li>
<li><strong>floor(n) - è¿”å›ä¸å¤§äºnçš„æœ€å¤§æ•´æ•°å€¼</strong> - å‘ä¸‹å–æ•´  </li>
<li><strong>ceiling(n) - è¿”å›ä¸å°äºnçš„æœ€å°æ•´æ•°å€¼</strong>  - å‘ä¸Šå–æ•´ </li>
<li>round(n[,d]) - è¿”å›nçš„å››èˆäº”å…¥å€¼,ä¿ç•™dä½å°æ•°(dçš„é»˜è®¤å€¼ä¸º0)</li>
<li>pow(x,y) - è¿”å›å€¼xçš„yæ¬¡å¹‚  </li>
<li>sqrt(n) - è¿”å›éè´Ÿæ•°nçš„å¹³æ–¹æ ¹</li>
<li>pi() - è¿”å›åœ†å‘¨ç‡  </li>
<li>rand() - è¿”å›åœ¨èŒƒå›´[0åˆ°1.0)å†…çš„éšæœºæµ®ç‚¹å€¼</li>
<li>truncate(n,d) - ä¿ç•™æ•°å­—nçš„dä½å°æ•°å¹¶è¿”å›  - ç›´æ¥æˆªå–</li>
</ol>
</blockquote>
<h2 id="3-æ—¥æœŸå‡½æ•°"><a href="#3-æ—¥æœŸå‡½æ•°" class="headerlink" title="3. æ—¥æœŸå‡½æ•°"></a>3. æ—¥æœŸå‡½æ•°</h2><blockquote>
<p>æŸ¥è¯¢å½“å‰ç³»ç»Ÿçš„æ—¥æœŸ - select now();</p>
<ol>
<li><p>dayofweek(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (1&#x3D;æ˜ŸæœŸå¤©,2&#x3D;æ˜ŸæœŸä¸€,â€¦â€¦7&#x3D;æ˜ŸæœŸå…­,odbcæ ‡å‡†)  </p>
</li>
<li><p>weekday(date) - è¿”å›æ—¥æœŸdateæ˜¯æ˜ŸæœŸå‡ (0&#x3D;æ˜ŸæœŸä¸€,1&#x3D;æ˜ŸæœŸäºŒ,â€¦â€¦6&#x3D; æ˜ŸæœŸå¤©)</p>
</li>
<li><p>year(date) - è¿”å›dateçš„å¹´ä»½(èŒƒå›´åœ¨1000åˆ°9999)    </p>
</li>
<li><p>month(date)  - è¿”å›dateä¸­çš„æœˆä»½æ•°å€¼   </p>
</li>
<li><p>dayofmonth(date) - è¿”å›dateæ˜¯ä¸€æœˆä¸­çš„ç¬¬å‡ æ—¥(åœ¨1åˆ°31èŒƒå›´å†…)   </p>
</li>
<li><p>hour(time) - è¿”å›timeçš„å°æ—¶æ•°(èŒƒå›´æ˜¯0åˆ°23)  </p>
</li>
<li><p>minute(time) - è¿”å›timeçš„åˆ†é’Ÿæ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>second(time) - è¿”å›timeçš„ç§’æ•°(èŒƒå›´æ˜¯0åˆ°59) </p>
</li>
<li><p>period_add(p,n) - å¢åŠ nä¸ªæœˆåˆ°æ—¶æœŸpå¹¶è¿”å›(pçš„æ ¼å¼yymmæˆ–yyyymm) </p>
<p>mysql&gt;select period_add(â€˜202008â€™,3) ;</p>
<p>æ³¨æ„:på¯ä»¥æ˜¯å­—ç¬¦ä¸²,ä¸€å®šè¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼,æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨dateç±»å‹.</p>
</li>
<li><p>period_diff(p1,p2) - è¿”å›åœ¨æ—¶æœŸp1å’Œp2ä¹‹é—´æœˆæ•°(p1å’Œp2çš„æ ¼å¼yymmæˆ–yyyymm)  p1-p2</p>
</li>
<li><p>curdate() - ä»¥â€™yyyy-mm-ddâ€™æˆ–yyyymmddæ ¼å¼è¿”å›å½“å‰æ—¥æœŸå€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—) </p>
</li>
<li><p>curtime() - ä»¥â€™hh:mm:ssâ€™æˆ–hhmmssæ ¼å¼è¿”å›å½“å‰æ—¶é—´å€¼(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)</p>
</li>
<li><p>now() - ä»¥â€™yyyy-mm-dd hh:mm:ssâ€™æˆ–yyyymmddhhmmssæ ¼å¼è¿”å›å½“å‰æ—¥æœŸæ—¶é—´(æ ¹æ®è¿”å›å€¼æ‰€å¤„ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—)     </p>
</li>
<li><p>last_day(date) - dateæ—¥æœŸæ‰€åœ¨æœˆçš„æœ€åä¸€å¤©æ˜¯ä»€ä¹ˆæ—¶å€™</p>
</li>
<li><p>datediff(d1,d2) - ä¸¤ä¸ªæ—¥æœŸd1,d2ä¹‹é—´ç›¸å·®çš„å¤©æ•°</p>
</li>
<li><p>timestampdiff(type,d1,d2) - typeæ˜¯YEAR,d1å’Œd2ç›¸å·®çš„å¹´ä»½,MONTH,æœˆä»½</p>
<p>d1,d2 - yyyymmdd</p>
</li>
</ol>
</blockquote>
<h3 id="3-1-è¡¥å……"><a href="#3-1-è¡¥å……" class="headerlink" title="3-1. è¡¥å……"></a>3-1. è¡¥å……</h3><blockquote>
<ul>
<li><p>date_add(date,interval expr type)</p>
</li>
<li><p>date_sub(date,interval expr type)</p>
</li>
<li><p>å…³äºtype</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ype:</span><br><span class="line">year</span><br><span class="line">month</span><br><span class="line">day</span><br><span class="line">hour</span><br><span class="line">minute</span><br><span class="line">second</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p>#å…³è”æŸ¥è¯¢ </p>
<blockquote>
<p>å…³è”æŸ¥è¯¢å°±æ˜¯å¤šè¡¨æŸ¥è¯¢</p>
</blockquote>
<h2 id="é”™è¯¯çš„å†™æ³•"><a href="#é”™è¯¯çš„å†™æ³•" class="headerlink" title="é”™è¯¯çš„å†™æ³•"></a>é”™è¯¯çš„å†™æ³•</h2><blockquote>
<p>s_empè¡¨ä¸­25rows,s_deptè¡¨ä¸­12rows</p>
<ol>
<li><p>æŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept;</span><br><span class="line"></span><br><span class="line">300 rows </span><br><span class="line"></span><br><span class="line">å‘ç”Ÿäº†ç¬›å¡å°”ç§¯ - é”™è¯¯çš„ç»“æœ</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h3 id="çº æ­£-ä¼ ç»Ÿçš„å†™æ³•"><a href="#çº æ­£-ä¼ ç»Ÿçš„å†™æ³•" class="headerlink" title="çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•"></a>çº æ­£ - ä¼ ç»Ÿçš„å†™æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">select first_name,name from s_emp,s_dept where dept_id=id;</span><br><span class="line"></span><br><span class="line">ERROR 1052 (23000): Column &#x27;id&#x27; in where clause is ambiguous</span><br><span class="line"></span><br><span class="line">å¤šå¼ è¡¨ä¸­å‡ºç°åŒåçš„åˆ—,éœ€è¦å¯¹è¡¨å–åˆ«å</span><br><span class="line"></span><br><span class="line">æ­£ç¡®çš„å†™æ³•:</span><br><span class="line">select e.first_name,d.name from s_emp e,s_dept d where e.dept_id=d.id;</span><br><span class="line"></span><br><span class="line">-- ç”¨æ¥è¡¨ç¤ºè¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»foreign key - å¤–é”®</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢è¿™ä¸ªå‘˜å·¥çš„first_nameä»¥åŠè¿™ä¸ªå‘˜å·¥æ‰€åœ¨çš„åŒºåŸŸå.</span><br><span class="line">-- ä¸€ä¸ªåŒºåŸŸå¯¹åº”å¤šä¸ªéƒ¨é—¨,ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥.</span><br><span class="line">select e.first_name,r.name from s_emp e,s_dept d,s_region r</span><br><span class="line">where d.region_id = r.id and e.dept_id = d.id;</span><br><span class="line"></span><br><span class="line">for( ...  s_emp e)&#123;</span><br><span class="line">	for(... s_dept d)&#123;</span><br><span class="line">	    if(e.dept_id==d.id)&#123;</span><br><span class="line">	      e+&quot;:&quot;+d</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="joinå’Œonå†™æ³•"><a href="#joinå’Œonå†™æ³•" class="headerlink" title="joinå’Œonå†™æ³•"></a>joinå’Œonå†™æ³•</h2><blockquote>
<p>å¦‚æœä¸€æ¡sqlè¯­å¥æ¶‰åŠåˆ°çš„è¡¨æ¯”è¾ƒå¤šçš„è¯,ä¼ ç»Ÿçš„å†™æ³•,å°±ä¸èƒ½å¾ˆç›´è§‚çš„çœ‹å‡ºæ¥å“ªä¸ªè¡¨å’Œå“ªä¸ªè¡¨ä¹‹é—´æœ‰ç›´æ¥çš„å…³ç³».</p>
<p>è¡¨ join è¡¨ on å»é™¤ç¬›å¡å°”ç§¯</p>
<p>å¤–é”®ä¸€å®šæ˜¯å‡ºç°åœ¨å¤šçš„ä¸€æ–¹</p>
<p><em><strong>on å¤šçš„ä¸€æ–¹çš„å¤–é”® &#x3D; ä¸€çš„ä¸€æ–¹ä¸»é”®</strong></em></p>
<p><code>ä½†æ˜¯ä¹Ÿä¸ä¸€å®šéè¦ä½¿ç”¨å¤–é”®æ¥å»é™¤ç¬›å¡å°”ç§¯</code></p>
</blockquote>
<blockquote>
<p>è§„åˆ™: èƒ½å¤Ÿç”¨joinè¿æ¥çš„è¡¨ä¹‹é—´å¿…é¡»è¦æœ‰ç›´æ¥çš„å…³ç³».</p>
</blockquote>
<h3 id="ç»ƒä¹ -4"><a href="#ç»ƒä¹ -4" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<ol>
<li><p>æ‰¾å‡ºæŸ¥è¯¢å‘˜å·¥çš„åå­—ä»¥åŠè¿™ä¸ªå‘˜å·¥çš„éƒ¨é—¨åç§°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,d.name from s_emp e join s_dept d on e.dept_id = d.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºâ€™Asiaâ€™åŒºåŸŸä¸Šçš„æ‰€æœ‰çš„å‘˜å·¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,r.name from </span><br><span class="line">s_emp e join s_dept d</span><br><span class="line">on e.dept_id = d.id</span><br><span class="line">join s_region r</span><br><span class="line">on d.region_id = r.id</span><br><span class="line">where r.name=&#x27;Asia&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾å‡ºå®¢æˆ·çš„id,åç§°,è”ç³»æ–¹å¼ä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•ä¿¡æ¯</p>
<p>â€˜é—®é¢˜ - 15rows - [201,215]â€™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.* from s_customer c</span><br><span class="line">join s_ord o on c.id = o.customer_id;</span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢å‡ºæ¥çš„ç»“æœç¼ºäº†id=207å’Œ215ä¿©ä¸ªå®¢æˆ·,å› ä¸ºè¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,æ‰€ä»¥è¿™ä¿©ä¸ªå®¢æˆ·æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥.</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="è¿æ¥çš„æ–¹å¼"><a href="#è¿æ¥çš„æ–¹å¼" class="headerlink" title="è¿æ¥çš„æ–¹å¼"></a>è¿æ¥çš„æ–¹å¼</h2><blockquote>
<ol>
<li><p>å†…è¿æ¥ - [inner] join</p>
<p><code>å¦‚æœjoinå·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­å¦‚æœä¸å­˜è®°å½•,åˆ™ä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥.</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">inner join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å·¦è¿æ¥ - left join</p>
<p><code>ä»¥å·¦è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å·¦è¾¹çš„è¡¨åœ¨å³è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå·¦è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å³è¿æ¥ - right join</p>
<p><code>ä»¥å³è¾¹çš„è¡¨ä¸ºåŸºå‡†è¡¨.å³ä½¿å³è¾¹çš„è¡¨åœ¨å·¦è¾¹çš„è¡¨ä¸­æ²¡æœ‰è®°å½•,é‚£ä¹ˆå³è¾¹è¡¨ä¸­çš„è¿™æ¡è®°å½•ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<p><code>æŸ¥è¯¢å®¢æˆ·å’Œè®¢å•ä¿¡æ¯,å³ä½¿è¿™ä¸ªå®¢æˆ·æ²¡æœ‰è®¢å•,é‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ä¹Ÿè¦èƒ½å¤Ÿè¢«æŸ¥è¯¢å‡ºæ¥</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_ord o</span><br><span class="line">right join s_customer c on c.id = o.customer_id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>äº¤å‰è¿æ¥ - cross join - ä¸ä¼šä½¿ç”¨çš„,äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç»“æœé›† - ç¬›å¡å°”ç§¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,c.phone,o.id from s_customer c</span><br><span class="line">cross join s_ord o;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¨è¿æ¥ full outer join - mysqlä¸æ”¯æŒ</p>
<p>å…¨è¿æ¥ &#x3D; å·¦è¿æ¥ + å³è¿æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">drop table t_user;</span><br><span class="line">drop table t_info;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int primary key,</span><br><span class="line">  name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,&#x27;admin&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;python&#x27;);</span><br><span class="line"></span><br><span class="line">create table t_info(</span><br><span class="line">	id int primary key,</span><br><span class="line">	remark varchar(20),</span><br><span class="line">	user_id int</span><br><span class="line">);</span><br><span class="line">insert into t_info values(1,&#x27;aaa&#x27;,1);</span><br><span class="line">insert into t_info values(2,&#x27;bbb&#x27;,3);</span><br><span class="line"></span><br><span class="line">-- åˆ†æ - å·¦è¿æ¥</span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">| id | name   | id   | remark | user_id |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line">|  1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|  2 | python | NULL | NULL   |    NULL |</span><br><span class="line">+----+--------+------+--------+---------+</span><br><span class="line"></span><br><span class="line">-- å³è¿æ¥</span><br><span class="line">select info.*,u.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">| id | remark | user_id | id   | name  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line">|  1 | aaa    |       1 |    1 | admin |</span><br><span class="line">|  2 | bbb    |       3 | NULL | NULL  |</span><br><span class="line">+----+--------+---------+------+-------+</span><br><span class="line"></span><br><span class="line">-- å…¨è¿æ¥</span><br><span class="line">union - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœä¿ç•™äº†ä¸€æ¡ </span><br><span class="line"></span><br><span class="line">union all - ä¸¤å¼ è¡¨ä¸­çš„é‡å¤çš„ç»“æœéƒ½ä¼šå±•ç¤ºå‡ºæ¥ , å¹¶é›†</span><br><span class="line"></span><br><span class="line">select u.*,info.* from t_user u left join t_info info on u.id = info.user_id</span><br><span class="line">union all</span><br><span class="line">select u.*,info.* from t_user u right join t_info info on u.id = info.user_id;</span><br><span class="line"></span><br><span class="line"> id   | name   | id   | remark | user_id |</span><br><span class="line">+------+--------+------+--------+---------+</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">|    2 | python | NULL | NULL   |    NULL |</span><br><span class="line">|    1 | admin  |    1 | aaa    |       1 |</span><br><span class="line">| NULL | NULL   |    2 | bbb    |       3 |</span><br><span class="line">+------+--------+------+--------+---------+</span><br></pre></td></tr></table></figure>


<p>select u.<em>,info.</em> from t_user u left join t_info info on u.id &#x3D; info.user_id<br>union<br>select u.<em>,info.</em> from t_user u right join t_info info on u.id &#x3D; info.user_id;</p>
<p>+â€”â€”+â€”â€”â€“+â€”â€”+â€”â€”â€“+â€”â€”â€”+<br>| id   | name   | id   | remark | user_id |<br>+â€”â€”+â€”â€”â€“+â€”â€”+â€”â€”â€“+â€”â€”â€”+<br>|    1 | admin  |    1 | aaa    |       1 |<br>|    2 | python | NULL | NULL   |    NULL |<br>| NULL | NULL   |    2 | bbb    |       3 |<br>+â€”â€”+â€”â€”â€“+â€”â€”+â€”â€”â€“+â€”â€”â€”+</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -5"><a href="#ç»ƒä¹ -5" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><blockquote>
<p>æŸ¥è¯¢å‘˜å·¥çš„åç§°ä»¥åŠä»–å¯¹åº”çš„ä¸Šå¸çš„åç§°,å³ä½¿è¿™ä¸ªå‘˜å·¥æ²¡æœ‰ä¸Šå¸,é‚£ä¹ˆä¹Ÿè¦æŸ¥è¯¢å‡ºæ¥ - è‡ªå…³è”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select e1.first_name å‘˜å·¥,e2.first_name ä¸Šå¸</span><br><span class="line">from s_emp e1 left join s_emp e2 on e2.id = e1.manager_id;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="å¤šè¡Œå‡½æ•°"><a href="#å¤šè¡Œå‡½æ•°" class="headerlink" title="å¤šè¡Œå‡½æ•°"></a>å¤šè¡Œå‡½æ•°</h1><blockquote>
<ol>
<li><p>count - ç»Ÿè®¡ä¸ªæ•°,nullå€¼ä¸ä¼šç»Ÿè®¡,é‡å¤çš„æ•°æ®,æœ‰ä¸€ä¸ªç®—ä¸€ä¸ª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from s_emp;</span><br><span class="line"></span><br><span class="line">select count(e.id) from s_emp e;</span><br><span class="line"></span><br><span class="line">select count(e.commission_pct) from s_emp;//5ä¸ª</span><br><span class="line"></span><br><span class="line">-- ç»Ÿè®¡èŒç§°çš„ä¸ªæ•°,ä½†æ˜¯é‡å¤çš„èŒç§°åªèƒ½ç®—1ä¸ª</span><br><span class="line">select count(distinct title) from s_emp;</span><br></pre></td></tr></table></figure>
</li>
<li><p>sum - æ€»å’Œ,å¿½ç•¥nullå€¼</p>
</li>
<li><p>avg,max,min</p>
</li>
</ol>
</blockquote>
<h1 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h1><blockquote>
<p><code>åˆ†ç»„ç»Ÿè®¡</code></p>
</blockquote>
<blockquote>
<p><code>è¯­æ³•</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE è¯­å¥</span><br><span class="line">GROUP BY è¯­å¥</span><br><span class="line">HAVING è¯­å¥</span><br><span class="line">ORDER BY è¯­å¥</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ç»ƒä¹ -6"><a href="#ç»ƒä¹ -6" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<ol>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•° - å•è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select e.dept_id,count(e.id) from s_emp e group by e.dept_id;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>ç»Ÿè®¡éƒ¨é—¨çš„id,nameä»¥åŠè¿™ä¸ªéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- group by + d.id  --- ok   idæ˜¯ä¸»é”®åˆ— - å”¯ä¸€æ€§</span><br><span class="line">select d.id,d.name,count(e.id) from s_emp e</span><br><span class="line">join s_dept d on e.dept_id = d.id group by d.id;</span><br></pre></td></tr></table></figure>


<p>select d.id,d.name,count(e.id) from s_emp e<br>join s_dept d on e.dept_id &#x3D; d.id group by d.name;<br>ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column â€˜dy.d.idâ€™ which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode&#x3D;only_full_group_by</p>
<p>â€“ æ¨èselectåé¢è·Ÿçš„åˆ—(é™¤äº†ç»„å‡½æ•°&#x2F;å¤šè¡Œå‡½æ•°)åº”è¯¥å’Œgroup by è·Ÿçš„åˆ—ä¿æŒä¸€è‡´<br>select d.id,d.name,count(e.id) from s_emp e<br>join s_dept d on e.dept_id &#x3D; d.id group by d.id,d.name;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3. ç»Ÿè®¡æ¯ä¸ªèŒç§°çš„äººæ•°</span><br><span class="line"></span><br><span class="line">   ~~~mysql</span><br><span class="line">   select title,count(*) from s_emp group by title;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»Ÿè®¡åŒºåŸŸid,åŒºåŸŸå,ä»¥åŠè¿™ä¸ªåŒºåŸŸä¸Šçš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r join s_dept d</span><br><span class="line">on d.region_id = r.id join s_emp e on e.dept_id = d.id group by r.id,r.name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠè¿™ä¸ªå®¢æˆ·çš„è®¢å•çš„æ•°é‡,æ²¡æœ‰è®¢å•,åˆ™æ˜¾ç¤º0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c left join s_ord o</span><br><span class="line">on o.customer_id = c.id group by c.id,c.name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»Ÿè®¡å„å¹´ä»½å…¥èŒçš„å‘˜å·¥(å¹´ä»½,å‘˜å·¥æ•°é‡)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select year(start_date),count(e.id) from s_emp e</span><br><span class="line">group by year(start_date);</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h3 id="havingä½¿ç”¨æ–¹å¼"><a href="#havingä½¿ç”¨æ–¹å¼" class="headerlink" title="havingä½¿ç”¨æ–¹å¼"></a>havingä½¿ç”¨æ–¹å¼</h3><blockquote>
<p>havingå’ŒwhereåŒºåˆ«</p>
<ol>
<li>whereæ¡ä»¶ç­›é€‰,ä½†æ˜¯åˆ†ç»„ä¹‹å‰,å¹¶ä¸”whereä¸ä¼šè·Ÿç»„å‡½æ•°</li>
<li>havingåˆ†ç»„ä¹‹åçš„è¿›ä¸€æ­¥è¿‡æ»¤,ä½¿ç”¨ç»„å‡½æ•°è¿›è¡Œè¿‡æ»¤çš„</li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥è¯¢å‡ºå¹³å‡å·¥èµ„è¶…è¿‡1300çš„éƒ¨é—¨ - éƒ¨é—¨id,name,å¹³å‡å·¥èµ„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,avg(e.salary) from s_dept d join s_emp e</span><br><span class="line">on d.id = e.dept_id group by d.id,d.name having avg(e.salary)&gt;1300;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»Ÿè®¡é™¤äº†â€™Asiaâ€™åŒºåŸŸä¹‹å¤–çš„å„ä¸ªåŒºåŸŸçš„id,nameå’ŒåŒºåŸŸä¸Šçš„äººæ•°[å¤§äº3ä¸ª],æœ€åå†æ ¹æ®åŒºåŸŸçš„idè¿›è¡Œé™åºæ’åˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select r.id,r.name,count(e.id) from s_region r </span><br><span class="line">join s_dept d on r.id = d.region_id</span><br><span class="line">join s_emp e on e.dept_id = d.id</span><br><span class="line">where r.name&lt;&gt;&#x27;Asia&#x27;</span><br><span class="line">group by r.id,r.name</span><br><span class="line">having count(e.id)&gt;3</span><br><span class="line">order by 1 desc;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢æ²¡æœ‰è®¢å•çš„å®¢æˆ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select c.id,c.name,count(o.id) from s_customer c</span><br><span class="line">left join s_ord o on c.id = o.customer_id group by c.id,c.name having count(o.id)=0;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h1 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h1><blockquote>
<p>å­æŸ¥è¯¢å¿…é¡»ä½¿ç”¨()æ‹¬èµ·æ¥</p>
<ul>
<li>æ¡ä»¶åˆ—</li>
<li>æŸ¥è¯¢åˆ—</li>
<li>å­æŸ¥è¯¢çš„ç»“æœçœ‹åšæ˜¯â€ä¸€å¼ è¡¨â€</li>
</ul>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<ol>
<li><p>æŸ¥æ‰¾å’ŒMarkå·¥èµ„ä¸€æ ·çš„å‘˜å·¥.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ†è§£ - markå·¥èµ„ - 1450</span><br><span class="line">select salary from s_emp where first_name=&#x27;Mark&#x27;;</span><br><span class="line"></span><br><span class="line">-- æ‰¾å‡º1450è–ªèµ„çš„å‘˜å·¥</span><br><span class="line">select first_name,salary from s_emp where salary = 1450 and first_name&lt;&gt;&#x27;Mark&#x27;;</span><br><span class="line"></span><br><span class="line">-- æ•´åˆ</span><br><span class="line">-- å­æŸ¥è¯¢å‡ºç°åœ¨æ¡ä»¶éƒ¨åˆ†</span><br><span class="line">select first_name,salary from s_emp where salary = (select salary from s_emp where first_name=&#x27;Mark&#x27;)  and first_name&lt;&gt;&#x27;Mark&#x27;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„id,nameä»¥åŠéƒ¨é—¨çš„å‘˜å·¥çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select d.id,d.name,(</span><br><span class="line">	select count(e.id) from s_emp e where e.dept_id = d.id</span><br><span class="line">) from s_dept d;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<p><code>ç»ƒä¹ 2</code></p>
<blockquote>
<ol>
<li>ç»Ÿè®¡å®¢æˆ·çš„id,nameä»¥åŠå®¢æˆ·çš„è®¢å•æ•°é‡</li>
</ol>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;select c.id,c.name,(select count(o.id) from s_ord o where o.customer_id = c.id) from s_customer c;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ‰¾å‡ºéƒ¨é—¨å¹³å‡å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„éƒ¨é—¨ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;select dept_id,avg(salary) from s_emp group by dept_id having avg(salary)&gt;(select avg(salary) from s_emp);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ‰¾å‡ºä¸â€™Benâ€™åŒéƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯</li>
</ol>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ–¹å¼ä¸€</span><br><span class="line">select first_name,dept_id from s_emp where dept_id=(select dept_id from s_emp where first_name=&#x27;Ben&#x27;)</span><br><span class="line">and first_name&lt;&gt;&#x27;Ben&#x27;;</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒ</span><br><span class="line">select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name=&#x27;Ben&#x27; and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;&#x27;Ben&#x27;;</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒæ•´åˆ - æŠŠå­æŸ¥è¯¢çš„ç»“æœä½œä¸ºä¸€å¼ è¡¨,å¿…é¡»è¦åˆ«å</span><br><span class="line">select * from (select e.first_name,(select e.dept_id from s_emp e1 where e1.first_name=&#x27;Ben&#x27; and e1.dept_id=e.dept_id) did from s_emp e where e.first_name&lt;&gt;&#x27;Ben&#x27;) core_</span><br><span class="line">where core_.did is not null;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<ol>
<li><p>èƒ½ç”¨åˆ†ç»„æŸ¥è¯¢æŸ¥è¯¢å°±ä¸è¦ä½¿ç”¨å­æŸ¥è¯¢(åµŒå¥—è¶Šå¤š,æŸ¥è¯¢æ•ˆç‡è¶Šä½)</p>
</li>
<li><p>æ— å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œ)å’Œç›¸å…³å­æŸ¥è¯¢(å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†å¤–éƒ¨æŸ¥è¯¢çš„ä¸œè¥¿)</p>
<p>æ— å…³å­æŸ¥è¯¢&gt;ç›¸å…³å­æŸ¥è¯¢</p>
</li>
<li><p>å­æŸ¥è¯¢ä¼šæ¯”åˆ†ç»„æŸ¥è¯¢æ›´åŠ çµæ´».</p>
</li>
</ol>
</blockquote>
<h1 id="existså’Œnot-exists"><a href="#existså’Œnot-exists" class="headerlink" title="existså’Œnot exists"></a>existså’Œnot exists</h1><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT è¯­å¥</span><br><span class="line">WHERE exists (å­æŸ¥è¯¢)</span><br><span class="line"></span><br><span class="line">è§„åˆ™: ä¸å…³å¿ƒå­æŸ¥è¯¢æŸ¥åˆ°çš„å†…å®¹æ˜¯ä»€ä¹ˆ,å­æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæŸ¥è¯¢å‡ºç»“æœ.</span><br><span class="line">å¦‚æœæŸ¥è¯¢å‡ºç»“æœ,ç­‰åŒäºwhere true</span><br><span class="line"></span><br><span class="line">select id,first_name from s_emp where exists(select 1 from s_emp where 1=1);</span><br></pre></td></tr></table></figure>

<p><code>æ‰¾å‡ºå’Œ&#39;Ben&#39;åŒä¸€ä¸ªéƒ¨é—¨çš„å‘˜å·¥</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select e.first_name,e.dept_id from s_emp e </span><br><span class="line">where exists(</span><br><span class="line">select 1 from s_emp e1 where e1.first_name=&#x27;Ben&#x27; and e1.dept_id = e.dept_id</span><br><span class="line">) and e.first_name&lt;&gt;&#x27;Ben&#x27;;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºå„ä¸ªéƒ¨é—¨å·¥èµ„æ’åå‰äºŒçš„å‘˜å·¥</p>
<p>æ€è·¯: åœ¨â€™æˆ‘â€™è¿™ä¸ªéƒ¨é—¨ä¸­,æœ‰äººçš„å·¥èµ„æ¯”æˆ‘é«˜,ä½†æ˜¯æ•°é‡ä¸èƒ½è¶…è¿‡1ä¸ª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select e.id,e.salary,e.dept_id from s_emp e</span><br><span class="line">where exists(</span><br><span class="line">	select 1 from s_emp e1 where e1.dept_id = e.dept_id and</span><br><span class="line">e1.salary&gt;e.salary having count(*)&lt;=1</span><br><span class="line">) order by 3;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>ç»ƒä¹ </code></p>
<blockquote>
<p>æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„æœ€é«˜çš„é‚£ä¸ªäºº</p>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">ç¬”è®°</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">MySQL</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/06/mysql%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-JVM" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/04/JVM/" target="_blank">JVM</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/04/JVM/" class="archive-article-date">
        <time datetime="2022-08-04T11:17:16.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-04</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <blockquote>
<p><code>è¦ç‚¹</code>:</p>
<ol>
<li><p>å†…å­˜ - è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ(runtime data area)</p>
</li>
<li><p>jvm8 - å‰”é™¤æ°¸ä¹…ä»£,ä½¿ç”¨metaspace[ç±»&#x2F;æ–¹æ³•çš„å…ƒä¿¡æ¯,å¸¸é‡æ± ,é™æ€]æ›¿ä»£ - <strong>å®ƒç›´æ¥ä»æ“ä½œç³»ç»Ÿä¸­åˆ†é…</strong>ï¼Œ<strong>å› æ­¤ä¸å—Javaå †å¤§å°çš„é™åˆ¶</strong></p>
<p>å…ƒç©ºé—´åœ¨æœ¬åœ°å†…å­˜ä¸­åˆ†é…ï¼Œå®ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†</p>
</li>
<li><p>å­—ç¬¦ä¸²å¸¸é‡æ± ä»ç„¶æ˜¯å †</p>
</li>
<li><p>æ ˆå’Œå †åŒºåˆ«!</p>
</li>
<li><p>å¦‚ä½•ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯åƒåœ¾å¯¹è±¡</p>
</li>
<li><p>åƒåœ¾å›æ”¶ç®—æ³•</p>
</li>
</ol>
</blockquote>
<h1 id="7-JVMéƒ¨åˆ†"><a href="#7-JVMéƒ¨åˆ†" class="headerlink" title="7. JVMéƒ¨åˆ†"></a>7. JVMéƒ¨åˆ†</h1><p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/JVM.png"> </p>
<h2 id="1-JVMå†…å­˜æ¨¡å‹"><a href="#1-JVMå†…å­˜æ¨¡å‹" class="headerlink" title="1. JVMå†…å­˜æ¨¡å‹"></a>1. JVMå†…å­˜æ¨¡å‹</h2><blockquote>
<p>.classå­—èŠ‚ç æ–‡ä»¶ - ç±»åŠ è½½å™¨ - è§£æå¼•æ“(jvmè§£é‡Šå™¨) - è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ(Runtime Area - å†…å­˜åŒºåŸŸ)</p>
</blockquote>
<blockquote>
<ol>
<li><p>JVMå†…å­˜æ¨¡å‹åˆ†ä¸ºå †ï¼ˆheapï¼‰ã€å…ƒç©ºé—´ã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€‚<br><code>**JDK8çš„å†…å­˜æ¨¡å‹å¦‚ä¸‹å›¾â­ï¸â­ï¸â­ï¸**</code></p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/jvm8.png"> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å †å’Œå…ƒç©ºé—´æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œåœ¨Javaè™šæ‹Ÿæœºä¸­åªæœ‰ä¸€ä¸ªå †ã€ä¸€ä¸ªå…ƒç©ºé—´ï¼Œå¹¶åœ¨JVMå¯åŠ¨çš„æ—¶å€™å°±åˆ›å»ºï¼ŒJVMåœæ­¢æ‰é”€æ¯ã€‚</span><br><span class="line">æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨æ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„ï¼Œéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œéšç€çº¿ç¨‹çš„ç»“æŸè€Œæ­»äº¡ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li><p>JDK7çš„å†…å­˜æ¨¡å‹</p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/jvm7.png"></p>
</li>
</ol>
</blockquote>
<h2 id="2-JVM8æ¨¡å‹å’ŒJVM7æ¨¡å‹åŒºåˆ«"><a href="#2-JVM8æ¨¡å‹å’ŒJVM7æ¨¡å‹åŒºåˆ«" class="headerlink" title="2. JVM8æ¨¡å‹å’ŒJVM7æ¨¡å‹åŒºåˆ«"></a>2. JVM8æ¨¡å‹å’ŒJVM7æ¨¡å‹åŒºåˆ«</h2><p><code>JVM7</code></p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/jvm7-å †.png"></p>
<p><code>JVM8</code></p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/jvm8-å †.png"> </p>
<blockquote>
<p><strong>JDK8ä½¿ç”¨å…ƒç©ºé—´æ›¿æ¢æ°¸ä¹…ä»£</strong>ï¼Œå…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¹‹å‰æ°¸ä¹…ä»£çš„å†…å®¹ï¼šç±»å…ƒä¿¡æ¯ã€å­—æ®µã€é™æ€å±æ€§ã€æ–¹æ³•ã€å¸¸é‡ï¼Œè¿˜æœ‰è¿è¡Œæ—¶å¸¸é‡æ± ç­‰éƒ½ç§»åŠ¨è‡³<strong>å…ƒç©ºé—´</strong>ï¼Œä½†æ˜¯<strong>å­—ç¬¦ä¸²å¸¸é‡ç§»è‡³å †å†…å­˜</strong>ã€‚<br>å…ƒç©ºé—´åœ¨æœ¬åœ°å†…å­˜ä¸­åˆ†é…ï¼Œå®ƒå¹¶ä¸æ˜¯<strong>è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†</strong>ï¼Œ<strong>ä¹Ÿä¸æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸ</strong>ï¼Œ<strong>å®ƒç›´æ¥ä»æ“ä½œç³»ç»Ÿä¸­åˆ†é…</strong>ï¼Œ<strong>å› æ­¤ä¸å—Javaå †å¤§å°çš„é™åˆ¶</strong>ï¼Œä½†æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜çš„å¤§å°åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ï¼Œå› æ­¤å®ƒä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°ã€‚â€œå…ƒç©ºé—´â€çš„å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œé€šè¿‡ä»¥ä¸‹å‚æ•°æ¥æŒ‡å®šå…ƒç©ºé—´å¤§å°.</p>
</blockquote>
<h2 id="3-JVMç»„æˆéƒ¨åˆ†åŠå…¶ä½œç”¨"><a href="#3-JVMç»„æˆéƒ¨åˆ†åŠå…¶ä½œç”¨" class="headerlink" title="3. JVMç»„æˆéƒ¨åˆ†åŠå…¶ä½œç”¨"></a>3. JVMç»„æˆéƒ¨åˆ†åŠå…¶ä½œç”¨</h2><blockquote>
<ol>
<li><p>æœ¬åœ°æ–¹æ³•æ ˆ - æä¾›è™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°Nativeæ–¹æ³•æœåŠ¡ã€‚</p>
<p><strong>è¢«nativeå…³é”®å­—ä¿®é¥°çš„æ–¹æ³•å«åšæœ¬åœ°æ–¹æ³•</strong>ï¼Œæœ¬åœ°æ–¹æ³•å’Œå…¶å®ƒæ–¹æ³•ä¸ä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ„å‘³ç€å’Œå¹³å°æœ‰å…³ï¼Œå› æ­¤ä½¿ç”¨äº†nativeçš„ç¨‹åºå¯ç§»æ¤æ€§éƒ½ä¸å¤ªé«˜ã€‚å¦å¤–nativeæ–¹æ³•åœ¨JVMä¸­è¿è¡Œæ—¶æ•°æ®åŒºä¹Ÿå’Œå…¶å®ƒæ–¹æ³•ä¸ä¸€æ ·ï¼Œå®ƒæœ‰ä¸“é—¨çš„æœ¬åœ°æ–¹æ³•æ ˆã€‚nativeæ–¹æ³•ä¸»è¦ç”¨äºåŠ è½½æ–‡ä»¶å’ŒåŠ¨æ€é“¾æ¥åº“ï¼Œ<strong>ç”±äºJavaè¯­è¨€æ— æ³•è®¿é—®æ“ä½œç³»ç»Ÿåº•å±‚ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼šåº•å±‚ç¡¬ä»¶è®¾å¤‡ç­‰ï¼‰ï¼Œè¿™æ—¶å€™å°±éœ€è¦å€ŸåŠ©Cè¯­è¨€æ¥å®Œæˆäº†ã€‚è¢«nativeä¿®é¥°çš„æ–¹æ³•å¯ä»¥è¢«Cè¯­è¨€é‡å†™.</strong></p>
</li>
<li><p>ç¨‹åºè®¡æ•°å™¨(Program Counter Register)</p>
<p><strong>æœ€å¿«çš„å­˜å‚¨åŒº</strong>ï¼Œä¿å­˜çš„æ˜¯<strong>ç¨‹åºå½“å‰æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€</strong>ï¼Œæ‰§è¡Œç»“æŸåï¼Œè‡ªåŠ¨è·å–ä¸‹ä¸€ä¸ªæŒ‡ä»¤ï¼Œä½äºCPUå¤„ç†å™¨å†…éƒ¨ã€‚æ•°é‡æå…¶æœ‰é™ï¼Œç”±ç¼–è¯‘å™¨æ ¹æ®éœ€æ±‚è¿›è¡Œåˆ†é…ã€‚javaä¸­ï¼Œ<strong>ä¸èƒ½ç›´æ¥æ§åˆ¶</strong>ï¼Œä¹Ÿä¸èƒ½åœ¨ç¨‹åºä¸­æ„Ÿè§‰åˆ°å¯„å­˜å™¨å­˜åœ¨çš„ä»»ä½•è¿¹è±¡ã€‚</p>
<p>æ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºåï¼Œéƒ½ä¼šäº§ç”Ÿè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨å’Œæ ˆã€‚ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ã€‚ç”±äºCPUæ—¶é—´ç‰‡è½®é™åˆ¶ï¼Œä¼—å¤šçº¿ç¨‹åœ¨å¹¶å‘æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤„ç†å™¨åªä¼šæ‰§è¡ŒæŸä¸ªçº¿ç¨‹ä¸­çš„ä¸€æ¡æŒ‡ä»¤ï¼Œè¿™æ ·å¿…ç„¶æ¶‰åŠçº¿ç¨‹çš„åˆ‡æ¢ã€‚<br>ç¨‹åºè®¡æ•°å™¨ç”¨æ¥å­˜æ”¾ä¸‹ä¸€ä¸ªæ‰§è¡ŒæŒ‡ä»¤çš„è¡Œå·ã€‚çº¿ç¨‹æ¢å¤è¦ä¾èµ–ç¨‹åºè®¡æ•°å™¨ã€‚æ­¤åŒºåŸŸä¸ä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p>
</li>
<li><p><strong>çº¿ç¨‹æ ˆï¼ˆStackï¼‰&#x2F; è™šæ‹Ÿæœºæ ˆ &#x2F; æ ˆ - å…ˆè¿›åå‡º â­ï¸</strong></p>
<p>JVMä¸­çš„çº¿ç¨‹æ ˆæ˜¯æè¿°Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜åŒºåŸŸï¼Œ<strong>å®ƒæ˜¯çº¿ç¨‹ç§æœ‰çš„</strong>ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p>æ ˆå¸§å­˜å‚¨ç€å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ï¼Œå±€éƒ¨å˜é‡å­˜å‚¨æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼Œæ“ä½œæ•°æ ˆç”¨æ¥è®¡ç®—æ—¶ä¸´æ—¶å­˜æ”¾å˜é‡ï¼ŒåŠ¨æ€é“¾æ¥å­˜æ”¾æ–¹æ³•çš„å…ƒä¿¡æ¯ç­‰ï¼Œæ–¹æ³•å‡ºå£è®°å½•å¦‚å“ªä¸ªæ–¹æ³•çš„æœ¬æ–¹æ³•ç­‰ã€‚é€šè¿‡javap -c XX.classæŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶ã€‚</p>
<p><code>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†ä¼šæŠ›å‡ºstackoverflowErroré€šå¸¸å‡ºç°åœ¨é€’å½’æ–¹æ³•ä¸­ï¼›  å¦‚æœè™šæ‹Ÿæœºå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œä½†æ˜¯æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶ï¼Œå°±ä¼šæŠ›å‡ºoutOfMemoryErrorå¼‚å¸¸ã€‚</code></p>
</li>
<li><p>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</p>
<p>æ–¹æ³•åŒºä¸­å­˜æ”¾å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚<strong>æ˜¯JDK7å­˜åœ¨çš„ä¸€ä¸ªæ¦‚å¿µ.</strong></p>
<p>æ–¹æ³•åŒºä¸å †ï¼ˆJava Heapï¼‰ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚</p>
</li>
<li><p><strong>å † - çº¿ç¨‹å…±äº«,å¯ä»¥åŠ¨æ€è°ƒæ•´å¤§å°. â­ï¸</strong></p>
<p>Heapå­˜å‚¨ç€å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡åŠæ•°ç»„ï¼ŒJVM8ä¸­æŠŠé™æ€å˜é‡ï¼ˆå­—ç¬¦ä¸²å¸¸é‡æ± ï¼‰ä¹Ÿç§»åˆ°å †åŒºè¿›è¡Œå­˜å‚¨.</p>
<p>å †æ˜¯OOMæ•…éšœæœ€ä¸»è¦çš„å‘æºåœ°ï¼Œä¹Ÿæ˜¯æ˜¯åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸ,æ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºGCå †ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒå ç”¨çš„ç©ºé—´æ˜¯æ‰€æœ‰å†…å­˜åŒºåŸŸä¸­æœ€å¤§çš„ï¼Œä½†å¦‚æœæ— èŠ‚åˆ¶åœ°åˆ›å»ºå¤§é‡å¯¹è±¡ï¼Œä¹Ÿå®¹æ˜“æ¶ˆè€—å®Œæ‰€æœ‰çš„ç©ºé—´ã€‚<strong>å †çš„å†…å­˜ç©ºé—´æ—¢å¯ä»¥å›ºå®šå¤§å°ï¼Œä¹Ÿå¯è¿è¡Œæ—¶åŠ¨æ€åœ°è°ƒæ•´</strong>ï¼Œé€šè¿‡å¦‚ä¸‹å‚æ•°è®¾å®šåˆå§‹å€¼å’Œæœ€å¤§å€¼ï¼Œ<strong>æ¯”å¦‚-Xms256M. -Xmx1024M</strong>ã€‚å…¶ä¸­-Xè¡¨ç¤ºå®ƒæ˜¯JVMè¿è¡Œå‚æ•°ï¼Œmsæ˜¯memorystartåˆå§‹å †å®¹é‡çš„ç®€ç§° ï¼Œmxæ˜¯memory maxæœ€å¤§å †å®¹é‡çš„ç®€ç§°ã€‚ä½†æ˜¯åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå †ç©ºé—´ä¸æ–­åœ°æ‰©å®¹ä¸å›ç¼©ï¼ŒåŠ¿å¿…å½¢æˆä¸å¿…è¦çš„ç³»ç»Ÿå‹åŠ›ï¼Œæ‰€ä»¥åœ¨çº¿ä¸Šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒJVMçš„Xmså’ŒXmxè®¾ç½®æˆä¸€æ ·å¤§å°ï¼Œé¿å…åœ¨GCåè°ƒæ•´å †å¤§å°æ—¶å¸¦æ¥çš„é¢å¤–å‹åŠ›ã€‚</p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/å †.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å †ç»†åˆ†ä¸ºæ–°ç”Ÿä»£(<span class="number">1</span>/<span class="number">3</span>)å’Œè€å¹´ä»£(<span class="number">2</span>/<span class="number">3</span>).</span><br><span class="line">æ–°ç”Ÿä»£æŒ‰ç…§<span class="number">8</span>:<span class="number">1</span>:<span class="number">1</span>çš„æ¯”ä¾‹åˆ†æˆä¸‰ä¸ªåŒºåŸŸ(ä¼Šç”¸å›­,FromåŒºåŸŸ,ToåŒºåŸŸ)</span><br><span class="line"></span><br><span class="line">â‘ ä¸€å¼€å§‹åˆ›å»ºçš„å¯¹è±¡å…¨éƒ¨æ”¾å…¥åˆ°EdenåŒºåŸŸ</span><br><span class="line">â‘¡ç¨‹åºrunning,GCåå°å®ˆæŠ¤çº¿ç¨‹,å»æ£€æµ‹,æ‰¾å‡ºæ´»ç€çš„å¯¹è±¡ =&gt; FromåŒºåŸŸ,æ­»çš„å¯¹è±¡ç›´æ¥ç”±GCå›æ”¶</span><br><span class="line">â‘¢From-&gt;To =&gt; å¤åˆ¶ç®—æ³•</span><br><span class="line">â‘£GCæ£€æµ‹From-&gt;ToåŒºåŸŸ,ç»è¿‡<span class="number">15</span>æ¬¡æ£€æµ‹,å‘ç°è¿™ä¸ªå¯¹è±¡è¿˜æ˜¯æ´»ç€çš„ -&gt; å¯¹è±¡æ”¾å…¥åˆ°è€å¹´/ç”Ÿä»£</span><br><span class="line">â‘¤è€ç”Ÿä»£ - æ ‡è®°æ•´ç†/å‹ç¼©-é€‚åˆå­˜æ´»ç‡æ¯”è¾ƒé«˜çš„å¯¹è±¡.</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="7">
<li><p><strong>å…ƒç©ºé—´ â­ï¸</strong></p>
<p>JDK8ä½¿ç”¨å…ƒç©ºé—´æ›¿æ¢æ°¸ä¹…ä»£ï¼Œå…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¹‹å‰æ°¸ä¹…ä»£çš„å†…å®¹ï¼šç±»å…ƒä¿¡æ¯ã€å­—æ®µã€é™æ€å±æ€§ã€æ–¹æ³•ã€å¸¸é‡ï¼Œè¿˜æœ‰è¿è¡Œæ—¶å¸¸é‡æ± ç­‰éƒ½ç§»åŠ¨è‡³å…ƒç©ºé—´ï¼Œä½†æ˜¯å­—ç¬¦ä¸²å¸¸é‡ç§»è‡³å †å†…å­˜ã€‚<br> å…ƒç©ºé—´åœ¨æœ¬åœ°å†…å­˜ä¸­åˆ†é…ï¼Œå®ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç›´æ¥ä»æ“ä½œç³»ç»Ÿä¸­åˆ†é…ï¼Œå› æ­¤ä¸å—Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜çš„å¤§å°åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ï¼Œå› æ­¤å®ƒä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°ã€‚â€œå…ƒç©ºé—´â€çš„å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œé€šè¿‡ä»¥ä¸‹å‚æ•°æ¥æŒ‡å®šå…ƒç©ºé—´å¤§å°.</p>
</li>
</ol>
</blockquote>
<h2 id="4-JVMä¼˜åŒ–"><a href="#4-JVMä¼˜åŒ–" class="headerlink" title="4. JVMä¼˜åŒ–"></a>4. JVMä¼˜åŒ–</h2><blockquote>
<p> å‚æ•°</p>
</blockquote>
<h1 id="8-GCéƒ¨åˆ†"><a href="#8-GCéƒ¨åˆ†" class="headerlink" title="8. GCéƒ¨åˆ†"></a>8. GCéƒ¨åˆ†</h1><h2 id="5-ä»€ä¹ˆæ˜¯GC"><a href="#5-ä»€ä¹ˆæ˜¯GC" class="headerlink" title="5. ä»€ä¹ˆæ˜¯GC"></a>5. ä»€ä¹ˆæ˜¯GC</h2><blockquote>
<p><em><strong>æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶åï¼Œç¨‹åºå‘˜åªéœ€è¦å…³å¿ƒå†…å­˜çš„ç”³è¯·å³å¯ï¼Œå†…å­˜çš„é‡Šæ”¾ç”±ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å®Œæˆ</strong></em>ã€‚æ¢å¥è¯è¯´ï¼Œè‡ªåŠ¨çš„åƒåœ¾å›æ”¶çš„ç®—æ³•å°±ä¼šå˜å¾—éå¸¸é‡è¦äº†ï¼Œå¦‚æœå› ä¸ºç®—æ³•çš„ä¸åˆç†ï¼Œå¯¼è‡´å†…å­˜èµ„æºä¸€ç›´æ²¡æœ‰é‡Šæ”¾ï¼ŒåŒæ ·ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºçš„ã€‚</p>
</blockquote>
<h2 id="6-å¯¹è±¡æœç´¢æ³•"><a href="#6-å¯¹è±¡æœç´¢æ³•" class="headerlink" title="6. å¯¹è±¡æœç´¢æ³•"></a>6. å¯¹è±¡æœç´¢æ³•</h2><blockquote>
<p>é‡‡ç”¨ä»€ä¹ˆæœºåˆ¶æ¥ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯åƒåœ¾å¯¹è±¡</p>
</blockquote>
<h3 id="6-1-å¼•ç”¨è®¡æ•°"><a href="#6-1-å¼•ç”¨è®¡æ•°" class="headerlink" title="6.1 å¼•ç”¨è®¡æ•°"></a>6.1 å¼•ç”¨è®¡æ•°</h3><blockquote>
<p>å¼•ç”¨è®¡æ•°æ³•ï¼ˆReference Countingï¼‰æ¯”è¾ƒç®€å•ï¼Œå¯¹æ¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ä¿å­˜ä¸€ä¸ªæ•´å‹çš„<strong>å¼•ç”¨è®¡æ•°å™¨å±æ€§</strong>ã€‚ç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µã€‚<br>å¯¹äºä¸€ä¸ªå¯¹è±¡Aï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº†Aï¼Œåˆ™Açš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡1ã€‚<strong>åªè¦å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º0</strong>ï¼Œå³è¡¨ç¤ºå¯¹è±¡Aä¸èƒ½åœ¨è¢«ä½¿ç”¨ï¼Œå¯è¿›è¡Œå›æ”¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();<span class="comment">// +1</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> s;<span class="comment">//+1,å¯¹åº”çš„å¼•ç”¨è®¡æ•°å™¨å±æ€§å€¼æ˜¯2</span></span><br><span class="line">s = <span class="literal">null</span>;<span class="comment">// -1,æœ€ç»ˆä¸º1 -&gt; ä¸æ˜¯åƒåœ¾å¯¹è±¡,ä¸èƒ½è¢«å›æ”¶.</span></span><br></pre></td></tr></table></figure>



<p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œåƒåœ¾å¯¹è±¡ä¾¿äºè¾¨è¯†ï¼›åˆ¤å®šæ•ˆç‡é«˜ï¼Œå›æ”¶æ²¡æœ‰å»¶è¿Ÿæ€§ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li><p>å®ƒéœ€è¦å•ç‹¬çš„å­—æ®µå­˜å‚¨è®¡æ•°å™¨ï¼Œè¿™æ ·çš„åšæ³•å¢åŠ äº†<strong>å­˜å‚¨ç©ºé—´çš„å¼€é”€</strong>ã€‚</p>
</li>
<li><p>æ¯æ¬¡èµ‹å€¼éƒ½éœ€è¦æ›´æ–°è®¡æ•°å™¨ï¼Œä¼´éšç€åŠ æ³•å’Œå‡æ³•æ“ä½œï¼Œè¿™<strong>å¢åŠ äº†æ—¶é—´å¼€é”€</strong>ã€‚</p>
</li>
<li><p>å¼•ç”¨è®¡æ•°å™¨è¿˜æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œ<strong>å³æ— æ³•å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œè¿™æ˜¯ä¸€æ¡è‡´å‘½çš„ç¼ºé™·</strong>ï¼Œå¯¼è‡´åœ¨Javaå›æ”¶çš„åƒåœ¾å›æ”¶å™¨ä¸­æ²¡æœ‰ä½¿ç”¨è¿™ç±»ç®—æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyObject</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">MyObject</span> <span class="variable">re1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyObject</span>();<span class="comment">//re1-obj +1</span></span><br><span class="line">    <span class="type">MyObject</span> <span class="variable">re2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyObject</span>();<span class="comment">//re2-obj +1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¾ªç¯å¼•ç”¨</span></span><br><span class="line">    re1.obj = re2;<span class="comment">// re2-obj +1   =&gt; è®¡æ•°å™¨2</span></span><br><span class="line">    re2.obj = re1;<span class="comment">// re1-obj +1   =&gt; è®¡æ•°å™¨2</span></span><br><span class="line"></span><br><span class="line">    re1 = <span class="literal">null</span>;<span class="comment">// re1-obj -1  =&gt; è®¡æ•°å™¨1</span></span><br><span class="line">    re2 = <span class="literal">null</span>;<span class="comment">// re2-obj -1  =&gt; è®¡æ•°å™¨1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿©ä¸ªå¯¹è±¡è™½ç„¶ä¸æ˜¯åƒåœ¾å¯¹è±¡,ä½†æ˜¯æ­¤æ—¶å·²ç»åŠæ³•ä½¿ç”¨äº†.</span></span><br><span class="line">    <span class="comment">//è®¿é—®re1/re2 =&gt; null</span></span><br><span class="line">    <span class="comment">//re1.obj/re2.obj =&gt; null.obj/null.obj =&gt; ç©ºæŒ‡é’ˆ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="6-2-å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#6-2-å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="6.2 å¯è¾¾æ€§åˆ†æç®—æ³•"></a>6.2 å¯è¾¾æ€§åˆ†æç®—æ³•</h3><blockquote>
<p>ç°ä»£è™šæ‹ŸæœºåŸºæœ¬éƒ½æ˜¯é‡‡ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œå¯è¾¾æ€§ç®—æ³•çš„åŸç†æ˜¯ä»¥ä¸€ç³»åˆ—å«åš  GC Root  çš„å¯¹è±¡ä¸ºèµ·ç‚¹å‡ºå‘ï¼Œå¼•å‡ºå®ƒä»¬æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†ä»¥ä¸‹ä¸ªèŠ‚ç‚¹ä¸ºèµ·ç‚¹ï¼Œå¼•å‡ºæ­¤èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚è¿™æ ·é€šè¿‡ GC Root ä¸²æˆçš„ä¸€æ¡çº¿å°±å«å¼•ç”¨é“¾ï¼‰ï¼Œç›´åˆ°æ‰€æœ‰çš„ç»“ç‚¹éƒ½éå†å®Œæ¯•,å¦‚æœç›¸å…³å¯¹è±¡ä¸åœ¨ä»»æ„ä¸€ä¸ªä»¥ GC Root ä¸ºèµ·ç‚¹çš„å¼•ç”¨é“¾ä¸­ï¼Œåˆ™è¿™äº›å¯¹è±¡ä¼šè¢«åˆ¤æ–­ä¸ºåƒåœ¾å¯¹è±¡,ä¼šè¢« GC å›æ”¶ã€‚</p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/GC-root.png"> </p>
<p>å¦‚å›¾ç¤ºï¼Œå¦‚æœç”¨å¯è¾¾æ€§ç®—æ³•å³å¯è§£å†³ä¸Šè¿°å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå› ä¸ºä»<strong>GC Root</strong> å‡ºå‘æ²¡æœ‰åˆ°è¾¾ a,b,æ‰€ä»¥ aï¼Œb å¯å›æ”¶ã€‚</p>
<p><code>a, b å¯¹è±¡å¯å›æ”¶ï¼Œå°±ä¸€å®šä¼šè¢«å›æ”¶å—?</code></p>
<p>å¹¶ä¸æ˜¯ï¼Œå¯¹è±¡çš„ finalize æ–¹æ³•ç»™äº†å¯¹è±¡ä¸€æ¬¡å‚æ­»æŒ£æ‰çš„æœºä¼šï¼Œå½“å¯¹è±¡ä¸å¯è¾¾ï¼ˆå¯å›æ”¶ï¼‰æ—¶ï¼Œå½“å‘ç”ŸGCæ—¶ï¼Œä¼šå…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦æ‰§è¡Œäº† finalize æ–¹æ³•ï¼Œå¦‚æœæœªæ‰§è¡Œï¼Œåˆ™ä¼šå…ˆæ‰§è¡Œ finalize æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤æ–¹æ³•é‡Œå°†å½“å‰å¯¹è±¡ä¸ GC Roots å…³è”ï¼Œè¿™æ ·æ‰§è¡Œ finalize æ–¹æ³•ä¹‹åï¼ŒGC ä¼šå†æ¬¡åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¾¾ï¼Œå¦‚æœä¸å¯è¾¾ï¼Œåˆ™ä¼šè¢«å›æ”¶ï¼Œå¦‚æœå¯è¾¾ï¼Œåˆ™ä¸å›æ”¶ï¼</p>
<p><strong>æ³¨æ„ï¼š</strong> finalize æ–¹æ³•åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ‰§è¡Œ finalize æ–¹æ³•æ­¤å¯¹è±¡å˜æˆäº†å¯è¾¾ç¡®å®ä¸ä¼šå›æ”¶ï¼Œä½†å¦‚æœå¯¹è±¡å†æ¬¡è¢« GCï¼Œåˆ™ä¼šå¿½ç•¥ finalize æ–¹æ³•ï¼Œå¯¹è±¡ä¼šè¢«å›æ”¶ï¼è¿™ä¸€ç‚¹åˆ‡è®°!</p>
</blockquote>
<h2 id="7-GC-Roots"><a href="#7-GC-Roots" class="headerlink" title="7. GC Roots"></a>7. GC Roots</h2><p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/roots.png"> </p>
<blockquote>
<p><strong>GC Roots åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Œå“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Root å‘¢ï¼Ÿ</strong></p>
<ul>
<li><p>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">publicclass Test &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">			<span class="type">Test</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line"></span><br><span class="line">			a = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br><span class="line">a æ˜¯æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡ï¼Œå½“ a = <span class="literal">null</span> æ—¶ï¼Œç”±äºæ­¤æ—¶ a å……å½“äº† GC Root çš„ä½œç”¨ï¼Œa ä¸åŸæ¥æŒ‡å‘çš„å®ä¾‹ <span class="keyword">new</span> <span class="title class_">Test</span>() æ–­å¼€äº†è¿æ¥ï¼Œæ‰€ä»¥å¯¹è±¡ä¼šè¢«å›æ”¶ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNIï¼ˆå³ä¸€èˆ¬è¯´çš„ Native æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</p>
</li>
<li><p>æ–¹æ³•åŒºä¸­ç±»<strong>é™æ€å±æ€§å¼•ç”¨</strong>çš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Test s; <span class="comment">// s =&gt; GCRoots</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">Test</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">//a =&gt; GCRoots</span></span><br><span class="line">      a.s = <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">//a.sæŒ‡å‘çš„è¿™ä¸ªå¯¹è±¡ä¸æ˜¯ä¸€ä¸ªåƒåœ¾å¯¹è±¡</span></span><br><span class="line">      a = <span class="literal">null</span>;</span><br><span class="line">      <span class="comment">//System.out.println(s);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å½“æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡ a = <span class="literal">null</span> æ—¶ï¼Œç”±äº a åŸæ¥æŒ‡å‘çš„å¯¹è±¡ä¸ GC <span class="title function_">Root</span> <span class="params">(å˜é‡ a)</span> æ–­å¼€äº†è¿æ¥ï¼Œæ‰€ä»¥ a åŸæ¥æŒ‡å‘çš„å¯¹è±¡ä¼šè¢«å›æ”¶ï¼Œè€Œç”±äºæˆ‘ä»¬ç»™ s èµ‹å€¼äº†å˜é‡çš„å¼•ç”¨ï¼Œs åœ¨æ­¤æ—¶æ˜¯ç±»é™æ€å±æ€§å¼•ç”¨ï¼Œå……å½“äº† GC Root çš„ä½œç”¨ï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡ä¾ç„¶å­˜æ´»!</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–¹æ³•åŒºä¸­<strong>å¸¸é‡å¼•ç”¨</strong>çš„å¯¹è±¡</p>
<p>JDK8 - å…ƒç©ºé—´,ä¿ç•™äº†æ–¹æ³•åŒºçš„æ¦‚å¿µ,å®ç°çš„æ–¹å¼ä¸ä¸€æ ·è€Œå·².</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">				<span class="keyword">public</span> <span class="keyword">final</span> <span class="type">Test</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();<span class="comment">//ä¸æ˜¯ä¸€ä¸ªåƒåœ¾å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">Test</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">            a = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¸¸é‡ s æŒ‡å‘çš„å¯¹è±¡å¹¶ä¸ä¼šå› ä¸º a æŒ‡å‘çš„å¯¹è±¡è¢«å›æ”¶è€Œå›æ”¶</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h2 id="8-GCå›æ”¶ç®—æ³•"><a href="#8-GCå›æ”¶ç®—æ³•" class="headerlink" title="8. GCå›æ”¶ç®—æ³•"></a>8. GCå›æ”¶ç®—æ³•</h2><blockquote>
<p>ç®€ä»‹:äº†è§£å®Œåƒåœ¾æ˜¯æ€ä¹ˆæ‰¾å‡ºæ¥åï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å®ƒä»¬æ˜¯æ€ä¹ˆè¢«æ¸…é™¤çš„ã€‚ä»¥ä¸‹ä»‹ç»å‡ ç§æ¸…é™¤çš„ç®—æ³•ã€‚</p>
</blockquote>
<p>###8.1 æ ‡è®°-æ¸…é™¤ç®—æ³•</p>
<p>1 - å½“GCå‘ç°éœ€è¦é‡Šæ”¾å†…å­˜ç©ºé—´çš„æ—¶å€™,JVMæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå°†ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€.</p>
<p>2 - GCæ ‡æ³¨åƒåœ¾å¯¹è±¡</p>
<p>3 - GCå†å»æ¸…ç†è¿™äº›åƒåœ¾å¯¹è±¡</p>
<p>4 - æ¸…ç†å®Œæ¯•ä¹‹å,JVMç»§ç»­æ‰§è¡Œ</p>
<p>ç®€ä»‹:æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰</p>
<p>æ ‡è®°-æ¸…é™¤ï¼Œé¡¾åæ€ä¹‰ï¼Œ<strong>å…ˆæ ‡è®°åƒåœ¾ï¼Œå†æ¸…é™¤</strong>ã€‚å®ƒæ˜¯GCæœ€åŸºç¡€çš„ç®—æ³•ï¼Œ<strong>åç»­å¾ˆå¤šç®—æ³•éƒ½æ˜¯åŸºäºå®ƒä¸Šé¢å»æ”¹è¿›çš„</strong>ã€‚<br>æ ‡è®°çš„è¿‡ç¨‹åœ¨ä¸Šé¢æœç´¢GCå¯¹è±¡å·²ç»ä»‹ç»è¿‡äº†ã€‚è¢«æ ‡è®°çš„å¯¹è±¡ï¼Œåœ¨ç»Ÿä¸€GCçš„æ—¶å€™ä¼šæŠŠæ ‡è®°çš„å¯¹è±¡æ¸…é™¤æ‰ã€‚è¿™ä¸ªç®—æ³•æ¯”è¾ƒç®€å•ï¼Œä¸åšè¿‡å¤šèµ˜è¿°ã€‚</p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/æ ‡è®°æ¸…é™¤.png"> </p>
<p>è¿™ä¸ªç®—æ³•æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯åœ¨åƒåœ¾å›æ”¶åä¼š<strong>äº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„ç¢ç‰‡ç©ºé—´</strong>ï¼Œå¯¼è‡´ç¨‹åºè¦ç”³è¯·è¾ƒå¤§çš„å¯¹è±¡æ—¶å¸¸æ— æ³•æ‰¾åˆ°åˆé€‚çš„å†…å­˜ç©ºé—´ï¼Œè¿«ä½¿å†æ¬¡GCã€‚</p>
<h2 id="8-2-å¤åˆ¶ç®—æ³•-æ ‡è®°"><a href="#8-2-å¤åˆ¶ç®—æ³•-æ ‡è®°" class="headerlink" title="8.2 å¤åˆ¶ç®—æ³•(æ ‡è®°)"></a>8.2 å¤åˆ¶ç®—æ³•(æ ‡è®°)</h2><p>ç®€ä»‹:è¿™ä¸ªç®—æ³•æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯åœ¨åƒåœ¾å›æ”¶åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„ç¢ç‰‡ç©ºé—´ï¼Œå¯¼è‡´ç¨‹åºè¦ç”³è¯·è¾ƒå¤§çš„å¯¹è±¡æ—¶å¸¸æ— æ³•æ‰¾åˆ°åˆé€‚çš„å†…å­˜ç©ºé—´ï¼Œè¿«ä½¿å†æ¬¡GCã€‚</p>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/å¤åˆ¶ç®—æ³•.png"> </p>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li><strong>æŠŠå†…å­˜å¯ä½¿ç”¨çš„ç©ºé—´å‡å°‘äº†ä¸€åŠ</strong>ï¼Œé€ æˆç©ºé—´çš„æµªè´¹ã€‚</li>
<li>å¯¹è±¡å­˜æ´»æ•°é‡è¾ƒå¤šçš„æ—¶å€™ï¼Œå¤åˆ¶æ€§èƒ½æ¯”è¾ƒå·®</li>
</ol>
</blockquote>
<h2 id="8-3-æ ‡è®°-æ•´ç†-x2F-å‹ç¼©ç®—æ³•"><a href="#8-3-æ ‡è®°-æ•´ç†-x2F-å‹ç¼©ç®—æ³•" class="headerlink" title="8.3 æ ‡è®°-æ•´ç†&#x2F;å‹ç¼©ç®—æ³•"></a>8.3 æ ‡è®°-æ•´ç†&#x2F;å‹ç¼©ç®—æ³•</h2><blockquote>
<p>ç®€ä»‹:æ ‡è®°-æ•´ç†ç®—æ³•(mark-compact)</p>
<p>é’ˆå¯¹å¤åˆ¶ç®—æ³•çš„ä¸¤ä¸ªç¼ºç‚¹ï¼Œ<strong>åœ¨è€å¹´ä»£ä¸€èˆ¬ä¼šç”¨è¿™ç§æ ‡è®°-æ•´ç†ç®—æ³•ã€‚</strong></p>
<p><strong>æŠŠå­˜æ´»çš„å¯¹è±¡ç§»åˆ°å†…å­˜çš„ä¸€ç«¯ï¼Œç„¶åæŠŠå‰©ä½™çš„ç©ºé—´å…¨éƒ¨æ¸…ç©ºæ‰ã€‚</strong></p>
</blockquote>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/æ ‡è®°æ•´ç†.png"> </p>
<h2 id="8-4-åˆ†ä»£å›æ”¶"><a href="#8-4-åˆ†ä»£å›æ”¶" class="headerlink" title="8.4 åˆ†ä»£å›æ”¶"></a>8.4 åˆ†ä»£å›æ”¶</h2><blockquote>
<p>ç®€ä»‹:ä¹Ÿå«åšåˆ†ä»£å›æ”¶ç®—æ³•</p>
<p>åˆ†ä»£ç®—æ³•å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ–°çš„å†…å®¹ã€‚<strong>è€Œæ˜¯æŠŠå†…å­˜åˆ†æˆå¤šä¸ªåŒºåŸŸï¼Œä¸€èˆ¬ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£ç­‰</strong>ã€‚ç„¶åæ ¹æ®ä¸åŒåŒºåŸŸä¸åŒçš„ç‰¹ç‚¹ï¼Œç”¨ä¸åŒå›æ”¶ç®—æ³•å»å›æ”¶åƒåœ¾ã€‚</p>
<p>ä¾‹å¦‚æ–°ç”Ÿä»£ï¼Œ**å¯¹è±¡å­˜æ´»ç‡ä½ï¼Œæ¯”è¾ƒé€‚ç”¨å¤åˆ¶ç®—æ³•(From,To)**ã€‚è€å¹´ä»£å­˜æ´»ç‡é«˜ï¼Œæ¯”è¾ƒé€‚ç”¨Mark-Compactç®—æ³•ã€‚</p>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">JVM</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/04/JVM/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-åå°„andä»£ç†æ¨¡å¼" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/04/%E5%8F%8D%E5%B0%84and%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" target="_blank">åå°„andä»£ç†æ¨¡å¼</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/04/%E5%8F%8D%E5%B0%84and%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="archive-article-date">
        <time datetime="2022-08-04T11:16:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-04</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="java-lang-Class"><a href="#java-lang-Class" class="headerlink" title="java.lang.Class"></a><em>java.lang.Class</em></h1><blockquote>
<p><em><strong>å®ƒæ˜¯åå°„ç±»çš„åŸºç¡€ç±»</strong>.æ‰€æœ‰çš„ç±»åŠ è½½åˆ°JVMå†…å­˜ä¸­ä¹‹å,é‚£ä¹ˆå®ƒåœ¨jvmä¸­çš„classå®ä¾‹æ°¸è¿œåªæœ‰1ä¸ª</em></p>
<p><em>ä½œç”¨:æè¿°ç±»çš„ç±». â€œæ‰€æœ‰çš„ç±»åœ¨Classé¢å‰,éƒ½æ˜¯å¯¹è±¡â€ è‡ªå®šä¹‰çš„é‚£äº›ç±»æ˜¯ç”¨æ¥æè¿°å¯¹è±¡.</em></p>
</blockquote>
<h2 id="è·å–Classçš„å‡ ç§æ–¹å¼"><a href="#è·å–Classçš„å‡ ç§æ–¹å¼" class="headerlink" title="è·å–Classçš„å‡ ç§æ–¹å¼"></a><em>è·å–Classçš„å‡ ç§æ–¹å¼</em></h2><blockquote>
<ol>
<li><em>ç±»å.class</em></li>
<li><em>java.lang.Objectä¸­æä¾›çš„getClass()</em></li>
<li><em>æ¨èä½¿ç”¨ - Class.forName(â€œç±»çš„å…¨é™å®šåâ€);</em></li>
<li><em>åŸºæœ¬ç±»å‹.class</em></li>
</ol>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a><em>å¸¸ç”¨æ–¹æ³•</em></h2><blockquote>
<ol>
<li><em>String getName();&#x2F;&#x2F;è¿”å›ç±»çš„å…¨é™å®šå</em></li>
<li><em>String getSimpleName();&#x2F;&#x2F;è·å–ç±»çš„ç®€ç§°</em></li>
<li><em>Field[] getFields();&#x2F;&#x2F;è·å–æ‰€æœ‰çš„Field,ä½†æ˜¯ä¸åŒ…æ‹¬ç§æœ‰çš„å±æ€§</em></li>
<li><em>Field[] getDeclaredFields();&#x2F;&#x2F;è·å–æ‰€æœ‰çš„Field,åŒ…æ‹¬ç§æœ‰çš„.</em></li>
<li><em>Field getDeclaredField(String name);&#x2F;&#x2F;æ ¹æ®æŒ‡å®šçš„å±æ€§åæ¥è¿”å›è¿™ä¸ªå±æ€§å¯¹åº”çš„Fieldå®ä¾‹.</em></li>
<li><em>Method[] getDeclaredMethods();&#x2F;&#x2F;è·å–æ‰€æœ‰çš„æ–¹æ³•çš„methodå®ä¾‹,åŒ…æ‹¬ç§æœ‰</em></li>
<li><em>Method getDeclaredMethod(String name, Class&lt;?&gt;â€¦ parameterTypes);&#x2F;&#x2F;æ ¹æ®æŒ‡å®šçš„æ–¹æ³•çš„å,å‚æ•°åˆ—è¡¨æ¥è¿”å›æŒ‡å®šçš„methodå®ä¾‹.å¦‚æœæ˜¯ç©ºå‚,ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¸ä¼ å…¥</em> </li>
<li><em>Constructor<?>[] getDeclaredConstructors(Class<?> â€¦ c);&#x2F;&#x2F;è·å–æ‰€æœ‰çš„æ„é€ ,åŒ…æ‹¬ç§æœ‰çš„</em></li>
<li><em>T newInstance();&#x2F;&#x2F;åå°„åˆ›å»ºå¯¹è±¡(è°ƒç”¨ç©ºå‚æ„é€ )</em></li>
<li><em>public native Class&lt;?&gt; getComponentType();&#x2F;&#x2F;åå°„è·å–æ•°ç»„çš„å…ƒç´ &#x2F;ç»„ä»¶ç±»å‹</em></li>
<li><em>public boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass);&#x2F;&#x2F;åˆ¤æ–­æŸä¸ªç±»ä¸Šæ˜¯å¦æ¡ä»¶äº†æ³¨è§£</em></li>
<li><em>public <A extends Annotation> A getDeclaredAnnotation(Class<A> annotationClass);&#x2F;&#x2F;è·å–æ³¨è§£å¯¹è±¡</em></li>
</ol>
</blockquote>
<h1 id="åå°„æŠ€æœ¯"><a href="#åå°„æŠ€æœ¯" class="headerlink" title="åå°„æŠ€æœ¯"></a><em>åå°„æŠ€æœ¯</em></h1><blockquote>
<p><em>api:java.lang.reflect.</em>*</p>
</blockquote>
<blockquote>
<p><em>å«åšå†…çœ</em></p>
</blockquote>
<blockquote>
<p><em>æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æŠ€æœ¯åœ¨ç¨‹åºçš„è¿è¡ŒæœŸé—´æ¥åŠ¨æ€çš„è·å–ç±»å†…éƒ¨çš„ä¿¡æ¯.</em></p>
<p><em>åå°„å¯ä»¥æ“ä½œç§æœ‰çš„æˆå‘˜ - åå°„å¯ä»¥ç ´åå°è£…æ€§.</em></p>
<p><em>åŒ…æ‹¬</em></p>
<ul>
<li><em>åå°„è·å–ç±»å†…éƒ¨å±æ€§çš„ç›¸å…³ä¿¡æ¯(ä¿®é¥°ç¬¦,æ•°æ®ç±»å‹,åç§°)&#x2F;è®¾ç½®å±æ€§å€¼</em></li>
<li><em>åå°„åŠ¨æ€æ“ä½œç±»å†…éƒ¨çš„æ–¹æ³• - è·å–æ–¹æ³•çš„ä¿¡æ¯(ä¿®é¥°ç¬¦,è¿”å›ç±»å‹,æ–¹æ³•å,å‚æ•°åˆ—è¡¨) - åå°„è°ƒç”¨æ–¹æ³•</em></li>
<li><em>åå°„æ“ä½œæ„é€ æ–¹æ³•</em></li>
</ul>
</blockquote>
<h1 id="Field"><a href="#Field" class="headerlink" title="Field"></a><em>Field</em></h1><blockquote>
<p><em>è¿™ä¸ªæ˜¯å±æ€§å¯¹åº”çš„Fieldå®ä¾‹,é€šè¿‡è¿™ä¸ªFieldå¯ä»¥æ“ä½œå±æ€§.</em></p>
<p><em>Fieldå®ä¾‹æè¿°ç±»å†…éƒ¨çš„å±æ€§çš„</em></p>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•-1"><a href="#å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a><em>å¸¸ç”¨æ–¹æ³•</em></h2><blockquote>
<ol>
<li><em>Class&lt;?&gt; getType();&#x2F;&#x2F;è¿”å›å±æ€§çš„æ•°æ®ç±»å‹</em></li>
<li><em>String getName();&#x2F;&#x2F;è¿”å›å±æ€§çš„åç§°</em></li>
<li><em>int getModifiers();&#x2F;&#x2F;è¿”å›ä¿®é¥°ç¬¦å¯¹åº”çš„æ•°å­—</em></li>
<li><em>void set(Object obj,Object value);&#x2F;&#x2F;åå°„è®¾ç½®å­—æ®µçš„å€¼</em></li>
<li><em>void setAccessible(boolean flag);&#x2F;&#x2F;é‡åˆ°ç§æœ‰çš„å±æ€§,éœ€è¦è®¾ç½®æˆtrue,å¦åˆ™ä¼šæŠ›å‡ºjava.lang.IllegalAccessExceptionéæ³•è®¿é—®å¼‚å¸¸</em></li>
</ol>
</blockquote>
<h1 id="Modifier"><a href="#Modifier" class="headerlink" title="Modifier"></a><em>Modifier</em></h1><blockquote>
<p><em>String toString(int mod);&#x2F;&#x2F;è¿”å›ä¿®é¥°çš„åç§°</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// public - 1</span></span><br><span class="line"><span class="comment">// private -2</span></span><br><span class="line"><span class="comment">// é»˜è®¤çš„æ˜¯ - 0</span></span><br><span class="line"><span class="comment">// protected - 4</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="Method"><a href="#Method" class="headerlink" title="Method"></a><em>Method</em></h1><blockquote>
<p><em>Method - åå°„æ“ä½œæ–¹æ³•çš„å®ä¾‹,ä¸åŒ…æ‹¬æ„é€ æ–¹æ³•</em></p>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•-2"><a href="#å¸¸ç”¨æ–¹æ³•-2" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a><em>å¸¸ç”¨æ–¹æ³•</em></h2><blockquote>
<ol>
<li><em>String getName();&#x2F;&#x2F;è¿”å›æ–¹æ³•çš„åç§°</em></li>
<li><em>Class&lt;?&gt; getReturnType();&#x2F;&#x2F;æ‹¿åˆ°çš„æ˜¯è¿”å›ç±»å‹</em></li>
<li><em>String getName();&#x2F;&#x2F;æ–¹æ³•çš„åç§°</em></li>
<li><em>Class&lt;?&gt;[] getParameterTypes();&#x2F;&#x2F;æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</em></li>
<li><em>Object invoke(Object obj,Objectâ€¦ values);&#x2F;&#x2F;åå°„è°ƒç”¨,å¦‚æœæ˜¯ç©ºå‚,ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¸ä¼ å…¥</em></li>
<li><em>void setAccessible(boolean flag);&#x2F;&#x2F;è®¾ç½®true,æ‰èƒ½è°ƒç”¨ç§æœ‰çš„æ–¹æ³•</em></li>
</ol>
</blockquote>
<h1 id="Constructor"><a href="#Constructor" class="headerlink" title="Constructor"></a><em>Constructor</em></h1><blockquote>
<p><em>åå°„æ“ä½œæ„é€ æ–¹æ³•çš„å®ä¾‹</em></p>
</blockquote>
<h2 id="ç©ºå‚æ„é€ "><a href="#ç©ºå‚æ„é€ " class="headerlink" title="ç©ºå‚æ„é€ "></a><em>ç©ºå‚æ„é€ </em></h2><blockquote>
<p><em>æä¾›äº†ä¸¤ç§æ–¹å¼</em></p>
<ol>
<li><em>Constructoræä¾›çš„newInstanceæ–¹æ³•</em></li>
<li><em>Class<T>ä¸­æä¾›çš„newInstanceæ–¹æ³•</em></li>
</ol>
</blockquote>
<h2 id="å¸¦å‚æ„é€ "><a href="#å¸¦å‚æ„é€ " class="headerlink" title="å¸¦å‚æ„é€ "></a><em>å¸¦å‚æ„é€ </em></h2><blockquote>
<p><em>åªèƒ½é€šè¿‡Constructorä¸­æä¾›çš„ T newInstance(Object â€¦ initargs)</em></p>
</blockquote>
<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a><em>æ–¹æ³•</em></h2><blockquote>
<p><em>void setAccessible(boolean flag);&#x2F;&#x2F;è°ƒç”¨ç§æœ‰çš„æ„é€ </em></p>
</blockquote>
<h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a><em>Array</em></h1><blockquote>
<p><em>java.lang.reflect.Array</em></p>
<p><em><code>å¸¸ç”¨æ–¹æ³•</code></em></p>
<ol>
<li><em>static int getLength(Object arr);&#x2F;&#x2F;åå°„è·å–æ•°ç»„é•¿åº¦</em></li>
<li><em>public static native Object get(Object array, int index);&#x2F;&#x2F;åå°„æ ¹æ®ä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ .</em></li>
<li><em>public static Object newInstance(Class&lt;?&gt; componentType, int length);&#x2F;&#x2F;æ ¹æ®ç»„ä»¶ç±»å‹ä»¥åŠæ•°ç»„é•¿åº¦,æ¥åå°„åˆ›å»ºæ–°çš„æ•°ç»„</em></li>
<li><em>public static native void set(Object array, int index, Object value);&#x2F;&#x2F;ç»™arrayæ•°ç»„çš„indexä½ç½®å¤„è®¾ç½®ä¸€ä¸ªå€¼value</em></li>
</ol>
</blockquote>
<h2 id="Arrayå’ŒArraysåŒºåˆ«"><a href="#Arrayå’ŒArraysåŒºåˆ«" class="headerlink" title="Arrayå’ŒArraysåŒºåˆ«"></a><em>Arrayå’ŒArraysåŒºåˆ«</em></h2><blockquote>
<ol>
<li><em>apiåŒ…ä¸€æ ·,åé¢çš„java.util.Arrays</em></li>
<li><em>Arraysæ˜¯æ•°ç»„å·¥å…·ç±»</em></li>
<li><em>Arrayæ˜¯é€šè¿‡åå°„çš„æŠ€æœ¯æ¥æ“ä½œæ•°ç»„.</em></li>
</ol>
</blockquote>
<h1 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a><em>æ³¨è§£å¼€å‘</em></h1><blockquote>
<p><em>æ¡†æ¶æœ‰é…ç½®æ–‡ä»¶çš„å¼€å‘å’Œæ³¨è§£å¼€å‘</em></p>
</blockquote>
<h2 id="jdkå†…ç½®çš„ä¸€äº›æ³¨è§£"><a href="#jdkå†…ç½®çš„ä¸€äº›æ³¨è§£" class="headerlink" title="jdkå†…ç½®çš„ä¸€äº›æ³¨è§£"></a><em>jdkå†…ç½®çš„ä¸€äº›æ³¨è§£</em></h2><blockquote>
<ul>
<li><em>@Override - æ–¹æ³•çš„é‡å†™</em></li>
<li><em>@SuppressWarnings(â€œallâ€) - æŠ‘åˆ¶æ‰€æœ‰çš„è­¦å‘Š</em></li>
<li><em>@Deprecated - è¿‡æ—¶</em></li>
<li><em>@Target - è¯¥æ³¨è§£å¯ä»¥è¢«åº”ç”¨çš„ä½ç½®</em></li>
<li><em>@Retention(RetentionPolicy.RUNTIME) - æ³¨è§£çš„ä¿æŒç­–ç•¥ - æ­¤å¤„è®¾ç½®æˆè¿è¡Œæ—¶,åœ¨è¿è¡ŒæœŸé—´å¯ä»¥é€šè¿‡åå°„çš„æŠ€æœ¯æ¥æ“ä½œæ³¨è§£.</em></li>
<li><em>@Inherited &#x2F;&#x2F;æ³¨è§£æ˜¯å¦å…è®¸è¢«ç»§æ‰¿</em></li>
</ul>
</blockquote>
<h2 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a><em>è‡ªå®šä¹‰æ³¨è§£</em></h2><blockquote>
<ul>
<li><em>ä½¿ç”¨çš„å…³é”®å­—@interface</em></li>
<li><em>è‡ªå®šä¹‰æ³¨è§£ç»§æ‰¿java.lang.annotation.Annotation[I]</em></li>
<li><em>æ³¨è§£ä¸­åªæœ‰å±æ€§çš„æ¦‚å¿µ,æ²¡æœ‰æ–¹æ³•çš„æ¦‚å¿µ.</em></li>
</ul>
</blockquote>
<h2 id="æ³¨è§£çš„ç»§æ‰¿æ€§"><a href="#æ³¨è§£çš„ç»§æ‰¿æ€§" class="headerlink" title="æ³¨è§£çš„ç»§æ‰¿æ€§"></a><em>æ³¨è§£çš„ç»§æ‰¿æ€§</em></h2><blockquote>
<ul>
<li><em>è‡ªå®šä¹‰æ³¨è§£ä¸Šéœ€è¦åŠ ä¸Š@Inherited</em></li>
<li><em>çˆ¶ç±»ç±»ä¸Šçš„æ³¨è§£æ˜¯å…è®¸è¢«å­ç±»å»ç»§æ‰¿çš„</em></li>
<li><em>çˆ¶ç±»æ–¹æ³•ä¸Šçš„æ³¨è§£æ˜¯ä¸å…è®¸è¢«å­ç±»å»ç»§æ‰¿çš„</em></li>
</ul>
</blockquote>
<h2 id="SpringDataJPAæŠ€æœ¯-x2F-HibernateæŠ€æœ¯"><a href="#SpringDataJPAæŠ€æœ¯-x2F-HibernateæŠ€æœ¯" class="headerlink" title="SpringDataJPAæŠ€æœ¯&#x2F;HibernateæŠ€æœ¯"></a><em>SpringDataJPAæŠ€æœ¯&#x2F;HibernateæŠ€æœ¯</em></h2><blockquote>
<p><em>åˆ›å»ºè¡¨çš„è¿‡ç¨‹æ˜¯å¯ä»¥è‡ªåŠ¨ç”Ÿæˆçš„,ä¸éœ€è¦è‡ªå·±å†™sqlè¯­å¥çš„.</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span> <span class="comment">// æ ‡è¯†è¿™ä¸ªæ˜¯ä¸€ä¸ªå®ä½“ç±»</span></span><br><span class="line"><span class="meta">@Table(name=&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line"><span class="meta">@Id</span> <span class="comment">// è¿™æ˜¯ä¸€ä¸ªä¸»é”®åˆ—</span></span><br><span class="line"><span class="keyword">private</span> Integer id; <span class="comment">// å¯ä»¥æ‹¿åˆ°Field =&gt; æ·»åŠ äº†@Idæ³¨è§£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> age;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ç¨‹åº,æ§åˆ¶å°ä¸Šå°±å¯ä»¥çœ‹åˆ°DDLè¯­å¥ - åˆ›å»ºè¡¨çš„è¯­å¥</span><br><span class="line">drop table t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">	id int primary key,</span><br><span class="line">name varchar,</span><br><span class="line">age double</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ä½œä¸šä¸­çš„ä¸€äº›è¦ç‚¹"><a href="#ä½œä¸šä¸­çš„ä¸€äº›è¦ç‚¹" class="headerlink" title="ä½œä¸šä¸­çš„ä¸€äº›è¦ç‚¹"></a><em>ä½œä¸šä¸­çš„ä¸€äº›è¦ç‚¹</em></h2><blockquote>
<ol>
<li><p><em>è‡ªå®šä¹‰ä¸‰ä¸ªæ³¨è§£@MyEntity @MyTable @MyId</em></p>
</li>
<li><p><em>StringBuilderè¿›è¡Œæ‹¼æ¥</em></p>
<ul>
<li><p><em>t_userè·å–å‡ºæ¥</em></p>
</li>
<li><p><em>Fieldçš„åç§°å°±æ˜¯ä½œä¸ºæ•°æ®çš„å­—æ®µçš„åç§°</em></p>
</li>
<li><p><em>Integer-&gt;int String-&gt;varchar double-&gt;double</em></p>
</li>
<li><p><em>åˆ¤æ–­åŠ äº†MyIdæ³¨è§£çš„å­—æ®µåé¢æ‹¼æ¥primary key</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/4 18:24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lonng</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyEntity &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/4 18:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lonng</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyTable &#123;</span><br><span class="line">    String <span class="title function_">tablename</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/4 18:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lonng</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyId &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/4 18:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lonng</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@MyEntity</span></span><br><span class="line"><span class="meta">@MyTable(tablename = &quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@MyId</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span>  String userName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"><span class="keyword">package</span> tech.aistr.day14.homework;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> //TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/4 18:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lonng</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisGenerate</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">generate</span><span class="params">()</span>&#123;</span><br><span class="line">        StringBuilder stringBuilder=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        Class&lt;?&gt; c=User.class;</span><br><span class="line">        Field[] fields= c.getDeclaredFields();</span><br><span class="line">        <span class="type">int</span> size=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(c.isAnnotationPresent(MyEntity.class)&amp;&amp;c.isAnnotationPresent(MyTable.class))&#123;</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;drop table &quot;</span>);</span><br><span class="line">            MyTable myTable=c.getDeclaredAnnotation(MyTable.class);</span><br><span class="line">            stringBuilder.append(myTable.tablename());</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;\n&quot;</span>+<span class="string">&quot;create table &quot;</span>+myTable.tablename()+<span class="string">&quot;(;\n&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Field f:fields) &#123;</span><br><span class="line">                size++;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> f.getName();</span><br><span class="line">                stringBuilder.append(name);</span><br><span class="line">                Class&lt;?&gt; type = f.getType();</span><br><span class="line">                <span class="keyword">if</span> (type == <span class="type">int</span>.class || type == Integer.class) &#123;</span><br><span class="line">                    stringBuilder.append(<span class="string">&quot; int&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == String.class) &#123;</span><br><span class="line">                    stringBuilder.append(<span class="string">&quot; varchar&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == Double.class &amp;&amp; type == <span class="type">double</span>.class) &#123;</span><br><span class="line">                    stringBuilder.append(<span class="string">&quot; varchar&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> stringBuilder.append(<span class="string">&quot; &quot;</span>+type.getSimpleName());</span><br><span class="line">                <span class="keyword">if</span>(f.isAnnotationPresent(MyId.class))&#123;</span><br><span class="line">                    stringBuilder.append(<span class="string">&quot; primary key&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(size!= fields.length)&#123;</span><br><span class="line">                    stringBuilder.append(<span class="string">&quot;,\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> stringBuilder.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> System.out.println(<span class="string">&quot;æ²¡æœ‰æ³¨è§£&quot;</span>);</span><br><span class="line">        System.out.println(stringBuilder);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        generate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</blockquote>
<h1 id="ä»£ç†è®¾è®¡æ¨¡å¼"><a href="#ä»£ç†è®¾è®¡æ¨¡å¼" class="headerlink" title="ä»£ç†è®¾è®¡æ¨¡å¼"></a><em>ä»£ç†è®¾è®¡æ¨¡å¼</em></h1><blockquote>
<p><em>å®šä¹‰:ç”±äºæŸäº›åŸå› éœ€è¦ç»™æŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶è¯¥å¯¹è±¡çš„è®¿é—®.</em></p>
<p><em>çŠ¯äºº   -&gt; å¾‹å¸ˆ(æ— ç½ªé‡Šæ”¾+æ³•å¾‹çŸ¥è¯†) -&gt;   è­¦å¯Ÿ</em></p>
<p><em>æˆ¿ä¸œ(æ ¸å¿ƒåŠŸèƒ½) -&gt; ä¸­ä»‹(æ ¸å¿ƒåŠŸèƒ½+å¹ç‰›-å¢å¼º) -&gt; ç§Ÿæˆ·</em></p>
</blockquote>
<blockquote>
<p><em>ä¼˜ç‚¹:</em></p>
<ol>
<li><em>åœ¨å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸€ä¸ªä¸­ä»‹ä½œç”¨(ä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œä¸š)</em></li>
<li><em>ä»£ç†å¯¹è±¡å¯ä»¥<strong>æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½</strong></em></li>
<li><em>å°†å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡è¿›è¡Œåˆ†ç¦».åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆ.</em></li>
</ol>
</blockquote>
<h2 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a><em>é™æ€ä»£ç†</em></h2><blockquote>
<p><em>ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»éƒ½éœ€è¦å®ç°åŒä¸€ä¸ªæ¥å£çš„.æ‰€è°“é™æ€çš„å«ä¹‰:åœ¨ç¼–è¯‘æœŸé—´,çœŸå®çš„å­˜åœ¨è¿™ä¸ªä»£ç†ç±».</em></p>
<p><em><code>å¼Šç«¯:</code></em></p>
<p><em>é€ æˆä»£ç†ç±»æ¯”è¾ƒç¹å¤š.</em></p>
</blockquote>
<h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a><em>åŠ¨æ€ä»£ç†</em></h2><blockquote>
<p><em>åœ¨ç¼–è¯‘æœŸé—´æ˜¯ä¸ä¼šå‡ºç°ä»£ç†ç±»çš„,æ˜¯ç¨‹åºçš„è¿è¡ŒæœŸé—´ç”Ÿæˆç›®æ ‡å¯¹è±¡çš„ä»£ç†ç±»</em></p>
<p><em>jdkåŠ¨æ€ä»£ç† - è§„åˆ™ - åªèƒ½ä»£ç†æ¥å£</em></p>
</blockquote>
<p><em><code>æ ¸å¿ƒä»£ç </code></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»£ç†ä¸€åˆ‡æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProxyHandler</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proxy åå°„åˆ›å»ºçš„ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method ä»£ç†å¯¹è±¡è®¿é—®çš„æ¥å£çš„ä¸­çš„æ–¹æ³•å¯¹åº”çš„methodå®ä¾‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args å¦‚æœå‚æ•°,è°ƒç”¨æ–¹æ³•ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//System.out.println(proxy.getClass());</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//System.out.println(method);</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">//System.out.println(Arrays.toString(args));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åœ¨æ­¤å¤„ç»Ÿä¸€è¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•</span></span><br><span class="line">        System.out.println(<span class="string">&quot;log-before&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ ¸å¿ƒæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(obj,args);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;log-after&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é™æ€ä»£ç†å’Œè£…é¥°å™¨çš„åŒºåˆ«"><a href="#é™æ€ä»£ç†å’Œè£…é¥°å™¨çš„åŒºåˆ«" class="headerlink" title="é™æ€ä»£ç†å’Œè£…é¥°å™¨çš„åŒºåˆ«"></a><em>é™æ€ä»£ç†å’Œè£…é¥°å™¨çš„åŒºåˆ«</em></h2><blockquote>
<p><em>ä¸€å®šæ˜¯è¦ä»åŠŸèƒ½çš„è§’åº¦å»ç†è§£å®ƒä»¬çš„åŒºåˆ«!</em></p>
<ul>
<li><p><em>ä»£ç†æ¨¡å¼:é€šè¿‡ä»£ç†æ¨¡å¼,åšäº†ä¸€äº›ä¸è‡ªå·±æœ¬èº«ä¸ç›¸å…³çš„äº‹æƒ…,å±äºä¸€äº›è¾…åŠ©çš„åŠŸèƒ½,æ¯”å¦‚æ—¥å¿—çš„ç®¡ç†.å€ŸåŠ©äºè¿™ä¸ªä»£ç†å¯¹è±¡æ¥å®Œæˆäº†æŸäº›åŠŸèƒ½.è€Œä¸æ˜¯å¯¹è±¡æœ¬èº«åŠŸèƒ½çš„å¢åŠ .</em></p>
</li>
<li><p><em>è£…é¥°å™¨æ¨¡å¼:è®©è‡ªå·±çš„åŠŸèƒ½å¢å¼º,é€šè¿‡æŸäº›è£…é¥°è®©è‡ªå·±å˜å¾—æ›´åŠ ä¸°å¯Œ.æ˜¯å¯¹è‡ªå·±æœ¬èº«çš„åŠŸèƒ½è¿›è¡Œäº†ä¸€ä¸ªæ‰©å±•.ä¸»è¦æ˜¯ä¸ºäº†ä¸æƒ³ä½¿ç”¨ç»§æ‰¿.</em></p>
</li>
</ul>
</blockquote>
<blockquote>
<p><em>æ¡ˆä¾‹:</em> å°på­© - åƒé¥­</p>
<ol>
<li>å¦ˆå¦ˆå–‚ä»–åƒ - ä»£ç†æ¨¡å¼</li>
<li>å°På­©é•¿å¤§ - è‡ªå·±ä¼šåƒ - è£…é¥°å™¨æ¨¡å¼</li>
</ol>
</blockquote>
<h1 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h1><blockquote>
<ol>
<li><p>è¿è¡Œæ—¶å¼‚å¸¸5ä¸ª,éè¿è¡Œæ—¶å¼‚å¸¸5ä¸ª</p>
<blockquote>
<p>è¿è¡Œæ—¶å¼‚å¸¸<br>æ­¤ç±»å¼‚å¸¸ï¼Œç¼–è¯‘æ—¶æ²¡æœ‰æç¤ºåšå¼‚å¸¸å¤„ç†ï¼Œå› æ­¤é€šå¸¸æ­¤ç±»å¼‚å¸¸çš„æ­£ç¡®ç†è§£åº”è¯¥æ˜¯â€œé€»è¾‘é”™è¯¯â€</p>
<p>ç®—æ•°å¼‚å¸¸ï¼Œ<br>ç©ºæŒ‡é’ˆï¼Œ<br>ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œ<br>æ•°ç»„è¶Šç•Œï¼Œ<br>NumberFormateExceptionï¼ˆæ•°å­—æ ¼å¼å¼‚å¸¸ï¼Œè½¬æ¢å¤±è´¥ï¼Œæ¯”å¦‚â€œa12â€å°±ä¼šè½¬æ¢å¤±è´¥ï¼‰</p>
<p>éè¿è¡Œæ—¶å¼‚å¸¸<br>IOExceptionï¼Œ<br>SQLExceptionï¼Œ<br>FileNotFoundException,<br>NoSuchFileExceptionï¼Œ<br>NoSuchMethodException</p>
</blockquote>
</li>
<li><p>å¼‚å¸¸çš„ç§¯æå¤„ç†æ–¹å¼å’Œæ¶ˆæå¤„ç†æ–¹å¼</p>
<blockquote>
<p>æ¶ˆæï¼šä½¿ç”¨throwsæŠ›å‡ºå¼‚å¸¸<br>ä½¿ç”¨throwsæŠ›å‡ºå¼‚å¸¸çš„æ€è·¯æ˜¯:å½“å‰æ–¹æ³•ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸åº”è¯¥ç”±ä¸Šä¸€çº§è°ƒç”¨è€…å¤„ç†ï¼Œå¦‚æœmainæ–¹æ³•ä¹Ÿä¸çŸ¥é“åº”è¯¥å¦‚ä½•å¤„ç†è¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½¿ç”¨throwså£°æ˜æŠ›å‡ºå¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å°†äº¤ç»™JVMæ¥å¤„ç†ã€‚<br>JVMå¯¹å¼‚å¸¸çš„å¤„ç†æ–¹æ³•ï¼šæ‰“å°å¼‚å¸¸è·Ÿè¸ªæ ˆçš„ä¿¡æ¯ï¼Œå¹¶ç»ˆæ­¢ç¨‹åºè¿è¡Œï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šç¨‹åºé‡åˆ°å¼‚å¸¸åè‡ªåŠ¨ç»“æŸã€‚<br>ç§¯æï¼šä½¿ç”¨throwæŠ›å‡ºå¼‚å¸¸<br>å½“ç¨‹åºå‡ºç°é”™è¯¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œå¦å¤–ï¼Œjavaä¹Ÿå…è®¸ç¨‹åºè‡ªè¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè‡ªè¡ŒæŠ›å‡ºå¼‚å¸¸ä½¿ç”¨throwè¯­å¥å®Œæˆï¼<br>æŠ›å‡ºå¼‚å¸¸ï¼š<br>å¦‚æœéœ€è¦åœ¨ç¨‹åºä¸­è‡ªè¡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œåº”ä½¿ç”¨throwè¯­å¥ï¼Œthrowè¯­å¥å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œthrowè¯­å¥æŠ›å‡ºçš„ä¸æ˜¯å¼‚å¸¸ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼‚å¸¸å®ä¾‹ï¼Œè€Œä¸”æ¯æ¬¡åªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å®ä¾‹ã€‚throwè¯­å¥çš„æ ¼å¼å¦‚ä¸‹ï¼šthrow ExceptionInstance;<br>throwè¯­å¥æŠ›å‡ºå¼‚å¸¸çš„ä¸¤ç§æƒ…å†µï¼š<br>1.å½“throwè¯­å¥æŠ›å‡ºçš„å¼‚å¸¸æ˜¯Checkedå¼‚å¸¸ï¼Œåˆ™è¯¥throwè¯­å¥è¦ä¹ˆå¤„äºtryå—é‡Œæ˜¾å¼æ•è·è¯¥å¼‚å¸¸ï¼Œè¦ä¹ˆæ”¾åœ¨ä¸€ä¸ªå¸¦throwså£°æ˜æŠ›å‡ºçš„æ–¹æ³•ä¸­ï¼Œå³æŠŠå¼‚å¸¸äº¤ç»™æ–¹æ³•çš„è°ƒç”¨è€…å¤„ç†ã€‚<br>2.å½“throwè¯­å¥æŠ›å‡ºçš„å¼‚å¸¸æ˜¯Runtimeå¼‚å¸¸ï¼Œåˆ™è¯¥è¯­å¥æ— é¡»æ”¾åœ¨tryå—å†…ï¼Œä¹Ÿæ— é¡»æ”¾åœ¨å¸¦throwså£°æ˜æŠ›å‡ºçš„æ–¹æ³•ä¸­ï¼Œç¨‹åºæ—¢å¯ä»¥æ˜¾å¼ä½¿ç”¨tryâ€¦catchæ¥æ•è·å¹¶å¤„ç†è¯¥å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥å®Œå…¨ä¸ç†ä¼šè¯¥å¼‚å¸¸ï¼ŒæŠŠè¯¥å¼‚å¸¸äº¤ç»™æ–¹æ³•çš„è°ƒç”¨è€…å¤„ç†ã€‚</p>
</blockquote>
</li>
<li><p>å¼‚å¸¸ä»€ä¹ˆæ—¶å€™éœ€è¦æŠ›å‡ºå»,ä»€ä¹ˆæ—¶å€™éœ€è¦å¤„ç†</p>
<blockquote>
<p>1ã€åœ¨é€šç”¨çš„æ–¹æ³•é‡Œï¼Œä¸è¦tryå»æ•è·é”™è¯¯ï¼Œè€Œæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ç»™è°ƒç”¨å±‚å¤„ç†<br>2ã€ç”¨æˆ·è®¿é—®ç•Œé¢å¤„ç†æ‰æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸ï¼Œå¹¶è®°å½•è¯¦ç»†é”™è¯¯æ—¥å¿—ï¼Œç„¶åè¿”å›å‹å¥½çš„é”™è¯¯ç•Œé¢ç»™ç”¨æˆ·ï¼Œä¸è¦æŠ›å¼‚å¸¸ç»™ç”¨æˆ·ï¼Œä¸å‹å¥½.</p>
<p>å¼‚å¸¸åº”å½“åœ¨ä¸‹å±‚æ–¹æ³•ä¸­ä¸ç¬¦åˆé€»è¾‘ã€å‡ºç°å¼‚å¸¸çš„æ—¶å€™æŠ›å‡ºï¼Œåœ¨ä¸Šå±‚è¿›è¡Œæ•è·.</p>
<p>åŒæ ·çš„ï¼Œå‡ä½¿ä½ ä¸ºåˆ«äººæä¾›ç±»åº“æ–¹æ³•ï¼Œåœ¨ä½ çš„æ–¹æ³•ä¸­ï¼Œå­˜åœ¨é—®é¢˜å°±åº”è¯¥æŠ›å‡ºã€‚</p>
<p>å› ä¸ºåˆ«äººä»£ç å¯èƒ½ä¾èµ–äºæˆ–è€…è°ƒç”¨ä½ çš„ä»£ç ï¼Œåœ¨è°ƒç”¨æ–¹å¯è¿›è¡Œå¼‚å¸¸çš„æ•è·ï¼Œä»è€Œèƒ½å¾—åˆ°æœ€åŸå§‹çš„å¼‚å¸¸ä¿¡æ¯ã€‚</p>
<p>è¿™å°±å¥½æ¯”ï¼Œå°å­©å­ä½ é¥¿äº†ï¼Œä½ å°±å“­å°±æ˜¯äº†ï¼ˆthrowï¼‰ï¼Œæ²¡å¿…è¦åœ¨åƒå¥¶é˜¶æ®µï¼ˆä¸‹å±‚ï¼‰å°±å¼€å§‹åšå¼ºã€‚</p>
<p>è€Œå¤„ç†é—®é¢˜åˆ™äº¤ç»™å°å­©çš„æ¯äº²ï¼ˆä¸Šå±‚ï¼‰ï¼Œå› ä¸ºå¥¹çŸ¥é“å°å­©å¯èƒ½ä¼šå­˜åœ¨é¥¿äº†å°±ä¼šå“­çš„é£é™©ï¼ˆå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œå¥¹ä¼šè¿›è¡Œä¿æŠ¤æ€§åº”å¯¹ï¼ˆtry catchï¼‰ã€‚</p>
</blockquote>
</li>
</ol>
</blockquote>
<h1 id="å¤ä¹ "><a href="#å¤ä¹ " class="headerlink" title="å¤ä¹ "></a>å¤ä¹ </h1><blockquote>
<ol>
<li><p>é›†åˆ - æ•°æ®ç»“æ„ + åŒºåˆ«</p>
</li>
<li><p>å­—ç¬¦ä¸²,åŒ…è£…ç±»å‹</p>
</li>
<li><p>JVMå’ŒGC</p>
</li>
<li><p>å¤šçº¿ç¨‹</p>
<p>4-1. çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼</p>
<p>4-2. çº¿ç¨‹çš„çŠ¶æ€-ç”Ÿå‘½å‘¨æœŸ</p>
<p>4-4. wait,sleep,join,yieldæ–¹æ³•åŒºåˆ«</p>
<p>4-5. synchronizedä½¿ç”¨æ–¹å¼å’ŒvolatileåŒºåˆ«</p>
<p>4-6. JMM</p>
<p>4-7. çº¿ç¨‹æ± åˆ†ç±»,ä½œç”¨,çº¿ç¨‹æ± å‚æ•°,æ‹’ç»ç­–ç•¥</p>
</li>
<li><p>å•ä¾‹&#x2F;è£…é¥°å™¨&#x2F;ç®€å•å·¥å‚&#x2F;å·¥å‚æ–¹æ³•&#x2F;ä»£ç†&#x2F;æ¨¡æ¿</p>
</li>
</ol>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">java</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">ç¬”è®°</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/04/%E5%8F%8D%E5%B0%84and%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-Target" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/04/Target/" target="_blank">Target</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/04/Target/" class="archive-article-date">
        <time datetime="2022-08-04T10:32:23.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-04</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>ã€€@Target è¯´æ˜äº†Annotationæ‰€ä¿®é¥°çš„å¯¹è±¡èŒƒå›´ï¼šAnnotationå¯è¢«ç”¨äº packagesã€typesï¼ˆç±»ã€æ¥å£ã€æšä¸¾ã€Annotationç±»å‹ï¼‰ã€ç±»å‹æˆå‘˜ï¼ˆæ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æˆå‘˜å˜é‡ã€æšä¸¾å€¼ï¼‰ã€æ–¹æ³•å‚æ•°å’Œæœ¬åœ°å˜é‡ï¼ˆå¦‚å¾ªç¯å˜é‡ã€catchå‚æ•°ï¼‰ã€‚åœ¨Annotationç±»å‹çš„å£°æ˜ä¸­ä½¿ç”¨äº†targetå¯æ›´åŠ æ˜æ™°å…¶ä¿®é¥°çš„ç›®æ ‡ã€‚<br>ã€€ã€€ä½œç”¨ï¼šç”¨äºæè¿°æ³¨è§£çš„ä½¿ç”¨èŒƒå›´ï¼ˆå³ï¼šè¢«æè¿°çš„æ³¨è§£å¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼‰</p>
<p>ã€€ã€€å–å€¼(ElementType)æœ‰ï¼š</p>
<p>ã€€ã€€ã€€ã€€1.CONSTRUCTOR:ç”¨äºæè¿°æ„é€ å™¨<br>ã€€ã€€ã€€ã€€2.FIELD:ç”¨äºæè¿°åŸŸ<br>ã€€ã€€ã€€ã€€3.LOCAL_VARIABLE:ç”¨äºæè¿°å±€éƒ¨å˜é‡<br>ã€€ã€€ã€€ã€€4.METHOD:ç”¨äºæè¿°æ–¹æ³•<br>ã€€ã€€ã€€ã€€5.PACKAGE:ç”¨äºæè¿°åŒ…<br>ã€€ã€€ã€€ã€€6.PARAMETER:ç”¨äºæè¿°å‚æ•°<br>ã€€ã€€ã€€ã€€7.TYPE:ç”¨äºæè¿°ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹) æˆ–enumå£°æ˜</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">é—®é¢˜è®°å½•</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/04/Target/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸€ï¼‰" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank">é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸€ï¼‰</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/" class="archive-article-date">
        <time datetime="2022-08-02T13:09:42.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-02</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="1ã€JDK-å’Œ-JRE-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#1ã€JDK-å’Œ-JRE-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="1ã€JDK å’Œ JRE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>1ã€JDK å’Œ JRE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>JDKï¼ˆJava Development Kitï¼‰ï¼ŒJavaå¼€å‘å·¥å…·åŒ…</p>
<p>JREï¼ˆJava Runtime Environmentï¼‰ï¼ŒJavaè¿è¡Œç¯å¢ƒ</p>
<p>JDKä¸­åŒ…å«JREï¼ŒJDKä¸­æœ‰ä¸€ä¸ªåä¸ºjreçš„ç›®å½•ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹binå’Œlibï¼Œbinå°±æ˜¯JVMï¼Œlibå°±æ˜¯JVMå·¥ä½œæ‰€éœ€è¦çš„ç±»åº“ã€‚</p>
<h1 id="2ã€-x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2ã€-x3D-x3D-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2ã€&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2ã€&#x3D;&#x3D; å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œ&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯å€¼ï¼›<br>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œ&#x3D;&#x3D;æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼›<br>equalsä¸èƒ½ç”¨äºåŸºæœ¬ç±»å‹çš„æ¯”è¾ƒï¼›<br>å¦‚æœæ²¡æœ‰é‡å†™equalsï¼Œequalså°±ç›¸å½“äº&#x3D;&#x3D;ï¼›<br>å¦‚æœé‡å†™äº†equalsæ–¹æ³•ï¼Œequalsæ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å®¹ï¼›</p>
<h1 id="3ã€final-åœ¨-java-ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#3ã€final-åœ¨-java-ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="3ã€final åœ¨ java ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>3ã€final åœ¨ java ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨</p>
<p> å¦‚æœå¼•ç”¨ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¯¥å¼•ç”¨ä¸ºå¸¸é‡ï¼Œè¯¥å€¼æ— æ³•ä¿®æ”¹ï¼›<br> å¦‚æœå¼•ç”¨ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼Œåˆ™è¯¥å¯¹è±¡ã€æ•°ç»„æœ¬èº«å¯ä»¥ä¿®æ”¹ï¼Œä½†æŒ‡å‘è¯¥å¯¹è±¡æˆ–æ•°ç»„çš„åœ°å€çš„å¼•ç”¨ä¸èƒ½ä¿®æ”¹ã€‚<br> å¦‚æœå¼•ç”¨æ—¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåˆ™å¿…é¡»å½“åœºèµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚<br>ï¼ˆ2ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•</p>
<p>å½“ä½¿ç”¨finalä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°†æˆä¸ºæœ€ç»ˆæ–¹æ³•ï¼Œæ— æ³•è¢«å­ç±»é‡å†™ã€‚ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä»ç„¶å¯ä»¥è¢«ç»§æ‰¿ã€‚</p>
<p>ï¼ˆ3ï¼‰ç”¨æ¥ä¿®é¥°ç±»</p>
<p>å½“ç”¨finalä¿®æ”¹ç±»æ—¶ï¼Œè¯¥ç±»æˆä¸ºæœ€ç»ˆç±»ï¼Œæ— æ³•è¢«ç»§æ‰¿ã€‚</p>
<p> æ¯”å¦‚å¸¸ç”¨çš„Stringç±»å°±æ˜¯æœ€ç»ˆç±»ã€‚</p>
<h1 id="4ã€java-ä¸­çš„-Math-round-1-5-ç­‰äºå¤šå°‘ï¼Ÿ"><a href="#4ã€java-ä¸­çš„-Math-round-1-5-ç­‰äºå¤šå°‘ï¼Ÿ" class="headerlink" title="4ã€java ä¸­çš„ Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ"></a>4ã€java ä¸­çš„ Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ</h1><p>Mathæä¾›äº†ä¸‰ä¸ªä¸å–æ•´æœ‰å…³çš„æ–¹æ³•ï¼šceilã€floorã€round</p>
<p>ï¼ˆ1ï¼‰ceilï¼šå‘ä¸Šå–æ•´ï¼›</p>
<p>Math.ceil(11.3) &#x3D; 12;</p>
<p>Math.ceil(-11.3) &#x3D; 11;</p>
<p>ï¼ˆ2ï¼‰floorï¼šå‘ä¸‹å–æ•´ï¼›</p>
<p>Math.floor(11.3) &#x3D; 11;</p>
<p>Math.floor(-11.3) &#x3D; -12;</p>
<p>ï¼ˆ3ï¼‰roundï¼šå››èˆäº”å…¥ï¼›</p>
<p>åŠ 0.5ç„¶åå‘ä¸‹å–æ•´ã€‚</p>
<p>Math.round(11.3) &#x3D; 11;</p>
<p>Math.round(11.8) &#x3D; 12;</p>
<p>Math.round(-11.3) &#x3D; -11;</p>
<p>Math.round(-11.8) &#x3D; -12;</p>
<h1 id="5ã€String-å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ"><a href="#5ã€String-å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ" class="headerlink" title="5ã€String å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ"></a>5ã€String å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ</h1><p>ä¸å±äºã€‚</p>
<p>å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyteã€shortã€charã€intã€longã€doubleã€floatã€booleanã€‚</p>
<h1 id="6ã€String-str-x3D-â€iâ€ä¸-String-str-x3D-new-String-â€œiâ€-ä¸€æ ·å—ï¼Ÿ"><a href="#6ã€String-str-x3D-â€iâ€ä¸-String-str-x3D-new-String-â€œiâ€-ä¸€æ ·å—ï¼Ÿ" class="headerlink" title="6ã€String str&#x3D;â€iâ€ä¸ String str&#x3D;new String(â€œiâ€)ä¸€æ ·å—ï¼Ÿ"></a>6ã€String str&#x3D;â€iâ€ä¸ String str&#x3D;new String(â€œiâ€)ä¸€æ ·å—ï¼Ÿ</h1><p>String str&#x3D;â€iâ€ä¼šå°†èµ·åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼Œå¸¸é‡æ± ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ï¼Œå¦‚æœå¸¸é‡æ± ä¸­å­˜ä¸­iï¼Œå°±å°†içš„åœ°å€èµ‹ç»™å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªå†èµ‹ç»™å˜é‡ã€‚</p>
<p>String str&#x3D;new String(â€œiâ€)ä¼šå°†å¯¹è±¡åˆ†é…åˆ°å †ä¸­ï¼Œå³ä½¿å†…å­˜ä¸€æ ·ï¼Œè¿˜æ˜¯ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
<h1 id="7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"><a href="#7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ" class="headerlink" title="7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"></a>7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ</h1><p>å°†å¯¹è±¡å°è£…åˆ°stringBuilderä¸­ï¼Œè°ƒç”¨reverseæ–¹æ³•åè½¬ã€‚</p>
<h1 id="8ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"><a href="#8ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="8ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"></a>8ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰å¸¸è§Stringç±»çš„è·å–åŠŸèƒ½</p>
<p>lengthï¼šè·å–å­—ç¬¦ä¸²é•¿åº¦ï¼›<br>charAt(int index)ï¼šè·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„å­—ç¬¦ï¼›<br>indexOf(int ch)ï¼šè¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼›<br>substring(int start)ï¼šä»æŒ‡å®šä½ç½®å¼€å§‹æˆªå–å­—ç¬¦ä¸²,é»˜è®¤åˆ°æœ«å°¾ï¼›<br>substring(int start,int end)ï¼šä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æŒ‡å®šä½ç½®ç»“æŸæˆªå–å­—ç¬¦ä¸²ï¼›</p>
<p>ï¼ˆ2ï¼‰å¸¸è§Stringç±»çš„åˆ¤æ–­åŠŸèƒ½</p>
<p>equals(Object obj)ï¼š æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ,åŒºåˆ†å¤§å°å†™ï¼›<br>contains(String str): åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ï¼›<br>startsWith(String str): åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²å¼€å¤´ï¼›<br>endsWith(String str): åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç»“å°¾ï¼›<br>isEmpty(): åˆ¤æ–­å­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ä¸ºç©ºä¸²â€â€ï¼›</p>
<p>ï¼ˆ3ï¼‰å¸¸è§Stringç±»çš„è½¬æ¢åŠŸèƒ½</p>
<p>byte[] getBytes(): æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼›<br>char[] toCharArray(): æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼›<br>String valueOf(char[] chs): æŠŠå­—ç¬¦æ•°ç»„è½¬æˆå­—ç¬¦ä¸²ã€‚valueOfå¯ä»¥å°†ä»»æ„ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²ï¼›<br>toLowerCase(): æŠŠå­—ç¬¦ä¸²è½¬æˆå°å†™ï¼›<br>toUpperCase(): æŠŠå­—ç¬¦ä¸²è½¬æˆå¤§å†™ï¼›<br>concat(String str): æŠŠå­—ç¬¦ä¸²æ‹¼æ¥ï¼›</p>
<p>ï¼ˆ4ï¼‰å¸¸è§Stringç±»çš„å…¶ä»–å¸¸ç”¨åŠŸèƒ½</p>
<p>replace(char old,char new) å°†æŒ‡å®šå­—ç¬¦è¿›è¡Œäº’æ¢<br>replace(String old,String new) å°†æŒ‡å®šå­—ç¬¦ä¸²è¿›è¡Œäº’æ¢<br>trim() å»é™¤ä¸¤ç«¯ç©ºæ ¼<br>int compareTo(String str) ä¼šå¯¹ç…§ASCII ç è¡¨ ä»ç¬¬ä¸€ä¸ªå­—æ¯è¿›è¡Œå‡æ³•è¿ç®— è¿”å›çš„å°±æ˜¯è¿™ä¸ªå‡æ³•çš„ç»“æœï¼Œå¦‚æœå‰é¢å‡ ä¸ªå­—æ¯ä¸€æ ·ä¼šæ ¹æ®ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œå‡æ³•è¿ç®—è¿”å›çš„å°±æ˜¯è¿™ä¸ªå‡æ³•çš„ç»“æœï¼Œå¦‚æœè¿ä¸ªå­—ç¬¦ä¸²ä¸€æ‘¸ä¸€æ · è¿”å›çš„å°±æ˜¯0ã€‚</p>
<h1 id="9ã€new-String-â€œaâ€-new-String-â€œbâ€-ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ"><a href="#9ã€new-String-â€œaâ€-new-String-â€œbâ€-ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ" class="headerlink" title="9ã€new String(â€œaâ€) + new String(â€œbâ€) ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ"></a>9ã€new String(â€œaâ€) + new String(â€œbâ€) ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ</h1><p>å¯¹è±¡1ï¼šnew StringBuilder()</p>
<p>å¯¹è±¡2ï¼šnew String(â€œaâ€)</p>
<p>å¯¹è±¡3ï¼šå¸¸é‡æ± ä¸­çš„â€aâ€</p>
<p>å¯¹è±¡4ï¼šnew String(â€œbâ€)</p>
<p>å¯¹è±¡5ï¼šå¸¸é‡æ± ä¸­çš„â€bâ€</p>
<p>æ·±å…¥å‰–æï¼šStringBuilderä¸­çš„toString()ï¼š</p>
<p>å¯¹è±¡6ï¼šnew String(â€œabâ€)</p>
<p>å¼ºè°ƒä¸€ä¸‹ï¼ŒtoString()çš„è°ƒç”¨ï¼Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ²¡æœ‰ç”Ÿæˆâ€abâ€</p>
<p>é™„åŠ é¢˜</p>
<p>String s1 &#x3D; new String(â€œ1â€) + new String(â€œ1â€);&#x2F;&#x2F;s1å˜é‡è®°å½•çš„åœ°å€ä¸ºï¼šnew String<br>s1.intern();&#x2F;&#x2F;åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆâ€11â€ã€‚å¦‚ä½•ç†è§£ï¼šjdk6ï¼šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡â€11â€ï¼Œä¹Ÿå°±æœ‰æ–°çš„åœ°å€ï¼›jdk7ï¼šæ­¤æ—¶å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰åˆ›å»ºâ€11â€ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘å †ç©ºé—´ä¸­new String(â€œ11â€)çš„åœ°å€ï¼›<br>String s2 &#x3D; â€œ11â€;<br>System.out.println(s1 &#x3D;&#x3D; s2);&#x2F;&#x2F;jdk6:false;jdk7:true</p>
<h1 id="10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"><a href="#10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ" class="headerlink" title="10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"></a>10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ</h1><p>æ·»åŠ åˆ°StringBuilderä¸­ï¼Œç„¶åè°ƒç”¨reverse()ã€‚</p>
<h1 id="11ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"><a href="#11ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="11ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"></a>11ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ</h1><p>equalsã€lengthã€containsã€replaceã€splitã€hashcodeã€indexofã€substringã€trimã€toUpperCaseã€toLowerCaseã€isEmptyç­‰ç­‰ã€‚</p>
<h1 id="12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h1><p>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼›<br>æŠ½è±¡ç±»å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåªéœ€ç”³æ˜ï¼Œæ— é¡»å®ç°ï¼›<br>æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»ï¼›<br>æŠ½è±¡ç±»çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å­ç±»ä»ç„¶æ˜¯æŠ½è±¡ç±»ï¼›<br>æŠ½è±¡æ–¹æ³•ä¸èƒ½å£°æ˜ä¸ºé™æ€ã€ä¸èƒ½è¢«staticã€finalä¿®é¥°ã€‚</p>
<h1 id="13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰æ¥å£</p>
<p>æ¥å£ä½¿ç”¨interfaceä¿®é¥°ï¼›<br>æ¥å£ä¸èƒ½å®ä¾‹åŒ–ï¼›<br>ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</p>
<p>â‘ java8ä¹‹å‰ï¼Œæ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œçœç•¥äº†public abstractã€‚â‘¡java8ä¹‹åï¼›æ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•å¿…é¡»æœ‰æ–¹æ³•ä½“ï¼Œæ™®é€šæ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ï¼Œéœ€è¦è¢«å®ç°ï¼›</p>
<p>ï¼ˆ2ï¼‰æŠ½è±¡ç±»</p>
<p>æŠ½è±¡ç±»ä½¿ç”¨abstractä¿®é¥°ï¼›<br>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼›<br>æŠ½è±¡ç±»åªèƒ½å•ç»§æ‰¿ï¼›<br>æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•å’ŒéæŠ½è±¡æ–¹æ³•ï¼ŒéæŠ½è±¡æ–¹æ³•éœ€è¦æœ‰æ–¹æ³•ä½“ï¼›<br>å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œâ‘ å¦‚æœå®ç°äº†æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ä¸æ˜¯æŠ½è±¡ç±»ï¼›â‘¡å¦‚æœæ²¡æœ‰å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»ä»ç„¶æ˜¯æŠ½è±¡ç±»ã€‚</p>
<h1 id="14ã€java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§ï¼Ÿ"><a href="#14ã€java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§ï¼Ÿ" class="headerlink" title="14ã€java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ"></a>14ã€java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰æŒ‰æµåˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼›</p>
<p>ï¼ˆ2ï¼‰æŒ‰å•ä½åˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼›</p>
<p>å­—èŠ‚æµï¼šinputStreamã€outputStreamï¼›</p>
<p>å­—ç¬¦æµï¼šreaderã€writerï¼›</p>
<h1 id="15ã€BIOã€NIOã€AIO-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#15ã€BIOã€NIOã€AIO-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="15ã€BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>15ã€BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡BIO</p>
<p>ä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>JDK1.4ä¹‹å‰ï¼Œå»ºç«‹ç½‘ç»œè¿æ¥çš„æ—¶å€™é‡‡ç”¨BIOæ¨¡å¼ï¼Œå…ˆåœ¨å¯åŠ¨æœåŠ¡ç«¯socketï¼Œç„¶åå¯åŠ¨å®¢æˆ·ç«¯socketï¼Œå¯¹æœåŠ¡ç«¯é€šä¿¡ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼Œå…ˆåˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦æœ‰çº¿ç¨‹å“åº”ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šä¸€ç›´ç­‰å¾…æˆ–è€…é­åˆ°æ‹’ç»è¯·æ±‚ï¼Œå¦‚æœæœ‰çš„è¯ä¼šç­‰å¾…è¯·æ±‚ç»“æŸåæ‰ç»§ç»­æ‰§è¡Œã€‚</p>
<p>ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡NIO</p>
<p>NIOä¸»è¦æ˜¯æƒ³è§£å†³BIOçš„å¤§å¹¶å‘é—®é¢˜ï¼ŒBIOæ˜¯æ¯ä¸€ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“è¯·æ±‚è¿‡å¤šæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼ŒæœåŠ¡å™¨ç˜«ç—ªäº†ã€‚</p>
<p>JDK1.4å¼€å§‹æ”¯æŒNIOï¼Œé€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ã€‚</p>
<p>ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡AIO</p>
<p>ä¸€ä¸ªæœ‰æ•ˆè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>JDK1.7å¼€å§‹æ”¯æŒAIOï¼Œé€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿çš„ç»“æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨OSå‚ä¸å¹¶å‘æ“ä½œã€‚</p>
<h1 id="16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ</h1><p>exist<br>createFile<br>createDirectory<br>write<br>read<br>copy<br>size<br>delete<br>move</p>
<h1 id="17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"><a href="#17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ" class="headerlink" title="17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"></a>17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</h1><p>æ‰€è°“åå°„ï¼Œæ˜¯javaåœ¨è¿è¡Œæ—¶è¿›è¡Œè‡ªæˆ‘è§‚å¯Ÿçš„èƒ½åŠ›ï¼Œé€šè¿‡classã€constructorã€fieldã€methodå››ä¸ªæ–¹æ³•è·å–ä¸€ä¸ªç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p>
<p>åœ¨Javaè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¯¹ä»»æ„ä¸€ä¸ªç±»ï¼Œå¯ä»¥çŸ¥é“ç±»æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚è¿™ç§åŠ¨æ€è·å–ç±»çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½æ¥è‡ªäºåå°„æœºåˆ¶ã€‚</p>
<h1 id="18ã€ä»€ä¹ˆæ˜¯-java-åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ"><a href="#18ã€ä»€ä¹ˆæ˜¯-java-åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="18ã€ä»€ä¹ˆæ˜¯ java åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ"></a>18ã€ä»€ä¹ˆæ˜¯ java åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ</h1><p>åºåˆ—åŒ–å°±æ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¯¹è±¡æµçš„æœºåˆ¶ã€‚å°†å¯¹è±¡çš„å†…å®¹æµåŒ–ï¼Œå°†æµåŒ–åçš„å¯¹è±¡ä¼ è¾“äºç½‘ç»œä¹‹é—´ã€‚</p>
<p>åºåˆ—åŒ–æ˜¯é€šè¿‡å®ç°serializableæ¥å£ï¼Œè¯¥æ¥å£æ²¡æœ‰éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œimplement Serializableåªæ˜¯ä¸ºäº†æ ‡æ³¨è¯¥å¯¹è±¡æ˜¯å¯è¢«åºåˆ—åŒ–çš„ï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å‡ºæµï¼ˆFileOutputStreamï¼‰æ¥æ„é€ ä¸€ä¸ªObjectOutputStreamå¯¹è±¡ï¼Œæ¥ç€ä½¿ç”¨ObjectOutputStreamå¯¹è±¡çš„writeObejctï¼ˆObject objectï¼‰æ–¹æ³•å°±å¯ä»¥å°†å‚æ•°çš„objå¯¹è±¡åˆ°ç£ç›˜ï¼Œéœ€è¦æ¢å¤çš„æ—¶å€™ä½¿ç”¨è¾“å…¥æµã€‚</p>
<p>åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå®¹æ˜“ä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡HTTPé€šè¿‡Internetåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“è¯¥å¯¹è±¡ã€‚åœ¨å¦ä¸€ç«¯ï¼Œååºåˆ—åŒ–å°†ä»æµä¸­å¿ƒæ„é€ æˆå¯¹è±¡ã€‚</p>
<p>ä¸€èˆ¬ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œäº§ç”Ÿå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éšç€ç¨‹åºçš„åœæ­¢è€Œæ¶ˆå¤±ï¼Œä½†æˆ‘ä»¬æƒ³å°†æŸäº›å¯¹è±¡ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åºåˆ—åŒ–å°†å¯¹è±¡ä¿å­˜åœ¨ç£ç›˜ï¼Œéœ€è¦ä½¿ç”¨çš„æ—¶å€™é€šè¿‡ååºåˆ—åŒ–è·å–åˆ°ã€‚</p>
<p>å¯¹è±¡åºåˆ—åŒ–çš„æœ€ä¸»è¦ç›®çš„å°±æ˜¯ä¼ é€’å’Œä¿å­˜å¯¹è±¡ï¼Œä¿å­˜å¯¹è±¡çš„å®Œæ•´æ€§å’Œå¯ä¼ é€’æ€§ã€‚</p>
<p>è­¬å¦‚é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–è€…æŠŠä¸€ä¸ªå¯¹è±¡ä¿å­˜æˆæœ¬åœ°ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨åºåˆ—åŒ–ã€‚</p>
<h1 id="19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ</p>
<p>æƒ³å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¤åˆ¶ï¼Œåˆæƒ³ä¿ç•™åŸæœ‰çš„å¯¹è±¡è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å…‹éš†äº†ã€‚</p>
<p>ï¼ˆ2ï¼‰å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ</p>
<p>å®ç°Cloneableæ¥å£ï¼Œé‡å†™cloneæ–¹æ³•ï¼›<br>å®ç°Serializableæ¥å£ï¼Œé€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°å…‹éš†ï¼Œå¯ä»¥å®ç°çœŸæ­£çš„æ·±å…‹éš†ã€‚<br>BeanUtilsï¼Œapacheå’ŒSpringéƒ½æä¾›äº†beanå·¥å…·ï¼Œåªæ˜¯è¿™éƒ½æ˜¯æµ…å…‹éš†ã€‚</p>
<p>ï¼ˆ3ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æµ…æ‹·è´ï¼šä»…ä»…å…‹éš†åŸºæœ¬ç±»å‹å˜é‡ï¼Œä¸å…‹éš†å¼•ç”¨ç±»å‹å˜é‡ï¼›<br>æ·±å…‹éš†ï¼šæ—¢å…‹éš†åŸºæœ¬ç±»å‹å˜é‡ï¼Œåˆå…‹éš†å¼•ç”¨ç±»å‹å˜é‡ï¼›</p>
<p>ï¼ˆ4ï¼‰ä»£ç å®ä¾‹</p>
<h1 id="20ã€throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ"><a href="#20ã€throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="20ã€throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ"></a>20ã€throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰throw</p>
<p>ä½œç”¨åœ¨æ–¹æ³•å†…ï¼Œè¡¨ç¤ºæŠ›å‡ºå…·ä½“å¼‚å¸¸ï¼Œç”±æ–¹æ³•ä½“å†…çš„è¯­å¥å¤„ç†ï¼›<br>ä¸€å®šæŠ›å‡ºäº†å¼‚å¸¸ï¼›</p>
<p>ï¼ˆ2ï¼‰throws</p>
<p>ä½œç”¨åœ¨æ–¹æ³•çš„å£°æ˜ä¸Šï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸ï¼Œç”±è°ƒç”¨è€…æ¥è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼›<br>å¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä¸ä¸€å®šä¼šå‘ç”Ÿå¼‚å¸¸ï¼›</p>
<h1 id="21ã€finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#21ã€finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="21ã€finalã€finallyã€finalize æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>21ã€finalã€finallyã€finalize æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>finalå¯ä»¥ä¿®é¥°ç±»ï¼Œå˜é‡ï¼Œæ–¹æ³•ï¼Œä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä¿®é¥°çš„å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™</p>
<p>finallyç”¨äºæŠ›å¼‚å¸¸ï¼Œfinallyä»£ç å—å†…è¯­å¥æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šåœ¨æ‰§è¡Œfinallyï¼Œå¸¸ç”¨äºä¸€äº›æµçš„å…³é—­ã€‚</p>
<p>finalizeæ–¹æ³•ç”¨äºåƒåœ¾å›æ”¶ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦æˆ‘ä»¬å®ç°finalizeï¼Œå½“å¯¹è±¡è¢«å›æ”¶çš„æ—¶å€™éœ€è¦é‡Šæ”¾ä¸€äº›èµ„æºï¼Œæ¯”å¦‚socketé“¾æ¥ï¼Œåœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶åˆ›å»ºï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼Œé‚£ä¹ˆéœ€è¦å®ç°finalizeæ–¹æ³•ï¼Œå…³é—­è¿™ä¸ªé“¾æ¥ã€‚</p>
<p>ä½†æ˜¯å½“è°ƒç”¨finalizeæ–¹æ³•åï¼Œå¹¶ä¸æ„å‘³ç€gcä¼šç«‹å³å›æ”¶è¯¥å¯¹è±¡ï¼Œæ‰€ä»¥æœ‰å¯èƒ½çœŸæ­£è°ƒç”¨çš„æ—¶å€™ï¼Œå¯¹è±¡åˆä¸éœ€è¦å›æ”¶äº†ï¼Œç„¶ååˆ°äº†çœŸæ­£è¦å›æ”¶çš„æ—¶å€™ï¼Œå› ä¸ºä¹‹å‰è°ƒç”¨è¿‡ä¸€æ¬¡ï¼Œè¿™æ¬¡åˆä¸ä¼šè°ƒç”¨äº†ï¼Œäº§ç”Ÿé—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸æ¨èä½¿ç”¨finalizeæ–¹æ³•ã€‚</p>
<h1 id="22ã€try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ"><a href="#22ã€try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ" class="headerlink" title="22ã€try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ"></a>22ã€try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</h1><h1 id="23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ"></a>23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ</h1><p>NullPointerExceptionï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ï¼›<br>SQLExceptionï¼šæ•°æ®åº“ç›¸å…³çš„å¼‚å¸¸ï¼›<br>IndexOutOfBoundsExceptionï¼šæ•°ç»„ä¸‹è§’æ ‡è¶Šç•Œå¼‚å¸¸ï¼›<br>FileNotFoundExceptionï¼šæ‰“å¼€æ–‡ä»¶å¤±è´¥æ—¶æŠ›å‡ºï¼›<br>IOExceptionï¼šå½“å‘ç”ŸæŸç§IOå¼‚å¸¸æ—¶æŠ›å‡ºï¼›<br>ClassCastExceptionï¼šå½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ï¼›<br>NoSuchMethodExceptionï¼šæ— æ³•æ‰¾åˆ°æŸä¸€æ–¹æ³•æ—¶ï¼ŒæŠ›å‡ºï¼›<br>ArrayStoreExceptionï¼šè¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼›<br>NumberFormatExceptionï¼šå½“è¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—æ—¶ï¼Œå¤±è´¥äº†ï¼ŒæŠ›å‡ºï¼›<br>IllegalArgumentException æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚<br>ArithmeticExceptionå½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°â€œé™¤ä»¥é›¶â€æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ </p>
<h1 id="24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h1><p>Javaä¸­Objectæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<p>public native int hashcode();</p>
<p>ï¼ˆ1ï¼‰hashcode()æ–¹æ³•çš„ä½œç”¨</p>
<p>hashcode()æ–¹æ³•ä¸»è¦é…åˆåŸºäºæ•£åˆ—çš„é›†åˆä¸€èµ·ä½¿ç”¨ï¼Œæ¯”å¦‚HashSetã€HashMapã€HashTableã€‚</p>
<p>å½“é›†åˆéœ€è¦æ·»åŠ æ–°çš„å¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„hashcode()æ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”çš„hashcodeå€¼ï¼Œå®é™…ä¸Šhashmapä¸­ä¼šæœ‰ä¸€ä¸ªtableä¿å­˜å·²ç»å­˜è¿›å»çš„å¯¹è±¡çš„hashcodeå€¼ï¼Œå¦‚æœtableä¸­æ²¡æœ‰æ”¹hashcodeå€¼ï¼Œåˆ™ç›´æ¥å­˜å…¥ï¼Œå¦‚æœæœ‰ï¼Œå°±è°ƒç”¨equalsæ–¹æ³•ä¸æ–°å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›¸åŒå°±ä¸å­˜äº†ï¼Œä¸åŒå°±å­˜å…¥ã€‚</p>
<p>ï¼ˆ2ï¼‰equalså’Œhashcodeçš„å…³ç³»</p>
<p>å¦‚æœequalsä¸ºtrueï¼Œhashcodeä¸€å®šç›¸ç­‰ï¼› </p>
<p>å¦‚æœequalsä¸ºfalseï¼Œhashcodeä¸ä¸€å®šä¸ç›¸ç­‰ï¼›</p>
<p>å¦‚æœhashcodeå€¼ç›¸ç­‰ï¼Œequalsä¸ä¸€å®šç›¸ç­‰ï¼›</p>
<p>å¦‚æœhashcodeå€¼ä¸ç­‰ï¼Œequalsä¸€å®šä¸ç­‰ï¼›</p>
<p>ï¼ˆ3ï¼‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦é‡å†™hashcodeæ–¹æ³•</p>
<p>ï¼ˆ4ï¼‰ç™¾åº¦ç™¾ç§‘</p>
<p>hashcodeæ–¹æ³•è¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚æ”¯æŒè¯¥æ–¹æ³•æ˜¯ä¸ºå“ˆå¸Œè¡¨æä¾›ä¸€äº›ä¼˜ç‚¹ï¼Œä¾‹å¦‚ï¼Œjava.util.Hashtable æä¾›çš„å“ˆå¸Œè¡¨ã€‚ </p>
<p>hashCode çš„å¸¸è§„åå®šæ˜¯ï¼š<br>åœ¨ Java åº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œåœ¨åŒä¸€å¯¹è±¡ä¸Šå¤šæ¬¡è°ƒç”¨ hashCode æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä¸€è‡´åœ°è¿”å›ç›¸åŒçš„æ•´æ•°ï¼Œå‰ææ˜¯å¯¹è±¡ä¸Š equals æ¯”è¾ƒä¸­æ‰€ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ã€‚ä»æŸä¸€åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œåˆ°åŒä¸€åº”ç”¨ç¨‹åºçš„å¦ä¸€æ¬¡æ‰§è¡Œï¼Œè¯¥æ•´æ•°æ— éœ€ä¿æŒä¸€è‡´ã€‚<br>å¦‚æœæ ¹æ® equals(Object) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ hashCode æ–¹æ³•éƒ½å¿…é¡»ç”Ÿæˆç›¸åŒçš„æ•´æ•°ç»“æœã€‚<br>ä»¥ä¸‹æƒ…å†µä¸ æ˜¯å¿…éœ€çš„ï¼šå¦‚æœæ ¹æ® equals(java.lang.Object) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„ä»»ä¸€å¯¹è±¡ä¸Šè°ƒç”¨ hashCode æ–¹æ³•å¿…å®šä¼šç”Ÿæˆä¸åŒçš„æ•´æ•°ç»“æœã€‚ä½†æ˜¯ï¼Œç¨‹åºå‘˜åº”è¯¥çŸ¥é“ï¼Œä¸ºä¸ç›¸ç­‰çš„å¯¹è±¡ç”Ÿæˆä¸åŒæ•´æ•°ç»“æœå¯ä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚<br>å®é™…ä¸Šï¼Œç”± Object ç±»å®šä¹‰çš„ hashCode æ–¹æ³•ç¡®å®ä¼šé’ˆå¯¹ä¸åŒçš„å¯¹è±¡è¿”å›ä¸åŒçš„æ•´æ•°ã€‚ï¼ˆè¿™ä¸€èˆ¬æ˜¯é€šè¿‡å°†è¯¥å¯¹è±¡çš„å†…éƒ¨åœ°å€è½¬æ¢æˆä¸€ä¸ªæ•´æ•°æ¥å®ç°çš„ï¼Œä½†æ˜¯ JavaTM ç¼–ç¨‹è¯­è¨€ä¸éœ€è¦è¿™ç§å®ç°æŠ€å·§ã€‚ï¼‰ </p>
<p>å½“equalsæ–¹æ³•è¢«é‡å†™æ—¶ï¼Œé€šå¸¸æœ‰å¿…è¦é‡å†™ hashCode æ–¹æ³•ï¼Œä»¥ç»´æŠ¤ hashCode æ–¹æ³•çš„å¸¸è§„åå®šï¼Œè¯¥åå®šå£°æ˜ç›¸ç­‰å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„å“ˆå¸Œç ã€‚</p>
<p>ï¼ˆ5ï¼‰å°ç™½è§£é‡Š</p>
<p>1.hashcodeæ˜¯ç”¨æ¥æŸ¥æ‰¾çš„ï¼Œå¦‚æœä½ å­¦è¿‡æ•°æ®ç»“æ„å°±åº”è¯¥çŸ¥é“ï¼Œåœ¨æŸ¥æ‰¾å’Œæ’åºè¿™ä¸€ç« æœ‰<br>ä¾‹å¦‚å†…å­˜ä¸­æœ‰è¿™æ ·çš„ä½ç½®<br>0  1  2  3  4  5  6  7<br>è€Œæˆ‘æœ‰ä¸ªç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸ªå­—æ®µå«ID,æˆ‘è¦æŠŠè¿™ä¸ªç±»å­˜æ”¾åœ¨ä»¥ä¸Š8ä¸ªä½ç½®ä¹‹ä¸€ï¼Œå¦‚æœä¸ç”¨hashcodeè€Œä»»æ„å­˜æ”¾ï¼Œé‚£ä¹ˆå½“æŸ¥æ‰¾æ—¶å°±éœ€è¦åˆ°è¿™å…«ä¸ªä½ç½®é‡ŒæŒ¨ä¸ªå»æ‰¾ï¼Œæˆ–è€…ç”¨äºŒåˆ†æ³•ä¸€ç±»çš„ç®—æ³•ã€‚<br>ä½†å¦‚æœç”¨hashcodeé‚£å°±ä¼šä½¿æ•ˆç‡æé«˜å¾ˆå¤šã€‚<br>æˆ‘ä»¬è¿™ä¸ªç±»ä¸­æœ‰ä¸ªå­—æ®µå«ID,é‚£ä¹ˆæˆ‘ä»¬å°±å®šä¹‰æˆ‘ä»¬çš„hashcodeä¸ºIDï¼…8ï¼Œç„¶åæŠŠæˆ‘ä»¬çš„ç±»å­˜æ”¾åœ¨å–å¾—å¾—ä½™æ•°é‚£ä¸ªä½ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬çš„IDä¸º9ï¼Œ9é™¤8çš„ä½™æ•°ä¸º1ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠè¯¥ç±»å­˜åœ¨1è¿™ä¸ªä½ç½®ï¼Œå¦‚æœIDæ˜¯13ï¼Œæ±‚å¾—çš„ä½™æ•°æ˜¯5ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠè¯¥ç±»æ”¾åœ¨5è¿™ä¸ªä½ç½®ã€‚è¿™æ ·ï¼Œä»¥ååœ¨æŸ¥æ‰¾è¯¥ç±»æ—¶å°±å¯ä»¥é€šè¿‡IDé™¤ 8æ±‚ä½™æ•°ç›´æ¥æ‰¾åˆ°å­˜æ”¾çš„ä½ç½®äº†ã€‚</p>
<p>2.ä½†æ˜¯å¦‚æœä¸¤ä¸ªç±»æœ‰ç›¸åŒçš„hashcodeæ€ä¹ˆåŠé‚£ï¼ˆæˆ‘ä»¬å‡è®¾ä¸Šé¢çš„ç±»çš„IDä¸æ˜¯å”¯ä¸€çš„ï¼‰ï¼Œä¾‹å¦‚9é™¤ä»¥8å’Œ17é™¤ä»¥8çš„ä½™æ•°éƒ½æ˜¯1ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸æ˜¯åˆæ³•çš„ï¼Œå›ç­”æ˜¯ï¼šå¯ä»¥è¿™æ ·ã€‚é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿåœ¨è¿™ä¸ªæ—¶å€™å°±éœ€è¦å®šä¹‰ equalsäº†ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ hashcodeæ¥åˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦å­˜æ”¾æŸä¸ªæ¡¶é‡Œï¼Œä½†è¿™ä¸ªæ¡¶é‡Œå¯èƒ½æœ‰å¾ˆå¤šç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å†é€šè¿‡ equals æ¥åœ¨è¿™ä¸ªæ¡¶é‡Œæ‰¾åˆ°æˆ‘ä»¬è¦çš„ç±»ã€‚<br>é‚£ä¹ˆã€‚é‡å†™äº†equals()ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é‡å†™hashCode()å‘¢ï¼Ÿ<br>æƒ³æƒ³ï¼Œä½ è¦åœ¨ä¸€ä¸ªæ¡¶é‡Œæ‰¾ä¸œè¥¿ï¼Œä½ å¿…é¡»å…ˆè¦æ‰¾åˆ°è¿™ä¸ªæ¡¶å•Šï¼Œä½ ä¸é€šè¿‡é‡å†™hashcode()æ¥æ‰¾åˆ°æ¡¶ï¼Œå…‰é‡å†™equals()æœ‰ä»€ä¹ˆç”¨å•Šã€‚</p>
<h1 id="25ã€java-ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#25ã€java-ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="25ã€java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>25ã€java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰String</p>
<p>Stringæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ¯æ¬¡å¯¹Stringç±»å‹çš„æ”¹å˜æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
<p>ï¼ˆ2ï¼‰StringBuilder</p>
<p>çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œå¤šç”¨äºå•çº¿ç¨‹ã€‚</p>
<p>ï¼ˆ3ï¼‰StringBuffer</p>
<p>çº¿ç¨‹å®‰å…¨ï¼Œç”±äºåŠ é”çš„åŸå› ï¼Œæ•ˆç‡ä¸å¦‚StringBuilderï¼Œå¤šç”¨äºå¤šçº¿ç¨‹ã€‚</p>
<p>ä¸é¢‘ç¹çš„å­—ç¬¦ä¸²æ“ä½œä½¿ç”¨Stringï¼Œæ“ä½œé¢‘ç¹çš„æƒ…å†µä¸å»ºè®®ä½¿ç”¨Stringã€‚</p>
<p>StringBuilder &gt; StringBuffer &gt; Stringã€‚</p>
<p>26ã€java ä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹ï¼Ÿ<br>ï¼ˆ1ï¼‰å¼ºå¼•ç”¨</p>
<p>Javaä¸­é»˜è®¤å£°æ˜çš„å°±æ˜¯å¼ºå¼•ç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<p>Object obj &#x3D; new Object();<br>obj &#x3D; null;<br>åªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ°¸è¿œä¸ä¼šå›æ”¶è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚å¦‚æœæƒ³è¢«å›æ”¶ï¼Œå¯ä»¥å°†å¯¹è±¡ç½®ä¸ºnullï¼› </p>
<p>ï¼ˆ2ï¼‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰</p>
<p>åœ¨å†…å­˜è¶³å¤Ÿçš„æ—¶å€™ï¼Œè½¯å¼•ç”¨ä¸ä¼šè¢«å›æ”¶ï¼Œåªæœ‰åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šå›æ”¶è½¯å¼•ç”¨å¯¹è±¡ï¼Œå¦‚æœå›æ”¶äº†è½¯å¼•ç”¨å¯¹è±¡ä¹‹åä»ç„¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šè·‘å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p>
<p>byte[] buff &#x3D; new byte[1024 * 1024];<br>SoftReference&lt;byte[]&gt; sr &#x3D; new SoftReference&lt;&gt;(buff);</p>
<p>ï¼ˆ3ï¼‰å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</p>
<p>è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¼±å¼•ç”¨å°±ä¼šè¢«å›æ”¶ã€‚</p>
<p>ï¼ˆ4ï¼‰è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰</p>
<p>ï¼ˆ5ï¼‰å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰</p>
<p>å¼•ç”¨é˜Ÿåˆ—å¯ä»¥ä¸è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ä¸€èµ·é…åˆä½¿ç”¨ã€‚</p>
<p>å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰å¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªå¼•ç”¨åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚</p>
<p>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦åŠ å…¥äº†å¼•ç”¨ï¼Œæ¥åˆ¤æ–­è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ï¼Œè¿™æ ·å¯ä»¥åœ¨å¯¹è±¡è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›å¿…è¦çš„æªæ–½ã€‚</p>
<h1 id="27ã€åœ¨-Java-ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ"><a href="#27ã€åœ¨-Java-ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ" class="headerlink" title="27ã€åœ¨ Java ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ"></a>27ã€åœ¨ Java ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ</h1><p>é™æ€å˜é‡å±äºç±»æœ¬èº«ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ†é…å†…å­˜ï¼Œå¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼›<br>éé™æ€å˜é‡å±äºç±»çš„å¯¹è±¡ï¼Œåªæœ‰åœ¨ç±»çš„å¯¹è±¡äº§ç”Ÿæ—¶ï¼Œæ‰ä¼šåˆ†é…å†…å­˜ï¼Œé€šè¿‡ç±»çš„å®ä¾‹å»è®¿é—®ï¼›<br>é™æ€æ–¹æ³•ä¹Ÿå±äºç±»æœ¬èº«ï¼Œä½†æ˜¯æ­¤æ—¶æ²¡æœ‰ç±»çš„å®ä¾‹ï¼Œå†…å­˜ä¸­æ²¡æœ‰éé™æ€å˜é‡ï¼Œæ‰€ä»¥æ— æ³•è°ƒç”¨ã€‚</p>
<h1 id="28ã€è¯´è¯´Java-Beançš„å‘½åè§„èŒƒ"><a href="#28ã€è¯´è¯´Java-Beançš„å‘½åè§„èŒƒ" class="headerlink" title="28ã€è¯´è¯´Java Beançš„å‘½åè§„èŒƒ"></a>28ã€è¯´è¯´Java Beançš„å‘½åè§„èŒƒ</h1><p>JavaBean ç±»å¿…é¡»æ˜¯ä¸€ä¸ªå…¬å…±ç±»ï¼Œå¹¶å°†å…¶è®¿é—®å±æ€§è®¾ç½®ä¸º public<br>JavaBean ç±»å¿…é¡»æœ‰ä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•°ï¼šç±»ä¸­å¿…é¡»æœ‰ä¸€ä¸ªä¸å¸¦å‚æ•°çš„å…¬ç”¨æ„é€ å™¨ï¼Œæ­¤æ„é€ å™¨ä¹Ÿåº”è¯¥é€šè¿‡è°ƒç”¨å„ä¸ªç‰¹æ€§çš„è®¾ç½®æ–¹æ³•æ¥è®¾ç½®ç‰¹æ€§çš„ç¼ºçœå€¼ã€‚<br>ä¸€ä¸ªjavaBeanç±»ä¸åº”æœ‰å…¬å…±å®ä¾‹å˜é‡ï¼Œç±»å˜é‡éƒ½ä¸ºprivate<br>æŒæœ‰å€¼åº”è¯¥é€šè¿‡ä¸€ç»„å­˜å–æ–¹æ³•ï¼ˆgetXxx å’Œ setXxxï¼‰æ¥è®¿é—®ï¼šå¯¹äºæ¯ä¸ªç‰¹æ€§ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå¸¦åŒ¹é…å…¬ç”¨ getter å’Œ setter æ–¹æ³•çš„ä¸“ç”¨å®ä¾‹å˜é‡ã€‚<br>å±æ€§ä¸ºå¸ƒå°”ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ isXxx() æ–¹æ³•ä»£æ›¿ getXxx() æ–¹æ³•ã€‚</p>
<p>é€šå¸¸å±æ€§åæ˜¯è¦å’Œ åŒ…åã€ç±»åã€æ–¹æ³•åã€å­—æ®µåã€å¸¸é‡åä½œå‡ºåŒºåˆ«çš„:</p>
<p>é¦–å…ˆ:å¿…é¡»ç”¨è‹±æ–‡ï¼Œä¸è¦ç”¨æ±‰è¯­æ‹¼éŸ³</p>
<p>ï¼ˆ1ï¼‰åŒ…(package)</p>
<p>ç”¨äºå°†å®Œæˆä¸åŒåŠŸèƒ½çš„ç±»åˆ†é—¨åˆ«ç±»ï¼Œæ”¾åœ¨ä¸åŒçš„ç›®å½•(åŒ…)ä¸‹ï¼ŒåŒ…çš„å‘½åè§„åˆ™ï¼šå°†å…¬å¸åŸŸååè½¬ä½œä¸ºåŒ…åã€‚æ¯”å¦‚<a target="_blank" rel="noopener" href="http://www.sohu.com/">www.sohu.com</a> å¯¹äºåŒ…åï¼šæ¯ä¸ªå­—æ¯éƒ½éœ€è¦å°å†™ã€‚æ¯”å¦‚ï¼šcom.sohu.test;è¯¥åŒ…ä¸‹çš„Testç±»çš„å…¨åæ˜¯ï¼šcom.sohu.Test.Java ã€‚</p>
<p>å¦‚æœå®šä¹‰ç±»çš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨package,é‚£ä¹ˆjavaå°±è®¤ä¸ºæˆ‘ä»¬æ‰€å®šä¹‰çš„ç±»ä½äºé»˜è®¤åŒ…é‡Œé¢(default package)ã€‚</p>
<p>ï¼ˆ2ï¼‰ç±»</p>
<p>é¦–å­—æ¯å¤§å†™ï¼Œå¦‚æœä¸€ä¸ªç±»ç”±å¤šä¸ªå•è¯æ„æˆï¼Œé‚£ä¹ˆæ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½å¤§å†™ï¼Œè€Œä¸”ä¸­é—´ä¸ä½¿ç”¨ä»»ä½•çš„è¿æ¥ç¬¦ã€‚å°½é‡ä½¿ç”¨è‹±æ–‡ã€‚å¦‚ConnectionFactory</p>
<p>ï¼ˆ3ï¼‰æ–¹æ³•</p>
<p>é¦–å•è¯å…¨éƒ¨å°å†™ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•ç”±å¤šä¸ªå•è¯æ„æˆï¼Œé‚£ä¹ˆä»ç¬¬äºŒä¸ªå•è¯å¼€å§‹é¦–å­—æ¯å¤§å†™ï¼Œä¸ä½¿ç”¨è¿æ¥ç¬¦ã€‚addPerson</p>
<p>ï¼ˆ4ï¼‰å­—æ®µ</p>
<p>ä¸æ–¹æ³•ç›¸åŒã€‚å¦‚ageOfPerson</p>
<p>ï¼ˆ5ï¼‰å¸¸é‡</p>
<p>æ‰€æœ‰å•è¯çš„å­—æ¯éƒ½æ˜¯å¤§å†™ï¼Œå¦‚æœæœ‰å¤šä¸ªå•è¯ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸‹åˆ’çº¿é“¾æ¥å³å¯ã€‚</p>
<p>å¦‚ï¼špublic static final int AGE_OF_PERSON &#x3D; 20; &#x2F;&#x2F;é€šå¸¸åŠ ä¸Šstatic</p>
<h1 id="29ã€Java-Bean-å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ"><a href="#29ã€Java-Bean-å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ" class="headerlink" title="29ã€Java Bean å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ"></a>29ã€Java Bean å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ</h1><p>public class User {<br>    private String busName;<br>    private String pCount;<br>    private Boolean isRunning;<br>    &#x2F;&#x2F;æ­£ç¡®çš„å‘½åæ–¹å¼ï¼Œé©¼å³°å¼çš„<br>    public String getBusName() {<br>        return busName;<br>    }<br>    public void setBusName(String busName) {<br>        this.busName &#x3D; busName;<br>    }<br>    &#x2F;&#x2F;è¿™æ˜¯ä»€ä¹ˆï¼Ÿ<br>    public String getpCount() {<br>        return pCount;<br>    }<br>    public void setpCount(String pCount) {<br>        this.pCount &#x3D; pCount;<br>    }<br>    &#x2F;&#x2F;è¿™ä¸ªä¹Ÿæ˜¯ä¸å…è®¸çš„<br>    public Boolean getIsRunning() {<br>        return isRunning;<br>    }<br>    public void setIsRunning(Boolean isRunning) {<br>        this.isRunning &#x3D; isRunning;<br>    }<br>}</p>
<ol>
<li>javabeanå±æ€§å‘½åå°½é‡ä½¿ç”¨å¸¸è§„çš„é©¼å³°å¼å‘½åè§„åˆ™</li>
<li>å±æ€§åç¬¬ä¸€ä¸ªå•è¯å°½é‡é¿å…ä½¿ç”¨ä¸€ä¸ªå­—æ¯ï¼šå¦‚eBookï¼Œ eMailã€‚</li>
<li>booleanå±æ€§åé¿å…ä½¿ç”¨ â€œisâ€ å¼€å¤´çš„åç§°</li>
<li>éšç€jdkï¼Œ eclipseï¼Œ spring ç­‰è½¯ä»¶ç‰ˆæœ¬çš„ä¸æ–­æé«˜ï¼Œ åº•ç‰ˆæœ¬çš„å‡ºç°çš„é—®é¢˜å¯èƒ½åœ¨é«˜ç‰ˆæœ¬ä¸­è§£å†³äº†ï¼Œ ä½ç‰ˆæœ¬åŸæ¥æ­£å¸¸çš„ä»£ç å¯èƒ½åœ¨é«˜ç‰ˆæœ¬ç¯å¢ƒä¸‹ä¸å†æ”¯æŒã€‚</li>
</ol>
<h1 id="30ã€ä»€ä¹ˆæ˜¯-Java-çš„å†…å­˜æ¨¡å‹"><a href="#30ã€ä»€ä¹ˆæ˜¯-Java-çš„å†…å­˜æ¨¡å‹" class="headerlink" title="30ã€ä»€ä¹ˆæ˜¯ Java çš„å†…å­˜æ¨¡å‹?"></a>30ã€ä»€ä¹ˆæ˜¯ Java çš„å†…å­˜æ¨¡å‹?</h1><p>åœ¨äº†è§£ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦æå‡º Java å†…å­˜æ¨¡å‹ã€‚</p>
<p>ä¹‹å‰æåˆ°è¿‡å¹¶å‘ç¼–ç¨‹æœ‰ä¸‰å¤§é—®é¢˜</p>
<p>CPU ç¼“å­˜ï¼Œåœ¨å¤šæ ¸ CPU çš„æƒ…å†µä¸‹ï¼Œå¸¦æ¥äº†å¯è§æ€§é—®é¢˜<br>æ“ä½œç³»ç»Ÿå¯¹å½“å‰æ‰§è¡Œçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå¸¦æ¥äº†åŸå­æ€§é—®é¢˜<br>è¯‘å™¨æŒ‡ä»¤é‡æ’ä¼˜åŒ–ï¼Œå¸¦æ¥äº†æœ‰åºæ€§é—®é¢˜<br>ä¸ºäº†è§£å†³å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§é—®é¢˜ï¼Œæå‡ºäº† JSR-133ï¼Œæ–°çš„ Java å†…å­˜æ¨¡å‹ï¼ŒJDK 5 å¼€å§‹ä½¿ç”¨ã€‚</p>
<p>ç®€å•æ€»ç»“ä¸‹</p>
<p>Java å†…å­˜æ¨¡å‹æ˜¯ JVM çš„ä¸€ç§è§„èŒƒ<br>å®šä¹‰äº†å…±äº«å†…å­˜åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­è¯»å†™æ“ä½œè¡Œä¸ºçš„è§„èŒƒ<br>å±è”½äº†å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„è®¿é—®å·®å¼‚ï¼Œä¿è¯äº† Java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹å¯¹å†…å­˜çš„è®¿é—®æ•ˆæœä¸€è‡´<br>è§£å†³å¹¶å‘é—®é¢˜é‡‡ç”¨çš„æ–¹å¼ï¼šé™åˆ¶å¤„ç†å™¨ä¼˜åŒ–å’Œä½¿ç”¨å†…å­˜å±éšœ<br>å¢å¼ºäº†ä¸‰ä¸ªåŒæ­¥åŸè¯­ï¼ˆsynchronizedã€volatileã€finalï¼‰çš„å†…å­˜è¯­ä¹‰<br>å®šä¹‰äº† happens-before è§„åˆ™</p>
<h1 id="31ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ"><a href="#31ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ" class="headerlink" title="31ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ"></a>31ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰é‡è½½æ˜¯å¤šæ€çš„é›†ä¸­ä½“ç°ï¼Œåœ¨ç±»ä¸­ï¼Œè¦ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»å‹æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨é‡è½½ã€‚</p>
<p>ï¼ˆ2ï¼‰é‡å†™çš„ä½¿ç”¨æ˜¯å»ºç«‹åœ¨ç»§æ‰¿å…³ç³»ä¸Šçš„ï¼Œå­ç±»åœ¨ç»§æ‰¿çˆ¶ç±»çš„åŸºç¡€ä¸Šï¼Œå¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨é‡å†™ã€‚</p>
<p>ï¼ˆ3ï¼‰ç®€å•æ€»ç»“ï¼š</p>
<p>é‡è½½æ˜¯å¤šæ ·æ€§ï¼Œé‡å†™æ˜¯å¢å¼ºå‰‚ï¼›<br>ç›®çš„æ˜¯æé«˜ç¨‹åºçš„å¤šæ ·æ€§å’Œå¥å£®æ€§ï¼Œä»¥é€‚é…ä¸åŒåœºæ™¯ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨é‡è½½è¿›è¡Œæ‰©å±•ï¼›<br>ç›®çš„æ˜¯åœ¨ä¸ä¿®æ”¹åŸæ–¹æ³•åŠæºä»£ç çš„åŸºç¡€ä¸Šå¯¹æ–¹æ³•è¿›è¡Œæ‰©å±•æˆ–å¢å¼ºæ—¶ï¼Œä½¿ç”¨é‡å†™ï¼›</p>
<p>ç”Ÿæ´»ä¾‹å­ï¼š</p>
<p>ä½ æƒ³åƒä¸€ç¢—é¢ï¼Œæˆ‘ç»™ä½ æä¾›äº†æ‹‰é¢ï¼Œç‚’é¢ï¼Œåˆ€å‰Šé¢ï¼Œæ‹…æ‹…é¢ä¾›ä½ é€‰æ‹©ï¼Œè¿™æ˜¯é‡è½½ï¼›<br>ä½ æƒ³åƒä¸€ç¢—é¢ï¼Œæˆ‘ä¸ä½†ç»™ä½ ç«¯æ¥äº†é¢ï¼Œè¿˜ç»™ä½ åŠ äº†é’èœï¼ŒåŠ äº†é¸¡è›‹ï¼Œè¿™ä¸ªæ˜¯é‡å†™ï¼›</p>
<p>è®¾è®¡æ¨¡å¼ï¼š</p>
<p>cglibå®ç°åŠ¨æ€ä»£ç†ï¼Œæ ¸å¿ƒåŸç†ç”¨çš„å°±æ˜¯æ–¹æ³•çš„é‡å†™ï¼›</p>
<p>è¯¦ç»†è§£ç­”ï¼š</p>
<p>Javaçš„é‡è½½(overload) æœ€é‡è¦çš„åº”ç”¨åœºæ™¯å°±æ˜¯æ„é€ å™¨çš„é‡è½½ï¼Œæ„é€ å™¨é‡è½½åï¼Œæä¾›å¤šç§å½¢å‚å½¢å¼çš„æ„é€ å™¨ï¼Œå¯ä»¥åº”å¯¹ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼ŒåŠ å¼ºç¨‹åºçš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ€è¿‘å­¦ä¹ çš„Springæºç ä¸­çš„ClassPathXmlApplicationContextï¼Œå®ƒçš„æ„é€ å‡½æ•°ä½¿ç”¨é‡è½½ä¸€å…±æä¾›äº†10ä¸ªæ„é€ å‡½æ•°ï¼Œè¿™æ ·å°±ä¸ºä¸šåŠ¡çš„é€‰æ‹©æä¾›äº†å¤šé€‰æ‹©æ€§ã€‚åœ¨åº”ç”¨åˆ°æ–¹æ³•ä¸­æ—¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¢å¼ºæ–¹æ³•çš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„å„ç§å·¥å…·ç±»ï¼Œæ¯”å¦‚æˆ‘ç›®å‰å·¥ä½œä¸­çš„çŸ­ä¿¡å·¥å…·ç±»SMSUtil, å‘çŸ­ä¿¡çš„æ–¹æ³•å°±ä¼šä½¿ç”¨é‡è½½ï¼Œé’ˆå¯¹ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„ä¸åŒå½¢å‚ï¼Œæä¾›çŸ­ä¿¡å‘é€æ–¹æ³•ï¼Œè¿™æ ·æé«˜äº†å·¥å…·ç±»çš„æ‰©å±•æ€§å’Œå¥å£®æ€§ã€‚<br>æ€»ç»“ï¼šé‡è½½å¿…é¡»è¦ä¿®æ”¹æ–¹æ³•(æ„é€ å™¨)çš„å½¢å‚åˆ—è¡¨ï¼Œå¯ä»¥ä¿®æ”¹æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯å³è®¿é—®æƒé™ï¼›ä½¿ç”¨èŒƒå›´æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œç›®çš„æ˜¯å¯¹æ–¹æ³•(æ„é€ å™¨)è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œä»¥åº”å¯¹å¤šä¸šåŠ¡åœºæ™¯çš„ä¸åŒä½¿ç”¨éœ€æ±‚ã€‚æé«˜ç¨‹åºçš„å¥å£®æ€§å’Œæ‰©å±•æ€§ã€‚<br> javaçš„é‡å†™(override) åªè¦ç”¨äºå­ç±»å¯¹çˆ¶ç±»æ–¹æ³•çš„æ‰©å±•æˆ–ä¿®æ”¹ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸ºäº†é¿å…ç¨‹åºæ··ä¹±ï¼Œé‡å†™ä¸€èˆ¬éƒ½æ˜¯ä¸ºäº†æ–¹æ³•çš„æ‰©å±•ï¼Œæ¯”å¦‚åœ¨cglibæ–¹å¼å®ç°çš„åŠ¨æ€ä»£ç†ä¸­ï¼Œä»£ç†ç±»å°±æ˜¯ç»§æ‰¿äº†ç›®æ ‡ç±»ï¼Œå¯¹ç›®æ ‡ç±»çš„æ–¹æ³•è¿›è¡Œé‡å†™ï¼ŒåŒæ—¶åœ¨æ–¹æ³•å‰åè¿›è¡Œåˆ‡é¢ç»‡å…¥ã€‚</p>
<p>æ€»ç»“ï¼šæ–¹æ³•é‡å†™æ—¶ï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼å¾—ç±»å‹æ˜¯ä¸€å®šä¸èƒ½ä¿®æ”¹çš„ï¼Œå¼‚å¸¸å¯ä»¥å‡å°‘æˆ–è€…åˆ é™¤ï¼Œä½†æ˜¯ä¸èƒ½æŠ›å‡ºæ–°çš„å¼‚å¸¸æˆ–è€…æ›´å¹¿çš„å¼‚å¸¸ï¼Œæ–¹æ³•çš„è®¿é—®æƒé™å¯ä»¥é™ä½é™åˆ¶ï¼Œä½†æ˜¯ä¸èƒ½åšæ›´ä¸¥æ ¼çš„é™åˆ¶ã€‚</p>
<p>ï¼ˆ4ï¼‰åœ¨é‡Œæ°æ›¿æ¢åŸåˆ™ä¸­ï¼Œå­ç±»å¯¹çˆ¶ç±»çš„æ–¹æ³•å°½é‡ä¸è¦é‡å†™å’Œé‡è½½ã€‚ï¼ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨finalçš„æ‰‹æ®µå¼ºåˆ¶æ¥éµå¾ªï¼‰</p>
<h1 id="32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ"><a href="#32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ" class="headerlink" title="32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ"></a>32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ</h1><p>æ¥å£å’ŒæŠ½è±¡ç±»éƒ½éµå¾ªâ€é¢å‘æ¥å£è€Œä¸æ˜¯å®ç°ç¼–ç â€è®¾è®¡åŸåˆ™ï¼Œå®ƒå¯ä»¥å¢åŠ ä»£ç çš„çµæ´»æ€§ï¼Œå¯ä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚ä¸‹é¢æœ‰å‡ ä¸ªç‚¹å¯ä»¥å¸®åŠ©ä½ å›ç­”è¿™ä¸ªé—®é¢˜ï¼šåœ¨ Java ä¸­ï¼Œä½ åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚æ‰€ä»¥ä¸€æ—¦ä½ ç»§æ‰¿äº†ä¸€ä¸ªç±»ï¼Œä½ å°±å¤±å»äº†ç»§æ‰¿å…¶ä»–ç±»çš„æœºä¼šäº†ã€‚</p>
<p>æ¥å£é€šå¸¸è¢«ç”¨æ¥è¡¨ç¤ºé™„å±æè¿°æˆ–è¡Œä¸ºå¦‚ï¼š Runnable ã€ Clonable ã€ Serializable ç­‰ç­‰ï¼Œå› æ­¤å½“ä½ ä½¿ç”¨æŠ½è±¡ç±»æ¥è¡¨ç¤ºè¡Œä¸ºæ—¶ï¼Œä½ çš„ç±»å°±ä¸èƒ½åŒæ—¶æ˜¯ Runnable å’Œ Clonable( æ³¨ï¼šè¿™é‡Œçš„æ„æ€æ˜¯æŒ‡å¦‚æœæŠŠ Runnable ç­‰å®ç°ä¸ºæŠ½è±¡ç±»çš„æƒ…å†µ ) ï¼Œå› ä¸ºåœ¨ Java ä¸­ä½ ä¸èƒ½ç»§æ‰¿ä¸¤ä¸ªç±»ï¼Œä½†å½“ä½ ä½¿ç”¨æ¥å£æ—¶ï¼Œä½ çš„ç±»å°±å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªä¸åŒçš„è¡Œä¸ºã€‚</p>
<p>åœ¨ä¸€äº›å¯¹æ—¶é—´è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨ä¸­ï¼Œå€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»ï¼Œå®ƒä¼šæ¯”æ¥å£ç¨å¿«ä¸€ç‚¹ã€‚å¦‚æœå¸Œæœ›æŠŠä¸€ç³»åˆ—è¡Œä¸ºéƒ½è§„èŒƒåœ¨ç±»ç»§æ‰¿å±‚æ¬¡å†…ï¼Œå¹¶ä¸”å¯ä»¥æ›´å¥½åœ°åœ¨åŒä¸€ä¸ªåœ°æ–¹è¿›è¡Œç¼–ç ï¼Œé‚£ä¹ˆæŠ½è±¡ç±»æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚æœ‰æ—¶ï¼Œæ¥å£å’ŒæŠ½è±¡ç±»å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å£ä¸­å®šä¹‰å‡½æ•°ï¼Œè€Œåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰é»˜è®¤çš„å®ç°ã€‚</p>
<h1 id="33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼"><a href="#33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼" class="headerlink" title="33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼"></a>33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼</h1><p>new<br>clone()<br>é€šè¿‡åå°„æœºåˆ¶åˆ›å»º<br>&#x2F;&#x2F;ç”¨ Class.forNameæ–¹æ³•è·å–ç±»ï¼Œåœ¨è°ƒç”¨ç±»çš„newinstanceï¼ˆï¼‰æ–¹æ³•<br>Class&lt;?&gt; cls &#x3D; Class.forName(â€œcom.dao.Userâ€);<br>User u &#x3D; (User)cls.newInstance();<br>åºåˆ—åŒ–ååºåˆ—åŒ–<br>&#x2F;&#x2F;å°†ä¸€ä¸ªå¯¹è±¡å®ä¾‹åŒ–åï¼Œè¿›è¡Œåºåˆ—åŒ–ï¼Œå†ååºåˆ—åŒ–ï¼Œä¹Ÿå¯ä»¥è·å¾—ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿œç¨‹é€šä¿¡çš„åœºæ™¯ä¸‹ä½¿ç”¨ï¼‰<br>ObjectOutputStream out &#x3D; new ObjectOutputStream (new FileOutputStream(â€œD:&#x2F;data.txtâ€));<br>&#x2F;&#x2F;åºåˆ—åŒ–å¯¹è±¡<br>out.writeObject(user1);<br>out.close();<br>&#x2F;&#x2F;ååºåˆ—åŒ–å¯¹è±¡<br>ObjectInputStream in &#x3D; new ObjectInputStream(new FileInputStream(â€œD:&#x2F;data.txtâ€));<br>User user2 &#x3D; (User) in.readObject();<br>System.out.println(â€œååºåˆ—åŒ–userï¼šâ€ + user2);<br>in.close();</p>
<h1 id="34ã€byteç±»å‹127-1ç­‰äºå¤šå°‘"><a href="#34ã€byteç±»å‹127-1ç­‰äºå¤šå°‘" class="headerlink" title="34ã€byteç±»å‹127+1ç­‰äºå¤šå°‘"></a>34ã€byteç±»å‹127+1ç­‰äºå¤šå°‘</h1><p>byteçš„èŒƒå›´æ˜¯-128~127ã€‚</p>
<p>å­—èŠ‚é•¿åº¦ä¸º8ä½ï¼Œæœ€å·¦è¾¹çš„æ˜¯ç¬¦å·ä½ï¼Œè€Œ127çš„äºŒè¿›åˆ¶ä¸º01111111ï¼Œæ‰€ä»¥æ‰§è¡Œ+1æ“ä½œæ—¶ï¼Œ01111111å˜ä¸º10000000ã€‚</p>
<p>å¤§å®¶çŸ¥é“ï¼Œè®¡ç®—æœºä¸­å­˜å‚¨è´Ÿæ•°ï¼Œå­˜çš„æ˜¯è¡¥ç çš„å…´è¡°ã€‚å·¦è¾¹ç¬¬ä¸€ä½ä¸ºç¬¦å·ä½ã€‚</p>
<p>é‚£ä¹ˆè´Ÿæ•°çš„è¡¥ç è½¬æ¢æˆåè¿›åˆ¶å¦‚ä¸‹ï¼š</p>
<p>ä¸€ä¸ªæ•°å¦‚æœä¸ºæ­£ï¼Œåˆ™å®ƒçš„åŸç ã€åç ã€è¡¥ç ç›¸åŒï¼›ä¸€ä¸ªæ­£æ•°çš„è¡¥ç ï¼Œå°†å…¶è½¬åŒ–ä¸ºåè¿›åˆ¶ï¼Œå¯ä»¥ç›´æ¥è½¬æ¢ã€‚</p>
<p>å·²çŸ¥ä¸€ä¸ªè´Ÿæ•°çš„è¡¥ç ï¼Œå°†å…¶è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>å…ˆå¯¹å„ä½å–åï¼›<br>å°†å…¶è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼›<br>åŠ ä¸Šè´Ÿå·ï¼Œå†å‡å»1ï¼›<br>ä¾‹å¦‚10000000ï¼Œæœ€é«˜ä½æ˜¯1ï¼Œæ˜¯è´Ÿæ•°ï¼Œâ‘ å¯¹å„ä½å–åå¾—01111111ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶å°±æ˜¯127ï¼ŒåŠ ä¸Šè´Ÿå·å¾—-127ï¼Œå†å‡å»1å¾—-128ï¼›</p>
<h1 id="35ã€Java-å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#35ã€Java-å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="35ã€Java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>35ã€Java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰Collection</p>
<p>â‘  set</p>
<p>HashSetã€TreeSet</p>
<p>â‘¡ list</p>
<p>ArrayListã€LinkedListã€Vector</p>
<p>ï¼ˆ2ï¼‰Map</p>
<p>HashMapã€HashTableã€TreeMap</p>
<h1 id="36ã€Collection-å’Œ-Collections-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#36ã€Collection-å’Œ-Collections-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="36ã€Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>36ã€Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰Collectionæ˜¯æœ€åŸºæœ¬çš„é›†åˆæ¥å£ï¼ŒCollectionæ´¾ç”Ÿäº†ä¸¤ä¸ªå­æ¥å£listå’Œsetï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ç§ä¸åŒçš„å­˜å‚¨æ–¹å¼ã€‚</p>
<p>ï¼ˆ2ï¼‰Collectionsæ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå®ƒåŒ…å«å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€æ–¹æ³•ï¼ˆå¯¹é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰ï¼‰ã€‚</p>
<p>æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºCollectionæ¡†æ¶ã€‚</p>
<h1 id="37ã€listä¸SetåŒºåˆ«"><a href="#37ã€listä¸SetåŒºåˆ«" class="headerlink" title="37ã€listä¸SetåŒºåˆ«"></a>37ã€listä¸SetåŒºåˆ«</h1><p>ï¼ˆ1ï¼‰Listç®€ä»‹</p>
<p>å®é™…ä¸Šæœ‰ä¸¤ç§Listï¼šä¸€ç§æ˜¯åŸºæœ¬çš„ArrayList,å…¶ä¼˜ç‚¹åœ¨äºéšæœºè®¿é—®å…ƒç´ ï¼Œå¦ä¸€ç§æ˜¯LinkedList,å®ƒå¹¶ä¸æ˜¯ä¸ºå¿«é€Ÿéšæœºè®¿é—®è®¾è®¡çš„ï¼Œè€Œæ˜¯å¿«é€Ÿçš„æ’å…¥æˆ–åˆ é™¤ã€‚<br>ArrayListï¼šç”±æ•°ç»„å®ç°çš„Listã€‚å…è®¸å¯¹å…ƒç´ è¿›è¡Œå¿«é€Ÿéšæœºè®¿é—®ï¼Œä½†æ˜¯å‘Listä¸­é—´æ’å…¥ä¸ç§»é™¤å…ƒç´ çš„é€Ÿåº¦å¾ˆæ…¢ã€‚<br>LinkedList ï¼šå¯¹é¡ºåºè®¿é—®è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå‘Listä¸­é—´æ’å…¥ä¸åˆ é™¤çš„å¼€é”€å¹¶ä¸å¤§ã€‚éšæœºè®¿é—®åˆ™ç›¸å¯¹è¾ƒæ…¢ã€‚<br>è¿˜å…·æœ‰ä¸‹åˆ—æ–¹ æ³•ï¼šaddFirst(), addLast(), getFirst(), getLast(), removeFirst() å’Œ removeLast(), è¿™äº›æ–¹æ³• (æ²¡æœ‰åœ¨ä»»ä½•æ¥å£æˆ–åŸºç±»ä¸­å®šä¹‰è¿‡)ä½¿å¾—LinkedListå¯ä»¥å½“ä½œå †æ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ä½¿ç”¨ã€‚</p>
<p>ï¼ˆ2ï¼‰Setç®€ä»‹</p>
<p>Setå…·æœ‰ä¸Collectionå®Œå…¨ä¸€æ ·çš„æ¥å£ï¼Œå› æ­¤æ²¡æœ‰ä»»ä½•é¢å¤–çš„åŠŸèƒ½ã€‚å®é™…ä¸ŠSetå°±æ˜¯Collection,åªæ˜¯è¡Œä¸ºä¸åŒã€‚è¿™æ˜¯ç»§æ‰¿ä¸å¤šæ€æ€æƒ³çš„å…¸å‹åº”ç”¨ï¼šè¡¨ç°ä¸åŒçš„è¡Œä¸ºã€‚Setä¸ä¿å­˜é‡å¤çš„å…ƒç´ (è‡³äºå¦‚ä½•åˆ¤æ–­å…ƒç´ ç›¸åŒåˆ™è¾ƒä¸ºè´Ÿè´£) </p>
<p>Set : å­˜å…¥Setçš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºSetä¸ä¿å­˜é‡å¤å…ƒç´ ã€‚åŠ å…¥Setçš„å…ƒç´ å¿…é¡»å®šä¹‰equals()æ–¹æ³•ä»¥ç¡®ä¿å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚Setä¸Collectionæœ‰å®Œå…¨ä¸€æ ·çš„æ¥å£ã€‚Setæ¥å£ä¸ä¿è¯ç»´æŠ¤å…ƒç´ çš„æ¬¡åºã€‚<br>HashSetï¼šä¸ºå¿«é€ŸæŸ¥æ‰¾è®¾è®¡çš„Setã€‚å­˜å…¥HashSetçš„å¯¹è±¡å¿…é¡»å®šä¹‰hashCode()ã€‚<br>TreeSetï¼š ä¿å­˜æ¬¡åºçš„Set, åº•å±‚ä¸ºæ ‘ç»“æ„ã€‚ä½¿ç”¨å®ƒå¯ä»¥ä»Setä¸­æå–æœ‰åºçš„åºåˆ—ã€‚ </p>
<p>ï¼ˆ3ï¼‰listä¸SetåŒºåˆ«</p>
<p>â‘  List,Setéƒ½æ˜¯ç»§æ‰¿è‡ªCollectionæ¥å£</p>
<p>â‘¡ Listç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ ï¼ŒSetç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ï¼Œï¼ˆå…ƒç´ è™½ç„¶æ— æ”¾å…¥é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨setä¸­çš„ä½ç½®æ˜¯æœ‰è¯¥å…ƒç´ çš„HashCodeå†³å®šçš„ï¼Œå…¶ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ï¼ŒåŠ å…¥Set çš„Objectå¿…é¡»å®šä¹‰equals()æ–¹æ³• ï¼Œå¦å¤–listæ”¯æŒforå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸‹æ ‡æ¥éå†ï¼Œä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨ï¼Œä½†æ˜¯setåªèƒ½ç”¨è¿­ä»£ï¼Œå› ä¸ºä»–æ— åºï¼Œæ— æ³•ç”¨ä¸‹æ ‡æ¥å–å¾—æƒ³è¦çš„å€¼ã€‚ï¼‰ </p>
<p>â‘¢ Setå’ŒListå¯¹æ¯”ï¼š </p>
<p>Setï¼šæ£€ç´¢å…ƒç´ æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤ä¸ä¼šå¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚<br>Listï¼šå’Œæ•°ç»„ç±»ä¼¼ï¼ŒListå¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾å…ƒç´ æ•ˆç‡é«˜ï¼Œæ’å…¥åˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚</p>
<h1 id="38ã€HashMap-å’Œ-Hashtable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#38ã€HashMap-å’Œ-Hashtable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="38ã€HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>38ã€HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒHashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›<br>HashMapä¸­å…è®¸é”®å’Œå€¼ä¸ºnullï¼ŒHashTableä¸å…è®¸ï¼›<br>HashMapçš„é»˜è®¤å®¹å™¨æ˜¯16ï¼Œä¸º2å€æ‰©å®¹ï¼ŒHashTableé»˜è®¤æ˜¯11ï¼Œä¸º2å€+1æ‰©å®¹ï¼›</p>
<h1 id="39ã€è¯´ä¸€ä¸‹-HashMap-çš„å®ç°åŸç†ï¼Ÿ"><a href="#39ã€è¯´ä¸€ä¸‹-HashMap-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="39ã€è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ"></a>39ã€è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ç®€ä»‹</p>
<p>HashMapåŸºäºmapæ¥å£ï¼Œå…ƒç´ ä»¥é”®å€¼å¯¹æ–¹å¼å­˜å‚¨ï¼Œå…è®¸æœ‰nullå€¼ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰åŸºæœ¬å±æ€§</p>
<p>åˆå§‹åŒ–å¤§å°ï¼Œé»˜è®¤16ï¼Œ2å€æ‰©å®¹ï¼›<br>è´Ÿè½½å› å­0.75ï¼›<br>åˆå§‹åŒ–çš„é»˜è®¤æ•°ç»„ï¼›<br>size<br>thresholdã€‚åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´hashmapå®¹é‡</p>
<p>ï¼ˆ3ï¼‰HashMapçš„å­˜å‚¨ç»“æ„</p>
<p>JDK1.7ä¸­é‡‡ç”¨æ•°ç»„+é“¾è¡¨çš„å­˜å‚¨å½¢å¼ã€‚</p>
<p>HashMapé‡‡å–Entryæ•°ç»„æ¥å­˜å‚¨key-valueï¼Œæ¯ä¸€ä¸ªé”®å€¼å¯¹ç»„æˆäº†ä¸€ä¸ªEntryå®ä½“ï¼ŒEntryç±»æ—¶æœºä¸Šæ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨ç»“æ„ï¼Œå®ƒå…·æœ‰nextæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªEntryå®ä½“ï¼Œä»¥æ­¤æ¥è§£å†³Hashå†²çªçš„é—®é¢˜ã€‚</p>
<p>HashMapå®ç°ä¸€ä¸ªå†…éƒ¨ç±»Entryï¼Œé‡è¦çš„å±æ€§æœ‰hashã€keyã€valueã€nextã€‚</p>
<p>JDK1.8ä¸­é‡‡ç”¨æ•°æ®+é“¾è¡¨+çº¢é»‘æ ‘çš„å­˜å‚¨å½¢å¼ã€‚å½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ï¼ˆ8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚åœ¨æ€§èƒ½ä¸Šè¿›ä¸€æ­¥å¾—åˆ°æå‡ã€‚</p>
<h1 id="40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ"><a href="#40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ" class="headerlink" title="40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ"></a>40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰HashSet</p>
<p>HashSetæ˜¯setæ¥å£çš„å®ç°ç±»ï¼Œsetä¸‹é¢æœ€ä¸»è¦çš„å®ç°ç±»å°±æ˜¯HashSetï¼ˆä¹Ÿå°±æ˜¯ç”¨çš„æœ€å¤šçš„ï¼‰ï¼Œæ­¤å¤–è¿˜æœ‰LinkedHashSetå’ŒTreeSetã€‚<br>HashSetæ˜¯æ— åºçš„ã€ä¸å¯é‡å¤çš„ã€‚é€šè¿‡å¯¹è±¡çš„hashCodeå’Œequalsæ–¹æ³•ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚<br>HashSetå†…éƒ¨çš„å­˜å‚¨ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼Œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰TreeSet</p>
<p>TreeSetå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„æ–¹å¼ï¼š</p>
<p>å…ƒç´ è‡ªèº«å…·å¤‡æ¯”è¾ƒåŠŸèƒ½ï¼Œéœ€è¦å®ç°Comparableæ¥å£ï¼Œå¹¶è¦†ç›–compareToæ–¹æ³•ã€‚<br>å…ƒç´ è‡ªèº«ä¸å…·å¤‡æ¯”è¾ƒåŠŸèƒ½ï¼Œéœ€è¦å®ç°Comparatoræ¥å£ï¼Œå¹¶è¦†ç›–compareæ–¹æ³•ã€‚</p>
<p>ï¼ˆ3ï¼‰LinkedHashSet</p>
<p>LinkedHashSetæ˜¯ä¸€ç§æœ‰åºçš„Seté›†åˆï¼Œå³å…¶å…ƒç´ çš„å­˜å…¥å’Œè¾“å‡ºçš„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚</p>
<h1 id="41ã€è¯´ä¸€ä¸‹-HashSet-çš„å®ç°åŸç†ï¼Ÿ"><a href="#41ã€è¯´ä¸€ä¸‹-HashSet-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="41ã€è¯´ä¸€ä¸‹ HashSet çš„å®ç°åŸç†ï¼Ÿ"></a>41ã€è¯´ä¸€ä¸‹ HashSet çš„å®ç°åŸç†ï¼Ÿ</h1><p>HashSetå®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹ï¼Œæ•°æ®å­˜å‚¨ç»“æ„éƒ½æ˜¯æ•°ç»„+é“¾è¡¨ã€‚</p>
<p>HashSetæ˜¯åŸºäºHashMapå®ç°çš„ï¼ŒHashSetä¸­çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨HashMapçš„keyä¸Šé¢ï¼Œè€Œvalueéƒ½æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡PRESENTã€‚</p>
<p>private static final Object PRESENT &#x3D; new Object();<br>HashSetä¸­addæ–¹æ³•è°ƒç”¨çš„æ˜¯åº•å±‚HashMapä¸­çš„putæ–¹æ³•ï¼Œputæ–¹æ³•è¦åˆ¤æ–­æ’å…¥å€¼æ˜¯å¦å­˜åœ¨ï¼Œè€ŒHashSetçš„addæ–¹æ³•ï¼Œé¦–å…ˆåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ’å…¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸æ’å…¥ï¼Œè¿™æ ·å°±ä¿è¯äº†HashSetä¸­ä¸å­˜åœ¨é‡å¤å€¼ã€‚</p>
<p> é€šè¿‡å¯¹è±¡çš„hashCodeå’Œequalsæ–¹æ³•ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚</p>
<p>42ã€ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<br>ArrayListæ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼ŒæŸ¥æ‰¾å’Œéå†çš„æ•ˆç‡è¾ƒé«˜ï¼›</p>
<p>LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå¢åŠ å’Œåˆ é™¤çš„æ•ˆç‡è¾ƒé«˜ï¼›</p>
<p>43ã€å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ<br>String[] arr &#x3D; {â€œzsâ€,â€lsâ€,â€wwâ€};<br>List<String> list &#x3D; Arrays.asList(arr);<br>System.out.println(list);</p>
<p>ArrayList<String> list1 &#x3D; new ArrayList<String>();<br>list1.add(â€œå¼ ä¸‰â€);<br>list1.add(â€œæå››â€);<br>list1.add(â€œç‹äº”â€);<br>String[] arr1 &#x3D; list1.toArray(new String[list1.size()]);<br>System.out.println(arr1);<br>for(int i &#x3D; 0; i &lt; arr1.length; i++){<br>    System.out.println(arr1[i]);<br>}</p>
<h1 id="44ã€åœ¨-Queue-ä¸­-poll-å’Œ-remove-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#44ã€åœ¨-Queue-ä¸­-poll-å’Œ-remove-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="44ã€åœ¨ Queue ä¸­ poll()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>44ã€åœ¨ Queue ä¸­ poll()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰offer()å’Œadd()åŒºåˆ«ï¼š</p>
<p>å¢åŠ æ–°é¡¹æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œaddä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œofferè¿”å›falseã€‚</p>
<p>ï¼ˆ2ï¼‰poll()å’Œremove()åŒºåˆ«ï¼š</p>
<p>poll()å’Œremove()éƒ½æ˜¯ä»é˜Ÿåˆ—ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒremoveæŠ›å‡ºå¼‚å¸¸ï¼Œpollè¿”å›nullã€‚</p>
<p>ï¼ˆ3ï¼‰peek()å’Œelementï¼ˆï¼‰åŒºåˆ«ï¼š</p>
<p>peek()å’Œelementï¼ˆï¼‰ç”¨äºæŸ¥è¯¢é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ï¼Œä¸ºç©ºæ—¶elementæŠ›å‡ºå¼‚å¸¸ï¼Œpeekè¿”å›nullã€‚</p>
<h1 id="45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"><a href="#45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„" class="headerlink" title="45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"></a>45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„</h1><p>Vectorï¼šå°±æ¯”Arraylistå¤šäº†ä¸ªåŒæ­¥åŒ–æœºåˆ¶ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ã€‚<br>Stackï¼šæ ˆï¼Œä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç»§æ‰¿äºVectorã€‚<br>Hashtableï¼šå°±æ¯”Hashmapå¤šäº†ä¸ªçº¿ç¨‹å®‰å…¨ã€‚<br>ConcurrentHashMap:æ˜¯ä¸€ç§é«˜æ•ˆä½†æ˜¯çº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚</p>
<h1 id="46ã€è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#46ã€è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="46ã€è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ"></a>46ã€è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ä¸ºäº†æ–¹ä¾¿çš„å¤„ç†é›†åˆä¸­çš„å…ƒç´ ,Javaä¸­å‡ºç°äº†ä¸€ä¸ªå¯¹è±¡,è¯¥å¯¹è±¡æä¾›äº†ä¸€äº›æ–¹æ³•ä¸“é—¨å¤„ç†é›†åˆä¸­çš„å…ƒç´ .ä¾‹å¦‚åˆ é™¤å’Œè·å–é›†åˆä¸­çš„å…ƒç´ .è¯¥å¯¹è±¡å°±å«åšè¿­ä»£å™¨(Iterator)ã€‚</p>
<h1 id="47ã€Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#47ã€Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="47ã€Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>47ã€Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h1><p>Iterator æ¥å£æºç ä¸­çš„æ–¹æ³•ï¼š</p>
<p>java.lang.Iterable æ¥å£è¢« java.util.Collection æ¥å£ç»§æ‰¿ï¼Œjava.util.Collection æ¥å£çš„ iterator() æ–¹æ³•è¿”å›ä¸€ä¸ª Iterator å¯¹è±¡<br>next() æ–¹æ³•è·å¾—é›†åˆä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ <br>hasNext() æ£€æŸ¥é›†åˆä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ <br>remove() æ–¹æ³•å°†è¿­ä»£å™¨æ–°è¿”å›çš„å…ƒç´ åˆ é™¤</p>
<h1 id="48ã€Iterator-å’Œ-ListIterator-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#48ã€Iterator-å’Œ-ListIterator-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="48ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>48ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ListIterator ç»§æ‰¿ Iterator</p>
<p>ï¼ˆ2ï¼‰ListIterator æ¯” Iteratorå¤šæ–¹æ³•</p>
<p>add(E e)  å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ—è¡¨ï¼Œæ’å…¥ä½ç½®ä¸ºè¿­ä»£å™¨å½“å‰ä½ç½®ä¹‹å‰<br>set(E e)  è¿­ä»£å™¨è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ æ›¿æ¢å‚æ•°e<br>hasPrevious()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆæ˜¯å¦å«æœ‰å…ƒç´ <br>previous()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆï¼Œä¸‹ä¸€ä¸ªå…ƒç´ <br>previousIndex()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡<br>nextIndex()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡<br>ï¼ˆ3ï¼‰ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒIteratorå¯ä»¥è¿­ä»£æ‰€æœ‰é›†åˆï¼›ListIterator åªèƒ½ç”¨äºListåŠå…¶å­ç±»</p>
<p>ListIterator æœ‰ add æ–¹æ³•ï¼Œå¯ä»¥å‘ List ä¸­æ·»åŠ å¯¹è±¡ï¼›Iterator ä¸èƒ½<br>ListIterator æœ‰ hasPrevious() å’Œ previous() æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘éå†ï¼›Iteratorä¸å¯ä»¥<br>ListIterator æœ‰ nextIndex() å’ŒpreviousIndex() æ–¹æ³•ï¼Œå¯å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼›Iteratorä¸å¯ä»¥<br>ListIterator æœ‰ set()æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹ List çš„ä¿®æ”¹ï¼›Iterator ä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</p>
<h1 id="49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ"><a href="#49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ" class="headerlink" title="49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ"></a>49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ</h1><p>æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨finalå…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“</p>
<p>finalå…³é”®å­—å¯ä»¥ä¿®é¥°ç±»ï¼Œæ–¹æ³•ï¼Œæˆå‘˜å˜é‡ï¼Œfinalä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œfinalä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œfinalä¿®é¥°çš„æˆå‘˜å˜é‡å¿…é¡»åˆå§‹åŒ–å€¼ï¼Œå¦‚æœè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œå¦‚æœè¯´è¿™ä¸ªæˆå‘˜å˜é‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªå¼•ç”¨çš„åœ°å€å€¼æ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡é‡Œé¢çš„å†…å®¹è¿˜æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ¸…æ¥šï¼Œé›†åˆï¼ˆmap,set,listâ€¦ï¼‰éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœç”¨finalä¿®é¥°çš„è¯ï¼Œé›†åˆé‡Œé¢çš„å†…å®¹è¿˜æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå®éªŒï¼š</p>
<p>å¯ä»¥çœ‹åˆ°ï¼šæˆ‘ä»¬ç”¨finalå…³é”®å­—å®šä¹‰äº†ä¸€ä¸ªmapé›†åˆï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¾€é›†åˆé‡Œé¢ä¼ å€¼ï¼Œç¬¬ä¸€ä¸ªé”®å€¼å¯¹1,1ï¼›æˆ‘ä»¬å†ä¿®æ”¹åï¼Œå¯ä»¥æŠŠé”®ä¸º1çš„å€¼æ”¹ä¸º100ï¼Œè¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥ä¿®æ”¹mapé›†åˆçš„å€¼çš„ã€‚</p>
<p>é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰èƒ½ç¡®ä¿é›†åˆä¸è¢«ä¿®æ”¹å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨CollectionsåŒ…ä¸‹çš„unmodifiableMapæ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•è¿”å›çš„map,æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚ä»–ä¼šæŠ¥ java.lang.UnsupportedOperationExceptioné”™ã€‚</p>
<p>åŒç†ï¼šCollectionsåŒ…ä¹Ÿæä¾›äº†å¯¹listå’Œseté›†åˆçš„æ–¹æ³•ã€‚</p>
<p>Collections.unmodifiableList(List)<br>Collections.unmodifiableSet(Set)</p>
<h1 id="50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œæ ˆå…ˆè¿›åå‡ºã€‚</p>
<p>ï¼ˆ2ï¼‰éå†æ•°æ®é€Ÿåº¦ä¸åŒã€‚</p>
<p>æ ˆåªèƒ½ä»å¤´éƒ¨å–æ•°æ® ä¹Ÿå°±æœ€å…ˆæ”¾å…¥çš„éœ€è¦éå†æ•´ä¸ªæ ˆæœ€åæ‰èƒ½å–å‡ºæ¥ï¼Œè€Œä¸”åœ¨éå†æ•°æ®çš„æ—¶å€™è¿˜å¾—ä¸ºæ•°æ®å¼€è¾Ÿä¸´æ—¶ç©ºé—´ï¼Œä¿æŒæ•°æ®åœ¨éå†å‰çš„ä¸€è‡´æ€§ï¼›</p>
<p>é˜Ÿåˆ—åˆ™ä¸åŒï¼Œä»–åŸºäºåœ°å€æŒ‡é’ˆè¿›è¡Œéå†ï¼Œè€Œä¸”å¯ä»¥ä»å¤´æˆ–å°¾éƒ¨å¼€å§‹éå†ï¼Œä½†ä¸èƒ½åŒæ—¶éå†ï¼Œæ— éœ€å¼€è¾Ÿä¸´æ—¶ç©ºé—´ï¼Œå› ä¸ºåœ¨éå†çš„è¿‡ç¨‹ä¸­ä¸å½±åƒæ•°æ®ç»“æ„ï¼Œé€Ÿåº¦è¦å¿«çš„å¤šã€‚</p>
<h1 id="51ã€Java8å¼€å§‹ConcurrentHashMap-ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ"><a href="#51ã€Java8å¼€å§‹ConcurrentHashMap-ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ" class="headerlink" title="51ã€Java8å¼€å§‹ConcurrentHashMap,ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ"></a>51ã€Java8å¼€å§‹ConcurrentHashMap,ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ</h1><p>ConcurrentHashMapçš„åŸç†æ˜¯å¼•ç”¨äº†å†…éƒ¨çš„ Segment ( ReentrantLock )  åˆ†æ®µé”ï¼Œä¿è¯åœ¨æ“ä½œä¸åŒæ®µ map çš„æ—¶å€™ï¼Œ å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œ æ“ä½œåŒæ®µ map çš„æ—¶å€™ï¼Œè¿›è¡Œé”çš„ç«äº‰å’Œç­‰å¾…ã€‚ä»è€Œè¾¾åˆ°çº¿ç¨‹å®‰å…¨ï¼Œ ä¸”æ•ˆç‡å¤§äº synchronizedã€‚</p>
<p>ä½†æ˜¯åœ¨ Java 8 ä¹‹åï¼Œ JDK å´å¼ƒç”¨äº†è¿™ä¸ªç­–ç•¥ï¼Œé‡æ–°ä½¿ç”¨äº† synchronized+CASã€‚</p>
<p>å¼ƒç”¨åŸå› </p>
<p>é€šè¿‡  JDK çš„æºç å’Œå®˜æ–¹æ–‡æ¡£çœ‹æ¥ï¼Œ ä»–ä»¬è®¤ä¸ºçš„å¼ƒç”¨åˆ†æ®µé”çš„åŸå› ç”±ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>åŠ å…¥å¤šä¸ªåˆ†æ®µé”æµªè´¹å†…å­˜ç©ºé—´ã€‚<br>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ map åœ¨æ”¾å…¥æ—¶ç«äº‰åŒä¸€ä¸ªé”çš„æ¦‚ç‡éå¸¸å°ï¼Œåˆ†æ®µé”åè€Œä¼šé€ æˆæ›´æ–°ç­‰æ“ä½œçš„é•¿æ—¶é—´ç­‰å¾…ã€‚<br>ä¸ºäº†æé«˜ GC çš„æ•ˆç‡<br>æ–°çš„åŒæ­¥æ–¹æ¡ˆ</p>
<p>æ—¢ç„¶å¼ƒç”¨äº†åˆ†æ®µé”ï¼Œ é‚£ä¹ˆä¸€å®šç”±æ–°çš„çº¿ç¨‹å®‰å…¨æ–¹æ¡ˆï¼Œ æˆ‘ä»¬æ¥çœ‹çœ‹æºç æ˜¯æ€ä¹ˆè§£å†³çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿï¼ˆæºç ä¿ç•™äº†segment ä»£ç ï¼Œ ä½†å¹¶æ²¡æœ‰ä½¿ç”¨ï¼‰ã€‚</p>
<h1 id="52ã€ConcurrentHashMap-JDK1-8-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ"><a href="#52ã€ConcurrentHashMap-JDK1-8-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ" class="headerlink" title="52ã€ConcurrentHashMap(JDK1.8)ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ"></a>52ã€ConcurrentHashMap(JDK1.8)ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ</h1><p>æˆ‘æƒ³ä»ä¸‹é¢å‡ ä¸ªè§’åº¦è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼š</p>
<p>ï¼ˆ1ï¼‰é”çš„ç²’åº¦</p>
<p>é¦–å…ˆé”çš„ç²’åº¦å¹¶æ²¡æœ‰å˜ç²—ï¼Œç”šè‡³å˜å¾—æ›´ç»†äº†ã€‚æ¯å½“æ‰©å®¹ä¸€æ¬¡ï¼ŒConcurrentHashMapçš„å¹¶å‘åº¦å°±æ‰©å¤§ä¸€å€ã€‚</p>
<p>ï¼ˆ2ï¼‰Hashå†²çª</p>
<p>JDK1.7ä¸­ï¼ŒConcurrentHashMapä»è¿‡äºŒæ¬¡hashçš„æ–¹å¼ï¼ˆSegment -&gt; HashEntryï¼‰èƒ½å¤Ÿå¿«é€Ÿçš„æ‰¾åˆ°æŸ¥æ‰¾çš„å…ƒç´ ã€‚åœ¨1.8ä¸­é€šè¿‡é“¾è¡¨åŠ çº¢é»‘æ ‘çš„å½¢å¼å¼¥è¡¥äº†putã€getæ—¶çš„æ€§èƒ½å·®è·ã€‚<br>JDK1.8ä¸­ï¼Œåœ¨ConcurrentHashmapè¿›è¡Œæ‰©å®¹æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é€šè¿‡æ£€æµ‹æ•°ç»„ä¸­çš„èŠ‚ç‚¹å†³å®šæ˜¯å¦å¯¹è¿™æ¡é“¾è¡¨ï¼ˆçº¢é»‘æ ‘ï¼‰è¿›è¡Œæ‰©å®¹ï¼Œå‡å°äº†æ‰©å®¹çš„ç²’åº¦ï¼Œæé«˜äº†æ‰©å®¹çš„æ•ˆç‡ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘å¯¹é¢è¯•ä¸­çš„é‚£ä¸ªé—®é¢˜çš„ä¸€ä¸‹çœ‹æ³•ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ˜¯synchronizedï¼Œè€Œä¸æ˜¯ReentranLock</p>
<p>ï¼ˆ1ï¼‰å‡å°‘å†…å­˜å¼€é”€</p>
<p>å‡è®¾ä½¿ç”¨å¯é‡å…¥é”æ¥è·å¾—åŒæ­¥æ”¯æŒï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦é€šè¿‡ç»§æ‰¿AQSæ¥è·å¾—åŒæ­¥æ”¯æŒã€‚ä½†å¹¶ä¸æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è·å¾—åŒæ­¥æ”¯æŒçš„ï¼Œåªæœ‰é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼ˆçº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼‰éœ€è¦åŒæ­¥ï¼Œè¿™æ— ç–‘å¸¦æ¥äº†å·¨å¤§å†…å­˜æµªè´¹ã€‚</p>
<p>ï¼ˆ2ï¼‰è·å¾—JVMçš„æ”¯æŒ</p>
<p>å¯é‡å…¥é”æ¯•ç«Ÿæ˜¯APIè¿™ä¸ªçº§åˆ«çš„ï¼Œåç»­çš„æ€§èƒ½ä¼˜åŒ–ç©ºé—´å¾ˆå°ã€‚<br>synchronizedåˆ™æ˜¯JVMç›´æ¥æ”¯æŒçš„ï¼ŒJVMèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ä½œå‡ºç›¸åº”çš„ä¼˜åŒ–æªæ–½ï¼šé”ç²—åŒ–ã€é”æ¶ˆé™¤ã€é”è‡ªæ—‹ç­‰ç­‰ã€‚è¿™å°±ä½¿å¾—synchronizedèƒ½å¤Ÿéšç€JDKç‰ˆæœ¬çš„å‡çº§è€Œä¸æ”¹åŠ¨ä»£ç çš„å‰æä¸‹è·å¾—æ€§èƒ½ä¸Šçš„æå‡ã€‚</p>
<h1 id="53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«"></a>53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«</h1><p>concurrentHashMapèåˆäº†hashmapå’Œhashtableçš„ä¼˜åŠ¿ï¼Œhashmapæ˜¯ä¸åŒæ­¥çš„ï¼Œä½†æ˜¯å•çº¿ç¨‹æƒ…å†µä¸‹æ•ˆç‡é«˜ï¼Œhashtableæ˜¯åŒæ­¥çš„åŒæ­¥æƒ…å†µä¸‹ä¿è¯ç¨‹åºæ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚</p>
<p>ä½†hashtableæ¯æ¬¡åŒæ­¥æ‰§è¡Œçš„æ—¶å€™éƒ½è¦é”ä½æ•´ä¸ªç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p>concurrentHashMapé”çš„æ–¹å¼æ˜¯ç»†ç²’åº¦çš„ã€‚concurrentHashMapå°†hashåˆ†ä¸º16ä¸ªæ¡¶ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œè¯¸å¦‚getã€putã€removeç­‰å¸¸ç”¨æ“ä½œåªé”ä½å½“å‰éœ€è¦ç”¨åˆ°çš„æ¡¶ã€‚</p>
<p>concurrentHashMapçš„è¯»å–å¹¶å‘ï¼Œå› ä¸ºè¯»å–çš„å¤§å¤šæ•°æ—¶å€™éƒ½æ²¡æœ‰é”å®šï¼Œæ‰€ä»¥è¯»å–æ“ä½œå‡ ä¹æ˜¯å®Œå…¨çš„å¹¶å‘æ“ä½œï¼Œåªæ˜¯åœ¨æ±‚sizeæ—¶æ‰éœ€è¦é”å®šæ•´ä¸ªhashã€‚</p>
<p>è€Œä¸”åœ¨è¿­ä»£æ—¶ï¼ŒconcurrentHashMapä½¿ç”¨äº†ä¸åŒäºä¼ ç»Ÿé›†åˆçš„å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨çš„å¦ä¸€ç§è¿­ä»£æ–¹å¼ï¼Œå¼±ä¸€è‡´è¿­ä»£å™¨ã€‚åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå½“iteratorè¢«åˆ›å»ºåé›†åˆå†å‘ç”Ÿæ”¹å˜å°±ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åœ¨æ”¹å˜æ—¶newæ–°çš„æ•°æ®è€Œä¸æ˜¯å½±å“åŸæ¥çš„æ•°æ®ï¼Œiteratorå®Œæˆåå†è®²å¤´æŒ‡é’ˆæ›¿ä»£ä¸ºæ–°çš„æ•°æ®ï¼Œè¿™æ ·iteratoræ—¶ä½¿ç”¨çš„æ˜¯åŸæ¥çš„æ•°æ®ã€‚</p>
<h1 id="54ã€HasmMapå’ŒHashSetçš„åŒºåˆ«"><a href="#54ã€HasmMapå’ŒHashSetçš„åŒºåˆ«" class="headerlink" title="54ã€HasmMapå’ŒHashSetçš„åŒºåˆ«"></a>54ã€HasmMapå’ŒHashSetçš„åŒºåˆ«</h1><p>ï¼ˆ1ï¼‰å…ˆäº†è§£ä¸€ä¸‹HashCode</p>
<p>Javaä¸­çš„é›†åˆæœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Listï¼Œä¸€ç±»æ˜¯Setã€‚</p>
<p>Listï¼šå…ƒç´ æœ‰åºï¼Œå¯ä»¥é‡å¤ï¼›</p>
<p>Setï¼šå…ƒç´ æ— åºï¼Œä¸å¯é‡å¤ï¼›</p>
<p>è¦æƒ³ä¿è¯å…ƒç´ çš„ä¸é‡å¤ï¼Œæ‹¿ä»€ä¹ˆæ¥åˆ¤æ–­å‘¢ï¼Ÿè¿™å°±æ˜¯Object.equalsæ–¹æ³•äº†ã€‚å¦‚æœå…ƒç´ æœ‰å¾ˆå¤šï¼Œå¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå°±è¦åˆ¤æ–­næ¬¡å—ï¼Ÿ</p>
<p>æ˜¾ç„¶ä¸ç°å®ï¼Œäºæ˜¯ï¼ŒJavaé‡‡ç”¨äº†å“ˆå¸Œè¡¨çš„åŸç†ã€‚å“ˆå¸Œç®—æ³•ä¹Ÿç§°ä¸ºæ•£åˆ—ç®—æ³•ï¼Œæ˜¯å°†æ•°æ®ä¾ç‰¹å®šç®—æ³•ç›´æ¥æŒ‡å®šåˆ°ä¸€æ ¹åœ°å€ä¸Šï¼Œåˆå­¦è€…å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼ŒHashCodeæ–¹æ³•è¿”å›çš„å°±æ˜¯å¯¹è±¡å­˜å‚¨çš„ç‰©ç†ä½ç½®ï¼ˆå®é™…ä¸Šå¹¶ä¸æ˜¯ï¼‰ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå½“é›†åˆæ·»åŠ æ–°çš„å…ƒç´ æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå…ƒç´ çš„hashcode()æ–¹æ³•ï¼Œå°±ä¸€ä¸‹å­èƒ½å®šä½åˆ°ä»–åº”è¯¥æ”¾ç½®çš„ç‰©ç†ä½ç½®ä¸Šã€‚å¦‚æœè¿™ä¸ªä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œä»–å°±å¯ä»¥ç›´æ¥å­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ä¸Šï¼Œä¸ç”¨å†è¿›è¡Œä»»ä½•æ¯”è¾ƒäº†ã€‚å¦‚æœè¿™ä¸ªä½ç½®ä¸Šæœ‰å…ƒç´ ï¼Œå°±è°ƒç”¨å®ƒçš„equalsæ–¹æ³•ä¸æ–°å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œæƒ³åŒçš„è¯å°±ä¸å­˜äº†ï¼Œä¸ç›¸åŒå°±æ•£åˆ—å…¶å®ƒçš„åœ°å€ã€‚æ‰€ä»¥è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå†²çªè§£å†³çš„é—®é¢˜ã€‚è¿™æ ·ä¸€æ¥å®é™…ä¸Šè°ƒç”¨equalsæ–¹æ³•çš„æ¬¡æ•°å°±å¤§å¤§é™ä½äº†ï¼Œå‡ ä¹åªéœ€è¦ä¸€ä¸¤æ¬¡ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨é›†åˆæŸ¥æ‰¾æ—¶ï¼Œhashcodeèƒ½å¤§å¤§é™ä½å¯¹è±¡æ¯”è¾ƒæ¬¡æ•°ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</p>
<p>Javaå¯¹è±¡çš„equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³•æ—¶è¿™æ ·è§„å®šçš„ï¼š</p>
<p>ç›¸ç­‰çš„å¯¹è±¡å°±å¿…é¡»å…·æœ‰ç›¸ç­‰çš„hashcodeã€‚</p>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒï¼Œä»–ä»¬å¹¶ä¸ä¸€å®šç›¸åŒã€‚<br>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒï¼Œä»–ä»¬å¹¶ä¸ä¸€å®šç›¸åŒã€‚<br>å¦‚æœä¸¤ä¸ªJavaå¯¹è±¡Aå’ŒBï¼ŒAå’ŒBä¸ç›¸ç­‰ï¼Œä½†æ˜¯Aå’ŒBçš„å“ˆå¸Œç ç›¸ç­‰ï¼Œå°†Aå’ŒBéƒ½å­˜å…¥HashMapæ—¶ä¼šå‘ç”Ÿå“ˆå¸Œå†²çªï¼Œä¹Ÿå°±æ˜¯Aå’ŒBå­˜æ”¾åœ¨HashMapå†…éƒ¨æ•°ç»„çš„ä½ç½®ç´¢å¼•ç›¸åŒï¼Œè¿™æ—¶HashMapä¼šåœ¨è¯¥ä½ç½®å»ºç«‹ä¸€ä¸ªé“¾æ¥è¡¨ï¼Œå°†Aå’ŒBä¸²èµ·æ¥æ”¾åœ¨è¯¥ä½ç½®ï¼Œæ˜¾ç„¶ï¼Œè¯¥æƒ…å†µä¸è¿åHashMapçš„ä½¿ç”¨è§„åˆ™ï¼Œæ˜¯å…è®¸çš„ã€‚å½“ç„¶ï¼Œå“ˆå¸Œå†²çªè¶Šå°‘è¶Šå¥½ï¼Œå°½é‡é‡‡ç”¨å¥½çš„å“ˆå¸Œç®—æ³•é¿å…å“ˆå¸Œå†²çªã€‚</p>
<p>equals()ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œhashcode()ä¸€å®šç›¸ç­‰ï¼›equals()ä¸ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå´å¹¶ä¸èƒ½è¯æ˜ä»–ä»¬çš„hashcode()ä¸ç›¸ç­‰ã€‚</p>
<p>ï¼ˆ2ï¼‰HashMapå’ŒHashSetçš„åŒºåˆ«</p>
<h1 id="55ã€è¯·è°ˆè°ˆ-ReadWriteLock-å’Œ-StampedLock"><a href="#55ã€è¯·è°ˆè°ˆ-ReadWriteLock-å’Œ-StampedLock" class="headerlink" title="55ã€è¯·è°ˆè°ˆ ReadWriteLock å’Œ StampedLock"></a>55ã€è¯·è°ˆè°ˆ ReadWriteLock å’Œ StampedLock</h1><p>ReadWriteLockåŒ…æ‹¬ä¸¤ç§å­é”</p>
<p>ï¼ˆ1ï¼‰ReadWriteLock</p>
<p>ReadWriteLock å¯ä»¥å®ç°å¤šä¸ªè¯»é”åŒæ—¶è¿›è¡Œï¼Œä½†æ˜¯è¯»ä¸å†™å’Œå†™äºå†™äº’æ–¥ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå†™é”çº¿ç¨‹åœ¨è¿›è¡Œã€‚</p>
<p>ï¼ˆ2ï¼‰StampedLock</p>
<p>StampedLockæ˜¯Jdkåœ¨1.8æä¾›çš„ä¸€ç§è¯»å†™é”ï¼Œç›¸æ¯”è¾ƒReentrantReadWriteLockæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºReentrantReadWriteLockåœ¨è¯»å†™ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ç§æ‚²è§‚ç­–ç•¥ï¼Œåœ¨è¯»çº¿ç¨‹ç‰¹åˆ«å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå†™çº¿ç¨‹å¤„äºé¥¥é¥¿çŠ¶æ€ï¼Œè™½ç„¶å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™è®¾ç½®ä¸ºtrueæŒ‡å®šä¸ºå…¬å¹³ï¼Œä½†æ˜¯ååé‡åˆä¸‹å»äº†ï¼Œè€ŒStampedLockæ˜¯æä¾›äº†ä¸€ç§ä¹è§‚ç­–ç•¥ï¼Œæ›´å¥½çš„å®ç°è¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”ååé‡ä¸ä¼šä¸‹é™ã€‚</p>
<p>StampedLockåŒ…æ‹¬ä¸‰ç§é”ï¼š</p>
<p>ï¼ˆ1ï¼‰å†™é”writeLockï¼š</p>
<p>writeLockæ˜¯ä¸€ä¸ªç‹¬å é”å†™é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—è¯¥é”åï¼Œå…¶ä»–è¯·æ±‚è¯»é”æˆ–è€…å†™é”çš„çº¿ç¨‹é˜»å¡ï¼Œ è·å–æˆåŠŸåï¼Œä¼šè¿”å›ä¸€ä¸ªstampï¼ˆå‡­æ®ï¼‰å˜é‡æ¥è¡¨ç¤ºè¯¥é”çš„ç‰ˆæœ¬ï¼Œåœ¨é‡Šæ”¾é”æ—¶è°ƒç”¨unlockWriteæ–¹æ³•ä¼ é€’stampå‚æ•°ã€‚æä¾›äº†éé˜»å¡å¼è·å–é”tryWriteLockã€‚</p>
<p>ï¼ˆ2ï¼‰æ‚²è§‚è¯»é”readLockï¼š</p>
<p>readLockæ˜¯ä¸€ä¸ªå…±äº«è¯»é”ï¼Œåœ¨æ²¡æœ‰çº¿ç¨‹è·å–å†™é”æƒ…å†µä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥è·å–è¯¥é”ã€‚å¦‚æœæœ‰å†™é”è·å–ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹è¯·æ±‚è¯»é”ä¼šè¢«é˜»å¡ã€‚æ‚²è§‚è¯»é”ä¼šè®¤ä¸ºå…¶ä»–çº¿ç¨‹å¯èƒ½è¦å¯¹è‡ªå·±æ“ä½œçš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¯¹æ•°æ®è¿›è¡ŒåŠ é”ï¼Œè¿™æ˜¯åœ¨è¯»å°‘å†™å¤šçš„æƒ…å†µä¸‹è€ƒè™‘çš„ã€‚è¯·æ±‚è¯¥é”æˆåŠŸåä¼šè¿”å›ä¸€ä¸ªstampå€¼ï¼Œåœ¨é‡Šæ”¾é”æ—¶è°ƒç”¨unlockReadæ–¹æ³•ä¼ é€’stampå‚æ•°ã€‚æä¾›äº†éé˜»å¡å¼è·å–é”æ–¹æ³•tryWriteLockã€‚</p>
<p>ï¼ˆ3ï¼‰ä¹è§‚è¯»é”tryOptimisticReadï¼š</p>
<p>tryOptimisticReadç›¸å¯¹æ¯”æ‚²è§‚è¯»é”ï¼Œåœ¨æ“ä½œæ•°æ®å‰å¹¶æ²¡æœ‰é€šè¿‡CASè®¾ç½®é”çš„çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰çº¿ç¨‹è·å–å†™é”ï¼Œåˆ™è¿”å›ä¸€ä¸ªé0çš„stampå˜é‡ï¼Œè·å–è¯¥stampååœ¨æ“ä½œæ•°æ®å‰è¿˜éœ€è¦è°ƒç”¨validateæ–¹æ³•æ¥åˆ¤æ–­æœŸé—´æ˜¯å¦æœ‰çº¿ç¨‹è·å–äº†å†™é”ï¼Œå¦‚æœæ˜¯è¿”å›å€¼ä¸º0åˆ™æœ‰çº¿ç¨‹è·å–å†™é”ï¼Œå¦‚æœä¸æ˜¯0åˆ™å¯ä»¥ä½¿ç”¨stampå˜é‡çš„é”æ¥æ“ä½œæ•°æ®ã€‚ç”±äºtryOptimisticReadå¹¶æ²¡æœ‰ä¿®æ”¹é”çŠ¶æ€ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡Šæ”¾é”ã€‚è¿™æ˜¯è¯»å¤šå†™å°‘çš„æƒ…å†µä¸‹è€ƒè™‘çš„ï¼Œä¸æ¶‰åŠCASæ“ä½œï¼Œæ‰€ä»¥æ•ˆç‡è¾ƒé«˜ï¼Œåœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¸Šéœ€è¦å¤åˆ¶ä¸€ä»½è¦æ“ä½œçš„å˜é‡åˆ°æ–¹æ³•æ ˆä¸­ï¼Œå¹¶ä¸”åœ¨æ“ä½œæ•°æ®æ—¶å¯èƒ½å…¶ä»–å†™çº¿ç¨‹å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œè€Œæˆ‘ä»¬æ“ä½œçš„æ˜¯æ–¹æ³•æ ˆé‡Œé¢çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œæ‰€ä»¥æœ€å¤šè¿”å›çš„ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œä½†æ˜¯ä¸€è‡´æ€§å¾—åˆ°äº†ä¿è¯ã€‚</p>
<h1 id="56ã€çº¿ç¨‹çš„run-å’Œstart-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#56ã€çº¿ç¨‹çš„run-å’Œstart-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="56ã€çº¿ç¨‹çš„run()å’Œstart()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>56ã€çº¿ç¨‹çš„run()å’Œstart()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯é€šè¿‡æŸä¸ªç‰¹å®šThreadå¯¹è±¡æ‰€å¯¹åº”çš„æ–¹æ³•run()æ¥å®Œæˆå…¶æ“ä½œçš„ï¼Œrun()æ–¹æ³•ç§°ä¸ºçº¿ç¨‹ä½“ã€‚é€šè¿‡è°ƒç”¨Threadç±»çš„start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>start() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ã€‚run() å¯ä»¥é‡å¤è°ƒç”¨ï¼Œè€Œ start() åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚</p>
<p>start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨start()æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤Threadç±»è°ƒç”¨æ–¹æ³•run()æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run()æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶åCPUå†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚</p>
<p>run()æ–¹æ³•æ˜¯åœ¨æœ¬çº¿ç¨‹é‡Œçš„ï¼Œåªæ˜¯çº¿ç¨‹é‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å¤šçº¿ç¨‹çš„ã€‚ å¦‚æœç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ï¼Œç›´æ¥å¾…ç”¨run()æ–¹æ³•å¿…é¡»ç­‰å¾…run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ‰€ä»¥æ‰§è¡Œè·¯å¾„è¿˜æ˜¯åªæœ‰ä¸€æ¡ï¼Œæ ¹æœ¬å°±æ²¡æœ‰çº¿ç¨‹çš„ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶è¦ä½¿ç”¨start()æ–¹æ³•è€Œä¸æ˜¯run()æ–¹æ³•ã€‚</p>
<h1 id="57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨-start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ-run-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨-run-æ–¹æ³•ï¼Ÿ"><a href="#57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨-start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ-run-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨-run-æ–¹æ³•ï¼Ÿ" class="headerlink" title="57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨ start() æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ run() æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨ run() æ–¹æ³•ï¼Ÿ"></a>57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨ start() æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ run() æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨ run() æ–¹æ³•ï¼Ÿ</h1><p>è¿™æ˜¯å¦ä¸€ä¸ªéå¸¸ç»å…¸çš„ java å¤šçº¿ç¨‹é¢è¯•é—®é¢˜ï¼Œè€Œä¸”åœ¨é¢è¯•ä¸­ä¼šç»å¸¸è¢«é—®åˆ°ã€‚å¾ˆç®€å•ï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½ä¼šç­”ä¸ä¸Šæ¥ï¼</p>
<p>new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ start() æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ start() ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ run() æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚</p>
<p>è€Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•ï¼Œä¼šæŠŠ run æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚</p>
<p>æ€»ç»“ï¼š è°ƒç”¨ start æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œè€Œ run æ–¹æ³•åªæ˜¯ thread çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œæ‰§è¡Œã€‚</p>
<h1 id="58ã€Synchronized-ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#58ã€Synchronized-ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="58ã€Synchronized ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>58ã€Synchronized ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ï¼ˆ1ï¼‰å¯é‡å…¥æ€§</p>
<p>synchronizedçš„é”å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆrecursionså˜é‡ï¼‰ä¼šè®°å½•çº¿ç¨‹è·å¾—å‡ æ¬¡é”ï¼›</p>
<p>å¯é‡å…¥çš„å¥½å¤„ï¼š<br>å¯ä»¥é¿å…æ­»é”ï¼›<br>å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„å°è£…ä»£ç ï¼›<br>synchronizedæ˜¯å¯é‡å…¥é”ï¼Œæ¯éƒ¨é”å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªè®¡æ•°å™¨è®°å½•çº¿ç¨‹è·å–å‡ æ¬¡é”ï¼Œåœ¨æ‰§è¡Œå®ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œè®¡æ•°å™¨çš„æ•°é‡ä¼š-1ï¼Œç›´åˆ°è®¡æ•°å™¨çš„æ•°é‡ä¸º0ï¼Œå°±é‡Šæ”¾è¿™ä¸ªé”ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸å¯ä¸­æ–­æ€§</p>
<p>ä¸€ä¸ªçº¿ç¨‹è·å¾—é”åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è·å¾—é”ï¼Œå¿…é¡»å¤„äºé˜»å¡æˆ–ç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸é‡Šæ”¾é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ä¼šä¸€ç›´é˜»å¡æˆ–ç­‰å¾…ï¼Œä¸å¯è¢«ä¸­æ–­ï¼›<br>synchronized å±äºä¸å¯è¢«ä¸­æ–­ï¼›<br>Lock lockæ–¹æ³•æ˜¯ä¸å¯ä¸­æ–­çš„ï¼›<br>Lock tryLockæ–¹æ³•æ˜¯å¯ä¸­æ–­çš„ï¼›</p>
<h1 id="59ã€JVM-å¯¹-Java-çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"><a href="#59ã€JVM-å¯¹-Java-çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="59ã€JVM å¯¹ Java çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"></a>59ã€JVM å¯¹ Java çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰è‡ªæ—‹é”</p>
<p>åœ¨çº¿ç¨‹è¿›è¡Œé˜»å¡çš„æ—¶å€™ï¼Œå…ˆè®©çº¿ç¨‹è‡ªæ—‹ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¯èƒ½è¿™æ®µæ—¶é—´å…¶å®ƒçº¿ç¨‹å·²ç»è§£é”ï¼Œè¿™æ—¶å°±æ— éœ€è®©çº¿ç¨‹å†è¿›è¡Œé˜»å¡æ“ä½œäº†ã€‚</p>
<p>è‡ªæ—‹é»˜è®¤æ¬¡æ•°æ˜¯10æ¬¡ã€‚</p>
<p>ï¼ˆ2ï¼‰è‡ªé€‚åº”è‡ªæ—‹é”</p>
<p>è‡ªæ—‹é”çš„å‡çº§ï¼Œè‡ªæ—‹çš„æ¬¡æ•°ä¸å†å›ºå®šï¼Œç”±å‰ä¸€æ¬¡è‡ªæ—‹æ¬¡æ•°å’Œé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€å†³å®šã€‚</p>
<p>ï¼ˆ3ï¼‰é”æ¶ˆé™¤</p>
<p>åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥ä»£ç å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å€ŸåŠ©é€ƒé€¸åˆ†ææŠ€æœ¯æ¥åˆ¤æ–­é”å¯¹è±¡æ˜¯å¦åªè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œè€Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ï¼Œè¿™æ—¶å°±å¯ä»¥å–æ¶ˆé”äº†ã€‚</p>
<p>4ã€é”ç²—åŒ–</p>
<p>å½“JITç¼–è¯‘å™¨å‘ç°ä¸€ç³»åˆ—çš„æ“ä½œéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åå¤åŠ é”è§£é”ï¼Œç”šè‡³åŠ é”æ“ä½œå‡ºç°åœ¨å¾ªç¯ä¸­ï¼Œæ­¤æ—¶ä¼šå°†åŠ é”åŒæ­¥çš„èŒƒå›´ç²—åŒ–åˆ°æ•´ä¸ªæ“ä½œç³»åˆ—çš„å¤–éƒ¨ã€‚</p>
<p>é”ç²’åº¦ï¼šä¸è¦é”ä½ä¸€äº›æ— å…³çš„ä»£ç ã€‚</p>
<p>é”ç²—åŒ–ï¼šå¯ä»¥ä¸€æ¬¡æ€§æ‰§è¡Œå®Œçš„ä¸è¦å¤šæ¬¡åŠ é”æ‰§è¡Œã€‚</p>
<h1 id="60ã€ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ"><a href="#60ã€ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ" class="headerlink" title="60ã€ä¸ºä»€ä¹ˆ wait(), notify()å’Œ notifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ"></a>60ã€ä¸ºä»€ä¹ˆ wait(), notify()å’Œ notifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ</h1><p>Javaä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸” wait()ï¼Œnotify()ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…å”¤é†’çº¿ç¨‹ï¼Œåœ¨ Java çš„çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰å¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œæ‰€ä»¥ä»»æ„å¯¹è±¡è°ƒç”¨æ–¹æ³•ä¸€å®šå®šä¹‰åœ¨Objectç±»ä¸­ã€‚</p>
<p>wait(), notify()å’Œ notifyAll()è¿™äº›æ–¹æ³•åœ¨åŒæ­¥ä»£ç å—ä¸­è°ƒç”¨</p>
<p>æœ‰çš„äººä¼šè¯´ï¼Œæ—¢ç„¶æ˜¯çº¿ç¨‹æ”¾å¼ƒå¯¹è±¡é”ï¼Œé‚£ä¹Ÿå¯ä»¥æŠŠwait()å®šä¹‰åœ¨Threadç±»é‡Œé¢å•Šï¼Œæ–°å®šä¹‰çš„çº¿ç¨‹ç»§æ‰¿äºThreadç±»ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°å®šä¹‰wait()æ–¹æ³•çš„å®ç°ã€‚ç„¶è€Œï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ï¼Œä¸€ä¸ªçº¿ç¨‹å®Œå…¨å¯ä»¥æŒæœ‰å¾ˆå¤šé”ï¼Œä½ ä¸€ä¸ªçº¿ç¨‹æ”¾å¼ƒé”çš„æ—¶å€™ï¼Œåˆ°åº•è¦æ”¾å¼ƒå“ªä¸ªé”ï¼Ÿå½“ç„¶äº†ï¼Œè¿™ç§è®¾è®¡å¹¶ä¸æ˜¯ä¸èƒ½å®ç°ï¼Œåªæ˜¯ç®¡ç†èµ·æ¥æ›´åŠ å¤æ‚ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œwait()ã€notify()å’ŒnotifyAll()æ–¹æ³•è¦å®šä¹‰åœ¨Objectç±»ä¸­ã€‚</p>
<h1 id="61ã€Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ"><a href="#61ã€Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ" class="headerlink" title="61ã€Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ"></a>61ã€Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ</h1><p>å¯ä»¥é€šè¿‡ä¸­æ–­ å’Œ å…±äº«å˜é‡çš„æ–¹å¼å®ç°çº¿ç¨‹é—´çš„é€šè®¯å’Œåä½œ</p>
<p>æ¯”å¦‚è¯´æœ€ç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼šå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œç”Ÿäº§è€…éœ€è¦ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—´æ‰èƒ½ç»§ç»­å¾€é‡Œé¢æ”¾å…¥å•†å“ï¼Œè€Œåœ¨ç­‰å¾…çš„æœŸé—´å†…ï¼Œç”Ÿäº§è€…å¿…é¡»é‡Šæ”¾å¯¹ä¸´ç•Œèµ„æºï¼ˆå³é˜Ÿåˆ—ï¼‰çš„å ç”¨æƒã€‚å› ä¸ºç”Ÿäº§è€…å¦‚æœä¸é‡Šæ”¾å¯¹ä¸´ç•Œèµ„æºçš„å ç”¨æƒï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…å°±æ— æ³•æ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„å•†å“ï¼Œå°±ä¸ä¼šè®©é˜Ÿåˆ—æœ‰ç©ºé—´ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å°±ä¼šä¸€ç›´æ— é™ç­‰å¾…ä¸‹å»ã€‚å› æ­¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¼šè®©ç”Ÿäº§è€…äº¤å‡ºå¯¹ä¸´ç•Œèµ„æºçš„å ç”¨æƒï¼Œå¹¶è¿›å…¥æŒ‚èµ·çŠ¶æ€ã€‚ç„¶åç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹äº†å•†å“ï¼Œç„¶åæ¶ˆè´¹è€…é€šçŸ¥ç”Ÿäº§è€…é˜Ÿåˆ—æœ‰ç©ºé—´äº†ã€‚åŒæ ·åœ°ï¼Œå½“é˜Ÿåˆ—ç©ºæ—¶ï¼Œæ¶ˆè´¹è€…ä¹Ÿå¿…é¡»ç­‰å¾…ï¼Œç­‰å¾…ç”Ÿäº§è€…é€šçŸ¥å®ƒé˜Ÿåˆ—ä¸­æœ‰å•†å“äº†ã€‚è¿™ç§äº’ç›¸é€šä¿¡çš„è¿‡ç¨‹å°±æ˜¯çº¿ç¨‹é—´çš„åä½œã€‚</p>
<p>Javaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<p>1ã€syncrhoizedåŠ é”çš„çº¿ç¨‹çš„Objectç±»çš„wait()&#x2F;notify()&#x2F;notifyAll()</p>
<p>2ã€ReentrantLockç±»åŠ é”çš„çº¿ç¨‹çš„Conditionç±»çš„await()&#x2F;signal()&#x2F;signalAll()</p>
<p>çº¿ç¨‹é—´ç›´æ¥çš„æ•°æ®äº¤æ¢ï¼š</p>
<p>é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡ï¼š1ï¼‰å­—èŠ‚æµï¼›2ï¼‰å­—ç¬¦æµ</p>
<h1 id="62ã€Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#62ã€Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="62ã€Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>62ã€Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h1><p>yield()åº”è¯¥åšçš„æ˜¯è®©å½“å‰è¿è¡Œçº¿ç¨‹å›åˆ°å¯è¿è¡ŒçŠ¶æ€ï¼Œä»¥å…è®¸å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„å…¶ä»–çº¿ç¨‹è·å¾—è¿è¡Œæœºä¼šã€‚å› æ­¤ï¼Œä½¿ç”¨yield()çš„ç›®çš„æ˜¯è®©ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹‹é—´èƒ½é€‚å½“çš„è½®è½¬æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå®é™…ä¸­æ— æ³•ä¿è¯yield()è¾¾åˆ°è®©æ­¥ç›®çš„ï¼Œå› ä¸ºè®©æ­¥çš„çº¿ç¨‹è¿˜æœ‰å¯èƒ½è¢«çº¿ç¨‹è°ƒåº¦ç¨‹åºå†æ¬¡é€‰ä¸­ã€‚</p>
<p>ç»“è®ºï¼šyield()ä»æœªå¯¼è‡´çº¿ç¨‹è½¬åˆ°ç­‰å¾…&#x2F;ç¡çœ &#x2F;é˜»å¡çŠ¶æ€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œyield()å°†å¯¼è‡´çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬åˆ°å¯è¿è¡ŒçŠ¶æ€ï¼Œä½†æœ‰å¯èƒ½æ²¡æœ‰æ•ˆæœã€‚</p>
<h1 id="63ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯éå…¬å¹³é”ï¼Ÿ"><a href="#63ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯éå…¬å¹³é”ï¼Ÿ" class="headerlink" title="63ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯éå…¬å¹³é”ï¼Ÿ"></a>63ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯éå…¬å¹³é”ï¼Ÿ</h1><p>å½“é”è¢«é‡Šæ”¾åï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰æœºä¼šç«äº‰å¾—åˆ°é”ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜æ•ˆç‡ï¼Œä½†ç¼ºç‚¹æ˜¯å¯èƒ½äº§ç”Ÿçº¿ç¨‹é¥¥é¥¿ç°è±¡ã€‚</p>
<h1 id="64ã€è¯·è°ˆè°ˆ-volatile-æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ"><a href="#64ã€è¯·è°ˆè°ˆ-volatile-æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ" class="headerlink" title="64ã€è¯·è°ˆè°ˆ volatile æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ"></a>64ã€è¯·è°ˆè°ˆ volatile æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ</h1><p>volatileåªèƒ½ä½œç”¨äºå˜é‡ï¼Œä¿è¯äº†æ“ä½œå¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸ä¿è¯åŸå­æ€§ã€‚</p>
<p>åœ¨Javaçš„å†…å­˜æ¨¡å‹ä¸­åˆ†ä¸ºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ï¼ŒJavaå†…å­˜æ¨¡å‹è§„å®šæ‰€æœ‰çš„å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚</p>
<p>ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’åˆ†ä¸º8ä¸ªåŸå­æ“ä½œï¼š</p>
<p>lock<br>unlock<br>read<br>load<br>assign<br>use<br>store<br>write<br>volatileä¿®é¥°çš„å˜é‡ï¼Œåªæœ‰å¯¹volatileè¿›è¡Œassignæ“ä½œï¼Œæ‰å¯ä»¥loadï¼Œåªæœ‰loadæ‰å¯ä»¥useï¼Œï¼Œè¿™æ ·å°±ä¿è¯äº†åœ¨å·¥ä½œå†…å­˜æ“ä½œvolatileå˜é‡ï¼Œéƒ½ä¼šåŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚</p>
<h1 id="65ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯-CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ"><a href="#65ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯-CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ" class="headerlink" title="65ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ"></a>65ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ</h1><p>Synchronizedçš„å¹¶å‘ç­–ç•¥æ˜¯æ‚²è§‚çš„ï¼Œä¸ç®¡æ˜¯å¦äº§ç”Ÿç«äº‰ï¼Œä»»ä½•æ•°æ®çš„æ“ä½œéƒ½å¿…é¡»åŠ é”ã€‚</p>
<p>ä¹è§‚é”çš„æ ¸å¿ƒæ˜¯CASï¼ŒCASåŒ…æ‹¬å†…å­˜å€¼ã€é¢„æœŸå€¼ã€æ–°å€¼ï¼Œåªæœ‰å½“å†…å­˜å€¼ç­‰äºé¢„æœŸå€¼æ—¶ï¼Œæ‰ä¼šå°†å†…å­˜å€¼ä¿®æ”¹ä¸ºæ–°å€¼ã€‚</p>
<h1 id="66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ"><a href="#66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ" class="headerlink" title="66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ"></a>66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ</h1><p>ä¹è§‚é”è®¤ä¸ºå¯¹ä¸€ä¸ªå¯¹è±¡çš„æ“ä½œä¸ä¼šå¼•å‘å†²çªï¼Œæ‰€ä»¥æ¯æ¬¡æ“ä½œéƒ½ä¸è¿›è¡ŒåŠ é”ï¼Œåªæ˜¯åœ¨æœ€åæäº¤æ›´æ”¹æ—¶éªŒè¯æ˜¯å¦å‘ç”Ÿå†²çªï¼Œå¦‚æœå†²çªåˆ™å†è¯•ä¸€éï¼Œç›´è‡³æˆåŠŸä¸ºæ­¢ï¼Œè¿™ä¸ªå°è¯•çš„è¿‡ç¨‹ç§°ä¸ºè‡ªæ—‹ã€‚</p>
<p>ä¹è§‚é”æ²¡æœ‰åŠ é”ï¼Œä½†ä¹è§‚é”å¼•å…¥äº†ABAé—®é¢˜ï¼Œæ­¤æ—¶ä¸€èˆ¬é‡‡ç”¨ç‰ˆæœ¬å·è¿›è¡Œæ§åˆ¶ï¼›<br>ä¹Ÿå¯èƒ½äº§ç”Ÿè‡ªæ—‹æ¬¡æ•°è¿‡å¤šé—®é¢˜ï¼Œæ­¤æ—¶å¹¶ä¸èƒ½æé«˜æ•ˆç‡ï¼Œåè€Œä¸å¦‚ç›´æ¥åŠ é”çš„æ•ˆç‡é«˜ï¼›<br>åªèƒ½ä¿è¯ä¸€ä¸ªå¯¹è±¡çš„åŸå­æ€§ï¼Œå¯ä»¥å°è£…æˆå¯¹è±¡ï¼Œå†è¿›è¡ŒCASæ“ä½œï¼›</p>
<h1 id="67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹-Synchronized-å’Œ-ReentrantLock-çš„å¼‚åŒã€‚"><a href="#67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹-Synchronized-å’Œ-ReentrantLock-çš„å¼‚åŒã€‚" class="headerlink" title="67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹ Synchronized å’Œ ReentrantLock çš„å¼‚åŒã€‚"></a>67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹ Synchronized å’Œ ReentrantLock çš„å¼‚åŒã€‚</h1><p>ï¼ˆ1ï¼‰ç›¸ä¼¼ç‚¹</p>
<p>å®ƒä»¬éƒ½æ˜¯é˜»å¡å¼çš„åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†å¯¹è±¡é”ï¼Œè¿›å…¥ä»£ç å—ï¼Œå…¶å®ƒè®¿é—®è¯¥åŒæ­¥å—çš„çº¿ç¨‹éƒ½å¿…é¡»é˜»å¡åœ¨åŒæ­¥ä»£ç å—å¤–é¢ç­‰å¾…ï¼Œè€Œè¿›è¡Œçº¿ç¨‹é˜»å¡å’Œå”¤é†’çš„ä»£ç æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰åŠŸèƒ½åŒºåˆ«</p>
<p>Synchronizedæ˜¯javaè¯­è¨€çš„å…³é”®å­—ï¼Œæ˜¯åŸç”Ÿè¯­æ³•å±‚é¢çš„äº’æ–¥ï¼Œéœ€è¦JVMå®ç°ï¼›ReentrantLock æ˜¯JDK1.5ä¹‹åæä¾›çš„APIå±‚é¢çš„äº’æ–¥é”ï¼Œéœ€è¦lockå’Œunlock()æ–¹æ³•é…åˆtry&#x2F;finallyä»£ç å—æ¥å®Œæˆã€‚<br>Synchronizedä½¿ç”¨è¾ƒReentrantLock ä¾¿åˆ©ä¸€äº›ï¼›<br>é”çš„ç»†ç²’åº¦å’Œçµæ´»æ€§ï¼šReentrantLockå¼ºäºSynchronizedï¼›</p>
<p>ï¼ˆ3ï¼‰æ€§èƒ½åŒºåˆ«</p>
<p>Synchronizedå¼•å…¥åå‘é”ï¼Œè‡ªæ—‹é”ä¹‹åï¼Œä¸¤è€…çš„æ€§èƒ½å·®ä¸å¤šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨Synchronizedã€‚</p>
<p>â‘  Synchronized</p>
<p>Synchronizedä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚</p>
<p>åœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡é”ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†é‚£ä¸ªå¯¹è±¡é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨+1ï¼Œç›¸åº”çš„æ‰§è¡Œmonitorexitæ—¶ï¼Œè®¡æ•°å™¨-1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±ä¼šè¢«é‡Šæ”¾ã€‚å¦‚æœè·å–é”å¤±è´¥ï¼Œå½“å‰çº¿ç¨‹å°±è¦é˜»å¡ï¼ŒçŸ¥é“å¯¹è±¡é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚</p>
<p>â‘¡ ReentrantLock</p>
<p>ReentrantLockæ˜¯java.util.concurrentåŒ…ä¸‹æä¾›çš„ä¸€å¥—äº’æ–¥é”ï¼Œç›¸æ¯”Synchronizedï¼ŒReentrantLockç±»æä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸‰é¡¹ï¼š</p>
<p>ç­‰å¾…å¯ä¸­æ–­ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾çš„æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œè¿™ç›¸å½“äºSynchronizedé¿å…å‡ºç°æ­»é”çš„æƒ…å†µã€‚é€šè¿‡lock.lockInterruptibly()æ¥å®ç°è¿™ä¸€æœºåˆ¶ï¼›<br>å…¬å¹³é”ï¼Œå¤šä¸ªçº¿ç¨‹ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºè·å¾—é”ï¼ŒSynchronizedé”æ˜¯éå…¬å¹³é”ï¼›ReentrantLocké»˜è®¤ä¹Ÿæ˜¯éå…¬å¹³é”ï¼Œå¯ä»¥é€šè¿‡å‚æ•°trueè®¾ä¸ºå…¬å¹³é”ï¼Œä½†å…¬å¹³é”è¡¨ç°çš„æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ï¼›<br>é”ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªå¯¹è±¡ã€‚ReentrantLockæä¾›äº†ä¸€ä¸ªConditionï¼ˆæ¡ä»¶ï¼‰ç±»ï¼Œç”¨æ¥å®ç°åˆ†ç»„å”¤é†’éœ€è¦å”¤é†’çš„çº¿ç¨‹ä»¬ï¼Œè€Œä¸æ˜¯åƒSynchronizedè¦ä¹ˆéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œè¦ä¹ˆå”¤é†’å…¨éƒ¨çº¿ç¨‹ã€‚</p>
<h1 id="68ã€ReentrantLock-æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ"><a href="#68ã€ReentrantLock-æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ" class="headerlink" title="68ã€ReentrantLock æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ"></a>68ã€ReentrantLock æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å¯é‡å…¥æ€§</p>
<p>ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œå½“å…¶ä»–çº¿ç¨‹å°è¯•è·å–è¯¥é”æ—¶ï¼Œä¼šè¢«é˜»å¡ï¼›è€Œè¿™ä¸ªçº¿ç¨‹å°è¯•è·å–è‡ªå·±æŒæœ‰é”æ—¶ï¼Œå¦‚æœæˆåŠŸè¯´æ˜è¯¥é”æ˜¯å¯é‡å…¥çš„ï¼Œåä¹‹åˆ™ä¸å¯é‡å…¥ã€‚</p>
<p>ï¼ˆ2ï¼‰synchronizedæ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§</p>
<p>synchronizedå…³é”®å­—ç»è¿‡ç¼–è¯‘åï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚æ¯ä¸ªé”å¯¹è±¡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¯¥è®¡æ•°å™¨åˆå§‹å€¼ä¸º0ï¼Œè¡¨ç¤ºä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥è·å–è¯¥é”å¹¶æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ã€‚æ ¹æ®è™šæ‹Ÿæœºè§„èŒƒè¦æ±‚ï¼Œåœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡çš„é”ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†å¯¹è±¡çš„é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨+1ï¼Œç›¸åº”çš„åœ¨æ‰§è¡ŒmonitorexitæŒ‡ä»¤åé”è®¡æ•°å™¨-1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾ã€‚å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚</p>
<p>ï¼ˆ3ï¼‰ReentrantLockå¦‚ä½•å®ç°å¯é‡å…¥æ€§</p>
<p>ReentrantLockä½¿ç”¨å†…éƒ¨ç±»Syncæ¥ç®¡ç†é”ï¼Œæ‰€ä»¥çœŸæ­£çš„è·å–é”æ˜¯ç”±Syncçš„å®ç°ç±»æ§åˆ¶çš„ã€‚Syncæœ‰ä¸¤ä¸ªå®ç°ï¼Œåˆ†åˆ«ä¸ºNonfairSyncï¼ˆéå…¬å…¬å¹³é”ï¼‰å’ŒFairSyncï¼ˆå…¬å¹³é”ï¼‰ã€‚Syncé€šè¿‡ç»§æ‰¿AQSå®ç°ï¼Œåœ¨AQSä¸­ç»´æŠ¤äº†ä¸€ä¸ªprivate volatile int stateæ¥è®¡ç®—é‡å…¥æ¬¡æ•°ï¼Œé¿å…é¢‘ç¹çš„æŒæœ‰é‡Šæ”¾æ“ä½œå¸¦æ¥çš„çº¿ç¨‹é—®é¢˜ã€‚</p>
<p>ï¼ˆ4ï¼‰ReentrantLockä»£ç å®ä¾‹</p>
<p>&#x2F;&#x2F; Syncç»§æ‰¿äºAQS<br>abstract static class Sync extends AbstractQueuedSynchronizer {<br>  â€¦<br>}<br>&#x2F;&#x2F; ReentrantLocké»˜è®¤æ˜¯éå…¬å¹³é”<br>public ReentrantLock() {<br>        sync &#x3D; new NonfairSync();<br> }<br>&#x2F;&#x2F; å¯ä»¥é€šè¿‡å‘æ„é€ æ–¹æ³•ä¸­ä¼ trueæ¥å®ç°å…¬å¹³é”<br>public ReentrantLock(boolean fair) {<br>    sync &#x3D; fair ? new FairSync() : new NonfairSync();<br>}<br>protected final boolean tryAcquire(int acquires) {<br>        &#x2F;&#x2F; å½“å‰æƒ³è¦è·å–é”çš„çº¿ç¨‹<br>        final Thread current &#x3D; Thread.currentThread();<br>        &#x2F;&#x2F; å½“å‰é”çš„çŠ¶æ€<br>        int c &#x3D; getState();<br>        &#x2F;&#x2F; state &#x3D;&#x3D; 0 æ­¤æ—¶æ­¤åˆ»æ²¡æœ‰çº¿ç¨‹æŒæœ‰é”<br>        if (c &#x3D;&#x3D; 0) {<br>            &#x2F;&#x2F; è™½ç„¶æ­¤æ—¶æ­¤åˆ»é”æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯è¿™æ˜¯å…¬å¹³é”ï¼Œæ—¢ç„¶æ˜¯å…¬å¹³ï¼Œå°±å¾—è®²ç©¶å…ˆæ¥ååˆ°ï¼Œ<br>            &#x2F;&#x2F; çœ‹çœ‹æœ‰æ²¡æœ‰åˆ«äººåœ¨é˜Ÿåˆ—ä¸­ç­‰äº†åŠå¤©äº†<br>            if (!hasQueuedPredecessors() &amp;&amp;<br>                &#x2F;&#x2F; å¦‚æœæ²¡æœ‰çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œé‚£å°±ç”¨CASå°è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸäº†å°±è·å–åˆ°é”äº†ï¼Œ<br>                &#x2F;&#x2F; ä¸æˆåŠŸçš„è¯ï¼Œåªèƒ½è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼Œå°±åœ¨åˆšåˆšå‡ ä¹åŒä¸€æ—¶åˆ»æœ‰ä¸ªçº¿ç¨‹æŠ¢å…ˆäº† &#x3D;_&#x3D;<br>                &#x2F;&#x2F; å› ä¸ºåˆšåˆšè¿˜æ²¡äººçš„ï¼Œæˆ‘åˆ¤æ–­è¿‡äº†<br>                compareAndSetState(0, acquires)) {</p>
<pre><code>            // åˆ°è¿™é‡Œå°±æ˜¯è·å–åˆ°é”äº†ï¼Œæ ‡è®°ä¸€ä¸‹ï¼Œå‘Šè¯‰å¤§å®¶ï¼Œç°åœ¨æ˜¯æˆ‘å ç”¨äº†é”
            setExclusiveOwnerThread(current);
            return true;
        &#125;
    &#125;
      // ä¼šè¿›å…¥è¿™ä¸ªelse ifåˆ†æ”¯ï¼Œè¯´æ˜æ˜¯é‡å…¥äº†ï¼Œéœ€è¦æ“ä½œï¼šstate=state+1
    // è¿™é‡Œä¸å­˜åœ¨å¹¶å‘é—®é¢˜
    else if (current == getExclusiveOwnerThread()) &#123;
        int nextc = c + acquires;
        if (nextc &lt; 0)
            throw new Error(&quot;Maximum lock count exceeded&quot;);
        setState(nextc);
        return true;
    &#125;
    // å¦‚æœåˆ°è¿™é‡Œï¼Œè¯´æ˜å‰é¢çš„ifå’Œelse iféƒ½æ²¡æœ‰è¿”å›trueï¼Œè¯´æ˜æ²¡æœ‰è·å–åˆ°é”
    return false;
&#125;
</code></pre>
<p>ï¼ˆ5ï¼‰ä»£ç åˆ†æ</p>
<p>å½“ä¸€ä¸ªçº¿ç¨‹åœ¨è·å–é”è¿‡ç¨‹ä¸­ï¼Œå…ˆåˆ¤æ–­stateçš„å€¼æ˜¯å¦ä¸º0ï¼Œå¦‚æœæ˜¯è¡¨ç¤ºæ²¡æœ‰çº¿ç¨‹æŒæœ‰é”ï¼Œå°±å¯ä»¥å°è¯•è·å–é”ã€‚<br>å½“stateçš„å€¼ä¸ä¸º0æ—¶ï¼Œè¡¨ç¤ºé”å·²ç»è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨äº†ï¼Œè¿™æ—¶ä¼šåšä¸€ä¸ªåˆ¤æ–­current&#x3D;&#x3D;getExclusiveOwnerThread()ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯å½“å‰æŒæœ‰é”çš„çº¿ç¨‹ï¼Œè¿™ä¸ªåˆ¤æ–­æ˜¯çœ‹å½“å‰æŒæœ‰é”çš„çº¿ç¨‹æ˜¯ä¸æ˜¯è‡ªå·±ï¼Œå¦‚æœæ˜¯è‡ªå·±ï¼Œé‚£ä¹ˆå°†stateçš„å€¼+1ï¼Œè¡¨ç¤ºé‡å…¥è¿”å›å³å¯ã€‚</p>
<h1 id="69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ"><a href="#69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ" class="headerlink" title="69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ"></a>69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰é”æ¶ˆé™¤</p>
<p>æ‰€æ¶ˆé™¤å°±æ˜¯è™šæ‹Ÿæœºæ ¹æ®ä¸€ä¸ªå¯¹è±¡æ˜¯å¦çœŸæ­£å­˜åœ¨åŒæ­¥æƒ…å†µï¼Œè‹¥ä¸å­˜åœ¨åŒæ­¥æƒ…å†µï¼Œåˆ™å¯¹è¯¥å¯¹è±¡çš„è®¿é—®æ— éœ€ç»è¿‡åŠ é”è§£é”çš„æ“ä½œã€‚</p>
<p>æ¯”å¦‚StringBufferçš„appendæ–¹æ³•ï¼Œå› ä¸ºappendæ–¹æ³•éœ€è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«å ç”¨ï¼Œè€Œå¦‚æœä»£ç ä¸å­˜åœ¨é”ç«äº‰ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†çš„æ€§èƒ½æ¶ˆè€—æ˜¯æ— æ„ä¹‰çš„ã€‚äºæ˜¯è™šæ‹Ÿæœºåœ¨å³æ—¶ç¼–è¯‘çš„æ—¶å€™å°±ä¼šå°†ä¸Šé¢çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯é”æ¶ˆé™¤ã€‚</p>
<p>@Override<br>public synchronized StringBuffer append(String str) {<br>    toStringCache &#x3D; null;<br>    super.append(str);<br>    return this;<br>}<br>ä»æºç å¯ä»¥çœ‹å‡ºï¼Œappendæ–¹æ³•ç”¨äº† synchronizedå…³é”®å­—ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä½†æˆ‘ä»¬å¯èƒ½ä»…åœ¨çº¿ç¨‹å†…éƒ¨æŠŠStringBufferå½“åšå±€éƒ¨å˜é‡ä½¿ç”¨ï¼›StringBufferä»…åœ¨æ–¹æ³•å†…ä½œç”¨åŸŸæœ‰æ•ˆï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¯‘å™¨å°†å…¶ä¼˜åŒ–ï¼Œå°†é”æ¶ˆé™¤ï¼Œå‰ææ˜¯Javaå¿…é¡»è¿è¡Œåœ¨serveræ¨¡å¼ï¼ŒåŒæ—¶å¿…é¡»å¼€å¯é€ƒé€¸åˆ†æï¼›</p>
<p>-server -XX:+DoEscapeAnalysis -XX:+EliminateLocks</p>
<p>å…¶ä¸­+DoEscapeAnalysisè¡¨ç¤ºå¼€å¯é€ƒé€¸åˆ†æï¼Œ+EliminateLocksè¡¨ç¤ºé”æ¶ˆé™¤ã€‚<br>public static String createStringBuffer(String str1, String str2) {<br>    StringBuffer sBuf &#x3D; new StringBuffer();<br>    sBuf.append(str1);&#x2F;&#x2F; appendæ–¹æ³•æ˜¯åŒæ­¥æ“ä½œ<br>    sBuf.append(str2);<br>    return sBuf.toString();<br>}<br>é€ƒé€¸åˆ†æï¼šæ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œå®ƒè¦çœ‹sBufæ˜¯å¦å¯èƒ½é€ƒå‡ºå®ƒçš„ä½œç”¨åŸŸï¼Ÿå¦‚æœå°†sBufä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œè¿”å›ï¼Œé‚£ä¹ˆå®ƒåœ¨æ–¹æ³•å¤–éƒ¨å¯èƒ½è¢«å½“ä½œä¸€ä¸ªå…¨å±€å¯¹è±¡ä½¿ç”¨ï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿™æ—¶å°±å¯ä»¥è¯´sBufè¿™ä¸ªå¯¹è±¡å‘ç”Ÿé€ƒé€¸äº†ï¼Œå› è€Œä¸åº”å°†appendæ“ä½œçš„é”æ¶ˆé™¤ï¼Œä½†æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æ²¡æœ‰å‘ç”Ÿé”é€ƒé€¸ï¼Œé”æ¶ˆé™¤å°±å¯ä»¥å¸¦æ¥ä¸€å®šçš„æ€§èƒ½æå‡ã€‚ </p>
<p>ï¼ˆ2ï¼‰é”ç²—åŒ–</p>
<p>é”çš„è¯·æ±‚ã€åŒæ­¥ã€é‡Šæ”¾éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœé«˜é¢‘çš„é”è¯·æ±‚åè€Œä¸åˆ©äºç³»ç»Ÿæ€§èƒ½çš„ä¼˜åŒ–ï¼Œé”ç²—åŒ–å°±æ˜¯æŠŠå¤šæ¬¡çš„é”è¯·æ±‚åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ï¼Œæ‰©å¤§é”çš„èŒƒå›´ï¼Œé™ä½é”è¯·æ±‚ã€åŒæ­¥ã€é‡Šæ”¾å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p>
<h1 id="70ã€è·Ÿ-Synchronized-ç›¸æ¯”ï¼Œå¯é‡å…¥é”-ReentrantLock-å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#70ã€è·Ÿ-Synchronized-ç›¸æ¯”ï¼Œå¯é‡å…¥é”-ReentrantLock-å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="70ã€è·Ÿ Synchronized ç›¸æ¯”ï¼Œå¯é‡å…¥é” ReentrantLock å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>70ã€è·Ÿ Synchronized ç›¸æ¯”ï¼Œå¯é‡å…¥é” ReentrantLock å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h1><p>ï¼ˆ1ï¼‰éƒ½æ˜¯å¯é‡å…¥é”ï¼›</p>
<p>ï¼ˆ2ï¼‰ReentrantLockå†…éƒ¨æ˜¯å®ç°äº†Syncï¼ŒSyncç»§æ‰¿äºAQSæŠ½è±¡ç±»ã€‚Syncæœ‰ä¸¤ä¸ªå®ç°ï¼Œä¸€ä¸ªæ˜¯å…¬å¹³é”ï¼Œä¸€ä¸ªæ˜¯éå…¬å¹³é”ï¼Œé€šè¿‡æ„é€ å‡½æ•°å®šä¹‰ã€‚AQSä¸­ç»´æŠ¤äº†ä¸€ä¸ªstateæ¥è®¡ç®—é‡å…¥æ¬¡æ•°ï¼Œé¿å…é¢‘ç¹çš„æŒæœ‰é‡Šæ”¾æ“ä½œå¸¦æ¥çš„çº¿ç¨‹é—®é¢˜ã€‚</p>
<p>ï¼ˆ3ï¼‰ReentrantLockåªèƒ½å®šä¹‰ä»£ç å—ï¼Œè€ŒSynchronizedå¯ä»¥å®šä¹‰æ–¹æ³•å’Œä»£ç å—ï¼›</p>
<p>4ã€Synchronizedæ˜¯JVMçš„ä¸€ä¸ªå†…éƒ¨å…³é”®å­—ï¼ŒReentrantLockæ˜¯JDK1.5ä¹‹åå¼•å…¥çš„ä¸€ä¸ªAPIå±‚é¢çš„äº’æ–¥é”ï¼›</p>
<p>5ã€Synchronizedå®ç°è‡ªåŠ¨çš„åŠ é”ã€é‡Šæ”¾é”ï¼ŒReentrantLockéœ€è¦æ‰‹åŠ¨åŠ é”å’Œé‡Šæ”¾é”ï¼Œä¸­é—´å¯ä»¥æš‚åœï¼›</p>
<p>6ã€Synchronizedç”±äºå¼•è¿›äº†åå‘é”å’Œè‡ªæ—‹é”ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šå’ŒReentrantLockå·®ä¸å¤šï¼Œä½†æ“ä½œä¸Šæ–¹ä¾¿å¾ˆå¤šï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨Synchronizedã€‚</p>
<h1 id="71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ-AQS-æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ"><a href="#71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ-AQS-æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ" class="headerlink" title="71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ AQS æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ"></a>71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ AQS æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰AQSæ˜¯AbstractQueuedSynchronizerçš„ç¼©å†™ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå®ç°åŒæ­¥é”çš„æ ¸å¿ƒç»„ä»¶ã€‚</p>
<p>AQSæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸»è¦é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥ä½¿ç”¨ï¼Œå®ƒæœ¬èº«æ²¡æœ‰å®ç°ä»»ä½•çš„åŒæ­¥æ¥å£ï¼Œä»…ä»…æ˜¯å®šä¹‰äº†åŒæ­¥çŠ¶æ€çš„è·å–å’Œé‡Šæ”¾çš„æ–¹æ³•æ¥æä¾›è‡ªå®šä¹‰çš„åŒæ­¥ç»„ä»¶ã€‚</p>
<p>ï¼ˆ2ï¼‰AQSçš„ä¸¤ç§åŠŸèƒ½ï¼šç‹¬å é”å’Œå…±äº«é”</p>
<p>ï¼ˆ3ï¼‰AQSçš„å†…éƒ¨å®ç°</p>
<p>AQSçš„å®ç°ä¾èµ–å†…éƒ¨çš„åŒæ­¥é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯FIFOçš„åŒå‘é˜Ÿåˆ—ï¼Œå¦‚æœå½“å‰çº¿ç¨‹ç«äº‰å¤±è´¥ï¼Œé‚£ä¹ˆAQSä¼šæŠŠå½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…çŠ¶æ€ä¿¡æ¯æ„é€ æˆä¸€ä¸ªNodeåŠ å…¥åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ—¶å†é˜»å¡è¯¥çº¿ç¨‹ã€‚å½“è·å–é”çš„çº¿ç¨‹é‡Šæ”¾é”ä»¥åï¼Œä¼šä»é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªé˜»å¡çš„èŠ‚ç‚¹ï¼ˆçº¿ç¨‹ï¼‰ã€‚</p>
<p>AQSé˜Ÿåˆ—å†…éƒ¨ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªFIFOçš„åŒå‘é“¾è¡¨ï¼Œè¿™ç§ç»“æ„çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªæ•°æ®ç»“æ„éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ç›´æ¥çš„åç»§èŠ‚ç‚¹å’Œç›´æ¥å‰é©±èŠ‚ç‚¹ã€‚æ‰€ä»¥åŒå‘é“¾è¡¨å¯ä»¥ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¾ˆæ–¹ä¾¿çš„èŒƒæ–‡å‰é©±å’Œåç»§èŠ‚ç‚¹ã€‚æ¯ä¸ªNodeå…¶å®æ˜¯ç”±çº¿ç¨‹å°è£…ï¼Œå½“çº¿ç¨‹äº‰æŠ¢é”å¤±è´¥åä¼šå°è£…æˆNodeåŠ å…¥åˆ°AQSé˜Ÿåˆ—ä¸­ã€‚</p>
<h1 id="72ã€AQS-å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ"><a href="#72ã€AQS-å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ" class="headerlink" title="72ã€AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ"></a>72ã€AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ</h1><p>AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼</p>
<p>ï¼ˆ1ï¼‰Exclusiveï¼ˆç‹¬å ï¼‰</p>
<p>åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š</p>
<p>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”<br>éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„<br>ï¼ˆ2ï¼‰Shareï¼ˆå…±äº«ï¼‰</p>
<p>å¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚Semaphore&#x2F;CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚</p>
<p>ReentrantReadWriteLock å¯ä»¥çœ‹æˆæ˜¯ç»„åˆå¼ï¼Œå› ä¸ºReentrantReadWriteLockä¹Ÿå°±æ˜¯è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹æŸä¸€èµ„æºè¿›è¡Œè¯»ã€‚</p>
<p>ä¸åŒçš„è‡ªå®šä¹‰åŒæ­¥å™¨äº‰ç”¨å…±äº«èµ„æºçš„æ–¹å¼ä¹Ÿä¸åŒã€‚è‡ªå®šä¹‰åŒæ­¥å™¨åœ¨å®ç°æ—¶åªéœ€è¦å®ç°å…±äº«èµ„æº state çš„è·å–ä¸é‡Šæ”¾æ–¹å¼å³å¯ï¼Œè‡³äºå…·ä½“çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆå¦‚è·å–èµ„æºå¤±è´¥å…¥é˜Ÿ&#x2F;å”¤é†’å‡ºé˜Ÿç­‰ï¼‰ï¼ŒAQSå·²ç»åœ¨é¡¶å±‚å®ç°å¥½äº†ã€‚</p>
<h1 id="73ã€å¦‚ä½•è®©-Java-çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ"><a href="#73ã€å¦‚ä½•è®©-Java-çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ" class="headerlink" title="73ã€å¦‚ä½•è®© Java çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ"></a>73ã€å¦‚ä½•è®© Java çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ</h1><p>synchronized<br>volatile<br>ReenreantLock<br>ä½¿ç”¨å±€éƒ¨å˜é‡å®ç°çº¿ç¨‹åŒæ­¥</p>
<h1 id="74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚"><a href="#74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚" class="headerlink" title="74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚"></a>74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</h1><p>ï¼ˆ1ï¼‰SemaphoreåŒæ­¥å™¨</p>
<p>ç‰¹å¾ï¼š</p>
<p>ç»å…¸çš„ä¿¡å·é‡ï¼Œé€šè¿‡è®¡æ•°å™¨æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®<br>Semaphore(int count):åˆ›å»ºæ‹¥æœ‰countä¸ªè®¸å¯è¯çš„ä¿¡å·é‡<br>acquire()&#x2F;acquire(int num) : è·å–1&#x2F;numä¸ªè®¸å¯è¯<br>release&#x2F;release(int num) : é‡Šæ”¾1&#x2F;numä¸ªè®¸å¯è¯</p>
<p>ï¼ˆ2ï¼‰CountDownLatchåŒæ­¥å™¨</p>
<p>ç‰¹å¾ï¼š</p>
<p>å¿…é¡»å‘ç”ŸæŒ‡å®šæ•°é‡çš„äº‹ä»¶åæ‰å¯ä»¥ç»§ç»­è¿è¡Œ(æ¯”å¦‚èµ›è·‘æ¯”èµ›ï¼Œè£åˆ¤å–Šå‡º3,2,1ä¹‹åå¤§å®¶æ‰åŒæ—¶è·‘)<br>CountDownLatch(int count):å¿…é¡»å‘ç”Ÿcountä¸ªæ•°é‡æ‰å¯ä»¥æ‰“å¼€é”å­˜å™¨<br>await:ç­‰å¾…é”å­˜å™¨<br>countDown:è§¦å‘äº‹ä»¶</p>
<p>ï¼ˆ3ï¼‰CyclicBarrieråŒæ­¥å™¨</p>
<p>ç‰¹å¾ï¼š</p>
<p>é€‚ç”¨äºåªæœ‰å¤šä¸ªçº¿ç¨‹éƒ½åˆ°è¾¾é¢„å®šç‚¹æ—¶æ‰å¯ä»¥ç»§ç»­æ‰§è¡Œ(æ¯”å¦‚æ–—åœ°ä¸»ï¼Œéœ€è¦ç­‰é½ä¸‰ä¸ªäººæ‰å¼€å§‹)<br>CyclicBarrier(int num) :ç­‰å¾…çº¿ç¨‹çš„æ•°é‡<br>CyclicBarrier(int num, Runnable action) :ç­‰å¾…çº¿ç¨‹çš„æ•°é‡ä»¥åŠæ‰€æœ‰çº¿ç¨‹åˆ°è¾¾åçš„æ“ä½œ<br>await() : åˆ°è¾¾ä¸´ç•Œç‚¹åæš‚åœçº¿ç¨‹</p>
<p>ï¼ˆ4ï¼‰äº¤æ¢å™¨(Exchanger)åŒæ­¥å™¨</p>
<p>ï¼ˆ5ï¼‰PhaseråŒæ­¥å™¨</p>
<h1 id="75ã€Java-ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„"><a href="#75ã€Java-ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="75ã€Java ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„"></a>75ã€Java ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„</h1><p>åˆ›å»ºä¸€ä¸ªé˜»å¡é˜Ÿåˆ—æ¥å®¹çº³ä»»åŠ¡ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡æ—¶åˆ›å»ºè¶³å¤Ÿå¤šçš„çº¿ç¨‹ï¼Œå¹¶å¤„ç†ä»»åŠ¡ï¼Œä¹‹åæ¯ä¸ªå·¥ä½œçº¿ç¨‹è‡ªåŠ¨ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–çº¿ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡ä¸º0ä¸ºæ­¢ï¼Œæ­¤æ—¶çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¸€æ—¦æœ‰å·¥ä½œä»»åŠ¡åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå³åˆ»å”¤é†’å·¥ä½œçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå®ç°çº¿ç¨‹çš„å¯å¤ç”¨æ€§ã€‚</p>
<p>çº¿ç¨‹æ± ä¸€èˆ¬åŒ…æ‹¬å››ä¸ªåŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š</p>
<p>ï¼ˆ1ï¼‰çº¿ç¨‹æ± ç®¡ç†å™¨</p>
<p>ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œé”€æ¯çº¿ç¨‹æ± ï¼Œæ·»åŠ æ–°ä»»åŠ¡ã€‚</p>
<p>ï¼ˆ2ï¼‰å·¥ä½œçº¿ç¨‹</p>
<p>çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œå¯å¾ªç¯æ‰§è¡Œä»»åŠ¡ï¼Œåœ¨æ²¡æœ‰ä»»åŠ¡æ—¶å¤„äºç­‰å¾…çŠ¶æ€ã€‚</p>
<p>ï¼ˆ3ï¼‰ä»»åŠ¡é˜Ÿåˆ—</p>
<p>ç”¨äºå­˜æ”¾æ²¡æœ‰å¤„ç†çš„ä»»åŠ¡ï¼Œä¸€ç§ç¼“å­˜æœºåˆ¶ã€‚</p>
<p>ï¼ˆ4ï¼‰ä»»åŠ¡æ¥å£</p>
<p>æ¯ä¸ªä»»åŠ¡å¿…é¡»å®ç°çš„æ¥å£ï¼Œä¾›å·¥ä½œçº¿ç¨‹è°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œï¼Œä¸»è¦è§„å®šäº†ä»»åŠ¡çš„å¼€å§‹å’Œæ”¶å°¾å·¥ä½œï¼Œå’Œä»»åŠ¡çš„çŠ¶æ€ã€‚</p>
<h1 id="76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°"><a href="#76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°" class="headerlink" title="76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°"></a>76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°</h1><p>&#x2F;&#x2F; Javaçº¿ç¨‹æ± çš„å®Œæ•´æ„é€ å‡½æ•°<br>public ThreadPoolExecutor(<br>  int corePoolSize, &#x2F;&#x2F; çº¿ç¨‹æ± é•¿æœŸç»´æŒçš„æœ€å°çº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹å¤„äºIdleçŠ¶æ€ï¼Œä¹Ÿä¸ä¼šå›æ”¶ã€‚<br>  int maximumPoolSize, &#x2F;&#x2F; çº¿ç¨‹æ•°çš„ä¸Šé™<br>  long keepAliveTime, &#x2F;&#x2F; çº¿ç¨‹æœ€å¤§ç”Ÿå‘½å‘¨æœŸã€‚<br>  TimeUnit unit, &#x2F;&#x2F;æ—¶é—´å•ä½<br>  BlockingQueue<Runnable> workQueue, &#x2F;&#x2F;ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹éƒ½å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œè€Œæ­¤æ—¶ä»»åŠ¡æ•°é‡ç»§ç»­å¢åŠ ï¼Œåˆ™éœ€è¦ä¸€ä¸ªå®¹å™¨æ¥å®¹çº³è¿™äº›ä»»åŠ¡ï¼Œè¿™å°±æ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>  ThreadFactory threadFactory, &#x2F;&#x2F; çº¿ç¨‹å·¥å‚ã€‚å®šä¹‰å¦‚ä½•å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥è®¾ç½®çº¿ç¨‹åç§°ï¼Œå¹¶ä¸”å¯ä»¥ç¡®è®¤æ˜¯å¦æ˜¯åå°çº¿ç¨‹ç­‰ã€‚<br>  RejectedExecutionHandler handler &#x2F;&#x2F; æ‹’ç»ä»»åŠ¡å¤„ç†å™¨ã€‚ç”±äºè¶…å‡ºçº¿ç¨‹æ•°é‡å’Œé˜Ÿåˆ—å®¹é‡è€Œå¯¹ç»§ç»­å¢åŠ çš„ä»»åŠ¡è¿›è¡Œå¤„ç†çš„ç¨‹åºã€‚<br>)</p>
<h1 id="77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ"><a href="#77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ" class="headerlink" title="77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ"></a>77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ</h1><p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯åœ¨ç¬¬ä¸€æ¬¡æäº¤ä»»åŠ¡submitæ—¶åˆ›å»ºçš„</p>
<p>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰ç»§æ‰¿Threadå’Œå®ç°Runnableï¼Œé‡å†™runæ–¹æ³•ï¼Œstartå¼€å§‹æ‰§è¡Œï¼Œwaitç­‰å¾…ï¼Œsleepä¼‘çœ ï¼Œshutdownåœæ­¢ã€‚</p>
<p>ï¼ˆ1ï¼‰newSingleThreadExecutorï¼šå•çº¿ç¨‹æ± ã€‚</p>
<p>é¡¾åæ€ä¹‰å°±æ˜¯ä¸€ä¸ªæ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼Œè¯¥çº¿ç¨‹æ°¸ä¸è¶…æ—¶ï¼Œè€Œä¸”ç”±äºæ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“æœ‰å¤šä¸ªä»»åŠ¡éœ€è¦å¤„ç†æ—¶ï¼Œä¼šå°†å®ƒä»¬æ”¾ç½®åˆ°ä¸€ä¸ªæ— ç•Œé˜»å¡é˜Ÿåˆ—ä¸­é€ä¸ªå¤„ç†ï¼Œå®ƒçš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<p>public static ExecutorService newSingleThreadExecutor() {<br>    return new FinalizableDelegatedExecutorService<br>            (new ThreadPoolExecutor(1, 1,0L, TimeUnit.MILLISECONDS,<br>             new LinkedBlockingQueue&lt;Runnable()));<br>}<br>å®ƒçš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯ç®€å•çš„ç¤ºä¾‹ï¼š</p>
<p>public static void main(String[] args) throws ExecutionException,InterruptedException {<br>    &#x2F;&#x2F; åˆ›å»ºå•çº¿ç¨‹æ‰§è¡Œå™¨<br>    ExecutorService es &#x3D; Executors.newSingleThreadExecutor();<br>    &#x2F;&#x2F; æ‰§è¡Œä¸€ä¸ªä»»åŠ¡<br>    Future<String> future &#x3D; es.submit(new Callable<String>() {<br>        @Override<br>        public String call() throws Exception {<br>            return â€œâ€;<br>        }<br>    });<br>    &#x2F;&#x2F; è·å¾—ä»»åŠ¡æ‰§è¡Œåçš„è¿”å›å€¼<br>    System.out.println(â€œè¿”å›å€¼ï¼šâ€ + future.get());<br>    &#x2F;&#x2F; å…³é—­æ‰§è¡Œå™¨<br>    es.shutdown();<br>}<br>ï¼ˆ2ï¼‰newCachedThreadPoolï¼šç¼“å†²åŠŸèƒ½çš„çº¿ç¨‹ã€‚</p>
<p>å»ºç«‹äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè€Œä¸”çº¿ç¨‹æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„(å½“ç„¶ï¼Œä¸èƒ½è¶…è¿‡Integerçš„æœ€å¤§å€¼)ï¼Œæ–°å¢ä¸€ä¸ªä»»åŠ¡å³æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œæˆ–è€…å¤ç”¨ä¹‹å‰ç©ºé—²çš„çº¿ç¨‹ï¼Œæˆ–è€…é‡äº²å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ä¸€æ—¦ä¸€ä¸ªçº¿ç¨‹åœ¨60ç§’å†…ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€æ—¶ï¼ˆä¹Ÿå°±æ˜¯ä¸€åˆ†é’Ÿæ— äº‹å¯åšï¼‰ï¼Œåˆ™ä¼šè¢«ç»ˆæ­¢ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p>
<p>public static ExecutorService newCachedThreadPool() {<br>    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,60L, TimeUnit.SECONDS,<br>                                      new SynchronousQueue<Runnable>());<br>}<br>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä»»åŠ¡é˜Ÿåˆ—ä½¿ç”¨äº†åŒæ­¥é˜»å¡é˜Ÿåˆ—ï¼Œè¿™æ„å‘³ç€å‘é˜Ÿåˆ—ä¸­åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå³å¯å”¤é†’ä¸€ä¸ªçº¿ç¨‹(æ–°åˆ›å»ºçš„çº¿ç¨‹æˆ–å¤ç”¨ç©ºé—²çº¿ç¨‹æ¥å¤„ç†)ï¼Œè¿™ç§é˜Ÿåˆ—å·²ç»æ²¡æœ‰é˜Ÿåˆ—æ·±åº¦çš„æ¦‚å¿µäº†ã€‚</p>
<p>ï¼ˆ3ï¼‰newFixedThreadPoolï¼šå›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚</p>
<p>åœ¨åˆå§‹åŒ–æ—¶å·²ç»å†³å®šäº†çº¿ç¨‹çš„æœ€å¤§æ•°é‡ï¼Œè‹¥ä»»åŠ¡æ·»åŠ çš„èƒ½åŠ›è¶…å‡ºäº†çº¿ç¨‹çš„å¤„ç†èƒ½åŠ›ï¼Œåˆ™å»ºç«‹é˜»å¡é˜Ÿåˆ—å®¹çº³å¤šä½™çš„ä»»åŠ¡ï¼Œå…¶æºç å¦‚ä¸‹ï¼šã€€</p>
<p>public static ExecutorService newFixedThreadPool(int nThreads) {<br>    return new ThreadPoolExecutor(nThreads, nThreads,<br>                                      0L, TimeUnit.MILLISECONDS,<br>                                      new LinkedBlockingQueue<Runnable>());<br>}<br>ä¸Šé¢è¿”å›çš„æ˜¯ä¸€ä¸ªThreadPoolExecutorï¼Œå®ƒçš„corePoolSizeå’ŒmaximumPoolSizeæ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ä¸ºnThreadsã€‚å¦‚æœä»»åŠ¡å¢é•¿çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¶…è¿‡äº†LinkedBlockingQueneçš„æœ€å¤§å®¹é‡(Integerçš„æœ€å¤§å€¼)ï¼Œé‚£æ­¤æ—¶ä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿä¼šæŒ‰ç…§ThreadPoolExecutoré»˜è®¤çš„æ‹’ç»ç­–ç•¥(é»˜è®¤æ˜¯DiscardPolicyï¼Œç›´æ¥ä¸¢å¼ƒ)æ¥å¤„ç†ã€‚</p>
<p>ä»¥ä¸Šä¸‰ç§çº¿ç¨‹æ± æ‰§è¡Œå™¨éƒ½æ˜¯ThreadPoolExecutorçš„ç®€åŒ–ç‰ˆï¼Œç›®çš„æ˜¯å¸®åŠ©å¼€å‘äººå‘˜å±è”½è¿‡å¾—çº¿ç¨‹ç»†èŠ‚ï¼Œç®€åŒ–å¤šçº¿ç¨‹å¼€å‘ã€‚å½“éœ€è¦è¿è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡Executorsè·å¾—ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç„¶åè¿è¡Œä»»åŠ¡ï¼Œä¸éœ€è¦å…³æ³¨ThreadPoolExecutorçš„ä¸€ç³»åˆ—å‚æ•°æ—¶ä»€ä¹ˆå«ä¹‰ã€‚å½“ç„¶ï¼Œæœ‰æ—¶å€™è¿™ä¸‰ä¸ªçº¿ç¨‹ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œæ­¤æ—¶åˆ™å¯ä»¥ç›´æ¥æ“ä½œThreadPoolExecutoræ¥å®ç°å¤æ‚çš„å¤šçº¿ç¨‹è®¡ç®—ã€‚</p>
<p>newSingleThreadExecutorã€newCachedThreadPoolã€newFixedThreadPoolæ˜¯çº¿ç¨‹æ± çš„ç®€åŒ–ç‰ˆï¼Œè€ŒThreadPoolExecutoråˆ™æ˜¯æ——èˆ°ç‰ˆ___ç®€åŒ–ç‰ˆå®¹æ˜“æ“ä½œï¼Œéœ€è¦äº†è§£çš„çŸ¥è¯†ç›¸å¯¹å°‘äº›ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œè€Œæ——èˆ°ç‰ˆåŠŸèƒ½é½å…¨ï¼Œé€‚ç”¨é¢å¹¿ï¼Œéš¾ä»¥é©¾é©­ã€‚</p>
<h1 id="78ã€volatile-å…³é”®å­—çš„ä½œç”¨"><a href="#78ã€volatile-å…³é”®å­—çš„ä½œç”¨" class="headerlink" title="78ã€volatile å…³é”®å­—çš„ä½œç”¨"></a>78ã€volatile å…³é”®å­—çš„ä½œç”¨</h1><p>å¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚</p>
<p>ä»å®è·µè§’åº¦è€Œè¨€ï¼Œvolatile çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯å’Œ CAS ç»“åˆï¼Œä¿è¯äº†åŸå­æ€§ï¼Œè¯¦ç»†çš„å¯ä»¥å‚è§ java.util.concurrent.atomic åŒ…ä¸‹çš„ç±»ï¼Œæ¯”å¦‚ AtomicIntegerã€‚</p>
<p>volatile å¸¸ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å•æ¬¡æ“ä½œ(å•æ¬¡è¯»æˆ–è€…å•æ¬¡å†™)ã€‚</p>
<h1 id="79ã€æ—¢ç„¶-volatile-èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº-volatile-å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ"><a href="#79ã€æ—¢ç„¶-volatile-èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº-volatile-å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="79ã€æ—¢ç„¶ volatile èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº volatile å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ"></a>79ã€æ—¢ç„¶ volatile èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº volatile å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ</h1><p>volatileä¿®é¥°çš„å˜é‡åœ¨å„ä¸ªçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¸å­˜åœ¨ä¸€è‡´æ€§çš„é—®é¢˜ï¼ˆåœ¨å„ä¸ªçº¿ç¨‹å·¥ä½œçš„å†…å­˜ä¸­ï¼Œvolatileä¿®é¥°çš„å˜é‡ä¹Ÿä¼šå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºæ¯æ¬¡ä½¿ç”¨ä¹‹å‰éƒ½ä¼šå…ˆåˆ·æ–°ä¸»å­˜ä¸­çš„æ•°æ®åˆ°å·¥ä½œå†…å­˜ï¼Œæ‰§è¡Œå¼•æ“çœ‹ä¸åˆ°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºä¸å­˜åœ¨ä¸ä¸€è‡´çš„é—®é¢˜ï¼‰ï¼Œä½†æ˜¯javaçš„è¿ç®—å¹¶éåŸå­æ€§çš„æ“ä½œï¼Œå¯¼è‡´volatileåœ¨å¹¶å‘ä¸‹å¹¶éæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<h1 id="80ã€ThreadLocal-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#80ã€ThreadLocal-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="80ã€ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>80ã€ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</h1><p>ThreadLocal æ˜¯ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å‰¯æœ¬å˜é‡å·¥å…·ç±»ï¼Œåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ª ThreadLocalMap å¯¹è±¡ï¼Œç®€å•è¯´ ThreadLocal å°±æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨ ThreadLocalMap å¯¹è±¡å†…çš„ valueã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œé¿å…èµ„æºåœ¨å¤šçº¿ç¨‹é—´å…±äº«ã€‚</p>
<p>åŸç†ï¼šçº¿ç¨‹å±€éƒ¨å˜é‡æ˜¯å±€é™äºçº¿ç¨‹å†…éƒ¨çš„å˜é‡ï¼Œå±äºçº¿ç¨‹è‡ªèº«æ‰€æœ‰ï¼Œä¸åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«ã€‚Javaæä¾›ThreadLocalç±»æ¥æ”¯æŒçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ˜¯ä¸€ç§å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨ç®¡ç†ç¯å¢ƒä¸‹ï¼ˆå¦‚ web æœåŠ¡å™¨ï¼‰ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·¥ä½œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ¯”ä»»ä½•åº”ç”¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½è¦é•¿ã€‚ä»»ä½•çº¿ç¨‹å±€éƒ¨å˜é‡ä¸€æ—¦åœ¨å·¥ä½œå®Œæˆåæ²¡æœ‰é‡Šæ”¾ï¼ŒJava åº”ç”¨å°±å­˜åœ¨å†…å­˜æ³„éœ²çš„é£é™©ã€‚</p>
<p>ç»å…¸çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ª JDBC è¿æ¥ Connectionã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯æ¯ä¸ªçº¿ç¨‹çš„éƒ½åœ¨å„è‡ªçš„ Connection ä¸Šè¿›è¡Œæ•°æ®åº“çš„æ“ä½œï¼Œä¸ä¼šå‡ºç° A çº¿ç¨‹å…³äº† Bçº¿ç¨‹æ­£åœ¨ä½¿ç”¨çš„ Connectionï¼› è¿˜æœ‰ Session ç®¡ç† ç­‰é—®é¢˜ã€‚</p>
<h1 id="81ã€è¯·è°ˆè°ˆ-ThreadLocal-æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ"><a href="#81ã€è¯·è°ˆè°ˆ-ThreadLocal-æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="81ã€è¯·è°ˆè°ˆ ThreadLocal æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ"></a>81ã€è¯·è°ˆè°ˆ ThreadLocal æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ</h1><p>åœ¨javaç¨‹åºä¸­ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§æœºåˆ¶æ¥è§£å†³å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œä¸€ç§æ˜¯sychronizedæ–¹å¼ï¼Œé€šè¿‡é”æœºåˆ¶ï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œè®©å¦ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œæ˜¯ä»¥æ—¶é—´æ¢ç©ºé—´çš„æ–¹å¼æ¥è®©å¤šçº¿ç¨‹ä¸²è¡Œæ‰§è¡Œã€‚è€Œå¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯ThreadLocalæ–¹å¼ï¼Œé€šè¿‡åˆ›å»ºçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼æ¥è®©å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œè¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œé€‰æ‹©ã€‚</p>
<p>åœ¨springçš„æºç ä¸­ï¼Œå°±ä½¿ç”¨äº†ThreadLocalæ¥ç®¡ç†è¿æ¥ï¼Œåœ¨å¾ˆå¤šå¼€æºé¡¹ç›®ä¸­ï¼Œéƒ½ç»å¸¸ä½¿ç”¨ThreadLocalæ¥æ§åˆ¶å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œå› ä¸ºå®ƒè¶³å¤Ÿçš„ç®€å•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒæ˜¯å¦æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºå˜é‡æ˜¯æ¯ä¸ªçº¿ç¨‹æ‰€ç‰¹æœ‰çš„ã€‚</p>
<h1 id="82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨-ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨-ThreadLocal-éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"><a href="#82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨-ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨-ThreadLocal-éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ" class="headerlink" title="82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨ ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨ ThreadLocal éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"></a>82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨ ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨ ThreadLocal éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ</h1><p>ThreadLocal å˜é‡è§£å†³äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å•ä¸ªçº¿ç¨‹ä¸­å˜é‡çš„å…±äº«é—®é¢˜ï¼Œä½¿ç”¨åä¸ºThreadLocalMapçš„å“ˆå¸Œè¡¨è¿›è¡Œç»´æŠ¤ï¼ˆkeyä¸ºThreadLocalå˜é‡åï¼Œvalueä¸ºThreadLocalå˜é‡çš„å€¼ï¼‰ï¼›</p>
<p>ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>çº¿ç¨‹ä¹‹é—´çš„threadLocalå˜é‡æ˜¯äº’ä¸å½±å“çš„ï¼Œ<br>ä½¿ç”¨private final staticè¿›è¡Œä¿®é¥°ï¼Œé˜²æ­¢å¤šå®ä¾‹æ—¶å†…å­˜çš„æ³„éœ²é—®é¢˜<br>çº¿ç¨‹æ± ç¯å¢ƒä¸‹ä½¿ç”¨åå°†threadLocalå˜é‡removeæ‰æˆ–è®¾ç½®æˆä¸€ä¸ªåˆå§‹å€¼</p>
<h1 id="83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"><a href="#83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ" class="headerlink" title="83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"></a>83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ</h1><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æä¾›æ€§èƒ½ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<p>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›<br>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</p>
<h1 id="84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹"><a href="#84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹" class="headerlink" title="84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹"></a>84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹</h1><p>å¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ­¤æ—¶ç­‰å¾…çš„çº¿ç¨‹éƒ½åŠ é”å¯èƒ½æ˜¯ä¸€ç§ä¸å¤ªå€¼å¾—çš„æ“ä½œï¼Œå› ä¸ºçº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜ã€‚æ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œè€Œæ˜¯åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚</p>
<h1 id="85ã€å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#85ã€å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="85ã€å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>85ã€å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>synchronized é”å‡çº§åŸç†ï¼šåœ¨é”å¯¹è±¡çš„å¯¹è±¡å¤´é‡Œé¢æœ‰ä¸€ä¸ª threadid å­—æ®µï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™ threadid ä¸ºç©ºï¼Œjvm è®©å…¶æŒæœ‰åå‘é”ï¼Œå¹¶å°† threadid è®¾ç½®ä¸ºå…¶çº¿ç¨‹ idï¼Œå†æ¬¡è¿›å…¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­ threadid æ˜¯å¦ä¸å…¶çº¿ç¨‹ id ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å¯¹è±¡ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™å‡çº§åå‘é”ä¸ºè½»é‡çº§é”ï¼Œé€šè¿‡è‡ªæ—‹å¾ªç¯ä¸€å®šæ¬¡æ•°æ¥è·å–é”ï¼Œæ‰§è¡Œä¸€å®šæ¬¡æ•°ä¹‹åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ­£å¸¸è·å–åˆ°è¦ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ­¤æ—¶å°±ä¼šæŠŠé”ä»è½»é‡çº§å‡çº§ä¸ºé‡é‡çº§é”ï¼Œæ­¤è¿‡ç¨‹å°±æ„æˆäº† synchronized é”çš„å‡çº§ã€‚</p>
<p>é”çš„å‡çº§çš„ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚åœ¨ Java 6 ä¹‹åä¼˜åŒ– synchronized çš„å®ç°æ–¹å¼ï¼Œä½¿ç”¨äº†åå‘é”å‡çº§ä¸ºè½»é‡çº§é”å†å‡çº§åˆ°é‡é‡çº§é”çš„æ–¹å¼ï¼Œä»è€Œå‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p>
<h1 id="86ã€synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#86ã€synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="86ã€synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>86ã€synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>synchronized æ˜¯å’Œ ifã€elseã€forã€while ä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚æ—¢ç„¶ ReentrantLock æ˜¯ç±»ï¼Œé‚£ä¹ˆå®ƒå°±æä¾›äº†æ¯”synchronized æ›´å¤šæ›´çµæ´»çš„ç‰¹æ€§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€å¯ä»¥æœ‰æ–¹æ³•ã€å¯ä»¥æœ‰å„ç§å„æ ·çš„ç±»å˜é‡</p>
<p>synchronized æ—©æœŸçš„å®ç°æ¯”è¾ƒä½æ•ˆï¼Œå¯¹æ¯” ReentrantLockï¼Œå¤§å¤šæ•°åœºæ™¯æ€§èƒ½éƒ½ç›¸å·®è¾ƒå¤§ï¼Œä½†æ˜¯åœ¨ Java 6 ä¸­å¯¹ synchronized è¿›è¡Œäº†éå¸¸å¤šçš„æ”¹è¿›ã€‚</p>
<p>ç›¸åŒç‚¹ï¼šä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”</p>
<p>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ã€‚â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œå¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</p>
<p>ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p>ReentrantLock ä½¿ç”¨èµ·æ¥æ¯”è¾ƒçµæ´»ï¼Œä½†æ˜¯å¿…é¡»æœ‰é‡Šæ”¾é”çš„é…åˆåŠ¨ä½œï¼›<br>ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›<br>ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ã€‚<br>äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word<br>Javaä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œè¿™æ˜¯synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼š</p>
<p>æ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡<br>é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„classå¯¹è±¡<br>åŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</p>
<h1 id="87ã€Java-Concurrency-API-ä¸­çš„-Lock-æ¥å£-Lock-interface-æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#87ã€Java-Concurrency-API-ä¸­çš„-Lock-æ¥å£-Lock-interface-æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="87ã€Java Concurrency API ä¸­çš„ Lock æ¥å£(Lock interface)æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>87ã€Java Concurrency API ä¸­çš„ Lock æ¥å£(Lock interface)æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h1><p>Lock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚ä»–ä»¬å…è®¸æ›´çµæ´»çš„ç»“æ„ï¼Œå¯ä»¥å…·æœ‰å®Œå…¨ä¸åŒçš„æ€§è´¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒå¤šä¸ªç›¸å…³ç±»çš„æ¡ä»¶å¯¹è±¡ã€‚</p>
<p>å®ƒçš„ä¼˜åŠ¿æœ‰ï¼š</p>
<p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´å…¬å¹³</p>
<p>ï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­</p>
<p>ï¼ˆ3ï¼‰å¯ä»¥è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´</p>
<p>ï¼ˆ4ï¼‰å¯ä»¥åœ¨ä¸åŒçš„èŒƒå›´ï¼Œä»¥ä¸åŒçš„é¡ºåºè·å–å’Œé‡Šæ”¾é”</p>
<p>æ•´ä½“ä¸Šæ¥è¯´ Lock æ˜¯ synchronized çš„æ‰©å±•ç‰ˆï¼ŒLock æä¾›äº†æ— æ¡ä»¶çš„ã€å¯è½®è¯¢çš„(tryLock æ–¹æ³•)ã€å®šæ—¶çš„(tryLock å¸¦å‚æ–¹æ³•)ã€å¯ä¸­æ–­çš„(lockInterruptibly)ã€å¯å¤šæ¡ä»¶é˜Ÿåˆ—çš„(newCondition æ–¹æ³•)é”æ“ä½œã€‚å¦å¤– Lock çš„å®ç°ç±»åŸºæœ¬éƒ½æ”¯æŒéå…¬å¹³é”(é»˜è®¤)å’Œå…¬å¹³é”ï¼Œsynchronized åªæ”¯æŒéå…¬å¹³é”ï¼Œå½“ç„¶ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéå…¬å¹³é”æ˜¯é«˜æ•ˆçš„é€‰æ‹©ã€‚</p>
<p>88ã€jsp å’Œ servlet æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>ï¼ˆ1ï¼‰servletæ˜¯æœåŠ¡å™¨ç«¯çš„Javaç¨‹åºï¼Œå®ƒæ‹…å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¸­é—´å±‚ã€‚</p>
<p>ï¼ˆ2ï¼‰jspå…¨åä¸ºJava server pagesï¼Œä¸­æ–‡åå«JavaæœåŠ¡å™¨é¡µé¢ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªç®€åŒ–çš„servletè®¾è®¡ã€‚JSPæ˜¯ä¸€ç§åŠ¨æ€é¡µé¢è®¾è®¡ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯å°†è¡¨ç¤ºé€»è¾‘ä»servletä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<p>ï¼ˆ3ï¼‰JVMåªèƒ½è¯†åˆ«Javaä»£ç ï¼Œä¸èƒ½è¯†åˆ«JSPï¼ŒJSPç¼–è¯‘åå˜æˆäº†servletï¼Œwebå®¹å™¨å°†JSPçš„ä»£ç ç¼–è¯‘æˆJVMèƒ½å¤Ÿè¯†åˆ«çš„Javaç±»ï¼ˆservletï¼‰ã€‚</p>
<p>ï¼ˆ4ï¼‰JSPæœ‰å†…ç½®å¯¹è±¡ã€servletæ²¡æœ‰å†…ç½®å¯¹è±¡ã€‚</p>
<h1 id="89ã€jsp-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#89ã€jsp-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="89ã€jsp æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>89ã€jsp æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>JSPä¹å¤§å†…ç½®å¯¹è±¡ï¼š</p>
<p>pageContextï¼Œé¡µé¢ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç›¸å½“äºé¡µé¢ä¸­æ‰€æœ‰åŠŸèƒ½çš„é›†åˆï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–JSPé¡µé¢çš„outã€requestã€responseã€sessionã€applicationå¯¹è±¡ã€‚<br>request<br>response<br>session<br>applicationï¼Œåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œapplicationå®ç°äº†ç”¨æˆ·é—´æ•°æ®çš„å…±äº«ï¼Œå¯å­˜æ”¾å…¨å±€å˜é‡ï¼Œå®ƒå¼€å§‹äºæœåŠ¡å™¨å¯åŠ¨ï¼ŒçŸ¥é“æœåŠ¡å™¨å…³é—­ã€‚<br>pageï¼Œå°±æ˜¯JSPæœ¬èº«ã€‚<br>exception<br>outï¼Œoutç”¨äºåœ¨webæµè§ˆå™¨å†…è¾“å‡ºä¿¡æ¯ï¼Œå¹¶ä¸”ç®¡ç†åº”ç”¨æœåŠ¡å™¨ä¸Šçš„è¾“å‡ºç¼“å†²åŒºï¼Œä½œç”¨åŸŸpageã€‚<br>configï¼Œå–å¾—æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ã€‚</p>
<h1 id="90ã€forward-å’Œ-redirect-çš„åŒºåˆ«ï¼Ÿ"><a href="#90ã€forward-å’Œ-redirect-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="90ã€forward å’Œ redirect çš„åŒºåˆ«ï¼Ÿ"></a>90ã€forward å’Œ redirect çš„åŒºåˆ«ï¼Ÿ</h1><p>forwardæ˜¯ç›´æ¥è¯·æ±‚è½¬å‘ï¼›redirectæ˜¯é—´æ¥è¯·æ±‚è½¬å‘ï¼Œåˆå«é‡å®šå‘ã€‚<br>forwardï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨æ‰§è¡Œä¸€æ¬¡è¯·æ±‚ï¼›redirectï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨æ‰§è¡Œä¸¤æ¬¡è¯·æ±‚ã€‚<br>forwardï¼Œç»å…¸çš„MVCæ¨¡å¼å°±æ˜¯forwardï¼›redirectï¼Œç”¨äºé¿å…ç”¨æˆ·çš„éæ­£å¸¸è®¿é—®ã€‚ï¼ˆä¾‹å¦‚ç”¨æˆ·éæ­£å¸¸è®¿é—®ï¼Œservletå°±å¯ä»¥å°†HTTPè¯·æ±‚é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼‰ã€‚<br>forwardï¼Œåœ°å€ä¸å˜ï¼›redirectï¼Œåœ°å€æ”¹å˜ã€‚<br>forwardå¸¸ç”¨æ–¹æ³•ï¼šRequestDispatcherç±»çš„forward()æ–¹æ³•ï¼›redirectå¸¸ç”¨æ–¹æ³•ï¼šHttpServletRequestç±»çš„sendRedirect()æ–¹æ³•ã€‚</p>
<h1 id="91ã€è¯´ä¸€ä¸‹-jsp-çš„-4-ç§ä½œç”¨åŸŸï¼Ÿ"><a href="#91ã€è¯´ä¸€ä¸‹-jsp-çš„-4-ç§ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="91ã€è¯´ä¸€ä¸‹ jsp çš„ 4 ç§ä½œç”¨åŸŸï¼Ÿ"></a>91ã€è¯´ä¸€ä¸‹ jsp çš„ 4 ç§ä½œç”¨åŸŸï¼Ÿ</h1><p>applicationã€sessionã€requestã€page</p>
<h1 id="92ã€session-å’Œ-cookie-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#92ã€session-å’Œ-cookie-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="92ã€session å’Œ cookie æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>92ã€session å’Œ cookie æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>ï¼ˆ1ï¼‰å­˜å‚¨ä½ç½®ä¸åŒ</p>
<p>cookieåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ï¼›<br>sessionåœ¨æœåŠ¡å™¨ï¼›<br>ï¼ˆ2ï¼‰å­˜å‚¨å®¹é‡ä¸åŒ</p>
<p>cookie&lt;&#x3D;4Kï¼Œä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿ç•™20ä¸ªcookieï¼›<br>sessionæ²¡æœ‰ä¸Šçº¿ï¼Œå‡ºäºå¯¹æœåŠ¡å™¨çš„ä¿æŠ¤ï¼Œsessionå†…ä¸å¯å­˜è¿‡å¤šä¸œè¥¿ï¼Œå¹¶ä¸”è¦è®¾ç½®sessionåˆ é™¤æœºåˆ¶ï¼›<br>ï¼ˆ3ï¼‰å­˜å‚¨æ–¹å¼ä¸åŒ</p>
<p>cookieåªèƒ½ä¿å­˜ASCIIå­—ç¬¦ä¸²ï¼Œå¹¶éœ€è¦é€šè¿‡ç¼–ç æ–¹å¼å­˜å‚¨ä¸ºUnicodeå­—ç¬¦æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ï¼›<br>sessionä¸­èƒ½å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¹¶ä¸å±€é™äºStringã€integerã€listã€mapç­‰ï¼›<br>ï¼ˆ4ï¼‰éšç§ç­–ç•¥ä¸åŒ</p>
<p>cookieå¯¹å®¢æˆ·ç«¯æ˜¯å¯è§çš„ï¼Œä¸å®‰å…¨ï¼›<br>sessionå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå®‰å…¨ï¼›<br>ï¼ˆ5ï¼‰æœ‰æ•ˆæœŸä¸åŒ</p>
<p>å¼€å‘å¯ä»¥é€šè¿‡è®¾ç½®cookieçš„å±æ€§ï¼Œè¾¾åˆ°ä½¿cookieé•¿æœŸæœ‰æ•ˆçš„æ•ˆæœï¼›<br>sessionä¾èµ–äºåä¸ºJESSIONIDçš„cookieï¼Œè€Œcookie JSESSIONIDçš„è¿‡æœŸæ—¶é—´é»˜è®¤ä¸º-1ï¼Œåªéœ€å…³é—­çª—å£è¯¥sessionå°±ä¼šå¤±æ•ˆï¼Œå› è€Œsessionè¾¾ä¸åˆ°é•¿æœŸæœ‰æ•ˆçš„æ•ˆæœï¼›<br>ï¼ˆ6ï¼‰è·¨åŸŸæ”¯æŒä¸Šä¸åŒ</p>
<p>cookieæ”¯æŒè·¨åŸŸï¼›<br>sessionä¸æ”¯æŒè·¨åŸŸï¼›</p>
<h1 id="93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢-cookie-èƒ½å®ç°-session-è¿˜èƒ½ç”¨å—ï¼Ÿ"><a href="#93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢-cookie-èƒ½å®ç°-session-è¿˜èƒ½ç”¨å—ï¼Ÿ" class="headerlink" title="93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢ cookie èƒ½å®ç° session è¿˜èƒ½ç”¨å—ï¼Ÿ"></a>93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢ cookie èƒ½å®ç° session è¿˜èƒ½ç”¨å—ï¼Ÿ</h1><p>ä¸€èˆ¬é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¼šè¯ä¸­ï¼ŒæœåŠ¡å™¨å­˜å‚¨ session çš„ sessionid æ˜¯é€šè¿‡ cookie å­˜åˆ°æµè§ˆå™¨é‡Œã€‚</p>
<p>å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookieï¼Œæµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨æ— æ³•æºå¸¦ sessionidï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚ä¸­çš„ç”¨æˆ·èº«ä»½ï¼Œsessionå¤±æ•ˆã€‚</p>
<p>ä½†æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•åœ¨ç¦ç”¨ cookie çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨sessionã€‚</p>
<p>é€šè¿‡urlé‡å†™ï¼ŒæŠŠ sessionid ä½œä¸ºå‚æ•°è¿½åŠ çš„åŸ url ä¸­ï¼Œåç»­çš„æµè§ˆå™¨ä¸æœåŠ¡å™¨äº¤äº’ä¸­æºå¸¦ sessionid å‚æ•°ã€‚<br>æœåŠ¡å™¨çš„è¿”å›æ•°æ®ä¸­åŒ…å« sessionidï¼Œæµè§ˆå™¨å‘é€è¯·æ±‚æ—¶ï¼Œæºå¸¦ sessionid å‚æ•°ã€‚<br>é€šè¿‡ Http åè®®å…¶ä»– header å­—æ®µï¼ŒæœåŠ¡å™¨æ¯æ¬¡è¿”å›æ—¶è®¾ç½®è¯¥ header å­—æ®µä¿¡æ¯ï¼Œæµè§ˆå™¨ä¸­ js è¯»å–è¯¥ header å­—æ®µï¼Œè¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œjsè®¾ç½®æºå¸¦è¯¥ header å­—æ®µã€‚</p>
<h1 id="94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"><a href="#94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ" class="headerlink" title="94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"></a>94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ</h1><p>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚å½“ä¸€ä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œçš„æ—¶å€™å°±ä¼šé‡æ–°å¤„äºå°±ç»ªçŠ¶æ€è®©ç»™å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å±äºä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<p>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ï¼šå½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢é€šå¸¸æ˜¯è®¡ç®—å¯†é›†å‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒéœ€è¦ç›¸å½“å¯è§‚çš„å¤„ç†å™¨æ—¶é—´ï¼Œåœ¨æ¯ç§’å‡ åä¸Šç™¾æ¬¡çš„åˆ‡æ¢ä¸­ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½éœ€è¦çº³ç§’é‡çº§çš„æ—¶é—´ã€‚æ‰€ä»¥ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚</p>
<p>Linux ç›¸æ¯”ä¸å…¶ä»–æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬å…¶ä»–ç±» Unix ç³»ç»Ÿï¼‰æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ï¼Œå…¶ä¸­æœ‰ä¸€é¡¹å°±æ˜¯ï¼Œå…¶ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ¨¡å¼åˆ‡æ¢çš„æ—¶é—´æ¶ˆè€—éå¸¸å°‘ã€‚</p>
<h1 id="95ã€cookieã€sessionã€token"><a href="#95ã€cookieã€sessionã€token" class="headerlink" title="95ã€cookieã€sessionã€token"></a>95ã€cookieã€sessionã€token</h1><p>1ã€sessionæœºåˆ¶</p>
<p>sessionæ˜¯æœåŠ¡ç«¯å­˜å‚¨çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨æ‰€æœ‰è®¿é—®è¿‡è¯¥æœåŠ¡ç«¯çš„å®¢æˆ·ç«¯çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆä¹Ÿå¯ä»¥å­˜å‚¨å…¶ä»–ä¿¡æ¯ï¼‰ï¼Œä»è€Œå®ç°ä¿æŒç”¨æˆ·ä¼šè¯çŠ¶æ€ã€‚ä½†æ˜¯æœåŠ¡å™¨é‡å¯æ—¶ï¼Œå†…å­˜ä¼šè¢«é”€æ¯ï¼Œå­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</p>
<p>ä¸åŒçš„ç”¨æˆ·è®¿é—®æœåŠ¡ç«¯çš„æ—¶å€™ä¼šåœ¨sessionå¯¹è±¡ä¸­å­˜å‚¨é”®å€¼å¯¹ï¼Œâ€œé”®â€ç”¨æ¥å­˜å‚¨å¼€å¯è¿™ä¸ªç”¨æˆ·ä¿¡æ¯çš„â€œé’¥åŒ™â€ï¼Œåœ¨ç™»å½•æˆåŠŸåï¼Œâ€œé’¥åŒ™â€é€šè¿‡cookieè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å­˜å‚¨ä¸ºsessionIdè®°å½•åœ¨cookieä¸­ã€‚å½“å®¢æˆ·ç«¯å†æ¬¡è®¿é—®æ—¶ï¼Œä¼šé»˜è®¤æºå¸¦cookieä¸­çš„sessionIdæ¥å®ç°ä¼šè¯æœºåˆ¶ã€‚</p>
<p>ï¼ˆ1ï¼‰sessionæ˜¯åŸºäºcookieçš„ã€‚</p>
<p>cookieçš„æ•°æ®4kå·¦å³ï¼›<br>cookieå­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šå­—ç¬¦ä¸²key&#x3D;value<br>cookieå­˜å‚¨æœ‰æ•ˆæœŸï¼šå¯ä»¥è‡ªè¡Œé€šè¿‡expiresè¿›è¡Œå…·ä½“çš„æ—¥æœŸè®¾ç½®ï¼Œå¦‚æœæ²¡è®¾ç½®ï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨æ—¶å¤±æ•ˆã€‚<br>cookieæœ‰æ•ˆèŒƒå›´ï¼šå½“å‰åŸŸåä¸‹æœ‰æ•ˆã€‚æ‰€ä»¥sessionè¿™ç§ä¼šè¯å­˜å‚¨æ–¹å¼æ–¹å¼åªé€‚ç”¨äºå®¢æˆ·ç«¯ä»£ç å’ŒæœåŠ¡ç«¯ä»£ç è¿è¡Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼ˆå‰åç«¯é¡¹ç›®åè®®ã€åŸŸåã€ç«¯å£å·éƒ½ä¸€è‡´ï¼Œå³åœ¨ä¸€ä¸ªé¡¹ç›®ä¸‹ï¼‰<br>ï¼ˆ2ï¼‰sessionæŒä¹…åŒ–</p>
<p>ç”¨äºè§£å†³é‡å¯æœåŠ¡å™¨åsessionæ¶ˆå¤±çš„é—®é¢˜ã€‚åœ¨æ•°æ®åº“ä¸­å­˜å‚¨sessionï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚é€šè¿‡åŒ…ï¼šexpress-mysql-sessionã€‚</p>
<p>å½“å®¢æˆ·ç«¯å­˜å‚¨çš„cookieå¤±æ•ˆåï¼ŒæœåŠ¡ç«¯çš„sessionä¸ä¼šç«‹å³é”€æ¯ï¼Œä¼šæœ‰ä¸€ä¸ªå»¶æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå®šæœŸæ¸…ç†æ— æ•ˆsessionï¼Œä¸ä¼šé€ æˆæ— æ•ˆæ•°æ®å ç”¨å­˜å‚¨ç©ºé—´çš„é—®é¢˜ã€‚</p>
<p>2ã€tokenæœºåˆ¶</p>
<p>é€‚ç”¨äºå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼ˆå‰åç«¯ä»£ç è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸‹ï¼‰</p>
<p>è¯·æ±‚ç™»å½•æ—¶ï¼Œtokenå’ŒsessionidåŸç†ç›¸åŒï¼Œæ˜¯å¯¹keyå’Œkeyå¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡ŒåŠ å¯†åçš„åŠ å¯†å­—ç¬¦ï¼Œç™»å½•æˆåŠŸåï¼Œä¼šåœ¨å“åº”ä¸»ä½“ä¸­å°†{tokenï¼šâ€œå­—ç¬¦ä¸²â€}è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>å®¢æˆ·ç«¯é€šè¿‡cookieéƒ½å¯ä»¥è¿›è¡Œå­˜å‚¨ã€‚å†æ¬¡è¯·æ±‚æ—¶ä¸ä¼šé»˜è®¤æºå¸¦ï¼Œéœ€è¦åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä½ç½®ç»™è¯·æ±‚å¤´ä¸­æ·»åŠ è®¤è¯å­—æ®µAuthorizationæºå¸¦tokenä¿¡æ¯ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥é€šè¿‡tokenä¿¡æ¯æŸ¥æ‰¾ç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚</p>
<h1 id="96ã€è¯´ä¸€ä¸‹-session-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#96ã€è¯´ä¸€ä¸‹-session-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="96ã€è¯´ä¸€ä¸‹ session çš„å·¥ä½œåŸç†ï¼Ÿ"></a>96ã€è¯´ä¸€ä¸‹ session çš„å·¥ä½œåŸç†ï¼Ÿ</h1><p>å½“å®¢æˆ·ç«¯ç™»å½•å®Œæˆåï¼Œä¼šåœ¨æœåŠ¡ç«¯äº§ç”Ÿä¸€ä¸ªsessionï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä¼šå°†sessionidè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚å®¢æˆ·ç«¯å°†sessionidå‚¨å­˜åœ¨æµè§ˆå™¨çš„cookieä¸­ï¼Œå½“ç”¨æˆ·å†æ¬¡ç™»å½•æ—¶ï¼Œä¼šè·å¾—å¯¹åº”çš„sessionidï¼Œç„¶åå°†sessionidå‘é€åˆ°æœåŠ¡ç«¯è¯·æ±‚ç™»å½•ï¼ŒæœåŠ¡ç«¯åœ¨å†…å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„sessionidï¼Œå®Œæˆç™»å½•ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›ç™»å½•é¡µé¢ã€‚</p>
<h1 id="97ã€http-å“åº”ç -301-å’Œ-302-ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#97ã€http-å“åº”ç -301-å’Œ-302-ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="97ã€http å“åº”ç  301 å’Œ 302 ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>97ã€http å“åº”ç  301 å’Œ 302 ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>301å’Œ302çŠ¶æ€ç éƒ½è¡¨ç¤ºé‡å®šå‘ï¼Œå½“æµè§ˆå™¨æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„è¿™ä¸ªçŠ¶æ€ç åæ‚”è‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„URLåœ°å€ã€‚<br>301ä»£è¡¨æ°¸ä¹…æ€§é‡å®šå‘ï¼Œæ—§åœ°å€è¢«æ°¸ä¹…ç§»é™¤ï¼Œå®¢æˆ·ç«¯å‘æ–°åœ°å€å‘é€è¯·æ±‚ã€‚<br>302ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œæ—§åœ°å€è¿˜åœ¨ï¼Œå®¢æˆ·ç«¯ç»§ç»­å‘æ—§åœ°å€å‘é€è¯·æ±‚ã€‚<br>303ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œé‡å®šå‘åˆ°æ–°åœ°å€æ—¶ï¼Œå¿…é¡»ä½¿ç”¨GETæ–¹æ³•è¯·æ±‚æ–°åœ°å€ã€‚<br>307ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œä¸302çš„åŒºåˆ«åœ¨äº307ä¸å…è®¸ä»POSTæ”¹ä¸ºGETã€‚<br>307ä»£è¡¨æ°¸ä¹…æ€§é‡å®šå‘ï¼Œä¸301çš„åŒºåˆ«åœ¨äº308ä¸å…è®¸ä»POSTæ”¹ä¸ºGETã€‚</p>
<h1 id="98ã€ç®€è¿°-tcp-å’Œ-udpçš„åŒºåˆ«ï¼Ÿ"><a href="#98ã€ç®€è¿°-tcp-å’Œ-udpçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="98ã€ç®€è¿° tcp å’Œ udpçš„åŒºåˆ«ï¼Ÿ"></a>98ã€ç®€è¿° tcp å’Œ udpçš„åŒºåˆ«ï¼Ÿ</h1><p>TCPæ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼ŒUDPæ˜¯ç”¨æˆ·æ•°æ®è¡¨åè®®ï¼›<br>TCPé•¿è¿æ¥ï¼ŒUDPæ— è¿æ¥ï¼›<br>UDPç¨‹åºç»“æ„è¾ƒç®€å•ï¼Œåªéœ€å‘é€ï¼Œæ— é¡»æ¥æ”¶ï¼›<br>TCPå¯é ï¼Œä¿è¯æ•°æ®æ­£ç¡®æ€§ã€é¡ºåºæ€§ï¼›UDPä¸å¯é ï¼Œå¯èƒ½ä¸¢æ•°æ®ï¼›<br>TCPé€‚ç”¨äºå°‘é‡æ•°æ®ï¼ŒUDPé€‚ç”¨äºå¤§é‡æ•°æ®ä¼ è¾“ï¼›<br>TCPé€Ÿåº¦æ…¢ï¼ŒUDPé€Ÿåº¦å¿«ï¼›</p>
<h1 id="99ã€tcp-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#99ã€tcp-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="99ã€tcp ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>99ã€tcp ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h1><p>å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½è¦ç¡®è®¤è¿æ¥ï¼Œâ‘ å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥æœåŠ¡ç«¯ï¼›â‘¡é’ˆå¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ç¡®è®¤åº”ç­”ï¼Œå¹¶è¯·æ±‚å»ºç«‹è¿æ¥ï¼›â‘¢é’ˆå¯¹æœåŠ¡ç«¯çš„è¯·æ±‚ç¡®è®¤åº”ç­”ï¼Œå»ºç«‹è¿æ¥ï¼›</p>
<p>ä¸¤æ¬¡æ— æ³•ç¡®ä¿Aèƒ½æ”¶åˆ°Bçš„æ•°æ®ï¼›</p>
<h1 id="100ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#100ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="100ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>100ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ</h1><h1 id="101ã€get-å’Œ-post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#101ã€get-å’Œ-post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="101ã€get å’Œ post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>101ã€get å’Œ post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h1><p>getè¯·æ±‚å‚æ•°æ˜¯è¿æ¥åœ¨urlåé¢çš„,è€Œpostè¯·æ±‚å‚æ•°æ˜¯å­˜æ”¾åœ¨requestbodyå†…çš„ï¼›<br>getè¯·æ±‚å› ä¸ºæµè§ˆå™¨å¯¹urlé•¿åº¦æœ‰é™åˆ¶ï¼Œæ‰€ä»¥å‚æ•°ä¸ªæ•°æœ‰é™åˆ¶ï¼Œè€Œpostè¯·æ±‚å‚æ•°ä¸ªæ•°æ²¡æœ‰é™åˆ¶ï¼›<br>å› ä¸ºgetè¯·æ±‚å‚æ•°æš´éœ²åœ¨urlä¸Š,æ‰€ä»¥å®‰å…¨æ–¹é¢postæ¯”getæ›´åŠ å®‰å…¨ï¼›<br>getè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ,è€Œpostè¯·æ±‚å¯ä»¥æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ï¼›<br>getè¯·æ±‚å‚æ•°ä¼šä¿å­˜åœ¨æµè§ˆå™¨å†å²è®°å½•å†…,postè¯·æ±‚å¹¶ä¸ä¼šï¼›<br>getè¯·æ±‚æµè§ˆå™¨ä¼šä¸»åŠ¨cache,postå¹¶ä¸ä¼š,é™¤éä¸»åŠ¨è®¾ç½®ï¼›<br>getè¯·æ±‚äº§ç”Ÿ1ä¸ªtcpæ•°æ®åŒ…,postè¯·æ±‚äº§ç”Ÿ2ä¸ªtcpæ•°æ®åŒ…ï¼›<br>åœ¨æµè§ˆå™¨è¿›è¡Œå›é€€æ“ä½œæ—¶,getè¯·æ±‚æ˜¯æ— å®³çš„,è€Œpostè¯·æ±‚åˆ™ä¼šé‡æ–°è¯·æ±‚ä¸€æ¬¡ï¼›<br>æµè§ˆå™¨åœ¨å‘é€getè¯·æ±‚æ—¶ä¼šå°†headerå’Œdataä¸€èµ·å‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›200çŠ¶æ€ç ,è€Œåœ¨å‘é€postè¯·æ±‚æ—¶,ä¼šå…ˆå°†headerå‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›100,ä¹‹åå†å°†dataå‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›200 OKï¼›</p>
<h1 id="102ã€ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"><a href="#102ã€ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ" class="headerlink" title="102ã€ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"></a>102ã€ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ</h1><p>xss(Cross Site Scripting)ï¼Œå³è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ä¸€ç§å¸¸è§äºwebåº”ç”¨ç¨‹åºä¸­çš„è®¡ç®—æœºå®‰å…¨æ¼æ´ã€‚æŒ‡çš„æ˜¯åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸Šï¼Œåœ¨æ¸²æŸ“DOMæ ‘çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä¸å¯é¢„æœŸçš„JSè„šæœ¬ï¼Œä»è€Œå‘ç”Ÿäº†å®‰å…¨é—®é¢˜ã€‚</p>
<p>XSSå°±æ˜¯é€šè¿‡åœ¨ç”¨æˆ·ç«¯æ³¨å…¥æ¶æ„çš„å¯è¿è¡Œè„šæœ¬ï¼Œè‹¥æœåŠ¡ç«¯å¯¹ç”¨æˆ·çš„è¾“å…¥ä¸è¿›è¡Œå¤„ç†ï¼Œç›´æ¥å°†ç”¨æˆ·çš„è¾“å…¥è¾“å‡ºåˆ°æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨å°†ä¼šæ‰§è¡Œç”¨æˆ·æ³¨å…¥çš„è„šæœ¬ã€‚ æ‰€ä»¥XSSæ”»å‡»çš„æ ¸å¿ƒå°±æ˜¯æµè§ˆå™¨æ¸²æŸ“DOMçš„æ—¶å€™å°†æ–‡æœ¬ä¿¡æ¯è§£ææˆJSè„šæœ¬ä»è€Œå¼•å‘JSè„šæœ¬æ³¨å…¥ï¼Œé‚£ä¹ˆXSSæ”»å‡»çš„é˜²å¾¡æ‰‹æ®µå°±æ˜¯åŸºäºæµè§ˆå™¨æ¸²æŸ“è¿™ä¸€æ­¥å»åšé˜²å¾¡ã€‚åªè¦æˆ‘ä»¬ä½¿ç”¨HTMLç¼–ç å°†æµè§ˆå™¨éœ€è¦æ¸²æŸ“çš„ä¿¡æ¯ç¼–ç åï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“DOMå…ƒç´ çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§£ç éœ€è¦æ¸²æŸ“çš„ä¿¡æ¯ï¼Œå°†ä¸Šè¿°ä¿¡æ¯è§£ææˆå­—ç¬¦ä¸²è€Œä¸æ˜¯JSè„šæœ¬ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é˜²å¾¡XSSæ”»å‡»çš„æ ¸å¿ƒæƒ³æ³•ã€‚</p>
<p>é¢„é˜²ï¼š</p>
<p>1ã€è·å–ç”¨æˆ·çš„è¾“å…¥ï¼Œä¸ç”¨innerHtml,ç”¨innerText.<br>2ã€å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚å¯¹&amp; &lt; &gt; â€œ â€˜ &#x2F;ç­‰è¿›è¡Œè½¬ä¹‰ï¼›</p>
<h1 id="103ã€ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"><a href="#103ã€ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ" class="headerlink" title="103ã€ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"></a>103ã€ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ</h1><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚è·Ÿè·¨ç½‘ç«™è„šæœ¬ï¼ˆXSSï¼‰ç›¸æ¯”ï¼ŒXSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚</p>
<p>1ã€æ”»å‡»ç»†èŠ‚</p>
<p>è·¨ç«™è¯·æ±‚æ”»å‡»ï¼Œç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶è¿è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»è¿è¡Œã€‚è¿™åˆ©ç”¨äº†webä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚</p>
<p>ä¾‹å­</p>
<p>å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥è¿è¡Œè½¬è´¦æ“ä½œçš„URLåœ°å€å¦‚ä¸‹ï¼š<a target="_blank" rel="noopener" href="http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName">http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName</a></p>
<p>é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š <img src="http://www.examplebank.com/withdraw?account=Alice&amount=1000&for=Badman"></p>
<p>å¦‚æœæœ‰è´¦æˆ·åä¸ºAliceçš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤±1000èµ„é‡‘ã€‚</p>
<p>è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆä¿¡æ¯çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚</p>
<p>é€è¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡CSRFæ”»å‡»æ¥ç›´æ¥è·å–ç”¨æˆ·çš„è´¦æˆ·æ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰è¿è¡Œæ“ä½œã€‚</p>
<p>2ã€é˜²å¾¡æªæ–½</p>
<p>æ£€æŸ¥Refererå­—æ®µ</p>
<p>HTTPå¤´ä¸­æœ‰ä¸€ä¸ªRefererå­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨ä»¥æ ‡æ˜è¯·æ±‚æ¥æºäºå“ªä¸ªåœ°å€ã€‚åœ¨å¤„ç†æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œé€šå¸¸æ¥è¯´ï¼ŒRefererå­—æ®µåº”å’Œè¯·æ±‚çš„åœ°å€ä½äºåŒä¸€åŸŸåä¸‹ã€‚ä»¥ä¸Šæ–‡é“¶è¡Œæ“ä½œä¸ºä¾‹ï¼ŒRefererå­—æ®µåœ°å€é€šå¸¸åº”è¯¥æ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„ç½‘é¡µåœ°å€ï¼Œåº”è¯¥ä¹Ÿä½äº<a target="_blank" rel="noopener" href="http://www.examplebank.comä¹‹ä¸‹.è€Œå¦‚æœæ˜¯csrfæ”»å‡»ä¼ æ¥çš„è¯·æ±‚,refererå­—æ®µä¼šæ˜¯åŒ…å«æ¶æ„ç½‘å€çš„åœ°å€,ä¸ä¼šä½äºwww.examplebank.comä¹‹ä¸‹,è¿™æ—¶å€™æœåŠ¡å™¨å°±èƒ½è¯†åˆ«å‡ºæ¶æ„çš„è®¿é—®./">www.examplebank.comä¹‹ä¸‹ã€‚è€Œå¦‚æœæ˜¯CSRFæ”»å‡»ä¼ æ¥çš„è¯·æ±‚ï¼ŒRefererå­—æ®µä¼šæ˜¯åŒ…å«æ¶æ„ç½‘å€çš„åœ°å€ï¼Œä¸ä¼šä½äºwww.examplebank.comä¹‹ä¸‹ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨å°±èƒ½è¯†åˆ«å‡ºæ¶æ„çš„è®¿é—®ã€‚</a></p>
<p>è¿™ç§åŠæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½ï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢åŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„Refererå­—æ®µã€‚è™½ç„¶httpåè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜ç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®ç°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´å½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶Refererå­—æ®µçš„å¯èƒ½ã€‚</p>
<p>3ã€æ·»åŠ æ ¡éªŒtoken</p>
<p>ç”±äºCSRFçš„æœ¬è´¨åœ¨äºæ”»å‡»è€…æ¬ºéª—ç”¨æˆ·å»è®¿é—®è‡ªå·±è®¾ç½®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœè¦æ±‚åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨cookieä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±æ— æ³•å†è¿è¡ŒCSRFæ”»å‡»ã€‚è¿™ç§æ•°æ®é€šå¸¸æ˜¯çª—ä½“ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ã€‚æœåŠ¡å™¨å°†å…¶ç”Ÿæˆå¹¶é™„åŠ åœ¨çª—ä½“ä¸­ï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ã€‚å½“å®¢æˆ·ç«¯é€šè¿‡çª—ä½“æäº¤è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªä¼ªéšæœºæ•°ä¹Ÿä¸€å¹¶æäº¤ä¸Šå»ä»¥ä¾›æ ¡éªŒã€‚æ­£å¸¸çš„è®¿é—®æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°å¹¶ä¼ å›è¿™ä¸ªä¼ªéšæœºæ•°ï¼Œè€Œé€šè¿‡CSRFä¼ æ¥çš„æ¬ºéª—æ€§æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ— ä»äº‹å…ˆå¾—çŸ¥è¿™ä¸ªä¼ªéšæœºæ•°çš„å€¼ï¼ŒæœåŠ¡ç«¯å°±ä¼šå› ä¸ºæ ¡éªŒtokençš„å€¼ä¸ºç©ºæˆ–è€…é”™è¯¯ï¼Œæ‹’ç»è¿™ä¸ªå¯ç–‘è¯·æ±‚ã€‚</p>
<h1 id="104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹-JSONP-å®ç°åŸç†ï¼Ÿ"><a href="#104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹-JSONP-å®ç°åŸç†ï¼Ÿ" class="headerlink" title="104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹ JSONP å®ç°åŸç†ï¼Ÿ"></a>104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹ JSONP å®ç°åŸç†ï¼Ÿ</h1><p>1ã€jsonpåŸç†è¯¦è§£â€”â€”ç»ˆäºææ¸…æ¥šjsonpæ˜¯å•¥äº†</p>
<p>2ã€æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors</p>
<p>corsæ˜¯ç›®å‰ä¸»æµçš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œè·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„Webåº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸ HTTP è¯·æ±‚ã€‚</p>
<p>3ã€æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx</p>
<p>nginxæ˜¯ä¸€æ¬¾æå…¶å¼ºå¤§çš„webæœåŠ¡å™¨ï¼Œå…¶ä¼˜ç‚¹å°±æ˜¯è½»é‡çº§ã€å¯åŠ¨å¿«ã€é«˜å¹¶å‘ã€‚</p>
<p>ç°åœ¨çš„æ–°é¡¹ç›®ä¸­nginxå‡ ä¹æ˜¯é¦–é€‰ï¼Œæˆ‘ä»¬ç”¨nodeæˆ–è€…javaå¼€å‘çš„æœåŠ¡é€šå¸¸éƒ½éœ€è¦ç»è¿‡nginxçš„åå‘ä»£ç†ã€‚</p>
<p>åå‘ä»£ç†çš„åŸç†å¾ˆç®€å•ï¼Œå³æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡nginxçš„å¤„ç†ï¼Œnginxä½œä¸ºä»£ç†æœåŠ¡å™¨å†è®²è¯·æ±‚è½¬å‘ç»™nodeæˆ–è€…javaæœåŠ¡ï¼Œè¿™æ ·å°±è§„é¿äº†åŒæºç­–ç•¥ã€‚</p>
<h1 id="105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®"><a href="#105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®" class="headerlink" title="105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®"></a>105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®</h1><p>WebSocketæ˜¯ä¸€ä¸ªå…è®¸Webåº”ç”¨ç¨‹åº(é€šå¸¸æŒ‡æµè§ˆå™¨)ä¸æœåŠ¡å™¨è¿›è¡ŒåŒå‘é€šä¿¡çš„åè®®ã€‚HTML5çš„WebSocket APIä¸»è¦æ˜¯ä¸ºæµè§ˆå™¨ç«¯æä¾›äº†ä¸€ä¸ªåŸºäºTCPåè®®å®ç°å…¨åŒå·¥é€šä¿¡çš„æ–¹æ³•ã€‚</p>
<p>WebSocketä¼˜åŠ¿ï¼š æµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼ŒåŒæ–¹å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»ï¼Œç›¸äº’æ¨é€ä¿¡æ¯ã€‚åŒæ—¶ï¼ŒæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´äº¤æ¢çš„å¤´ä¿¡æ¯å¾ˆå°ã€‚</p>
<h1 id="106ã€è¯´ä¸€ä¸‹-tcp-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"><a href="#106ã€è¯´ä¸€ä¸‹-tcp-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ" class="headerlink" title="106ã€è¯´ä¸€ä¸‹ tcp ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"></a>106ã€è¯´ä¸€ä¸‹ tcp ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ</h1><p>å‘é€æ–¹éœ€è¦ç­‰ç¼“å†²åŒºæ»¡æ‰èƒ½å‘é€å‡ºå»ï¼Œé€ æˆç²˜åŒ…ï¼›<br>æ¥æ”¶æ–¹ä¸åŠæ—¶æ¥æ”¶ç¼“å†²åŒºçš„åŒ…ï¼Œé€ æˆç²˜åŒ…ï¼›</p>
<h1 id="107ã€è¯·åˆ—ä¸¾å‡ºåœ¨-JDK-ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#107ã€è¯·åˆ—ä¸¾å‡ºåœ¨-JDK-ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="107ã€è¯·åˆ—ä¸¾å‡ºåœ¨ JDK ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>107ã€è¯·åˆ—ä¸¾å‡ºåœ¨ JDK ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</h1><p>1ã€å•ä¾‹æ¨¡å¼</p>
<p>ä½œç”¨ï¼šä¿è¯ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šRuntimeç±»ã€‚</p>
<p>2ã€é™æ€å·¥å‚æ¨¡å¼</p>
<p>ä½œç”¨ï¼šä»£æ›¿æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œæ–¹æ³•åæ¯”æ„é€ å‡½æ•°æ¸…æ™°ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šInteger.valueOfã€Class.forName</p>
<p>3ã€æŠ½è±¡å·¥å‚</p>
<p>ä½œç”¨ï¼šåˆ›å»ºæŸä¸€ç§ç±»çš„å¯¹è±¡ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šJava.sqlåŒ…ã€‚</p>
<p>4ã€åŸå‹æ¨¡å¼</p>
<p>clone()ï¼›</p>
<p>åŸå‹æ¨¡å¼çš„æœ¬è´¨æ˜¯æ‹·è´åŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ‹·è´æ˜¯æ¯”newæ›´å¿«çš„åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå½“éœ€è¦å¤§æ‰¹é‡åˆ›å»ºæ–°å¯¹è±¡è€Œä¸”éƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡çš„æ—¶å€™è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚</p>
<p>ä¸€èˆ¬çš„å…‹éš†åªæ˜¯æµ…æ‹·è´ï¼ˆå¯¹è±¡çš„hashå€¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¯¹è±¡é‡Œé¢çš„æˆå‘˜å˜é‡çš„hashå€¼æ˜¯ä¸€æ ·çš„ï¼‰ã€‚</p>
<p>æœ‰äº›åœºæ™¯éœ€è¦æ·±æ‹·è´ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦é‡å†™cloneæ–¹æ³•ï¼Œä»¥ArrayListä¸ºä¾‹ï¼š</p>
<p>5ã€é€‚é…å™¨æ¨¡å¼</p>
<p>ä½œç”¨ï¼šä½¿ä¸å…¼å®¹çš„æ¥å£ç›¸å®¹ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šInputStreamã€OutputStreamã€‚</p>
<p>6ã€è£…é¥°å™¨æ¨¡å¼</p>
<p>ä½œç”¨ï¼šä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé˜²æ­¢ç±»ç»§æ‰¿å¸¦æ¥çš„ç±»çˆ†ç‚¸ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šioç±»ã€Collectionsã€Listã€‚</p>
<p>7ã€å¤–è§‚æ¨¡å¼</p>
<p>ä½œç”¨ï¼šå°è£…ä¸€ç»„äº¤äº’ç±»ï¼Œä¸€ç›´å¯¹å¤–æä¾›æ¥å£ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šloggingåŒ…ã€‚</p>
<p>8ã€äº«å…ƒæ¨¡å¼</p>
<p>ä½œç”¨ï¼šå…±äº«å¯¹è±¡ã€èŠ‚çœå†…å­˜ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šInteger.valueOfã€Stringå¸¸é‡æ± ã€‚</p>
<p>9ã€ä»£ç†æ¨¡å¼</p>
<p>ä½œç”¨ï¼š</p>
<p>ï¼ˆ1ï¼‰é€æ˜è°ƒç”¨è¢«ä»£ç†å¯¹è±¡ï¼Œæ— é¡»çŸ¥é“å¤æ‚å®ç°ç»†èŠ‚ï¼›</p>
<p>ï¼ˆ2ï¼‰å¢åŠ è¢«ä»£ç†ç±»çš„åŠŸèƒ½ï¼›</p>
<p>JDKä¸­ä½“ç°ï¼šåŠ¨æ€ä»£ç†ã€‚</p>
<p>10ã€è¿­ä»£å™¨æ¨¡å¼</p>
<p>ä½œç”¨ï¼šå°†é›†åˆçš„è¿­ä»£å’Œé›†åˆæœ¬èº«åˆ†ç¦»ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šIterator</p>
<p>11ã€å‘½ä»¤æ¨¡å¼</p>
<p>ä½œç”¨ï¼šå°è£…æ“ä½œï¼Œä½¿æ¥å£ä¸€è‡´ã€‚</p>
<p>JDKä¸­ä½“ç°ï¼šRunableã€Callableã€ThreadPoolExecutorã€‚</p>
<h1 id="108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ</h1><p>1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</p>
<p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³è½¯ä»¶å¼€å‘æŸäº›ç‰¹å®šé—®é¢˜è€Œæå‡ºçš„ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè§£å†³é—®é¢˜çš„ä¸€äº›å›ºå®šæ€è·¯ã€‚</p>
<p>é€šè¿‡è®¾è®¡æ¨¡å¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§ã€å¯æ‰©å±•æ€§ã€çµæ´»æ€§ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„æœ€ç»ˆç›®çš„æ˜¯å®ç°ä»£ç çš„é«˜å†…èšã€ä½è€¦åˆã€‚</p>
<p>2ã€è®¾è®¡æ¨¡å¼çš„ä¸ƒå¤§åŸåˆ™</p>
<p>å•ä¸€èŒè´£åŸåˆ™<br>æ¥å£éš”ç¦»åŸåˆ™<br>ä¾èµ–å€’è½¬åŸåˆ™<br>é‡Œå¼æ›¿æ¢åŸåˆ™<br>å¼€é—­åŸåˆ™<br>è¿ªç±³ç‰¹æ³•åˆ™<br>åˆæˆå¤ç”¨åŸåˆ™<br>3ã€ä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰å•ä¾‹æ¨¡å¼</p>
<p>JDKç§çš„runtimeï¼ŒSpringç§çš„singetonã€‚</p>
<p>ï¼ˆ2ï¼‰ç®€å•å·¥å‚æ¨¡å¼</p>
<p>Springçš„BeanFactoryï¼Œæ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€æ ‡è¯†æ¥è·å¾—beanå¯¹è±¡ã€‚</p>
<p>ï¼ˆ3ï¼‰åŸå‹æ¨¡å¼</p>
<p>clone()</p>
<p>ï¼ˆ4ï¼‰ä»£ç†æ¨¡å¼</p>
<p>Springçš„AOPä¸­ï¼ŒSpringå®ç°AOPåŠŸèƒ½çš„åŸç†å°±æ˜¯ä»£ç†æ¨¡å¼ï¼Œâ‘ JDKåŠ¨æ€ä»£ç†ã€‚â‘¡CGLIBåŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨Adviceï¼ˆé€šçŸ¥ï¼‰å¯¹ç±»è¿›è¡Œæ–¹æ³•çº§åˆ«çš„åˆ‡é¢å¢å¼ºã€‚</p>
<p>ï¼ˆ5ï¼‰è£…é¥°å™¨æ¨¡å¼</p>
<p>ä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé˜²æ­¢ç±»çˆ†ç‚¸ï¼›</p>
<p>IOæµã€æ•°æ®æºåŒ…è£…ï¼ŒSpringä¸­ç”¨åˆ°çš„è£…é¥°å™¨æ¨¡å¼è¡¨ç°åœ¨Wrapperã€‚</p>
<p>109ã€Java ä¸­ä»€ä¹ˆå«å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Ÿè¯·ç”¨ Java å†™å‡ºçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼<br>ä¿è¯ç¨‹åºåªæœ‰ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œå«åšå•ä¾‹æ¨¡å¼ï¼›<br>å†…éƒ¨ç±»çš„æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›<br>åŒé‡éªŒè¯æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›<br>110ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆå«è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆobserver design patternï¼‰ï¼Ÿ<br>1ã€è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…åŒæ—¶ç›‘å¬æŸä¸€ä¸»é¢˜å¯¹è±¡ã€‚å½“è¿™ä¸ªä¸»é¢˜å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</p>
<p>2ã€JAVAæä¾›çš„å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒ</p>
<p>åœ¨JAVAè¯­è¨€çš„java.utilåº“é‡Œé¢ï¼Œæä¾›äº†ä¸€ä¸ªObservableç±»ä»¥åŠä¸€ä¸ªObserveræ¥å£ï¼Œæ„æˆJAVAè¯­è¨€å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒã€‚</p>
<p>ï¼ˆ1ï¼‰Observeræ¥å£</p>
<p>è¿™ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå³update()æ–¹æ³•ï¼Œå½“è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¢«è§‚å¯Ÿè€…å¯¹è±¡çš„notifyObservers()æ–¹æ³•å°±ä¼šè°ƒç”¨è¿™ä¸€æ–¹æ³•ã€‚</p>
<p>public interface Observer {<br>    void update(Observable o, Object arg);<br>}<br>ï¼ˆ2ï¼‰Observableç±»</p>
<p>è¢«è§‚å¯Ÿè€…ç±»éƒ½æ˜¯java.util.Observableç±»çš„å­ç±»ã€‚java.util.Observableæä¾›å…¬å¼€çš„æ–¹æ³•æ”¯æŒè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™äº›æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå¯¹Observableçš„å­ç±»éå¸¸é‡è¦ï¼šä¸€ä¸ªæ˜¯setChanged()ï¼Œå¦ä¸€ä¸ªæ˜¯notifyObservers()ã€‚ç¬¬ä¸€æ–¹æ³•setChanged()è¢«è°ƒç”¨ä¹‹åä¼šè®¾ç½®ä¸€ä¸ªå†…éƒ¨æ ‡è®°å˜é‡ï¼Œä»£è¡¨è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ã€‚ç¬¬äºŒä¸ªæ˜¯notifyObservers()ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè°ƒç”¨æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å¯¹è±¡çš„update()æ–¹æ³•ï¼Œä½¿è¿™äº›è§‚å¯Ÿè€…å¯¹è±¡å¯ä»¥æ›´æ–°è‡ªå·±ã€‚</p>
<h1 id="111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ"><a href="#111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ" class="headerlink" title="111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ"></a>111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ</h1><p>1ã€å·¥å‚æ¨¡å¼å¥½å¤„</p>
<p>è‰¯å¥½çš„å°è£…æ€§ã€ä»£ç ç»“æ„æ¸…æ™°ï¼›<br>æ‰©å±•æ€§å¥½ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªéœ€æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å³å¯ï¼›<br>å…¸å‹çš„è§£è€¦æ¡†æ¶ï¼›<br>2ã€åœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ</p>
<p>éœ€è¦ç”Ÿæˆå¯¹è±¡çš„åœ°æ–¹ï¼›<br>ä¸åŒæ•°æ®åº“çš„è®¿é—®ï¼›</p>
<h1 id="112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"><a href="#112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"></a>112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h1><p>æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼ Spring å®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p>
<p>1ã€no</p>
<p>é»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½® ref å±æ€§æ¥è¿›è¡Œè£…é…ã€‚</p>
<p>2ã€byName</p>
<p>é€šè¿‡å‚æ•°å è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean</p>
<p>çš„ autowire å±æ€§è¢«è®¾ç½®æˆ bynameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±</p>
<p>æ€§å…·æœ‰ç›¸åŒåå­—çš„ beanã€‚</p>
<p>3ã€byType:</p>
<p>é€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean</p>
<p>çš„ autowire å±æ€§è¢«è®¾ç½®æˆ byTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±</p>
<p>æ€§å…·æœ‰ç›¸åŒç±»å‹çš„ beanã€‚å¦‚æœæœ‰å¤šä¸ª bean ç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>4ã€constructor</p>
<p>è¿™ä¸ªæ–¹å¼ç±»ä¼¼äº byTypeï¼Œ ä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚</p>
<p>æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>5ã€autodetect</p>
<p>é¦–å…ˆå°è¯•ä½¿ç”¨ constructor æ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œ</p>
<p>åˆ™ä½¿ç”¨ byType æ–¹å¼ã€‚</p>
<h1 id="113ã€ä¸¾ä¸€ä¸ªç”¨-Java-å®ç°çš„è£…é¥°æ¨¡å¼-decorator-design-pattern-ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ"><a href="#113ã€ä¸¾ä¸€ä¸ªç”¨-Java-å®ç°çš„è£…é¥°æ¨¡å¼-decorator-design-pattern-ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ" class="headerlink" title="113ã€ä¸¾ä¸€ä¸ªç”¨ Java å®ç°çš„è£…é¥°æ¨¡å¼(decorator design pattern)ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ"></a>113ã€ä¸¾ä¸€ä¸ªç”¨ Java å®ç°çš„è£…é¥°æ¨¡å¼(decorator design pattern)ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ</h1><p>åœ¨Java IOä¸­è¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼ŒinputStreamä½œä¸ºæŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰å‡ ä¸ªå®ç°ç±»ï¼Œè¡¨ç¤ºä»ä¸åŒçš„æ•°æ®æºè¾“å…¥ï¼š</p>
<p>byteArrayInputStream<br>fileInputStream<br>StringBufferInputStream<br>PipedInputStreamï¼Œä»ç®¡é“äº§ç”Ÿè¾“å…¥ï¼›<br>SequenceInputStreamï¼Œå¯å°†å…¶ä»–æµæ”¶é›†åˆå¹¶åˆ°ä¸€ä¸ªæµå†…ï¼›<br>FilterInputStreamä½œä¸ºè£…é¥°å™¨åœ¨JDKä¸­æ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œå…¶ä¸‹é¢æœ‰å¤šä¸ªå…·ä½“è£…é¥°å™¨æ¯”å¦‚BufferedInputStreamã€DataInputStreamç­‰ã€‚</p>
<p>FilterInputStreamå†…éƒ¨å°è£…äº†åŸºç¡€æ„ä»¶ï¼š</p>
<p>protected volatile InputStream in;<br>è€ŒBufferedInputStreamåœ¨è°ƒç”¨å…¶read()è¯»å–æ•°æ®æ—¶ä¼šå§”æ‰˜åŸºç¡€æ„ä»¶æ¥è¿›è¡Œæ›´åº•å±‚çš„æ“ä½œï¼Œè€Œå®ƒè‡ªå·±æ‰€èµ·çš„è£…é¥°ä½œç”¨å°±æ˜¯ç¼“å†²ï¼Œåœ¨æºç ä¸­å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°è¿™ä¸€åˆ‡ã€‚</p>
<h1 id="114ã€ä»€ä¹ˆæ˜¯-Spring-æ¡†æ¶ï¼ŸSpring-æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"><a href="#114ã€ä»€ä¹ˆæ˜¯-Spring-æ¡†æ¶ï¼ŸSpring-æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ" class="headerlink" title="114ã€ä»€ä¹ˆæ˜¯ Spring æ¡†æ¶ï¼ŸSpring æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"></a>114ã€ä»€ä¹ˆæ˜¯ Spring æ¡†æ¶ï¼ŸSpring æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ</h1><p>Springæ˜¯ä¸€ä¸ªæ§åˆ¶åè½¬å’Œé¢å‘åˆ‡é¢çš„å®¹å™¨æ¡†æ¶ã€‚</p>
<p>Springæœ‰ä¸ƒå¤§åŠŸèƒ½æ¨¡å—ï¼š</p>
<p>1ã€Core</p>
<p>Coreæ¨¡å—æ˜¯Springçš„æ ¸å¿ƒç±»åº“ï¼ŒCoreå®ç°äº†IOCåŠŸèƒ½ã€‚</p>
<p>2ã€AOP</p>
<p>Apring AOPæ¨¡å—æ˜¯Springçš„AOPåº“ï¼Œæä¾›äº†AOPï¼ˆæ‹¦æˆªå™¨ï¼‰æœºåˆ¶ï¼Œå¹¶æä¾›å¸¸è§çš„æ‹¦æˆªå™¨ï¼Œä¾›ç”¨æˆ·è‡ªå®šä¹‰å’Œé…ç½®ã€‚</p>
<p>3ã€orm</p>
<p>æä¾›å¯¹å¸¸ç”¨ORMæ¡†æ¶çš„ç®¡ç†å’Œæ”¯æŒï¼Œhibernateã€mybatisç­‰ã€‚</p>
<p>4ã€Dao</p>
<p>Springæä¾›å¯¹JDBCçš„æ”¯æŒï¼Œå¯¹JDBCè¿›è¡Œå°è£…ã€‚</p>
<p>5ã€Web</p>
<p>å¯¹Struts2çš„æ”¯æŒã€‚</p>
<p>6ã€Context</p>
<p>Contextæ¨¡å—æä¾›æ¡†æ¶å¼çš„Beançš„è®¿é—®æ–¹å¼ï¼Œå…¶å®ƒç¨‹åºå¯ä»¥é€šè¿‡Contextè®¿é—®Springçš„Beanèµ„æºï¼Œç›¸å½“äºèµ„æºæ³¨å…¥ã€‚</p>
<p>7ã€MVC</p>
<p>MVCæ¨¡å—ä¸ºspringæä¾›äº†ä¸€å¥—è½»é‡çº§çš„MVCå®ç°ï¼Œå³Spring MVCã€‚</p>
<h1 id="115ã€ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"><a href="#115ã€ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ" class="headerlink" title="115ã€ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"></a>115ã€ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ</h1><p>1ã€è½»é‡çº§æ¡†æ¶ã€å®¹å™¨</p>
<p>Springæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ã€‚åŸºäºä¸€ä¸ªå¯é…ç½®åŸå‹prototypeï¼Œä½ çš„beanå¯ä»¥ä½¿å•åˆ©çš„ï¼Œä¹Ÿå¯ä»¥æ¯æ¬¡éœ€è¦æ—¶éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>
<p>2ã€æ§åˆ¶åè½¬IOC</p>
<p>Springé€šè¿‡æ§åˆ¶åè½¬å®ç°æ¾è€¦åˆã€‚</p>
<p>3ã€æ”¯æŒAOP</p>
<p>Springæä¾›å¯¹AOPçš„æ”¯æŒï¼Œå®ƒå…è®¸å°†ä¸€äº›é€šç”¨ä»»åŠ¡ï¼Œå¦‚å®‰å…¨ã€äº‹åŠ¡ã€æ—¥å¿—ç­‰è¿›è¡Œé›†ä¸­å¼å¤„ç†ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„å¤ç”¨æ€§ã€‚</p>
<p>4ã€è½»é‡çº§æ¡†æ¶</p>
<p>5ã€æ–¹ä¾¿æµ‹è¯•</p>
<p>Springæä¾›Junit4çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿æµ‹è¯•springç¨‹åºã€‚</p>
<p>6ã€å¯¹Javaä¸­å¾ˆå¤šAPIè¿›è¡Œäº†å°è£…</p>
<p>7ã€æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶</p>
<p>å¦‚Strutsã€hibernateã€mybstisã€‚</p>
<p>8ã€æ”¯æŒå£°æ˜å¼äº‹åŠ¡å¤„ç†</p>
<p>åªéœ€é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— é¡»æ‰‹åŠ¨ç¼–ç¨‹ã€‚</p>
<h1 id="116ã€Spring-IOCã€AOPä¸¾ä¾‹è¯´æ˜"><a href="#116ã€Spring-IOCã€AOPä¸¾ä¾‹è¯´æ˜" class="headerlink" title="116ã€Spring IOCã€AOPä¸¾ä¾‹è¯´æ˜"></a>116ã€Spring IOCã€AOPä¸¾ä¾‹è¯´æ˜</h1><p>1ã€IOCç†è®ºçš„èƒŒæ™¯</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨é‡‡ç”¨é¢å‘å¯¹è±¡æ–¹æ³•è®¾è®¡çš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå®ƒçš„åº•å±‚å®ç°éƒ½æ˜¯ç”±Nä¸ªå¯¹è±¡ç»„æˆçš„ï¼Œæ‰€æœ‰çš„å¯¹è±¡é€šè¿‡å½¼æ­¤çš„åˆä½œï¼Œæœ€ç»ˆå®ç°ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æ‰“å¼€æœºæ¢°å¼æ‰‹è¡¨çš„åç›–ï¼Œå°±ä¼šçœ‹åˆ°ä¸ä¸Šé¢ç±»ä¼¼çš„æƒ…å½¢ï¼Œå„ä¸ªé½¿è½®åˆ†åˆ«å¸¦åŠ¨æ—¶é’ˆã€åˆ†é’ˆå’Œç§’é’ˆé¡ºæ—¶é’ˆæ—‹è½¬ï¼Œä»è€Œåœ¨è¡¨ç›˜ä¸Šäº§ç”Ÿæ­£ç¡®çš„æ—¶é—´ã€‚å›¾1ä¸­æè¿°çš„å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªé½¿è½®ç»„ï¼Œå®ƒæ‹¥æœ‰å¤šä¸ªç‹¬ç«‹çš„é½¿è½®ï¼Œè¿™äº›é½¿è½®ç›¸äº’å•®åˆåœ¨ä¸€èµ·ï¼ŒååŒå·¥ä½œï¼Œå…±åŒå®ŒæˆæŸé¡¹ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™æ ·çš„é½¿è½®ç»„ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªé½¿è½®å‡ºäº†é—®é¢˜ï¼Œå°±å¯èƒ½ä¼šå½±å“åˆ°æ•´ä¸ªé½¿è½®ç»„çš„æ­£å¸¸è¿è½¬ã€‚<br>é½¿è½®ç»„ä¸­é½¿è½®ä¹‹é—´çš„å•®åˆå…³ç³»,ä¸è½¯ä»¶ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´çš„è€¦åˆå…³ç³»éå¸¸ç›¸ä¼¼ã€‚å¯¹è±¡ä¹‹é—´çš„è€¦åˆå…³ç³»æ˜¯æ— æ³•é¿å…çš„ï¼Œä¹Ÿæ˜¯å¿…è¦çš„ï¼Œè¿™æ˜¯ååŒå·¥ä½œçš„åŸºç¡€ã€‚ç°åœ¨ï¼Œä¼´éšç€å·¥ä¸šçº§åº”ç”¨çš„è§„æ¨¡è¶Šæ¥è¶Šåºå¤§ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œç»å¸¸ä¼šå‡ºç°å¯¹è±¡ä¹‹é—´çš„å¤šé‡ä¾èµ–æ€§å…³ç³»ï¼Œå› æ­¤ï¼Œæ¶æ„å¸ˆå’Œè®¾è®¡å¸ˆå¯¹äºç³»ç»Ÿçš„åˆ†æå’Œè®¾è®¡ï¼Œå°†é¢ä¸´æ›´å¤§çš„æŒ‘æˆ˜ã€‚å¯¹è±¡ä¹‹é—´è€¦åˆåº¦è¿‡é«˜çš„ç³»ç»Ÿï¼Œå¿…ç„¶ä¼šå‡ºç°ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æƒ…å½¢ã€‚</p>
<p>è€¦åˆå…³ç³»ä¸ä»…ä¼šå‡ºç°åœ¨å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ï¼Œä¹Ÿä¼šå‡ºç°åœ¨è½¯ä»¶ç³»ç»Ÿçš„å„æ¨¡å—ä¹‹é—´ï¼Œä»¥åŠè½¯ä»¶ç³»ç»Ÿå’Œç¡¬ä»¶ç³»ç»Ÿä¹‹é—´ã€‚å¦‚ä½•é™ä½ç³»ç»Ÿä¹‹é—´ã€æ¨¡å—ä¹‹é—´å’Œå¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæ˜¯è½¯ä»¶å·¥ç¨‹æ°¸è¿œè¿½æ±‚çš„ç›®æ ‡ä¹‹ä¸€ã€‚ä¸ºäº†è§£å†³å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦è¿‡é«˜çš„é—®é¢˜ï¼Œè½¯ä»¶ä¸“å®¶Michael Mattsonæå‡ºäº†IOCç†è®ºï¼Œç”¨æ¥å®ç°å¯¹è±¡ä¹‹é—´çš„â€œè§£è€¦â€ï¼Œç›®å‰è¿™ä¸ªç†è®ºå·²ç»è¢«æˆåŠŸåœ°åº”ç”¨åˆ°å®è·µå½“ä¸­ï¼Œå¾ˆå¤šçš„J2EEé¡¹ç›®å‡é‡‡ç”¨äº†IOCæ¡†æ¶äº§å“Springã€‚</p>
<p>2ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬</p>
<p>IOCæ˜¯Inversion of Controlçš„ç¼©å†™ï¼Œå¤šæ•°ä¹¦ç±ç¿»è¯‘æˆâ€œæ§åˆ¶åè½¬â€ï¼Œè¿˜æœ‰äº›ä¹¦ç±ç¿»è¯‘æˆä¸ºâ€œæ§åˆ¶åå‘â€æˆ–è€…â€œæ§åˆ¶å€’ç½®â€ã€‚<br>1996å¹´ï¼ŒMichael Mattsonåœ¨ä¸€ç¯‡æœ‰å…³æ¢è®¨é¢å‘å¯¹è±¡æ¡†æ¶çš„æ–‡ç« ä¸­ï¼Œé¦–å…ˆæå‡ºäº†IOC è¿™ä¸ªæ¦‚å¿µã€‚å¯¹äºé¢å‘å¯¹è±¡è®¾è®¡åŠç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²äº†å¾ˆå¤šäº†ï¼Œä¸å†èµ˜è¿°ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå¤æ‚ç³»ç»Ÿåˆ†è§£æˆç›¸äº’åˆä½œçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ç±»é€šè¿‡å°è£…ä»¥åï¼Œå†…éƒ¨å®ç°å¯¹å¤–éƒ¨æ˜¯é€æ˜çš„ï¼Œä»è€Œé™ä½äº†è§£å†³é—®é¢˜çš„å¤æ‚åº¦ï¼Œè€Œä¸”å¯ä»¥çµæ´»åœ°è¢«é‡ç”¨å’Œæ‰©å±•ã€‚IOCç†è®ºæå‡ºçš„è§‚ç‚¹å¤§ä½“æ˜¯è¿™æ ·çš„ï¼šå€ŸåŠ©äºâ€œç¬¬ä¸‰æ–¹â€å®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p>å¤§å®¶çœ‹åˆ°äº†å§ï¼Œç”±äºå¼•è¿›äº†ä¸­é—´ä½ç½®çš„â€œç¬¬ä¸‰æ–¹â€ï¼Œä¹Ÿå°±æ˜¯IOCå®¹å™¨ï¼Œä½¿å¾—Aã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œé½¿è½®ä¹‹é—´çš„ä¼ åŠ¨å…¨éƒ¨ä¾é â€œç¬¬ä¸‰æ–¹â€äº†ï¼Œå…¨éƒ¨å¯¹è±¡çš„æ§åˆ¶æƒå…¨éƒ¨ä¸Šç¼´ç»™â€œç¬¬ä¸‰æ–¹â€IOCå®¹å™¨ï¼Œæ‰€ä»¥ï¼ŒIOCå®¹å™¨æˆäº†æ•´ä¸ªç³»ç»Ÿçš„å…³é”®æ ¸å¿ƒï¼Œå®ƒèµ·åˆ°äº†ä¸€ç§ç±»ä¼¼â€œç²˜åˆå‰‚â€çš„ä½œç”¨ï¼ŒæŠŠç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡ç²˜åˆåœ¨ä¸€èµ·å‘æŒ¥ä½œç”¨ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªâ€œç²˜åˆå‰‚â€ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ä¼šå½¼æ­¤å¤±å»è”ç³»ï¼Œè¿™å°±æ˜¯æœ‰äººæŠŠIOCå®¹å™¨æ¯”å–»æˆâ€œç²˜åˆå‰‚â€çš„ç”±æ¥ã€‚<br>æˆ‘ä»¬å†æ¥åšä¸ªè¯•éªŒï¼šæŠŠä¸Šå›¾ä¸­é—´çš„IOCå®¹å™¨æ‹¿æ‰ï¼Œç„¶åå†æ¥çœ‹çœ‹è¿™å¥—ç³»ç»Ÿï¼ˆæ‹¿æ‰IoCå®¹å™¨åçš„ç³»ç»Ÿï¼‰ï¼š</p>
<p>æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„ç”»é¢ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å®ç°æ•´ä¸ªç³»ç»Ÿæ‰€éœ€è¦å®Œæˆçš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ—¶å€™ï¼ŒAã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡ä¹‹é—´å·²ç»æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œå½¼æ­¤æ¯«æ— è”ç³»ï¼Œè¿™æ ·çš„è¯ï¼Œå½“ä½ åœ¨å®ç°Açš„æ—¶å€™ï¼Œæ ¹æœ¬æ— é¡»å†å»è€ƒè™‘Bã€Cå’ŒDäº†ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å·²ç»é™ä½åˆ°äº†æœ€ä½ç¨‹åº¦ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœŸèƒ½å®ç°IOCå®¹å™¨ï¼Œå¯¹äºç³»ç»Ÿå¼€å‘è€Œè¨€ï¼Œè¿™å°†æ˜¯ä¸€ä»¶å¤šä¹ˆç¾å¥½çš„äº‹æƒ…ï¼Œå‚ä¸å¼€å‘çš„æ¯ä¸€æˆå‘˜åªè¦å®ç°è‡ªå·±çš„ç±»å°±å¯ä»¥äº†ï¼Œè·Ÿåˆ«äººæ²¡æœ‰ä»»ä½•å…³ç³»ï¼<br>æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œæ§åˆ¶åè½¬(IOC)åˆ°åº•ä¸ºä»€ä¹ˆè¦èµ·è¿™ä¹ˆä¸ªåå­—ï¼Ÿæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼š<br>è½¯ä»¶ç³»ç»Ÿåœ¨æ²¡æœ‰å¼•å…¥IOCå®¹å™¨ä¹‹å‰ï¼Œå¦‚å›¾1æ‰€ç¤ºï¼Œå¯¹è±¡Aä¾èµ–äºå¯¹è±¡Bï¼Œé‚£ä¹ˆå¯¹è±¡Aåœ¨åˆå§‹åŒ–æˆ–è€…è¿è¡Œåˆ°æŸä¸€ç‚¹çš„æ—¶å€™ï¼Œè‡ªå·±å¿…é¡»ä¸»åŠ¨å»åˆ›å»ºå¯¹è±¡Bæˆ–è€…ä½¿ç”¨å·²ç»åˆ›å»ºçš„å¯¹è±¡Bã€‚æ— è®ºæ˜¯åˆ›å»ºè¿˜æ˜¯ä½¿ç”¨å¯¹è±¡Bï¼Œæ§åˆ¶æƒéƒ½åœ¨è‡ªå·±æ‰‹ä¸Šã€‚<br>è½¯ä»¶ç³»ç»Ÿåœ¨å¼•å…¥IOCå®¹å™¨ä¹‹åï¼Œè¿™ç§æƒ…å½¢å°±å®Œå…¨æ”¹å˜äº†ï¼Œå¦‚å›¾3æ‰€ç¤ºï¼Œç”±äºIOCå®¹å™¨çš„åŠ å…¥ï¼Œå¯¹è±¡Aä¸å¯¹è±¡Bä¹‹é—´å¤±å»äº†ç›´æ¥è”ç³»ï¼Œæ‰€ä»¥ï¼Œå½“å¯¹è±¡Aè¿è¡Œåˆ°éœ€è¦å¯¹è±¡Bçš„æ—¶å€™ï¼ŒIOCå®¹å™¨ä¼šä¸»åŠ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡Bæ³¨å…¥åˆ°å¯¹è±¡Aéœ€è¦çš„åœ°æ–¹ã€‚<br>é€šè¿‡å‰åçš„å¯¹æ¯”ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºæ¥ï¼šå¯¹è±¡Aè·å¾—ä¾èµ–å¯¹è±¡Bçš„è¿‡ç¨‹,ç”±ä¸»åŠ¨è¡Œä¸ºå˜ä¸ºäº†è¢«åŠ¨è¡Œä¸ºï¼Œæ§åˆ¶æƒé¢ å€’è¿‡æ¥äº†ï¼Œè¿™å°±æ˜¯â€œæ§åˆ¶åè½¬â€è¿™ä¸ªåç§°çš„ç”±æ¥ã€‚</p>
<p>3ã€IOCçš„åˆ«åï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</p>
<p>2004å¹´ï¼ŒMartin Fowleræ¢è®¨äº†åŒä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶IOCæ˜¯æ§åˆ¶åè½¬ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯â€œå“ªäº›æ–¹é¢çš„æ§åˆ¶è¢«åè½¬äº†å‘¢ï¼Ÿâ€ï¼Œç»è¿‡è¯¦ç»†åœ°åˆ†æå’Œè®ºè¯åï¼Œä»–å¾—å‡ºäº†ç­”æ¡ˆï¼šâ€œè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹è¢«åè½¬äº†â€ã€‚æ§åˆ¶è¢«åè½¬ä¹‹åï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹ç”±è‡ªèº«ç®¡ç†å˜ä¸ºäº†ç”±IOCå®¹å™¨ä¸»åŠ¨æ³¨å…¥ã€‚äºæ˜¯ï¼Œä»–ç»™â€œæ§åˆ¶åè½¬â€å–äº†ä¸€ä¸ªæ›´åˆé€‚çš„åå­—å«åšâ€œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰â€ã€‚ä»–çš„è¿™ä¸ªç­”æ¡ˆï¼Œå®é™…ä¸Šç»™å‡ºäº†å®ç°IOCçš„æ–¹æ³•ï¼šæ³¨å…¥ã€‚æ‰€è°“ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯ç”±IOCå®¹å™¨åœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¾èµ–æ³¨å…¥(DI)å’Œæ§åˆ¶åè½¬(IOC)æ˜¯ä»ä¸åŒçš„è§’åº¦çš„æè¿°çš„åŒä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯æŒ‡é€šè¿‡å¼•å…¥IOCå®¹å™¨ï¼Œåˆ©ç”¨ä¾èµ–å…³ç³»æ³¨å…¥çš„æ–¹å¼ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚<br>æˆ‘ä»¬ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œæ¥å¸®åŠ©ç†è§£ä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ã€‚å¤§å®¶å¯¹USBæ¥å£å’ŒUSBè®¾å¤‡åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰å§ï¼ŒUSBä¸ºæˆ‘ä»¬ä½¿ç”¨ç”µè„‘æä¾›äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œç°åœ¨æœ‰å¾ˆå¤šçš„å¤–éƒ¨è®¾å¤‡éƒ½æ”¯æŒUSBæ¥å£ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬åˆ©ç”¨ç”µè„‘ä¸»æœºå’ŒUSBæ¥å£æ¥å®ç°ä¸€ä¸ªä»»åŠ¡ï¼šä»å¤–éƒ¨USBè®¾å¤‡è¯»å–ä¸€ä¸ªæ–‡ä»¶ã€‚<br>ç”µè„‘ä¸»æœºè¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒä¸€ç‚¹ä¹Ÿä¸ä¼šå…³å¿ƒUSBæ¥å£ä¸Šè¿æ¥çš„æ˜¯ä»€ä¹ˆå¤–éƒ¨è®¾å¤‡ï¼Œè€Œä¸”å®ƒç¡®å®ä¹Ÿæ— é¡»çŸ¥é“ã€‚å®ƒçš„ä»»åŠ¡å°±æ˜¯è¯»å–USBæ¥å£ï¼ŒæŒ‚æ¥çš„å¤–éƒ¨è®¾å¤‡åªè¦ç¬¦åˆUSBæ¥å£æ ‡å‡†å³å¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ç»™ç”µè„‘ä¸»æœºè¿æ¥ä¸Šä¸€ä¸ªUç›˜ï¼Œé‚£ä¹ˆä¸»æœºå°±ä»Uç›˜ä¸Šè¯»å–æ–‡ä»¶ï¼›å¦‚æœæˆ‘ç»™ç”µè„‘ä¸»æœºè¿æ¥ä¸Šä¸€ä¸ªå¤–ç½®ç¡¬ç›˜ï¼Œé‚£ä¹ˆç”µè„‘ä¸»æœºå°±ä»å¤–ç½®ç¡¬ç›˜ä¸Šè¯»å–æ–‡ä»¶ã€‚æŒ‚æ¥å¤–éƒ¨è®¾å¤‡çš„æƒåŠ›ç”±æˆ‘ä½œä¸»ï¼Œå³æ§åˆ¶æƒå½’æˆ‘ï¼Œè‡³äºUSBæ¥å£æŒ‚æ¥çš„æ˜¯ä»€ä¹ˆè®¾å¤‡ï¼Œç”µè„‘ä¸»æœºæ˜¯å†³å®šä¸äº†ï¼Œå®ƒåªèƒ½è¢«åŠ¨çš„æ¥å—ã€‚ç”µè„‘ä¸»æœºéœ€è¦å¤–éƒ¨è®¾å¤‡çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ç”¨å®ƒå‘Šè¯‰æˆ‘ï¼Œæˆ‘å°±ä¼šä¸»åŠ¨å¸®å®ƒæŒ‚ä¸Šå®ƒæƒ³è¦çš„å¤–éƒ¨è®¾å¤‡ï¼Œä½ çœ‹æˆ‘çš„æœåŠ¡æ˜¯å¤šä¹ˆçš„åˆ°ä½ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸€ä¸ªä¾èµ–æ³¨å…¥çš„ä¾‹å­ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å°±èµ·åˆ°äº†IOCå®¹å™¨çš„ä½œç”¨ã€‚<br>é€šè¿‡è¿™ä¸ªä¾‹å­,ä¾èµ–æ³¨å…¥çš„æ€è·¯å·²ç»éå¸¸æ¸…æ¥šï¼šå½“ç”µè„‘ä¸»æœºè¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘å°±æŠŠå®ƒæ‰€è¦ä¾èµ–çš„å¤–éƒ¨è®¾å¤‡ï¼Œå¸®ä»–æŒ‚æ¥ä¸Šã€‚æ•´ä¸ªå¤–éƒ¨è®¾å¤‡æ³¨å…¥çš„è¿‡ç¨‹å’Œä¸€ä¸ªè¢«ä¾èµ–çš„å¯¹è±¡åœ¨ç³»ç»Ÿè¿è¡Œæ—¶è¢«æ³¨å…¥å¦å¤–ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çš„è¿‡ç¨‹å®Œå…¨ä¸€æ ·ã€‚<br>æˆ‘ä»¬æŠŠä¾èµ–æ³¨å…¥åº”ç”¨åˆ°è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå†æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š<br>å¯¹è±¡Aä¾èµ–äºå¯¹è±¡B,å½“å¯¹è±¡ Aéœ€è¦ç”¨åˆ°å¯¹è±¡Bçš„æ—¶å€™ï¼ŒIOCå®¹å™¨å°±ä¼šç«‹å³åˆ›å»ºä¸€ä¸ªå¯¹è±¡Bé€ç»™å¯¹è±¡Aã€‚IOCå®¹å™¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡åˆ¶é€ å·¥å‚ï¼Œä½ éœ€è¦ä»€ä¹ˆï¼Œå®ƒä¼šç»™ä½ é€å»ï¼Œä½ ç›´æ¥ä½¿ç”¨å°±è¡Œäº†ï¼Œè€Œå†ä¹Ÿä¸ç”¨å»å…³å¿ƒä½ æ‰€ç”¨çš„ä¸œè¥¿æ˜¯å¦‚ä½•åˆ¶æˆçš„ï¼Œä¹Ÿä¸ç”¨å…³å¿ƒæœ€åæ˜¯æ€ä¹ˆè¢«é”€æ¯çš„ï¼Œè¿™ä¸€åˆ‡å…¨éƒ¨ç”±IOCå®¹å™¨åŒ…åŠã€‚<br>åœ¨ä¼ ç»Ÿçš„å®ç°ä¸­ï¼Œç”±ç¨‹åºå†…éƒ¨ä»£ç æ¥æ§åˆ¶ç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨newå…³é”®å­—æ¥å®ç°ä¸¤ä¸ªç»„ä»¶ä¹‹é—´å…³ç³»çš„ç»„åˆï¼Œè¿™ç§å®ç°æ–¹å¼ä¼šé€ æˆç»„ä»¶ä¹‹é—´è€¦åˆã€‚IOCå¾ˆå¥½åœ°è§£å†³äº†è¯¥é—®é¢˜ï¼Œå®ƒå°†å®ç°ç»„ä»¶é—´å…³ç³»ä»ç¨‹åºå†…éƒ¨æåˆ°å¤–éƒ¨å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå°†ç»„ä»¶é—´çš„æŸç§ä¾èµ–å…³ç³»åŠ¨æ€æ³¨å…¥ç»„ä»¶ä¸­ã€‚</p>
<p>4ã€IOCä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„</p>
<p>æˆ‘ä»¬è¿˜æ˜¯ä»USBçš„ä¾‹å­è¯´èµ·ï¼Œä½¿ç”¨USBå¤–éƒ¨è®¾å¤‡æ¯”ä½¿ç”¨å†…ç½®ç¡¬ç›˜ï¼Œåˆ°åº•å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Ÿ<br>ç¬¬ä¸€ã€USBè®¾å¤‡ä½œä¸ºç”µè„‘ä¸»æœºçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨æ’å…¥ä¸»æœºä¹‹å‰ï¼Œä¸ç”µè„‘ä¸»æœºæ²¡æœ‰ä»»ä½•çš„å…³ç³»ï¼Œåªæœ‰è¢«æˆ‘ä»¬è¿æ¥åœ¨ä¸€èµ·ä¹‹åï¼Œä¸¤è€…æ‰å‘ç”Ÿè”ç³»ï¼Œå…·æœ‰ç›¸å…³æ€§ã€‚æ‰€ä»¥ï¼Œæ— è®ºä¸¤è€…ä¸­çš„ä»»ä½•ä¸€æ–¹å‡ºç°ä»€ä¹ˆçš„é—®é¢˜ï¼Œéƒ½ä¸ä¼šå½±å“å¦ä¸€æ–¹çš„è¿è¡Œã€‚è¿™ç§ç‰¹æ€§ä½“ç°åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå°±æ˜¯å¯ç»´æŠ¤æ€§æ¯”è¾ƒå¥½ï¼Œéå¸¸ä¾¿äºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¾¿äºè°ƒè¯•ç¨‹åºå’Œè¯Šæ–­æ•…éšœã€‚ä»£ç ä¸­çš„æ¯ä¸€ä¸ªClasséƒ½å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œå½¼æ­¤ä¹‹é—´äº’ä¸å½±å“ï¼Œåªè¦ä¿è¯è‡ªèº«çš„åŠŸèƒ½æ— è¯¯å³å¯ï¼Œè¿™å°±æ˜¯ç»„ä»¶ä¹‹é—´ä½è€¦åˆæˆ–è€…æ— è€¦åˆå¸¦æ¥çš„å¥½å¤„ã€‚<br>ç¬¬äºŒã€USBè®¾å¤‡å’Œç”µè„‘ä¸»æœºçš„ä¹‹é—´æ— å…³æ€§ï¼Œè¿˜å¸¦æ¥äº†å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œç”Ÿäº§USBè®¾å¤‡çš„å‚å•†å’Œç”Ÿäº§ç”µè„‘ä¸»æœºçš„å‚å•†å®Œå…¨å¯ä»¥æ˜¯äº’ä¸ç›¸å¹²çš„äººï¼Œå„å¹²å„äº‹ï¼Œä»–ä»¬ä¹‹é—´å”¯ä¸€éœ€è¦éµå®ˆçš„å°±æ˜¯USBæ¥å£æ ‡å‡†ã€‚è¿™ç§ç‰¹æ€§ä½“ç°åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¥½å¤„å¯æ˜¯å¤ªå¤§äº†ã€‚æ¯ä¸ªå¼€å‘å›¢é˜Ÿçš„æˆå‘˜éƒ½åªéœ€è¦å…³å¿ƒå®ç°è‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®Œå…¨ä¸ç”¨å»å…³å¿ƒå…¶å®ƒçš„äººå·¥ä½œè¿›å±•ï¼Œå› ä¸ºä½ çš„ä»»åŠ¡è·Ÿåˆ«äººæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä½ çš„ä»»åŠ¡å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œä½ çš„ä»»åŠ¡ä¹Ÿä¸ç”¨ä¾èµ–äºåˆ«äººçš„ç»„ä»¶ï¼Œå†ä¹Ÿä¸ç”¨æ‰¯ä¸æ¸…è´£ä»»äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªå¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œå›¢é˜Ÿæˆå‘˜åˆ†å·¥æ˜ç¡®ã€è´£ä»»æ˜æ™°ï¼Œå¾ˆå®¹æ˜“å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡åˆ’åˆ†ä¸ºç»†å°çš„ä»»åŠ¡ï¼Œå¼€å‘æ•ˆç‡å’Œäº§å“è´¨é‡å¿…å°†å¾—åˆ°å¤§å¹…åº¦çš„æé«˜ã€‚<br>ç¬¬ä¸‰ã€åŒä¸€ä¸ªUSBå¤–éƒ¨è®¾å¤‡å¯ä»¥æ’æ¥åˆ°ä»»ä½•æ”¯æŒUSBçš„è®¾å¤‡ï¼Œå¯ä»¥æ’æ¥åˆ°ç”µè„‘ä¸»æœºï¼Œä¹Ÿå¯ä»¥æ’æ¥åˆ°DVæœºï¼ŒUSBå¤–éƒ¨è®¾å¤‡å¯ä»¥è¢«åå¤åˆ©ç”¨ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè¿™ç§ç‰¹æ€§å°±æ˜¯å¯å¤ç”¨æ€§å¥½ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…·æœ‰æ™®éæ€§çš„å¸¸ç”¨ç»„ä»¶ç‹¬ç«‹å‡ºæ¥ï¼Œåå¤åˆ©ç”¨åˆ°é¡¹ç›®ä¸­çš„å…¶å®ƒéƒ¨åˆ†ï¼Œæˆ–è€…æ˜¯å…¶å®ƒé¡¹ç›®ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾ã€‚æ˜¾ç„¶ï¼ŒIOCä¸ä»…æ›´å¥½åœ°è´¯å½»äº†è¿™ä¸ªåŸåˆ™ï¼Œæé«˜äº†æ¨¡å—çš„å¯å¤ç”¨æ€§ã€‚ç¬¦åˆæ¥å£æ ‡å‡†çš„å®ç°ï¼Œéƒ½å¯ä»¥æ’æ¥åˆ°æ”¯æŒæ­¤æ ‡å‡†çš„æ¨¡å—ä¸­ã€‚<br>ç¬¬å››ã€åŒUSBå¤–éƒ¨è®¾å¤‡ä¸€æ ·ï¼Œæ¨¡å—å…·æœ‰çƒ­æ’æ‹”ç‰¹æ€§ã€‚IOCç”Ÿæˆå¯¹è±¡çš„æ–¹å¼è½¬ä¸ºå¤–ç½®æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æŠŠå¯¹è±¡ç”Ÿæˆæ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œå®šä¹‰ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬æ›´æ¢ä¸€ä¸ªå®ç°å­ç±»å°†ä¼šå˜å¾—å¾ˆç®€å•ï¼Œåªè¦ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå®Œå…¨å…·æœ‰çƒ­æ’æ‹¨çš„ç‰¹æ€§ã€‚<br>ä»¥ä¸Šå‡ ç‚¹å¥½å¤„ï¼Œéš¾é“è¿˜ä¸è¶³ä»¥æ‰“åŠ¨æˆ‘ä»¬ï¼Œè®©æˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨IOCæ¡†æ¶å—ï¼Ÿ</p>
<p>5ã€IOCå®¹å™¨çš„æŠ€æœ¯å‰–æ</p>
<p>IOCä¸­æœ€åŸºæœ¬çš„æŠ€æœ¯å°±æ˜¯â€œåå°„(Reflection)â€ç¼–ç¨‹ï¼Œç›®å‰.Net C#ã€Javaå’ŒPHP5ç­‰è¯­è¨€å‡æ”¯æŒï¼Œå…¶ä¸­PHP5çš„æŠ€æœ¯ä¹¦ç±ä¸­ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç¿»è¯‘æˆâ€œæ˜ å°„â€ã€‚æœ‰å…³åå°„çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œå¤§å®¶åº”è¯¥éƒ½å¾ˆæ¸…æ¥šï¼Œé€šä¿—æ¥è®²å°±æ˜¯æ ¹æ®ç»™å‡ºçš„ç±»åï¼ˆå­—ç¬¦ä¸²æ–¹å¼ï¼‰æ¥åŠ¨æ€åœ°ç”Ÿæˆå¯¹è±¡ã€‚è¿™ç§ç¼–ç¨‹æ–¹å¼å¯ä»¥è®©å¯¹è±¡åœ¨ç”Ÿæˆæ—¶æ‰å†³å®šåˆ°åº•æ˜¯å“ªä¸€ç§å¯¹è±¡ã€‚åå°„çš„åº”ç”¨æ˜¯å¾ˆå¹¿æ³›çš„ï¼Œå¾ˆå¤šçš„æˆç†Ÿçš„æ¡†æ¶ï¼Œæ¯”å¦‚è±¡Javaä¸­çš„Hibernateã€Springæ¡†æ¶ï¼Œ.Netä¸­ NHibernateã€Spring.Netæ¡†æ¶éƒ½æ˜¯æŠŠâ€œåå°„â€åšä¸ºæœ€åŸºæœ¬çš„æŠ€æœ¯æ‰‹æ®µã€‚<br>åå°„æŠ€æœ¯å…¶å®å¾ˆæ—©å°±å‡ºç°äº†ï¼Œä½†ä¸€ç›´è¢«å¿½ç•¥ï¼Œæ²¡æœ‰è¢«è¿›ä¸€æ­¥çš„åˆ©ç”¨ã€‚å½“æ—¶çš„åå°„ç¼–ç¨‹æ–¹å¼ç›¸å¯¹äºæ­£å¸¸çš„å¯¹è±¡ç”Ÿæˆæ–¹å¼è¦æ…¢è‡³å°‘å¾—10å€ã€‚ç°åœ¨çš„åå°„æŠ€æœ¯ç»è¿‡æ”¹è‰¯ä¼˜åŒ–ï¼Œå·²ç»éå¸¸æˆç†Ÿï¼Œåå°„æ–¹å¼ç”Ÿæˆå¯¹è±¡å’Œé€šå¸¸å¯¹è±¡ç”Ÿæˆæ–¹å¼ï¼Œé€Ÿåº¦å·²ç»ç›¸å·®ä¸å¤§äº†ï¼Œå¤§çº¦ä¸º1-2å€çš„å·®è·ã€‚<br>æˆ‘ä»¬å¯ä»¥æŠŠIOCå®¹å™¨çš„å·¥ä½œæ¨¡å¼çœ‹åšæ˜¯å·¥å‚æ¨¡å¼çš„å‡åï¼Œå¯ä»¥æŠŠIOCå®¹å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå·¥å‚ï¼Œè¿™ä¸ªå·¥å‚é‡Œè¦ç”Ÿäº§çš„å¯¹è±¡éƒ½åœ¨é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºå®šä¹‰ï¼Œç„¶ååˆ©ç”¨ç¼–ç¨‹è¯­è¨€çš„çš„åå°„ç¼–ç¨‹ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºçš„ç±»åç”Ÿæˆç›¸åº”çš„å¯¹è±¡ã€‚ä»å®ç°æ¥çœ‹ï¼ŒIOCæ˜¯æŠŠä»¥å‰åœ¨å·¥å‚æ–¹æ³•é‡Œå†™æ­»çš„å¯¹è±¡ç”Ÿæˆä»£ç ï¼Œæ”¹å˜ä¸ºç”±é…ç½®æ–‡ä»¶æ¥å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯æŠŠå·¥å‚å’Œå¯¹è±¡ç”Ÿæˆè¿™ä¸¤è€…ç‹¬ç«‹åˆ†éš”å¼€æ¥ï¼Œç›®çš„å°±æ˜¯æé«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>6ã€IOCå®¹å™¨çš„ä¸€äº›äº§å“</p>
<p>Sun ONEæŠ€æœ¯ä½“ç³»ä¸‹çš„IOCå®¹å™¨æœ‰ï¼šè½»é‡çº§çš„æœ‰Springã€Guiceã€Pico Containerã€Avalonã€HiveMindï¼›é‡é‡çº§çš„æœ‰EJBï¼›ä¸è½»ä¸é‡çš„æœ‰JBossï¼ŒJdonç­‰ç­‰ã€‚Springæ¡†æ¶ä½œä¸ºJavaå¼€å‘ä¸­SSH(Strutsã€Springã€Hibernate)ä¸‰å‰‘å®¢ä¹‹ä¸€ï¼Œå¤§ä¸­å°é¡¹ç›®ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œéå¸¸æˆç†Ÿï¼Œåº”ç”¨å¹¿æ³›ï¼ŒEJBåœ¨å…³é”®æ€§çš„å·¥ä¸šçº§é¡¹ç›®ä¸­ä¹Ÿè¢«ä½¿ç”¨ï¼Œæ¯”å¦‚æŸäº›ç”µä¿¡ä¸šåŠ¡ã€‚<br>.NetæŠ€æœ¯ä½“ç³»ä¸‹çš„IOCå®¹å™¨æœ‰ï¼šSpring.Netã€Castleç­‰ç­‰ã€‚Spring.Netæ˜¯ä»Javaçš„Springç§»æ¤è¿‡æ¥çš„IOCå®¹å™¨ï¼ŒCastleçš„IOCå®¹å™¨å°±æ˜¯Windsoréƒ¨åˆ†ã€‚å®ƒä»¬å‡æ˜¯è½»é‡çº§çš„æ¡†æ¶ï¼Œæ¯”è¾ƒæˆç†Ÿï¼Œå…¶ä¸­Spring.Netå·²ç»è¢«é€æ¸åº”ç”¨äºå„ç§é¡¹ç›®ä¸­ã€‚</p>
<p>7ã€ä½¿ç”¨IOCæ¡†æ¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ</p>
<p>ä½¿ç”¨IOCæ¡†æ¶äº§å“èƒ½å¤Ÿç»™æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹å¸¦æ¥å¾ˆå¤§çš„å¥½å¤„ï¼Œä½†æ˜¯ä¹Ÿè¦å……åˆ†è®¤è¯†å¼•å…¥IOCæ¡†æ¶çš„ç¼ºç‚¹ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œæœç»æ»¥ç”¨æ¡†æ¶ã€‚</p>
<p>ï¼ˆ1ï¼‰è½¯ä»¶ç³»ç»Ÿä¸­ç”±äºå¼•å…¥äº†ç¬¬ä¸‰æ–¹IOCå®¹å™¨ï¼Œç”Ÿæˆå¯¹è±¡çš„æ­¥éª¤å˜å¾—æœ‰äº›å¤æ‚ï¼Œæœ¬æ¥æ˜¯ä¸¤è€…ä¹‹é—´çš„äº‹æƒ…ï¼Œåˆå‡­ç©ºå¤šå‡ºä¸€é“æ‰‹ç»­ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆšå¼€å§‹ä½¿ç”¨IOCæ¡†æ¶çš„æ—¶å€™ï¼Œä¼šæ„Ÿè§‰ç³»ç»Ÿå˜å¾—ä¸å¤ªç›´è§‚ã€‚æ‰€ä»¥ï¼Œå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œå°±ä¼šå¢åŠ å›¢é˜Ÿæˆå‘˜å­¦ä¹ å’Œè®¤è¯†çš„åŸ¹è®­æˆæœ¬ï¼Œå¹¶ä¸”åœ¨ä»¥åçš„è¿è¡Œç»´æŠ¤ä¸­ï¼Œè¿˜å¾—è®©æ–°åŠ å…¥è€…å…·å¤‡åŒæ ·çš„çŸ¥è¯†ä½“ç³»ã€‚</p>
<p>ï¼ˆ2ï¼‰ç”±äºIOCå®¹å™¨ç”Ÿæˆå¯¹è±¡æ˜¯é€šè¿‡åå°„æ–¹å¼ï¼Œåœ¨è¿è¡Œæ•ˆç‡ä¸Šæœ‰ä¸€å®šçš„æŸè€—ã€‚å¦‚æœä½ è¦è¿½æ±‚è¿è¡Œæ•ˆç‡çš„è¯ï¼Œå°±å¿…é¡»å¯¹æ­¤è¿›è¡Œæƒè¡¡ã€‚</p>
<p>ï¼ˆ3ï¼‰ã€å…·ä½“åˆ°IOCæ¡†æ¶äº§å“(æ¯”å¦‚ï¼šSpring)æ¥è®²ï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„é…åˆ¶å·¥ä½œï¼Œæ¯”è¾ƒç¹çï¼Œå¯¹äºä¸€äº›å°çš„é¡¹ç›®è€Œè¨€ï¼Œå®¢è§‚ä¸Šä¹Ÿå¯èƒ½åŠ å¤§ä¸€äº›å·¥ä½œæˆæœ¬ã€‚</p>
<p>ï¼ˆ4ï¼‰IOCæ¡†æ¶äº§å“æœ¬èº«çš„æˆç†Ÿåº¦éœ€è¦è¿›è¡Œè¯„ä¼°ï¼Œå¦‚æœå¼•å…¥ä¸€ä¸ªä¸æˆç†Ÿçš„IOCæ¡†æ¶äº§å“ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°æ•´ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸€ä¸ªéšæ€§çš„é£é™©ã€‚<br>æˆ‘ä»¬å¤§ä½“å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šä¸€äº›å·¥ä½œé‡ä¸å¤§çš„é¡¹ç›®æˆ–è€…äº§å“ï¼Œä¸å¤ªé€‚åˆä½¿ç”¨IOCæ¡†æ¶äº§å“ã€‚å¦å¤–ï¼Œå¦‚æœå›¢é˜Ÿæˆå‘˜çš„çŸ¥è¯†èƒ½åŠ›æ¬ ç¼ºï¼Œå¯¹äºIOCæ¡†æ¶äº§å“ç¼ºä¹æ·±å…¥çš„ç†è§£ï¼Œä¹Ÿä¸è¦è´¸ç„¶å¼•å…¥ã€‚æœ€åï¼Œç‰¹åˆ«å¼ºè°ƒè¿è¡Œæ•ˆç‡çš„é¡¹ç›®æˆ–è€…äº§å“ï¼Œä¹Ÿä¸å¤ªé€‚åˆå¼•å…¥IOCæ¡†æ¶äº§å“ï¼Œè±¡WEB2.0ç½‘ç«™å°±æ˜¯è¿™ç§æƒ…å†µã€‚</p>
<h1 id="117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬-IOC-ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬-IOC-ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬(IOC)ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬(IOC)ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h1><p>å€ŸåŠ©Springå®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚</p>
<p>å¯¹è±¡Aè¿è¡Œéœ€è¦å¯¹è±¡Bï¼Œç”±ä¸»åŠ¨åˆ›å»ºå˜ä¸ºIOCå®¹å™¨æ³¨å…¥ï¼Œè¿™ä¾¿æ˜¯æ§åˆ¶åè½¬ã€‚</p>
<p>è·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹è¢«åè½¬äº†ï¼Œè·å–ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹ç”±è‡ªèº«åˆ›å»ºå˜ä¸ºç”±IOCå®¹å™¨æ³¨å…¥ï¼Œè¿™ä¾¿æ˜¯ä¾èµ–æ³¨å…¥ã€‚</p>
<h1 id="118ã€BeanFactory-å’Œ-ApplicationContext-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#118ã€BeanFactory-å’Œ-ApplicationContext-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="118ã€BeanFactory å’Œ ApplicationContext æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>118ã€BeanFactory å’Œ ApplicationContext æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>1ã€BeanFactoryæ˜¯Springçš„æœ€åº•å±‚æ¥å£ï¼ŒåŒ…å«beançš„å®šä¹‰ï¼Œç®¡ç†beançš„åŠ è½½ï¼Œå®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹ç‚¹æ˜¯æ¯æ¬¡è·å–å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ï¼Œæ‹¥æœ‰BeanFactoryçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶ä¸”æ‰©å±•äº†å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œæ¯æ¬¡å®¹å™¨å¯åŠ¨æ—¶å°±ä¼šåˆ›å»ºæ‰€æœ‰çš„å¯¹è±¡ã€‚</p>
<p>ApplicationContextçš„é¢å¤–åŠŸèƒ½ï¼š<br>ç»§æ‰¿MessageSourceï¼Œæ”¯æŒå›½é™…åŒ–ï¼›<br>ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ï¼›<br>æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeanï¼›<br>åŒæ—¶åŠ è½½è¿‡ä¸ªé…ç½®æ–‡ä»¶ï¼›<br>è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ï¼Œä½¿å¾—æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ï¼›<br>2ã€BeanFactoryé€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»ºï¼ŒApplicationContextå¯ä»¥ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ContextLoaderã€‚</p>
<p>3ã€BeanFactory å’Œ ApplicationContextéƒ½æ”¯æŒBeanPostProcessorï¼ŒBeanFactoryPostProcessorï¼Œä½†BeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚</p>
<h1 id="119ã€ä»€ä¹ˆæ˜¯-JavaConfigï¼Ÿ"><a href="#119ã€ä»€ä¹ˆæ˜¯-JavaConfigï¼Ÿ" class="headerlink" title="119ã€ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ"></a>119ã€ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ</h1><p>JavaConfigæ˜¯Spring3.0æ–°å¢çš„æ¦‚å¿µï¼Œå°±æ˜¯ä»¥æ³¨è§£çš„å½¢å¼å–ä»£Springä¸­ç¹ççš„xmlæ–‡ä»¶ã€‚</p>
<p>JavaConfigç»“åˆäº†xmlçš„è§£è€¦å’Œjavaç¼–è¯‘æ—¶æ£€æŸ¥çš„ä¼˜ç‚¹ã€‚</p>
<p>@Configurationï¼Œè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯é…ç½®ç±»ï¼›<br>@ComponentScanï¼Œç›¸å½“äºxmlçš„&lt;context:componentScan basepackage&#x3D;&gt;ï¼›<br>@Beanï¼Œç›¸å½“äºxmlçš„<bean id="student" class="com.guor.entity">ï¼›<br>@EnableWebMvcï¼Œç›¸å½“äºxmlçš„<a href="mvc:annotation-driven">mvc:annotation-driven</a>ï¼›<br>@ImportResourceï¼Œç›¸å½“äºxmlçš„<import resource="application-context-cache.xml">ï¼›<br>@PropertySourceï¼Œç”¨äºè¯»å–propertiesé…ç½®æ–‡ä»¶ï¼›<br>@Profileï¼Œä¸€èˆ¬ç”¨äºå¤šç¯å¢ƒé…ç½®ï¼Œæ¿€æ´»æ—¶å¯ç”¨@ActiveProfile(â€œdevâ€)æ³¨è§£ï¼›</p>
<h1 id="120ã€ä»€ä¹ˆæ˜¯-ORM-æ¡†æ¶ï¼Ÿ"><a href="#120ã€ä»€ä¹ˆæ˜¯-ORM-æ¡†æ¶ï¼Ÿ" class="headerlink" title="120ã€ä»€ä¹ˆæ˜¯ ORM æ¡†æ¶ï¼Ÿ"></a>120ã€ä»€ä¹ˆæ˜¯ ORM æ¡†æ¶ï¼Ÿ</h1><p>ORMï¼ˆObject-relational mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ã€‚</p>
<p>æ˜¯ä¸ºäº†è§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„ä¸åŒ¹é…é—®é¢˜ã€‚</p>
<p>ORMæ¡†æ¶çš„ä¼˜ç‚¹ï¼š</p>
<p>å¼€å‘æ•ˆç‡æ›´é«˜<br>æ•°æ®è®¿é—®æ›´æŠ½è±¡ã€è½»ä¾¿<br>æ”¯æŒé¢å‘å¯¹è±¡å°è£…</p>
<h1 id="121ã€Spring-æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"><a href="#121ã€Spring-æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ" class="headerlink" title="121ã€Spring æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"></a>121ã€Spring æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ</h1><p>1ã€xmlé…ç½®æ–‡ä»¶</p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"></p>
<pre><code>&lt;bean id=&quot;jackma&quot; class=&quot;com.tyq.dto.User&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;jackma&quot; /&gt;
    &lt;property name=&quot;age&quot; value=&quot;55&quot; /&gt;
    &lt;property name=&quot;dog&quot; ref=&quot;jm&quot; /&gt;
 &lt;/bean&gt;
 
&lt;bean id=&quot;jm&quot; class=&quot;com.tyq.dto.Dog&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;jack&quot; /&gt;
    &lt;property name=&quot;breed&quot; value=&quot;é‡‘æ¯›&quot; /&gt;
    &lt;property name=&quot;age&quot; value=&quot;2&quot; /&gt;
&lt;/bean&gt;
</code></pre>
</beans>
2ã€åŸºäºæ³¨è§£çš„æ–¹å¼

<p>é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼ŒåŸºäºxmlé…ç½®å¤ªéº»çƒ¦ï¼ŒSpring 2.xæ—¶ä»£æä¾›äº†å£°æ˜beançš„æ³¨è§£ã€‚</p>
<p>ï¼ˆ1ï¼‰Beançš„å®šä¹‰</p>
<p>@Componentã€@Controllerã€@Serviceã€@Repositoryã€‚</p>
<p>ï¼ˆ2ï¼‰Beançš„æ³¨å…¥</p>
<p>@Autowire</p>
<p>3ã€åŸºäºJavaçš„æ–¹å¼</p>
<p>Spring 3.xä»¥åï¼Œå¯ä»¥é€šè¿‡Javaä»£ç è£…é…Beanã€‚</p>
<p>@Configuration<br>public class DemoConfig {<br>    @Bean<br>    public User zs(){<br>        return new User();<br>    }<br>    @Bean<br>    public Dog dog(){<br>        return  new Dog();<br>    }<br>    @Bean  &#x2F;&#x2F;ä¸¤ä¸ªç‹—<br>    public Dog haqi(){<br>        return new Dog();<br>    }<br>}<br>@Component(â€œzsâ€)<br>public class User {<br>    private String name;<br>    private int age;<br>    private Dog dog;</p>
<p>  &#x2F;&#x2F;getï¼Œsetæ–¹æ³•ç•¥<br>}<br> åŸæ¥å°±æ˜¯é…ç½®ç±»å•Šï¼Œé€šè¿‡@Beanã€@Componentã€getBeanæ–¹å¼è¿›è¡ŒBeançš„æ³¨å†Œå’Œå‘ç°ã€‚</p>
<h1 id="122ã€è¯·è§£é‡Š-Spring-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#122ã€è¯·è§£é‡Š-Spring-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="122ã€è¯·è§£é‡Š Spring Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>122ã€è¯·è§£é‡Š Spring Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h1><p>é€šè¿‡æ„é€ å™¨æˆ–å·¥å‚æ–¹æ³•åˆ›å»ºbeanå®ä¾‹ï¼›<br>ä¸ºbeançš„å±æ€§èµ‹å€¼ï¼›<br>è°ƒç”¨beançš„åˆå§‹åŒ–æ–¹æ³•ï¼›<br>ä½¿ç”¨beanï¼›<br>å½“å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨beançš„é”€æ¯æ–¹æ³•ï¼›</p>
<h1 id="123ã€Spring-Bean-çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#123ã€Spring-Bean-çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="123ã€Spring Bean çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>123ã€Spring Bean çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š<br>singletonï¼šè¿™ç§beanèŒƒå›´æ˜¯é»˜è®¤çš„ï¼Œè¿™ç§èŒƒå›´ç¡®ä¿ä¸ç®¡æ¥å—å¤šå°‘è¯·æ±‚ï¼Œæ¯ä¸ªå®¹å™¨ä¸­åªå“Ÿä¸€ä¸ªbeançš„å®ä¾‹ï¼Œå•ä¾‹æ¨¡å¼ï¼›<br>prototypeï¼šä¸ºæ¯ä¸€ä¸ªbeanæä¾›ä¸€ä¸ªå®ä¾‹ï¼›<br>requestï¼šåœ¨è¯·æ±‚beanèŒƒå›´å†…ä¸ºæ¯ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„ç½‘ç»œè¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œåœ¨è¯·æ±‚å®Œæ¯•åï¼Œbeanä¼šå¤±æ•ˆå¹¶è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼›<br>sessionï¼šä¸ºæ¯ä¸ªsessionåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œsessionè¿‡æœŸåï¼Œbeanä¼šéšä¹‹æ¶ˆå¤±ï¼›<br>global-sessionï¼šglobal-sessionå’ŒPortletåº”ç”¨ç›¸å…³ã€‚å½“ä½ çš„åº”ç”¨éƒ¨ç½²åœ¨Portletå®¹å™¨ä¸­å·¥ä½œæ—¶ï¼Œå®ƒåŒ…å«å¾ˆå¤športletã€‚å¦‚æœä½ æƒ³è¦å£°æ˜è®©æ‰€æœ‰çš„portletå…¬ç”¨å…¨å±€çš„å­˜å‚¨å˜é‡çš„è¯ï¼Œé‚£ä¹ˆå…¨å±€å˜é‡éœ€è¦å­˜å‚¨åœ¨global-sessionä¸­ã€‚</p>
<h1 id="124ã€å¦‚ä½•åœ¨-Spring-Boot-ä¸­ç¦ç”¨-Actuator-ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ"><a href="#124ã€å¦‚ä½•åœ¨-Spring-Boot-ä¸­ç¦ç”¨-Actuator-ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ" class="headerlink" title="124ã€å¦‚ä½•åœ¨ Spring Boot ä¸­ç¦ç”¨ Actuator ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ"></a>124ã€å¦‚ä½•åœ¨ Spring Boot ä¸­ç¦ç”¨ Actuator ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ</h1><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ•æ„Ÿçš„HTTPç«¯ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œåªæœ‰å…·æœ‰Actuatorè§’è‰²çš„ç”¨æˆ·æ‰èƒ½è®¿é—®å®ƒä»¬ã€‚å®‰å…¨æ€§æ˜¯ä½¿ç”¨æ ‡å‡†çš„HTTPServletRequest.isUserInRoleæ–¹æ³•å®æ–½çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨management.security.enable &#x3D; falseæ¥ç¦ç”¨å®‰å…¨æ€§ã€‚åªæœ‰åœ¨æ‰§è¡Œæœºæ„ç«¯ç‚¹åœ¨é˜²ç«å¢™åè®¿é—®æ—¶ï¼Œæ‰å»ºè®®ç¦ç”¨å®‰å…¨æ€§ã€‚</p>
<h1 id="125ã€ä»€ä¹ˆæ˜¯-Spring-inner-beansï¼Ÿ"><a href="#125ã€ä»€ä¹ˆæ˜¯-Spring-inner-beansï¼Ÿ" class="headerlink" title="125ã€ä»€ä¹ˆæ˜¯ Spring inner beansï¼Ÿ"></a>125ã€ä»€ä¹ˆæ˜¯ Spring inner beansï¼Ÿ</h1><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œæ— è®ºä½•æ—¶beanè¢«ä½¿ç”¨æ—¶ï¼Œå½“ä»…è¢«è°ƒç”¨ä¸€ä¸ªå±æ€§ã€‚å¯ä»¥å°†è¿™ä¸ªbeanå£°æ˜ä¸ºå†…éƒ¨beanã€‚å†…éƒ¨beanå¯ä»¥ç”¨setteræ³¨å…¥â€œå±æ€§â€å’Œæ„é€ æ–¹æ³•æ³¨å…¥â€œæ„é€ å‚æ•°â€çš„æ–¹å¼æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªCustomerç±»å¼•ç”¨äº†ä¸€ä¸ªPersonç±»ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªPersonå®ä¾‹ï¼Œç„¶åå†Customerå†…éƒ¨ä½¿ç”¨ã€‚</p>
<p>package com;</p>
<p>public class Customer {<br>    private Person person;<br>}</p>
<p>class Person{<br>    private int id;<br>    private String name;<br>    private int age;<br>}<br><bean id="CustomerBean" class="com.Customer"><br>    <property name="person"><br>        <bean class="com.person"><br>            <property name="id" value=1 /><br>            <property name="name" value="ç´ å°æš–" /><br>            <property name="age" value=18 /><br>        </bean><br>    </property><br></bean></p>
<h1 id="126ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"><a href="#126ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ" class="headerlink" title="126ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Beans æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"></a>126ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Beans æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ</h1><p>Springæ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹beanè¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚å…³äºå•ä¾‹beançš„çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜éœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚ä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„Spring beanå¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´Springçš„å•ä¾‹beanæ—¶çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ çš„beanæœ‰å¤šç§çŠ¶æ€çš„è¯ï¼Œæ¯”å¦‚view modelï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨å•¦ã€‚</p>
<p>æœ€æµ…æ˜¾çš„è§£å†³åŠæ³•å°±æ˜¯å°†å¤šæ€beançš„ä½œç”¨åŸŸç”±singletonå˜æ›´ä¸ºprototypeã€‚</p>
<h1 id="127ã€è¯·è§£é‡Š-Spring-Bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#127ã€è¯·è§£é‡Š-Spring-Bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="127ã€è¯·è§£é‡Š Spring Bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>127ã€è¯·è§£é‡Š Spring Bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h1><p>Springæ”¯æŒIOCï¼Œè‡ªåŠ¨è£…é…ä¸ç”¨ç±»å®ä¾‹åŒ–ï¼Œç›´æ¥ä»beanå®¹å™¨ä¸­å–ã€‚</p>
<p>1ã€é…ç½®åœ¨xmlä¸­</p>
<bean id="employeeDAO" class="com.guor.EmployeeDAOImpl" autowire="byName" />
2ã€@Autowiredè‡ªåŠ¨è£…é…

<h1 id="128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h1><p>è¦ä½¿ç”¨ @Autowiredï¼Œéœ€è¦æ³¨å†Œ AutowiredAnnotationBeanPostProcessorï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š</p>
<p>å¼•å…¥é…ç½®æ–‡ä»¶ä¸­çš„<bean>ä¸‹å¼•å…¥ <a href="context:annotation-config">context:annotation-config</a></p>
<beans>
    <context:annotation-config />
</beans>
åœ¨beané…ç½®æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥AutowiredAnnotationBeanPostProcessor

<beans>
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>
</beans>
# 129ã€ä»€ä¹ˆæ˜¯ Spring Batchï¼Ÿ
1ã€ä»€ä¹ˆæ˜¯spring batch?

<p>spring batchæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€å®Œå–„çš„æ‰¹å¤„ç†æ¡†æ¶ï¼Œå®ƒä¸»è¦çš„ç›®çš„åœ¨äºå¸®åŠ©ä¼ä¸šå»ºç«‹å¥å£®ã€é«˜æ•ˆçš„æ‰¹å¤„ç†åº”ç”¨ã€‚</p>
<p>spring batchæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒä½¿ç”¨javaè¯­è¨€å¹¶åŸºäºspringæ¡†æ¶ä½œä¸ºåŸºç¡€å¼€å‘ï¼Œä½¿å¾—å·²ç»ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…æˆ–è€…æ˜¯ä¼ä¸šå¯ä»¥æ›´åŠ å®¹æ˜“è®¿é—®å’Œåˆ©ç”¨ä¼ä¸šæœåŠ¡ã€‚</p>
<p>spring batchæä¾›äº†å¤§é‡å¯é‡ç”¨çš„ç»„ä»¶,åŒ…æ‹¬äº†æ—¥å¿—ã€è¿½è¸ªã€äº‹åŠ¡ã€ä»»åŠ¡ä½œä¸šç»Ÿè®¡ã€ä»»åŠ¡é‡å¯ã€è·³è¿‡ã€é‡å¤ã€èµ„æºç®¡ç†ã€‚</p>
<p>å¯¹å¤§æ•°æ®é‡å’Œé«˜æ€§èƒ½çš„æ‰¹å¤„ç†ä»»åŠ¡ï¼Œspring batchåŒæ ·æä¾›äº†é«˜çº§åŠŸèƒ½å’Œç‰¹æ€§æ¥æ”¯æŒã€‚</p>
<p>ä¾‹å¦‚ï¼šåˆ†åŒºåŠŸèƒ½ã€è¿œç¨‹åŠŸèƒ½ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œspring batchå¯ä»¥æ”¯æŒç®€å•çš„ã€å¤æ‚çš„å’Œå¤§æ•°æ®é‡çš„æ‰¹å¤„ç†ä½œä¸šã€‚</p>
<p>2ã€spring batchä¸šåŠ¡åœºæ™¯</p>
<p>å‘¨æœŸæ€§çš„æäº¤æ‰¹å¤„ç†</p>
<p>æŠŠä¸€ä¸ªä»»åŠ¡å¹¶è¡Œå¤„ç†</p>
<p>æ¶ˆæ¯é©±åŠ¨åº”ç”¨åˆ†çº§å¤„ç†</p>
<p>å¤§è§„æ¨¡å¹¶è¡Œæ‰¹å¤„ç†</p>
<p>æ‰‹å·¥æˆ–è°ƒåº¦ä½¿ä»»åŠ¡å¤±è´¥ä¹‹åé‡æ–°å¯åŠ¨</p>
<p>æœ‰ä¾èµ–æ­¥éª¤çš„é¡ºåºæ‰§è¡Œ(ä½¿ç”¨å·¥ä½œæµé©±åŠ¨æ‰©å±•)</p>
<p>å¤„ç†æ—¶è·³è¿‡éƒ¨åˆ†è®°å½•</p>
<p>æˆæ‰¹äº‹åŠ¡ï¼šä¸ºå°æ‰¹é‡çš„æˆ–æœ‰çš„å­˜å‚¨è¿‡ç¨‹&#x2F;è„šæœ¬çš„åœºæ™¯ä½¿ç”¨</p>
<h1 id="130ã€spring-mvc-å’Œ-struts-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#130ã€spring-mvc-å’Œ-struts-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="130ã€spring mvc å’Œ struts çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>130ã€spring mvc å’Œ struts çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>1ã€æ‹¦æˆªæœºåˆ¶çš„ä¸åŒ</p>
<p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å°±ä¼šåˆ›å»ºä¸€ä¸ªActionï¼Œå’ŒSpringæ•´åˆæ—¶Struts2çš„ActionBeanæ³¨å…¥ä½œç”¨åŸŸæ˜¯åŸå‹æ¨¡å¼prototypeï¼Œç„¶åé€šè¿‡setterï¼Œgetterå§requestæ•°æ®æ³¨å…¥åˆ°å±æ€§ã€‚Struts2ä¸­ï¼Œä¸€ä¸ªActionå¯¹åº”ä¸€ä¸ªrequestï¼Œresponseä¸Šä¸‹æ–‡ï¼Œåœ¨æ¥æ”¶å‚æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡å±æ€§æ¥æ”¶ï¼Œè¿™è¯´æ˜å±æ€§å‚æ•°æ˜¯è®©å¤šä¸ªæ–¹æ³•å…±äº«çš„ã€‚Struts2ä¸­Actionçš„ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¯¹åº”ä¸€ä¸ªurlï¼Œè€Œå…¶ç±»å±æ€§å´è¢«æ‰€æœ‰æ–¹æ³•å…±äº«ï¼Œè¿™ä¹Ÿå°±æ— æ³•ç”¨æ³¨è§£æˆ–å…¶ä»–æ–¹å¼æ ‡è¯†å…¶æ‰€å±æ–¹æ³•äº†ï¼Œåªèƒ½è®¾è®¡ä¸ºå¤šä¾‹ã€‚</p>
<p>SpringMVCæ˜¯æ–¹æ³•çº§åˆ«çš„æ‹¦æˆªï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªRequestä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æ–¹æ³•ç›´æ¥åŸºæœ¬ä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œç‹¬äº«requestï¼Œresponseæ•°æ®ã€‚è€Œæ¯ä¸ªæ–¹æ³•åŒæ—¶åˆä½•ä¸€ä¸ªurlå¯¹åº”ï¼Œå‚æ•°çš„ä¼ é€’æ˜¯ç›´æ¥æ³¨å…¥åˆ°æ–¹æ³•ä¸­çš„ï¼Œæ˜¯æ–¹æ³•æ‰€ç‹¬æœ‰çš„ã€‚å¤„ç†ç»“æœé€šè¿‡ModeMapè¿”å›ç»™æ¡†æ¶ã€‚åœ¨Springæ•´åˆæ—¶ï¼ŒSpringMVCçš„Controller Beané»˜è®¤å•ä¾‹æ¨¡å¼Singletonï¼Œæ‰€ä»¥é»˜è®¤å¯¹æ‰€æœ‰çš„è¯·æ±‚ï¼Œåªä¼šåˆ›å»ºä¸€ä¸ªControllerï¼Œæœ‰åº”ä¸ºæ²¡æœ‰å…±äº«çš„å±æ€§ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœè¦æ”¹å˜é»˜è®¤çš„ä½œç”¨åŸŸï¼Œéœ€è¦æ·»åŠ @Scopeæ³¨è§£ä¿®æ”¹ã€‚</p>
<p>Struts2æœ‰è‡ªå·±çš„æ‹¦æˆªInterceptoræœºåˆ¶ï¼ŒSpringMVCè¿™æ˜¯ç”¨çš„æ˜¯ç‹¬ç«‹çš„Aopæ–¹å¼ï¼Œè¿™æ ·å¯¼è‡´Struts2çš„é…ç½®æ–‡ä»¶é‡è¿˜æ˜¯æ¯”SpringMVCå¤§ã€‚</p>
<p>2ã€åº•å±‚æ¡†æ¶çš„ä¸åŒ</p>
<p>Struts2é‡‡ç”¨Filterï¼ˆStrutsPrepareAndExecuteFilterï¼‰å®ç°ï¼ŒSpringMVCï¼ˆDispatcherServletï¼‰åˆ™é‡‡ç”¨Servletå®ç°ã€‚Filteråœ¨å®¹å™¨å¯åŠ¨ä¹‹åå³åˆå§‹åŒ–ï¼›æœåŠ¡åœæ­¢ä»¥åå æ¯ï¼Œæ™šäºServletã€‚Servletåœ¨æ˜¯åœ¨è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œå…ˆäºFilterè°ƒç”¨ï¼ŒæœåŠ¡åœæ­¢åé”€æ¯ã€‚</p>
<p>3ã€æ€§èƒ½æ–¹é¢</p>
<p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å¯¹åº”å®ä¾‹ä¸€ä¸ªæ–°çš„Actionï¼Œéœ€è¦åŠ è½½æ‰€æœ‰çš„å±æ€§å€¼æ³¨å…¥ï¼ŒSpringMVCå®ç°äº†é›¶é…ç½®ï¼Œç”±äºSpringMVCåŸºäºæ–¹æ³•çš„æ‹¦æˆªï¼Œæœ‰åŠ è½½ä¸€æ¬¡å•ä¾‹æ¨¡å¼beanæ³¨å…¥ã€‚æ‰€ä»¥ï¼ŒSpringMVCå¼€å‘æ•ˆç‡å’Œæ€§èƒ½é«˜äºStruts2ã€‚</p>
<p>4ã€é…ç½®æ–¹é¢</p>
<p>spring MVCå’ŒSpringæ˜¯æ— ç¼çš„ã€‚ä»è¿™ä¸ªé¡¹ç›®çš„ç®¡ç†å’Œå®‰å…¨ä¸Šä¹Ÿæ¯”Struts2é«˜ã€‚</p>
<h1 id="131ã€è¯·ä¸¾ä¾‹è§£é‡Š-Required-æ³¨è§£ï¼Ÿ"><a href="#131ã€è¯·ä¸¾ä¾‹è§£é‡Š-Required-æ³¨è§£ï¼Ÿ" class="headerlink" title="131ã€è¯·ä¸¾ä¾‹è§£é‡Š@Required æ³¨è§£ï¼Ÿ"></a>131ã€è¯·ä¸¾ä¾‹è§£é‡Š@Required æ³¨è§£ï¼Ÿ</h1><p>@Requiredæ³¨è§£åº”ç”¨äºbeanå±æ€§çš„setteræ–¹æ³•ï¼Œå®ƒè¡¨æ˜å½±å“çš„beanå±æ€§åœ¨é…ç½®æ—¶å¿…é¡»æ”¾åœ¨XMLé…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<p>åä¹ã€è¯·ä¸¾ä¾‹è¯´æ˜@Qualifier æ³¨è§£ï¼Ÿ<br>å¦‚æœåœ¨xmlä¸­å®šä¹‰äº†ä¸€ç§ç±»å‹çš„å¤šä¸ªbeanï¼ŒåŒæ—¶åœ¨javaæ³¨è§£ä¸­åˆæƒ³æŠŠå…¶ä¸­ä¸€ä¸ªbeanå¯¹è±¡ä½œä¸ºå±æ€§ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥ä½¿ç”¨@QualifieråŠ @Autowiredæ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œè‹¥ä¸åŠ @Qualifierè¿™ä¸ªæ³¨è§£ï¼Œåœ¨è¿è¡Œæ—¶ä¼šå‡ºç°â€œ No qualifying bean of type [com.tutorialspoint.Student] is defined: expected single matching bean but found 2: student1,student2â€è¿™ä¸ªå¼‚å¸¸ã€‚</p>
<h1 id="132ã€Springå¸¸ç”¨æ³¨è§£"><a href="#132ã€Springå¸¸ç”¨æ³¨è§£" class="headerlink" title="132ã€Springå¸¸ç”¨æ³¨è§£"></a>132ã€Springå¸¸ç”¨æ³¨è§£</h1><p>Springå¸¸ç”¨æ³¨è§£ï¼ˆç»å¯¹ç»å…¸ï¼‰</p>
<h1 id="133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨"><a href="#133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨" class="headerlink" title="133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨"></a>133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨</h1><p>é€šè¿‡äº†è§£ï¼Œç°åœ¨æœ€æ™®éçš„æƒé™ç®¡ç†æ¨¡å‹å°±æ˜¯RBACï¼ˆRole-Based Access Controlï¼‰ã€‚</p>
<p>1ã€æƒé™æ§åˆ¶åˆ†ç±»</p>
<p>èœå•åŠŸèƒ½<br>urlæ§åˆ¶ï¼ˆæ§åˆ¶è®¿é—®ä¸åŒçš„æ§åˆ¶å™¨ï¼‰<br>2ã€RBACçš„ä¼˜ç¼ºç‚¹</p>
<p>ï¼ˆ1ï¼‰ä¼˜ç‚¹</p>
<p>ç®€åŒ–äº†ç”¨æˆ·å’Œæƒé™çš„å…³ç³»<br>æ˜“æ‰©å±•ã€æ˜“ç»´æŠ¤</p>
<p>ï¼ˆ2ï¼‰ç¼ºç‚¹</p>
<p>RBACæ¨¡å‹æ²¡æœ‰æä¾›æ“ä½œé¡ºåºçš„æ§åˆ¶æœºåˆ¶ï¼Œè¿™ä¸€ç¼ºé™·ä½¿å¾—RBACæ¨¡å‹å¾ˆéš¾é€‚åº”å“ªäº›å¯¹æ“ä½œæ¬¡åºæœ‰ä¸¥æ ¼è¦æ±‚çš„ç³»ç»Ÿã€‚</p>
<p>3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™</p>
<p>ï¼ˆ1ï¼‰æœ€å°æƒé™åŸåˆ™</p>
<p>RBACå¯ä»¥å°†è§’è‰²é…ç½®æˆå…¶å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°æƒé™é›†åˆã€‚</p>
<p>ï¼ˆ2ï¼‰è´£ä»»åˆ†ç¦»åŸåˆ™</p>
<p>å¯ä»¥é€šè¿‡è°ƒç”¨ç›¸äº’ç‹¬ç«‹äº’æ–¥çš„è§’è‰²æ¥å…±åŒå®Œæˆæ•æ„Ÿçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¦æ±‚ä¸€ä¸ªè®°è´¦å‘˜å’Œè´¢åŠ¡ç®¡ç†å‘˜å…±åŒå‚ä¸ç»Ÿä¸€è¿‡è´¦æ“ä½œã€‚</p>
<p>ï¼ˆ3ï¼‰æ•°æ®æŠ½è±¡åŸåˆ™</p>
<p>å¯ä»¥é€šè¿‡æƒé™çš„æŠ½è±¡æ¥ä½“ç°ï¼Œä¾‹å¦‚è´¢åŠ¡æ“ä½œç”¨å€Ÿæ¬¾ã€å­˜æ¬¾ç­‰æŠ½è±¡æƒé™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¸å‹çš„è¯»å†™æƒé™ã€‚</p>
<p>4ã€è¿œå¤æ—¶ä»£çš„æƒé™æ§åˆ¶</p>
<p>å½“æ—¶è¿˜æ²¡æœ‰RBACï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯ä¸€å †ç¨‹åºå‘˜åœ¨é‚£é¼“æ£ï¼Œè§‰å¾—ç™»å½•è¿™å—è¯¥åšç‚¹ä»€ä¹ˆã€‚</p>
<p>1ã€æ–°å»ºä¸€ä¸ªç”¨æˆ·ï¼Œå¯¹è¿™ä¸ªç”¨æˆ·è¿›è¡Œèµ‹äºˆæƒé™ã€‚</p>
<p>2ã€ä½†æ˜¯ä¸€æ—¦ç”¨æˆ·å¤šäº†ï¼Œæƒé™å¤æ‚äº†ï¼Œè¿™å·¥ä½œé‡ä¹Ÿæ˜¯è›®å¤§çš„ã€‚</p>
<p>5ã€RBAC</p>
<p>RBAC 1.0</p>
<p>ç›´æ¥ä¸Šå›¾ï¼Œä¸€ç›®äº†ç„¶ï¼Œå½“ç¨‹åºä¸æ˜¯å¾ˆå¤æ‚çš„æ—¶å€™ï¼ŒRBACå°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œæˆ‘ä»¬å…¬å¸çš„æƒé™éªŒè¯æ¨¡å—å°±æ˜¯è¿™æ ·è®¾è®¡çš„ã€‚</p>
<p>ç®€ç®€å•å•ï¼Œäº”å¼ è¡¨ï¼Œè§£</p>
<p>RBAC 2.0</p>
<p>åŸºäºRBAC 1.0æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†è§’è‰²çš„è®¿é—®æ§åˆ¶</p>
<p>RBAC2ä¸­çš„ä¸€ä¸ªåŸºæœ¬é™åˆ¶æ˜¯äº’æ–¥è§’è‰²çš„é™åˆ¶ï¼Œäº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™å¯ä»¥äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚</p>
<p>è¯¥æ¨¡å‹æœ‰ä»¥ä¸‹å‡ ç§çº¦æŸ</p>
<p>äº’æ–¥è§’è‰² ï¼šåŒä¸€ç”¨æˆ·åªèƒ½åˆ†é…åˆ°ä¸€ç»„äº’æ–¥è§’è‰²é›†åˆä¸­è‡³å¤šä¸€ä¸ªè§’è‰²ï¼Œæ”¯æŒè´£ä»»åˆ†ç¦»çš„åŸåˆ™ã€‚äº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚å¸¸ä¸¾çš„ä¾‹å­ï¼šåœ¨å®¡è®¡æ´»åŠ¨ä¸­ï¼Œä¸€ä¸ªè§’è‰²ä¸èƒ½åŒæ—¶è¢«æŒ‡æ´¾ç»™ä¼šè®¡è§’è‰²å’Œå®¡è®¡å‘˜è§’è‰²ã€‚<br>åŸºæ•°çº¦æŸ ï¼šä¸€ä¸ªè§’è‰²è¢«åˆ†é…çš„ç”¨æˆ·æ•°é‡å—é™ï¼›ä¸€ä¸ªç”¨æˆ·å¯æ‹¥æœ‰çš„è§’è‰²æ•°ç›®å—é™ï¼›åŒæ ·ä¸€ä¸ªè§’è‰²å¯¹åº”çš„è®¿é—®æƒé™æ•°ç›®ä¹Ÿåº”å—é™ï¼Œä»¥æ§åˆ¶é«˜çº§æƒé™åœ¨ç³»ç»Ÿä¸­çš„åˆ†é…ã€‚<br>å…ˆå†³æ¡ä»¶è§’è‰² ï¼šå¯ä»¥åˆ†é…è§’è‰²ç»™ç”¨æˆ·ä»…å½“è¯¥ç”¨æˆ·å·²ç»æ˜¯å¦ä¸€è§’è‰²çš„æˆå‘˜ï¼›å¯¹åº”çš„å¯ä»¥åˆ†é…è®¿é—®æƒé™ç»™è§’è‰²ï¼Œä»…å½“è¯¥è§’è‰²å·²ç»æ‹¥æœ‰å¦ä¸€ç§è®¿é—®æƒé™ã€‚æŒ‡è¦æƒ³è·å¾—è¾ƒé«˜çš„æƒé™ï¼Œè¦é¦–å…ˆæ‹¥æœ‰ä½ä¸€çº§çš„æƒé™ã€‚<br>è¿è¡Œæ—¶äº’æ–¥ ï¼šä¾‹å¦‚ï¼Œå…è®¸ä¸€ä¸ªç”¨æˆ·å…·æœ‰ä¸¤ä¸ªè§’è‰²çš„æˆå‘˜èµ„æ ¼ï¼Œä½†åœ¨è¿è¡Œä¸­ä¸å¯åŒæ—¶æ¿€æ´»è¿™ä¸¤ä¸ªè§’è‰²ã€‚<br>6ã€rbacçš„å®ç°ç†è®ºåˆ†æ</p>
<p>è¿›å…¥ç™»å½•é¡µé¢ï¼›<br>æ‹¿åˆ°é€šè¿‡postä¼ è¿‡æ¥çš„ç”¨æˆ·åå’Œå¯†ç ï¼›<br>ä½¿ç”¨ormè¿›è¡Œè¿‡æ»¤æŸ¥æ‰¾ï¼›<br>å¦‚æœèƒ½æ‰¾åˆ°å€¼ï¼Œåˆ™è¯´æ˜ç™»å½•æˆåŠŸï¼šç™»å½•æˆåŠŸåè°ƒç”¨rbacåˆå§‹åŒ–å‡½æ•°ï¼Œåˆå§‹åŒ–å‡½æ•°çš„ä¸»è¦åŠŸèƒ½æ˜¯è·å–ç”¨æˆ·çš„æƒé™å’Œèœå•ä¿å­˜åˆ°sessionä¸­ï¼Œå¹¶è·³è½¬å®¢æˆ·åˆ—è¡¨é¡µé¢ï¼›å¦‚æœå¤±è´¥ï¼Œé¡µé¢è¿›è¡Œå‹å¥½æç¤ºï¼›</p>
<p>7ã€urlæƒé™æ§åˆ¶å…³é”®ä»£ç </p>
<h1 id="134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜"><a href="#134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜" class="headerlink" title="134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜"></a>134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜</h1><p>1ã€Spring MVCå¦‚ä½•åŒ¹é…è¯·æ±‚è·¯å¾„</p>
<p>@RequestMappingæ˜¯ç”¨æ¥æ˜ å°„è¯·æ±‚çš„ï¼Œæ¯”å¦‚getè¯·æ±‚ã€postè¯·æ±‚ã€æˆ–è€…RESTé£æ ¼ä¸éRESTé£æ ¼çš„ã€‚è¯¥æ³¨è§£å¯ä»¥ç”¨åœ¨ç±»ä¸Šæˆ–æ–¹æ³•ä¸Šï¼Œå¦‚æœç”¨åœ¨ç±»ä¸Šï¼Œè¡¨ç¤ºæ˜¯è¯¥ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„çˆ¶è·¯å¾„ã€‚</p>
<p>@RequestMapping(â€œ&#x2F;springmvcâ€)<br>@Controller<br>public class SpringMVCTest {<br>    @RequestMapping(â€œ&#x2F;testRequestMappingâ€)<br>    public String testRequestMapping(){<br>        System.out.println(â€œtestRequestMappingâ€);<br>        return SUCCESS;<br>    }<br>}<br>åœ¨ç±»ä¸Šè¿˜æ·»åŠ äº†ä¸€ä¸ª@Controlleræ³¨è§£ï¼Œè¯¥æ³¨è§£åœ¨SpringMVCä¸­è´Ÿè´£å¤„ç†ç”±DispatcherServletåˆ†å‘çš„è¯·æ±‚ï¼Œå®ƒæŠŠç”¨æˆ·è¯·æ±‚çš„æ•°æ®ç»è¿‡ä¸šåŠ¡å¤„ç†å±‚å¤„ç†ä¹‹åå°è£…æˆä¸€ä¸ªmodelï¼Œç„¶åå†æŠŠè¯¥modelè¿”å›ç»™å¯¹åº”çš„viewè¿›è¡Œå±•ç¤ºã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œspringmvc&#x2F;testRequestMappingâ€è¿™ä¸ªè·¯å¾„æ¥å®šä½åˆ°testRequestMappingè¿™ä¸ªæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œæ–¹æ³•å†…çš„æ–¹æ³•ä½“ã€‚</p>
<p>RequestMappingå¯ä»¥å®ç°æ¨¡ç³ŠåŒ¹é…è·¯å¾„ï¼Œæ¯”å¦‚ï¼š</p>
<p>ï¼Ÿè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼›<br>*è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼›<br><strong>åŒ¹é…å¤šå±‚è·¯å¾„ï¼›<br>&#x2F;springmvc&#x2F;</strong>&#x2F;testRequestMapping å°±å¯ä»¥åŒ¹é…&#x2F;springmvc&#x2F;stu&#x2F;getStudentInfo&#x2F;testRequestMapping è¿™æ ·çš„è·¯å¾„äº†ã€‚</p>
<p>2ã€SpringMVCå¦‚ä½•è·å–è¯·æ±‚çš„å‚æ•°</p>
<p>ï¼ˆ1ï¼‰@PathVariable</p>
<p>è¯¥æ³¨è§£ç”¨æ¥æ˜ å°„è¯·æ±‚URLä¸­ç»‘å®šçš„å ä½ç¬¦ã€‚é€šè¿‡@PathVariableå¯ä»¥å°†URLä¸­å ä½ç¬¦çš„å‚æ•°ç»‘å®šåˆ°controllerå¤„ç†æ–¹æ³•çš„å…¥å‚ä¸­ã€‚</p>
<p>@RequestMapping(â€œ&#x2F;testPathVariable&#x2F;{id}â€)<br>public String testPathVariable(@PathVariable(value&#x3D;â€idâ€) Integer id){<br>    System.out.println(â€œtestPathVariable:â€ + id);<br>    return SUCCESS;<br>}<br>åœ¨index.jspä¸­æˆ‘ä»¬æ·»åŠ ä¸€æ¡è¿æ¥ï¼Œç”¨æ¥è§¦å‘ä¸€ä¸ªè¯·æ±‚ï¼š</p>
<p><a href="springmvc/testPathVariable/1">testPathVariable</a><br>ï¼ˆ2ï¼‰ @RequestParam</p>
<p>è¯¥æ³¨è§£ä¹Ÿæ˜¯ç”¨æ¥è·å–è¯·æ±‚å‚æ•°çš„ï¼Œé‚£ä¹ˆè¯¥æ³¨è§£å’Œ@PathVariableæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p>
<p>@RequestMapping(value&#x3D;â€&#x2F;testRequestParamâ€)<br>public String testRequestParam(@RequestParam(value&#x3D;â€usernameâ€) String username, @RequestParam(value&#x3D;â€ageâ€, required&#x3D;false, defaultValue&#x3D;â€0â€) int age){<br>    System.out.println(â€œtestRequestParamâ€ + â€œ username:â€ + username + â€œ age:â€ +age);<br>    return SUCCESS;<br>}<br>åœ¨index.jspæ·»åŠ è¶…é“¾æ¥æ ‡ç­¾</p>
<p><a href="springmvc/testRequestParam?username=jackie&age=12">testRequestParam</a><br>3ã€RESTé£æ ¼çš„è¯·æ±‚</p>
<p>åœ¨SpringMVCä¸­ä¸šåŠ¡æœ€å¤šçš„åº”è¯¥æ˜¯CRUDäº†</p>
<p>@RequestMapping(value&#x3D;â€&#x2F;testRest&#x2F;{id}â€, method&#x3D;RequestMethod.PUT)<br>public String testRestPut(@PathVariable(value&#x3D;â€idâ€) Integer id){<br>    System.out.println(â€œtest put:â€ + id);<br>    return SUCCESS;<br>}</p>
<p>@RequestMapping(value&#x3D;â€&#x2F;testRest&#x2F;{id}â€, method&#x3D;RequestMethod.DELETE)<br>public String testRestDelete(@PathVariable(value&#x3D;â€idâ€) Integer id){<br>    System.out.println(â€œtest delete:â€ + id);<br>    return SUCCESS;<br>}</p>
<p>@RequestMapping(value&#x3D;â€&#x2F;testRestâ€, method&#x3D;RequestMethod.POST)<br>public String testRest(){<br>    System.out.println(â€œtest postâ€);<br>    return SUCCESS;<br>}</p>
<p>@RequestMapping(value&#x3D;â€&#x2F;testRest&#x2F;{id}â€, method&#x3D;RequestMethod.GET)<br>public String testRest(@PathVariable(value&#x3D;â€idâ€) Integer id){<br>    System.out.println(â€œtest get:â€ + id);<br>    return SUCCESS;<br>}</p>
<h1 id="135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤"><a href="#135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤" class="headerlink" title="135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤"></a>135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤</h1><p>1ã€é€šè¿‡JavaScriptå±è”½æäº¤æŒ‰é’®ï¼ˆä¸æ¨èï¼‰</p>
<p>2ã€ç»™æ•°æ®åº“å¢åŠ å”¯ä¸€é”®çº¦æŸï¼ˆç®€å•ç²—æš´ï¼‰</p>
<p>3ã€åˆ©ç”¨Sessioné˜²æ­¢è¡¨å•é‡å¤æäº¤ï¼ˆæ¨èï¼‰</p>
<p>4ã€ä½¿ç”¨AOPè‡ªå®šä¹‰åˆ‡å…¥å®ç°</p>
<h1 id="136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"></a>136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼</h1><p>1ã€ç®€å•å·¥å‚æ¨¡å¼</p>
<p>ç®€å•å·¥å‚æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼ŒåŠ¨æ€çš„å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚</p>
<p>Springä¸­çš„BeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œæ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥è·å¾—beanå¯¹è±¡ã€‚</p>
<p>2ã€å·¥å‚æ–¹æ³•æ¨¡å¼</p>
<p>åº”ç”¨ç¨‹åºå°†å¯¹è±¡çš„åˆ›å»ºåŠåˆå§‹åŒ–èŒè´£äº¤ç»™å·¥å‚å¯¹è±¡ï¼Œå·¥å‚Beanã€‚</p>
<p>å®šä¹‰å·¥å‚æ–¹æ³•ï¼Œç„¶åé€šè¿‡config.xmlé…ç½®æ–‡ä»¶ï¼Œå°†å…¶çº³å…¥Springå®¹å™¨æ¥ç®¡ç†ï¼Œéœ€è¦é€šè¿‡factory-methodæŒ‡å®šé™æ€æ–¹æ³•åç§°ã€‚</p>
<p>3ã€å•ä¾‹æ¨¡å¼</p>
<p>Springç”¨çš„æ˜¯åŒé‡åˆ¤æ–­åŠ é”çš„å•ä¾‹æ¨¡å¼ï¼Œé€šè¿‡getSingletonæ–¹æ³•ä»singletonObjectsä¸­è·å–beanã€‚</p>
<pre><code> /**
 * Return the (raw) singleton object registered under the given name.
 * &lt;p&gt;Checks already instantiated singletons and also allows for an early
 * reference to a currently created singleton (resolving a circular reference).
 * @param beanName the name of the bean to look for
 * @param allowEarlyReference whether early references should be created or not
 * @return the registered singleton object, or &#123;@code null&#125; if none found
 */
protected Object getSingleton(String beanName, boolean allowEarlyReference) &#123;
    Object singletonObject = this.singletonObjects.get(beanName);
    if (singletonObject == null &amp;&amp; isSingletonCurrentlyInCreation(beanName)) &#123;
        synchronized (this.singletonObjects) &#123;
            singletonObject = this.earlySingletonObjects.get(beanName);
            if (singletonObject == null &amp;&amp; allowEarlyReference) &#123;
                ObjectFactory&lt;?&gt; singletonFactory = this.singletonFactories.get(beanName);
                if (singletonFactory != null) &#123;
                    singletonObject = singletonFactory.getObject();
                    this.earlySingletonObjects.put(beanName, singletonObject);
                    this.singletonFactories.remove(beanName);
                &#125;
            &#125;
        &#125;
    &#125;
    return (singletonObject != NULL_OBJECT ? singletonObject : null);
&#125;
</code></pre>
<p>4ã€ä»£ç†æ¨¡å¼</p>
<p>Springçš„AOPä¸­ï¼Œä½¿ç”¨çš„Adviceï¼ˆé€šçŸ¥ï¼‰æ¥å¢å¼ºè¢«ä»£ç†ç±»çš„åŠŸèƒ½ã€‚Springå®ç°AOPåŠŸèƒ½çš„åŸç†å°±æ˜¯ä»£ç†æ¨¡å¼ï¼ˆâ‘  JDKåŠ¨æ€ä»£ç†ï¼Œâ‘¡ CGLIBå­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ä»£ç†ã€‚ï¼‰å¯¹ç±»è¿›è¡Œæ–¹æ³•çº§åˆ«çš„åˆ‡é¢å¢å¼ºã€‚</p>
<p>5ã€è£…é¥°å™¨æ¨¡å¼</p>
<p>è£…é¥°å™¨æ¨¡å¼ï¼šåŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<p>Springçš„ApplicationContextä¸­é…ç½®æ‰€æœ‰çš„DataSourceã€‚è¿™äº›DataSourceå¯èƒ½æ˜¯ä¸åŒçš„æ•°æ®åº“ï¼Œç„¶åSessionFactoryæ ¹æ®ç”¨æˆ·çš„æ¯æ¬¡è¯·æ±‚ï¼Œå°†DataSourceè®¾ç½®æˆä¸åŒçš„æ•°æ®æºï¼Œä»¥è¾¾åˆ°åˆ‡æ¢æ•°æ®æºçš„ç›®çš„ã€‚</p>
<p>åœ¨Springä¸­æœ‰ä¸¤ç§è¡¨ç°ï¼š</p>
<p>ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Wrapperï¼Œå¦ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Decoratorã€‚</p>
<p>6ã€è§‚å¯Ÿè€…æ¨¡å¼</p>
<p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>Springä¸­è§‚å¯Ÿè€…æ¨¡å¼ä¸€èˆ¬ç”¨åœ¨listenerçš„å®ç°ã€‚</p>
<p>7ã€ç­–ç•¥æ¨¡å¼</p>
<p>ç­–ç•¥æ¨¡å¼æ˜¯è¡Œä¸ºæ€§æ¨¡å¼ï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼Œé€‚åº”è¡Œä¸ºçš„å˜åŒ– ï¼Œå¼ºè°ƒçˆ¶ç±»çš„è°ƒç”¨å­ç±»çš„ç‰¹æ€§ ã€‚</p>
<p>getHandleræ˜¯HandlerMappingæ¥å£ä¸­çš„å”¯ä¸€æ–¹æ³•ï¼Œç”¨äºæ ¹æ®è¯·æ±‚æ‰¾åˆ°åŒ¹é…çš„å¤„ç†å™¨ã€‚</p>
<p>8ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼</p>
<p>Spring JdbcTemplateçš„queryæ–¹æ³•æ€»ä½“ç»“æ„æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•+å›è°ƒå‡½æ•°ï¼Œqueryæ–¹æ³•ä¸­è°ƒç”¨çš„execute()æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œè€Œé¢„æœŸçš„å›è°ƒdoInStatement(Statement state)æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚</p>
<h1 id="137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collectionï¼Ÿ"><a href="#137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collectionï¼Ÿ" class="headerlink" title="137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collectionï¼Ÿ"></a>137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collectionï¼Ÿ</h1><p>Springæ³¨å…¥æœ‰å››ç§æ–¹å¼ï¼Œ</p>
<p>setæ³¨å…¥ï¼›<br>æ„é€ å™¨æ³¨å…¥ï¼›<br>åŸºäºæ³¨è§£çš„æ³¨å…¥ï¼›<br>xmlé…ç½®æ–‡ä»¶æ³¨å…¥ï¼›<br>æƒ³è¦æ³¨å…¥java collectionï¼Œå°±æ˜¯æ³¨å…¥é›†åˆç±»ï¼š</p>
<p>list<br>set<br>map<br>propsï¼šè¯¥æ ‡ç­¾æ”¯æŒæ³¨å…¥é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼å¯¹ã€‚<br>listå’Œsetéƒ½ä½¿ç”¨valueæ ‡ç­¾ï¼›mapä½¿ç”¨entryæ ‡ç­¾ï¼›propsä½¿ç”¨propæ ‡ç­¾ï¼›</p>
<h1 id="138ã€mybatis-ä¸­-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#138ã€mybatis-ä¸­-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="138ã€mybatis ä¸­ #{}å’Œ ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>138ã€mybatis ä¸­ #{}å’Œ ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>#{}å¸¦å¼•å·ï¼Œ${}ä¸å¸¦å¼•å·ï¼›<br>#{}å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼›<br>${}å¸¸ç”¨äºæ•°æ®åº“è¡¨åã€order byå­å¥ï¼›<br>ä¸€èˆ¬èƒ½ç”¨#{}å°±ä¸è¦ä½¿ç”¨${}ï¼›</p>
<h1 id="139ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#139ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="139ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>139ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>1ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</p>
<p>å»¶è¿ŸåŠ è½½å…¶å®å°±æ˜¯è®²æ•°æ®åŠ è½½æ—¶æœºæ¨è¿Ÿï¼Œæ¯”å¦‚æ¨è¿ŸåµŒå¥—æŸ¥è¯¢çš„æ—¶æœºã€‚</p>
<p>å»¶è¿ŸåŠ è½½å¯ä»¥å®ç°å…ˆæŸ¥è¯¢ä¸»è¡¨ï¼ŒæŒ‰éœ€å®æ—¶åšå…³è”æŸ¥è¯¢ï¼Œè¿”å›å…³è”è¡¨ç»“æœé›†ï¼Œä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ•ˆç‡ã€‚</p>
<p>mybatisä»…æ”¯æŒå…³è”å¯¹è±¡associationå’Œå…³è”é›†åˆå¯¹è±¡collectionçš„å»¶è¿ŸåŠ è½½ï¼Œassociationæ˜¯ä¸€å¯¹ä¸€ï¼Œcollectionæ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ï¼Œåœ¨mybatisé…ç½®æ–‡ä»¶ä¸­å¯ä»¥é…ç½®lazyloadingEnable&#x3D;true&#x2F;falseã€‚</p>
<p>2ã€å»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ä½¿ç”¨CGLIBä¸ºç›®æ ‡å¯¹è±¡å»ºç«‹ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶è¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨æ–¹æ³•invoke()å‘ç°a.getB()ä¸ºnullï¼Œä¼šå•ç‹¬å‘é€äº‹å…ˆå‡†å¤‡å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„sqlè¯­å¥ï¼ŒæŠŠBæŸ¥è¯¢å‡ºæ¥ç„¶åè°ƒç”¨a.setB(b)ï¼Œä¹Ÿæ˜¯açš„å¯¹è±¡çš„å±æ€§bå°±æœ‰å€¼äº†ï¼Œç„¶åè°ƒç”¨getName()ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸç†ã€‚</p>
<h1 id="140ã€è¯´ä¸€ä¸‹-mybatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ"><a href="#140ã€è¯´ä¸€ä¸‹-mybatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ" class="headerlink" title="140ã€è¯´ä¸€ä¸‹ mybatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ"></a>140ã€è¯´ä¸€ä¸‹ mybatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ</h1><p>ä¸€çº§ç¼“å­˜æ˜¯sessionçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ï¼Œå½“æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“æ—¶ï¼Œå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå¦‚æœä¹‹åçš„æŸ¥è¯¢åœ¨ä¸€çº§ç¼“å­˜ä¸­å­˜åœ¨ï¼Œåˆ™æ— éœ€å†è®¿é—®æ•°æ®åº“ï¼›</p>
<p>äºŒçº§ç¼“å­˜æ˜¯sessionFactoryçº§åˆ«çš„ç¼“å­˜ï¼Œéœ€è¦é…ç½®æ‰ä¼šå¼€å¯ã€‚å½“è¿›è¡Œsqlè¯­å¥æŸ¥è¯¢æ—¶ï¼Œå…ˆæŸ¥çœ‹ä¸€çº§ç¼“å­˜ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè®¿é—®äºŒçº§ç¼“å­˜ï¼Œé™ä½æ•°æ®åº“è®¿é—®å‹åŠ›ã€‚</p>
<h1 id="141ã€mybatis-æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ"><a href="#141ã€mybatis-æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ" class="headerlink" title="141ã€mybatis æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ"></a>141ã€mybatis æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ</h1><p>1ã€mybatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼š</p>
<p>ï¼ˆ1ï¼‰ã€SimpleExecutor</p>
<p>æ¯æ‰§è¡Œä¸€æ¬¡updateæˆ–selectï¼Œå°±å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ã€PauseExecutor</p>
<p>æ‰§è¡Œupdateæˆ–selectï¼Œä»¥sqlåšä¸ºkeyæŸ¥æ‰¾Statementå¯¹è±¡ï¼Œå­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼Œç”¨å®Œåï¼Œä¸å…³é—­Statementå¯¹è±¡ï¼Œè€Œä¸”æ”¾ç½®äºMapå†…ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é‡å¤ä½¿ç”¨Statementå¯¹è±¡ã€‚</p>
<p>ï¼ˆ3ï¼‰ã€BatchExecutor</p>
<p>æ‰§è¡Œupdateï¼Œå°†æ‰€æœ‰sqlé€šè¿‡addBatch()éƒ½æ·»åŠ åˆ°æ‰¹å¤„ç†ä¸­ï¼Œç­‰å¾…ç»Ÿä¸€æ‰§è¡ŒexecuteBatch()ï¼Œå®ƒç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œæ¯ä¸ªStatementå¯¹è±¡éƒ½æ˜¯addBatch()å®Œæ¯•åï¼Œç­‰å¾…é€ä¸€æ‰§è¡ŒexecuteBatch()æ‰¹å¤„ç†ã€‚ä¸JDBCæ‰¹å¤„ç†ç›¸åŒã€‚</p>
<p>2ã€ä½œç”¨èŒƒå›´ï¼š</p>
<p>Executorçš„è¿™äº›ç‰¹ç‚¹ï¼Œéƒ½ä¸¥æ ¼é™åˆ¶åœ¨SqlSessionç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚</p>
<p>3ã€Mybatisä¸­å¦‚ä½•æŒ‡å®šä½¿ç”¨å“ªä¸€ç§Executoræ‰§è¡Œå™¨ï¼Ÿ</p>
<p>åœ¨mybatisçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒ‡å®šé»˜è®¤çš„ExecutorTypeæ‰§è¡Œå™¨ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™DefaultSqlSessionFactoryçš„åˆ›å»ºSqlSessionçš„æ–¹æ³•ä¼ é€’ExecutorTypeç±»å‹å‚æ•°ã€‚</p>
<h1 id="142ã€mybatis-å’Œ-hibernate-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"><a href="#142ã€mybatis-å’Œ-hibernate-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="142ã€mybatis å’Œ hibernate çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"></a>142ã€mybatis å’Œ hibernate çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h1><p>1ã€ä¸¤è€…æœ€å¤§çš„åŒºåˆ«</p>
<p>é’ˆå¯¹ç®€å•é€»è¾‘ï¼Œéƒ½æœ‰å¯¹åº”çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆç®€å•åŸºæœ¬çš„daoå±‚æ–¹æ³•ï¼›</p>
<p>é’ˆå¯¹é«˜çº§æŸ¥è¯¢ï¼Œmybatisè¦æ‰‹åŠ¨ç¼–å†™sqlè¯­å¥å’ŒresultMapï¼Œè€Œhibernateæœ‰è‰¯å¥½çš„æ˜ å°„æœºåˆ¶ï¼›</p>
<p>2ã€å¼€å‘éš¾åº¦å¯¹æ¯”</p>
<p>hibernate &gt; mybatis </p>
<p>3ã€æ—¥å¿—ç»Ÿè®¡</p>
<p>hibernateæœ‰è‡ªå·±çš„æ—¥å¿—ç»Ÿè®¡åŠŸèƒ½ï¼Œè€Œmybatiséœ€è¦å€ŸåŠ©log4jæ¥è®°å½•æ—¥å¿—ã€‚</p>
<p>4ã€æ•°æ®åº“æ‰©å±•æ¯”è¾ƒ</p>
<p>hibernate &gt; mybatis </p>
<p>5ã€ç¼“å­˜æœºåˆ¶æ¯”è¾ƒ</p>
<p>å› ä¸ºhibernateå¯¹æŸ¥è¯¢å¯¹è±¡æœ‰è‰¯å¥½çš„ç®¡ç†æœºåˆ¶ï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒsqlï¼Œæ‰€ä»¥ä½¿ç”¨äºŒçº§ç¼“å­˜å¦‚æœå‡ºç°è„æ•°æ®ï¼Œç³»ç»Ÿä¼šæŠ¥é”™ã€‚</p>
<p>è€Œmybatisï¼Œå¦‚æœä¸èƒ½è·å–æœ€æ–°æ•°æ®ï¼Œåº”è¯¥é¿å…ç¼“å­˜çš„ä½¿ç”¨ï¼Œè„æ•°æ®çš„å‡ºç°ä¼šç»™ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå¸¦æ¥å¾ˆå¤§çš„éšæ‚£ã€‚</p>
<p>6ã€å¦‚ä½•é€‰æ‹©</p>
<p>mybatiséœ€è¦ç¼–å†™sqlå’Œæ˜ å°„è§„åˆ™ï¼Œå·¥ä½œé‡å¤§äºhibernateï¼›<br>mybatisæ”¯æŒçš„å·¥å…·ä¹Ÿæœ‰é™ï¼Œä¸èƒ½åƒhibernateé‚£æ ·æœ‰è®¸å¤šæ’ä»¶å¯ä»¥å¸®åŠ©ç”Ÿæˆæ˜ å°„ä»£ç å’Œå…³è”å…³ç³»ï¼›<br>å¯¹äºæ€§èƒ½è¦æ±‚ä¸å¤ªè‹›åˆ»çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ç®¡ç†ç³»ç»Ÿã€ERPç­‰æ¨èhibernateï¼›<br>å¯¹äºæ€§èƒ½è¦æ±‚é«˜ã€å“åº”å¿«ã€çµæ´»çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ç”µå•†ç³»ç»Ÿï¼Œæ¨èä½¿ç”¨mybatisï¼›</p>
<h1 id="143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§"><a href="#143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§" class="headerlink" title="143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§"></a>143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§</h1><p>myBatisæŸ¥è¯¢å¤šä¸ªidï¼ˆæˆ‘å±…ç„¶å›ç­”ç”¨å¯¹è±¡æ¥ä¼ é€’â€¦ï¼‰</p>
<p>Page<UserPoJo>  getUserListByIds(@Param(â€œidsâ€) List<Integer> ids);</p>
<!--æ ¹æ®idåˆ—è¡¨æ‰¹é‡æŸ¥è¯¢user-->
<select id="getUserListByIds" resultType="com.guor.UserPoJo">
    select * from student
    where id in
    <foreach collection="ids" item="userid" open="(" close=")" separator=",">
        #{userid}
    </foreach>
</select>
# 144ã€mybatisä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜
1ã€ä¸€çº§ç¼“å­˜ï¼šæŒ‡çš„æ˜¯mybatisä¸­sqlSessionå¯¹è±¡çš„ç¼“å­˜ï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä»¥åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥sqlSessionä¸­ï¼Œå†æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆå»sqlSessionä¸­æŸ¥è¯¢ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºï¼Œå½“sqlSessionæ¶ˆå¤±æ—¶ï¼Œmybatisçš„ä¸€çº§ç¼“å­˜ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œå½“è°ƒç”¨sqlSessionçš„ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤ã€commit()ã€close()ç­‰æ–¹æ³•æ—¶ï¼Œä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚

<p>2ã€äºŒçº§ç¼“å­˜ï¼šæŒ‡çš„æ˜¯mybatisä¸­çš„sqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜ï¼Œç”±åŒä¸€ä¸ªsqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„sqlSessionå…±äº«å…¶ç¼“å­˜ï¼Œä½†æ˜¯å…¶ä¸­ç¼“å­˜çš„æ˜¯æ•°æ®è€Œä¸æ˜¯å¯¹è±¡ã€‚å½“å‘½ä¸­äºŒçº§ç¼“å­˜æ—¶ï¼Œé€šè¿‡å­˜å‚¨çš„æ•°æ®æ„é€ æˆå¯¹è±¡è¿”å›ã€‚æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢çš„æµç¨‹æ˜¯äºŒçº§ç¼“å­˜ &gt; ä¸€çº§ç¼“å­˜ &gt; æ•°æ®åº“ã€‚</p>
<p>3ã€å¦‚æœå¼€å¯äº†äºŒçº§ç¼“å­˜ï¼ŒsqlSessionè¿›è¡Œclose()åï¼Œæ‰ä¼šæŠŠsqlSessionä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ·»åŠ åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œä¸ºäº†å°†ç¼“å­˜æ•°æ®å–å‡ºæ‰§è¡Œååºåˆ—åŒ–ï¼Œè¿˜éœ€è¦å°†è¦ç¼“å­˜çš„pojoå®ç°Serializableæ¥å£ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜æ•°æ®å­˜å‚¨ä»‹è´¨å¤šç§å¤šæ ·ï¼Œä¸ä¸€å®šåªå­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨ç¡¬ç›˜ä¸­ã€‚</p>
<p>4ã€mybatisæ¡†æ¶ä¸»è¦æ˜¯å›´ç»•sqlSessionFactoryè¿›è¡Œçš„ï¼Œå…·ä½“çš„æ­¥éª¤ï¼š</p>
<p>å®šä¹‰ä¸€ä¸ªconfigurationå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ•°æ®æºã€äº‹åŠ¡ã€mapperæ–‡ä»¶èµ„æºä»¥åŠå½±å“æ•°æ®åº“è¡Œä¸ºå±æ€§è®¾ç½®settingsã€‚<br>é€šè¿‡é…ç½®å¯¹è±¡ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªsqlSessionFactoryBuilderå¯¹è±¡ã€‚<br>é€šè¿‡sqlSessionFactoryBuilderè·å¾—sqlSessionFactoryå®ä¾‹ã€‚<br>é€šè¿‡sqlSessionFactoryå®ä¾‹åˆ›å»ºqlSessionå®ä¾‹ï¼Œé€šè¿‡sqlSessionå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚<br>5ã€ä»£ç å®ä¾‹</p>
<p>mybatis-config.xml</p>
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-config.dtd"><configuration>   
    <!-- åŠ è½½ç±»è·¯å¾„ä¸‹çš„å±æ€§æ–‡ä»¶ -->  
    <properties resource="db.properties"/>  

<pre><code>&lt;!-- è®¾ç½®ç±»å‹åˆ«å --&gt;  
&lt;typeAliases&gt;  
    &lt;typeAlias type=&quot;cn.itcast.javaee.mybatis.app04.Student&quot; alias=&quot;student&quot;/&gt;  
&lt;/typeAliases&gt;  
 
&lt;!-- è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„è¿æ¥ç¯å¢ƒä¿¡æ¯ --&gt;  
&lt;environments default=&quot;mysql_developer&quot;&gt;  
 
    &lt;!-- è¿æ¥ç¯å¢ƒä¿¡æ¯ï¼Œå–ä¸€ä¸ªä»»æ„å”¯ä¸€çš„åå­— --&gt;  
    &lt;environment id=&quot;mysql_developer&quot;&gt;  
        &lt;!-- mybatisä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†æ–¹å¼ --&gt;  
        &lt;transactionManager type=&quot;jdbc&quot;/&gt;  
        &lt;!-- mybatisä½¿ç”¨è¿æ¥æ± æ–¹å¼æ¥è·å–è¿æ¥ --&gt;  
        &lt;dataSource type=&quot;pooled&quot;&gt;  
            &lt;!-- é…ç½®ä¸æ•°æ®åº“äº¤äº’çš„4ä¸ªå¿…è¦å±æ€§ --&gt;  
            &lt;property name=&quot;driver&quot; value=&quot;$&#123;mysql.driver&#125;&quot;/&gt;  
            &lt;property name=&quot;url&quot; value=&quot;$&#123;mysql.url&#125;&quot;/&gt;  
            &lt;property name=&quot;username&quot; value=&quot;$&#123;mysql.username&#125;&quot;/&gt;  
            &lt;property name=&quot;password&quot; value=&quot;$&#123;mysql.password&#125;&quot;/&gt;  
        &lt;/dataSource&gt;  
    &lt;/environment&gt;  
 
    &lt;!-- è¿æ¥ç¯å¢ƒä¿¡æ¯ï¼Œå–ä¸€ä¸ªä»»æ„å”¯ä¸€çš„åå­— --&gt;  
    &lt;environment id=&quot;oracle_developer&quot;&gt;  
        &lt;!-- mybatisä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†æ–¹å¼ --&gt;  
        &lt;transactionManager type=&quot;jdbc&quot;/&gt;  
        &lt;!-- mybatisä½¿ç”¨è¿æ¥æ± æ–¹å¼æ¥è·å–è¿æ¥ --&gt;  
        &lt;dataSource type=&quot;pooled&quot;&gt;  
            &lt;!-- é…ç½®ä¸æ•°æ®åº“äº¤äº’çš„4ä¸ªå¿…è¦å±æ€§ --&gt;  
            &lt;property name=&quot;driver&quot; value=&quot;$&#123;oracle.driver&#125;&quot;/&gt;  
            &lt;property name=&quot;url&quot; value=&quot;$&#123;oracle.url&#125;&quot;/&gt;  
            &lt;property name=&quot;username&quot; value=&quot;$&#123;oracle.username&#125;&quot;/&gt;  
            &lt;property name=&quot;password&quot; value=&quot;$&#123;oracle.password&#125;&quot;/&gt;  
        &lt;/dataSource&gt;  
    &lt;/environment&gt;  
&lt;/environments&gt;  
 
&lt;!-- åŠ è½½æ˜ å°„æ–‡ä»¶--&gt;  
&lt;mappers&gt;  
    &lt;mapper resource=&quot;cn/itcast/javaee/mybatis/app14/StudentMapper.xml&quot;/&gt;  
&lt;/mappers&gt;  
</code></pre>
</configuration>  
public class MyBatisTest {

<pre><code>public static void main(String[] args) &#123;
    try &#123;
        //è¯»å–mybatis-config.xmlæ–‡ä»¶
        InputStream resourceAsStream = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
        //åˆå§‹åŒ–mybatis,åˆ›å»ºSqlSessionFactoryç±»çš„å®ä¾‹
        SqlSessionFactory sqlSessionFactory =  new SqlSessionFactoryBuilder().build(resourceAsStream);
        //åˆ›å»ºsessionå®ä¾‹
        SqlSession session = sqlSessionFactory.openSession();
        /*
         * æ¥ä¸‹æ¥åœ¨è¿™é‡Œåšå¾ˆå¤šäº‹æƒ…,åˆ°ç›®å‰ä¸ºæ­¢,ç›®çš„å·²ç»è¾¾åˆ°å¾—åˆ°äº†SqlSessionå¯¹è±¡.é€šè¿‡è°ƒç”¨SqlSessioné‡Œé¢çš„æ–¹æ³•,
         * å¯ä»¥æµ‹è¯•MyBatiså’ŒDaoå±‚æ¥å£æ–¹æ³•ä¹‹é—´çš„æ­£ç¡®æ€§,å½“ç„¶ä¹Ÿå¯ä»¥åšåˆ«çš„å¾ˆå¤šäº‹æƒ…,åœ¨è¿™é‡Œå°±ä¸åˆ—ä¸¾äº†
         */
        //æ’å…¥æ•°æ®
        User user = new User();
        user.setC_password(&quot;123&quot;);
        user.setC_username(&quot;123&quot;);
        user.setC_salt(&quot;123&quot;);
        //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•çš„å®Œå…¨é™å®šå:ä½ç½®ä¿¡æ¯+æ˜ å°„æ–‡ä»¶å½“ä¸­çš„id
        session.insert(&quot;com.cn.dao.UserMapping.insertUserInformation&quot;, user);
        //æäº¤äº‹åŠ¡
        session.commit();
        //å…³é—­session
        session.close();
    &#125; catch (IOException e) &#123;
        e.printStackTrace();
    &#125;
&#125;
</code></pre>
<p>}</p>
<h1 id="145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥"><a href="#145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥" class="headerlink" title="145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥"></a>145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥</h1><p>æ³¨æ„ï¼šä½†å‡¡æ˜¯sqlæ³¨å…¥æ¼æ´çš„ç¨‹åºï¼Œéƒ½æ˜¯å› ä¸ºç¨‹åºè¦æ¥å—æ¥è‡ªå®¢æˆ·ç«¯ç”¨æˆ·è¾“å…¥çš„å˜é‡æˆ–URLä¼ é€’çš„å‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡æˆ–å‚æ•°æ˜¯ç»„æˆsqlè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äºç”¨æˆ·è¾“å…¥çš„å†…å®¹æˆ–ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘ä»¬åº”è¯¥è¦æ—¶åˆ»ä¿æŒè­¦æƒ•ï¼Œè¿™æ˜¯å®‰å…¨é¢†åŸŸé‡Œçš„ã€å¤–éƒ¨æ•°æ®ä¸å¯ä¿¡ä»»ã€‘çš„åŸåˆ™ï¼Œçºµè§‚webå®‰å…¨é¢†åŸŸçš„å„ç§æ”»å‡»æ–¹å¼ï¼Œå¤§å¤šæ•°éƒ½æ˜¯å› ä¸ºå¼€å‘è€…è¿åäº†è¿™ä¸ªåŸåˆ™è€Œå¯¼è‡´çš„ï¼Œæ‰€ä»¥è‡ªç„¶èƒ½æƒ³åˆ°ï¼Œå°±æ˜¯å˜é‡çš„æ£€æµ‹ã€è¿‡æ»¤ã€éªŒè¯ä¸‹æ‰‹ï¼Œç¡®ä¿å˜é‡æ˜¯å¼€å‘è€…æ‰€é¢„æƒ³çš„ã€‚</p>
<p>1ã€æ£€æŸ¥å˜é‡æ•°æ®ç±»å‹å’Œæ ¼å¼</p>
<p>æ•°æ®ç±»å‹æ£€æŸ¥ï¼Œsqlæ‰§è¡Œå‰ï¼Œè¦è¿›è¡Œæ•°æ®ç±»å‹æ£€æŸ¥ï¼Œå¦‚æœæ˜¯é‚®ç®±ï¼Œå‚æ•°å°±å¿…é¡»æ˜¯é‚®ç®±çš„æ ¼å¼ï¼Œå¦‚æœæ˜¯æ—¥æœŸï¼Œå°±å¿…é¡»æ˜¯æ—¥æœŸæ ¼å¼ï¼›</p>
<p>åªè¦æ˜¯æœ‰å›ºå®šæ ¼å¼çš„å˜é‡ï¼Œåœ¨SQLè¯­å¥æ‰§è¡Œå‰ï¼Œåº”è¯¥ä¸¥æ ¼æŒ‰ç…§å›ºå®šæ ¼å¼å»æ£€æŸ¥ï¼Œç¡®ä¿å˜é‡æ˜¯æˆ‘ä»¬é¢„æƒ³çš„æ ¼å¼ï¼Œè¿™æ ·å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥é¿å…SQLæ³¨å…¥æ”»å‡»ã€‚</p>
<p>å¦‚æœä¸Šè¿°ä¾‹å­ä¸­idæ˜¯intå‹çš„ï¼Œæ•ˆæœä¼šæ€æ ·å‘¢ï¼Ÿæ— æ³•æ³¨å…¥ï¼Œå› ä¸ºè¾“å…¥æ³¨å…¥å‚æ•°ä¼šå¤±è´¥ã€‚æ¯”å¦‚ä¸Šè¿°ä¸­çš„nameå­—æ®µï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œå°±ç¡®å®šä¸€ä¸ªç”¨æˆ·åè§„åˆ™ï¼Œæ¯”å¦‚5-20ä¸ªå­—ç¬¦ï¼Œåªèƒ½ç”±å¤§å°å†™å­—æ¯ã€æ•°å­—ä»¥åŠæ±‰å­—ç»„æˆï¼Œä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚æ­¤æ—¶æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªå‡½æ•°æ¥å®Œæˆç»Ÿä¸€çš„ç”¨æˆ·åæ£€æŸ¥ã€‚ä¸è¿‡ï¼Œä»ç„¶æœ‰å¾ˆå¤šåœºæ™¯å¹¶ä¸èƒ½ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚å†™åšå®¢ï¼Œè¯„è®ºç³»ç»Ÿï¼Œå¼¹å¹•ç³»ç»Ÿï¼Œå¿…é¡»å…è®¸ç”¨æˆ·å¯ä»¥æäº¤ä»»æ„å½¢å¼çš„å­—ç¬¦æ‰è¡Œï¼Œå¦åˆ™ç”¨æˆ·ä½“éªŒæ„Ÿå¤ªå·®äº†ã€‚</p>
<p>2ã€è¿‡æ»¤ç‰¹æ®Šç¬¦å·</p>
<p>3ã€ç»‘å®šå˜é‡ï¼Œä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥</p>
<h1 id="146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-hibernateï¼Ÿ"><a href="#146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-hibernateï¼Ÿ" class="headerlink" title="146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ hibernateï¼Ÿ"></a>146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ hibernateï¼Ÿ</h1><p>hibernateå¯¹jdbcè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–äº†JDBCçš„é‡å¤æ€§ä»£ç ï¼›<br>hibernateå¯¹daoæœ‰ä¸€ä¸ªå°è£…ç±»hibernateTemplateï¼Œå¯ä»¥ç»§æ‰¿å®ƒï¼Œå®ç°ç®€å•çš„CRUDæ¥å£ã€‚<br>hibernateä½¿ç”¨æ³¨è§£å’Œé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹å®ä½“ç±»å’Œæ˜ å°„æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼›<br>hibernateæœ‰äº‹åŠ¡ç®¡ç†æœºåˆ¶ï¼Œä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§ï¼›<br>hibernateæœ‰ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼›</p>
<h1 id="146ã€hibernate-ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„-sql-è¯­å¥ï¼Ÿ"><a href="#146ã€hibernate-ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„-sql-è¯­å¥ï¼Ÿ" class="headerlink" title="146ã€hibernate ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„ sql è¯­å¥ï¼Ÿ"></a>146ã€hibernate ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„ sql è¯­å¥ï¼Ÿ</h1><p>spring.jpa.properties.hibernate.show_sql&#x3D;true<br>spring.jpa.properties.hibernate.format_sql&#x3D;true<br>spring.jpa.properties.hibernate.use_sql_comments&#x3D;true</p>
<h1 id="147ã€hibernate-æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ"><a href="#147ã€hibernate-æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ" class="headerlink" title="147ã€hibernate æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ"></a>147ã€hibernate æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ</h1><p>1ã€å¯¼èˆªå¯¹è±¡å›¾æŸ¥è¯¢ï¼šæ ¹æ®å·²åŠ è½½çš„å¯¹è±¡ï¼Œå¯¼èˆªåˆ°å…¶ä»–å¯¹è±¡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹äºå·²ç»åŠ è½½çš„Customerå¯¹è±¡ï¼Œè°ƒç”¨å®ƒçš„getOrders().iterator()æ–¹æ³•å°±å¯ä»¥å¯¼èˆªåˆ°æ‰€æœ‰å…³è”çš„Orderå¯¹è±¡ï¼Œå‡å¦‚åœ¨å…³è”çº§åˆ«ä½¿ç”¨äº†å»¶è¿ŸåŠ è½½æ£€ç´¢ç­–ç•¥ï¼Œé‚£ä¹ˆé¦–æ¬¡æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œhibernateä¼šä»æ•°æ®åº“ä¸­åŠ è½½å…³è”çš„Orderå¯¹è±¡ï¼Œå¦åˆ™å°±ä»ç¼“å­˜ä¸­è·å¾—Orderå¯¹è±¡ã€‚</p>
<p>2ã€OIDæ–¹å¼ï¼šæŒ‰ç…§å¯¹è±¡çš„OIDæ¥æ£€ç´¢å¯¹è±¡</p>
<p>Sessionçš„get()å’Œload()æ–¹æ³•æä¾›äº†è¿™ç§åŠŸèƒ½ï¼Œå¦‚æœåœ¨åº”ç”¨ç¨‹åºä¸­å…ˆçŸ¥é“äº†OIDï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ£€ç´¢å¯¹è±¡ã€‚</p>
<p>get()å’Œload()çš„ç”¨æ³•å®Œå…¨ä¸€æ ·ï¼Œéƒ½éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒä¹…åŒ–å¯¹è±¡ç±»åclassï¼Œä¸€ä¸ªæ˜¯è¡Œå·OIDï¼Œè¿”å›å›ºå®šçš„æŸä¸€è¡Œçš„æ•°æ®ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è¾“å…¥çš„OIDä¸å­˜åœ¨æ—¶ï¼Œget()ä¼šè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œload()åˆ™ç›´æ¥æŠ¥é”™ã€‚</p>
<p>3ã€HQLæ£€ç´¢æ–¹å¼ï¼šï¼ˆhibernate query languageï¼‰</p>
<p>ä½¿ç”¨é¢å‘å¯¹è±¡çš„HQLæŸ¥è¯¢è¯­è¨€ï¼Œsessionçš„find()æ–¹æ³•ç”¨äºæ‰§è¡ŒHQLæŸ¥è¯¢è¯­å¥ã€‚æ­¤å¤–ï¼Œhibernateè¿˜æä¾›äº†queryæ¥å£ï¼Œå®ƒæ˜¯hibernateæä¾›çš„ä¸“é—¨çš„HQLæŸ¥è¯¢æ¥å£ï¼Œèƒ½å¤Ÿæ‰§è¡Œå„ç§å¤æ‚çš„HQLæŸ¥è¯¢è¯­å¥ã€‚</p>
<p>å®ƒå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<p>åœ¨æŸ¥è¯¢è¯­å¥ä¸­è®¾å®šå„ç§æŸ¥è¯¢æ¡ä»¶ï¼›<br>æ”¯æŒæŠ•å½±æŸ¥è¯¢ï¼Œå³ä»…æ£€ç´¢å‡ºå¯¹è±¡çš„éƒ¨åˆ†å±æ€§ï¼›<br>æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼›<br>æ”¯æŒè¿æ¥æŸ¥è¯¢ï¼›<br>æ”¯æŒåˆ†ç»„æŸ¥è¯¢ï¼›<br>æä¾›å†…ç½®å‡½æ•°ï¼›<br>èƒ½å¤Ÿè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„SQLå‡½æ•°ï¼›<br>æ”¯æŒå­æŸ¥è¯¢ï¼›<br>æ”¯æŒåŠ¨æ€ç»‘å®šå‚æ•°ï¼›<br>ä¾‹å¦‚ï¼š</p>
<p>Query query &#x3D; session.createQuery(â€œfrom UserPoâ€ï¼‰ï¼›<br>è·å¾—ä¸€ä¸ªqueryå¯¹è±¡ï¼Œæ³¨æ„å‚æ•°å­—ç¬¦ä¸²ä¸­ä¸æ˜¯ä¸€ä¸ªSQLè¯­å¥ï¼Œfromåé¢çš„æ˜¯æŒä¹…åŒ–å¯¹è±¡åç§°ï¼›</p>
<p>List list &#x3D; query.list();<br>å°±å¯ä»¥è·å–æ•°æ®åº“ä¸­å¯¹åº”è¡¨çš„æ•°æ®é›†åˆã€‚</p>
<p>4ã€QBCæ£€ç´¢æ–¹å¼ï¼šQuery By Criteriaçš„APIæ¥æ£€ç´¢å¯¹è±¡</p>
<p>è¿™ç§APIå°è£…äº†åŸºäºå­—ç¬¦ä¸²å½¢å¼çš„æŸ¥è¯¢è¯­å¥ï¼Œæä¾›äº†æ›´åŠ é¢å‘å¯¹è±¡çš„æ¥å£ã€‚</p>
<p>ä¾‹ï¼šCriteria criteria &#x3D; session.createCriteria(UserPo.class);<br>åˆ›å»ºä¸€ä¸ªCriteriaå¯¹è±¡ï¼Œå‚æ•°æ˜¯æ‰€å…³è”çš„æŒä¹…åŒ–å¯¹è±¡ï¼Œcriteria.add(Restrictions.ge(â€œidâ€,2));å°†æŸ¥è¯¢æ¡ä»¶åŠ å…¥å¯¹è±¡ä¸­ï¼Œåé¢çš„æ“ä½œå°±å’ŒQueryå¯¹è±¡ä¸€æ ·äº†ã€‚</p>
<p>5ã€æœ¬åœ°SQL</p>
<p>ä½¿ç”¨æœ¬åœ°æ•°æ®åº“çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œhibernateä¼šè´Ÿè´£æŠŠæ£€ç´¢åˆ°çš„JDBC ResultSetç»“æœæ˜ å°„ä¸ºæŒä¹…åŒ–å¯¹è±¡å›¾ã€‚</p>
<h1 id="148ã€hibernate-å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º-final-å—ï¼Ÿ"><a href="#148ã€hibernate-å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º-final-å—ï¼Ÿ" class="headerlink" title="148ã€hibernate å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º final å—ï¼Ÿ"></a>148ã€hibernate å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º final å—ï¼Ÿ</h1><p>å¯ä»¥å°†hibernateçš„å®ä½“ç±»å®šä¹‰ä¸ºfinalï¼Œä½†è¿™ç§åšæ³•ä¸å¥½ã€‚</p>
<p>å› ä¸ºhibernateä¼šä½¿ç”¨ä»£ç†æ¨¡å¼åœ¨å»¶è¿Ÿå…³è”çš„æƒ…å†µä¸‹æé«˜æ€§èƒ½ï¼Œå¦‚æœä½ æŠŠå®ä½“ç±»å®šä¹‰æˆfinalç±»ä¹‹åï¼Œå› ä¸ºJavaä¸å…è®¸å¯¹finalç±»è¿›è¡Œæ‰©å±•ï¼Œæ‰€ä»¥hibernateå°±æ— æ³•å†ä½¿ç”¨ä»£ç†äº†ï¼Œå¦‚æ­¤ä¸€æ¥å°±é™åˆ¶äº†ä½¿ç”¨å¯ä»¥æå‡æ€§èƒ½çš„æ‰‹æ®µã€‚</p>
<p>ä¸è¿‡ï¼Œå¦‚æœä½ çš„æŒä¹…åŒ–ç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸”åœ¨è¯¥æ¥å£ä¸­å£°æ˜äº†æ‰€æœ‰å®šä¹‰äºå®ä½“ç±»ä¸­çš„æ‰€æœ‰publicçš„æ–¹æ³•çš„è¯ï¼Œå°±èƒ½é¿å…å‡ºç°å‰é¢æ‰€è¯´çš„ä¸åˆ©åæœã€‚</p>
<h1 id="149ã€åœ¨-hibernate-ä¸­ä½¿ç”¨-Integer-å’Œ-int-åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#149ã€åœ¨-hibernate-ä¸­ä½¿ç”¨-Integer-å’Œ-int-åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="149ã€åœ¨ hibernate ä¸­ä½¿ç”¨ Integer å’Œ int åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>149ã€åœ¨ hibernate ä¸­ä½¿ç”¨ Integer å’Œ int åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>hibernateæ˜¯é¢å‘å¯¹è±¡çš„ORMï¼Œæ‰€ä»¥ä¸€èˆ¬å®šä¹‰æˆå°è£…ç±»å‹ï¼Œè¦çœ‹æ•°æ®åº“ä¸­çš„å®šä¹‰ï¼Œå¦‚æœæ•°æ®åº“ä¸­æœ‰å¯¹åº”å­—æ®µå­˜åœ¨nullå€¼ï¼Œå°±è¦å®šä¹‰Integerã€‚ä¹Ÿå¯ä»¥å®šä¹‰åŸºæœ¬ç±»å‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ¸…æ¥šå³å¯ã€‚</p>
<h1 id="150ã€ä»€ä¹ˆæ˜¯-Spring-Bootï¼ŸSpring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#150ã€ä»€ä¹ˆæ˜¯-Spring-Bootï¼ŸSpring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="150ã€ä»€ä¹ˆæ˜¯ Spring Bootï¼ŸSpring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>150ã€ä»€ä¹ˆæ˜¯ Spring Bootï¼ŸSpring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h1><p>1ã€Spring Bootç®€ä»‹</p>
<p>åŸºäºSpring4.0è®¾è®¡ï¼Œä¸ä»…ç»§æ‰¿äº†Springæ¡†æ¶åŸæœ‰çš„ä¼˜ç§€ç‰¹æ€§ï¼Œè€Œä¸”è¿˜é€šè¿‡ç®€åŒ–é…ç½®æ¥è¿›ä¸€æ­¥ç®€åŒ–springåº”ç”¨çš„æ•´ä¸ªæ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚å¦å¤–SpringBooté€šè¿‡é›†æˆå¤§é‡çš„æ¡†æ¶ä½¿å¾—ä¾èµ–åŒ…çš„ç‰ˆæœ¬å†²çªã€å¼•ç”¨çš„ä¸ç¨³å®šæ€§å¾—åˆ°äº†è§£å†³ã€‚</p>
<p>2ã€Spring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</p>
<p>å¿«é€Ÿæ„å»ºé¡¹ç›®ï¼Œå¯ä»¥é€‰ä¸€äº›å¿…è¦çš„ç»„ä»¶ï¼›<br>å¯¹ä¸»æµæ¡†æ¶çš„æ— é…ç½®é›†æˆï¼›<br>å†…åµŒTomcatå®¹å™¨ï¼Œé¡¹ç›®å¯ç‹¬ç«‹è¿è¡Œï¼›<br>åˆ é™¤äº†ç¹ççš„xmlé…ç½®æ–‡ä»¶ï¼›<br>æå¤§åœ°æé«˜äº†å¼€å‘å’Œéƒ¨ç½²æ•ˆç‡ï¼›<br>æä¾›starterï¼Œç®€åŒ–mavené…ç½®ï¼›<br>3ã€SpringBootæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ</p>
<p>ç‰ˆæœ¬è¿­ä»£é€Ÿåº¦å¿«ï¼Œä¸€äº›æ¨¡å—æ”¹åŠ¨å¾ˆå¤§ï¼›<br>ç”±äºæ— é¡»é…ç½®ï¼ŒæŠ¥é”™æ—¶å¾ˆéš¾å®šä½ï¼›</p>
<h1 id="151ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#151ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="151ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>151ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ç›‘å¬å™¨ä¹Ÿå«listenerï¼Œæ˜¯servletçš„ç›‘å¬å™¨ï¼Œå¯ä»¥ç”¨äºç›‘å¬webåº”ç”¨ç¨‹åºä¸­æŸäº›å¯¹è±¡çš„åˆ›å»ºã€é”€æ¯ã€å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰åŠ¨ä½œçš„å‘ç”Ÿï¼Œç„¶ååšå‡ºç›¸åº”çš„å“åº”å¤„ç†ã€‚å½“èŒƒå›´å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæœåŠ¡å™¨è‡ªåŠ¨è°ƒç”¨ç›‘å¬å™¨å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œå¸¸ç”¨äºç³»ç»ŸåŠ è½½æ—¶è¿›è¡Œä¿¡æ¯åˆå§‹åŒ–ï¼Œç»Ÿè®¡åœ¨çº¿äººæ•°å’Œåœ¨çº¿ç”¨æˆ·ï¼Œç»Ÿè®¡ç½‘ç«™çš„è®¿é—®é‡ã€‚</p>
<p>é…ç½®ç›‘å¬å™¨çš„æ–¹æ³•ï¼š</p>
<p>é€šè¿‡@ComponentæŠŠç›‘å¬å™¨åŠ å…¥Springå®¹å™¨ä¸­ç®¡ç†ï¼›<br>åœ¨application.propertiesä¸­æ·»åŠ context.listener.classesé…ç½®ï¼›<br>åœ¨æ–¹æ³•ä¸ŠåŠ @EventListeneræ³¨è§£ï¼›</p>
<h1 id="152ã€ä»€ä¹ˆæ˜¯-YAMLï¼Ÿ"><a href="#152ã€ä»€ä¹ˆæ˜¯-YAMLï¼Ÿ" class="headerlink" title="152ã€ä»€ä¹ˆæ˜¯ YAMLï¼Ÿ"></a>152ã€ä»€ä¹ˆæ˜¯ YAMLï¼Ÿ</h1><p>YAMLæ˜¯JSONçš„ä¸€ä¸ªè¶…é›†ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å°†å¤–éƒ¨é…ç½®ä»¥å±‚æ¬¡ç»“æ„å½¢å¼å­˜å‚¨èµ·æ¥ã€‚YAMLå¯ä»¥ä½œä¸ºpropertiesé…ç½®æ–‡ä»¶çš„æ›¿ä»£ã€‚</p>
<p>YAMLä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<p>åœ¨propertiesæ–‡ä»¶ä¸­æ˜¯ä»¥â€.â€è¿›è¡Œåˆ†å‰²çš„ï¼Œåœ¨ymlä¸­æ˜¯ç”¨â€.â€è¿›è¡Œåˆ†å‰²çš„ï¼›<br>ymlçš„æ•°æ®æ ¼å¼å’Œjsonçš„æ ¼å¼å¾ˆåƒï¼Œéƒ½æ˜¯K-Væ ¼å¼ï¼Œå¹¶ä¸”é€šè¿‡â€:â€è¿›è¡Œèµ‹å€¼ï¼›<br>æ¯ä¸ªå†’å·åé¢ä¸€å®šè¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼›<br>153ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°åˆ†é¡µå’Œæ’åºï¼Ÿ<br>ä½¿ç”¨Spring Data Jpaå¯ä»¥å®ç°å°†å¯åˆ†é¡µçš„ä¼ é€’ç»™å­˜å‚¨åº“æ–¹æ³•ã€‚</p>
<h1 id="154ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#154ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="154ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>154ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ</h1><p>1ã€ä½¿ç”¨ @ExceptionHandler æ³¨è§£å¤„ç†å±€éƒ¨å¼‚å¸¸(åªèƒ½å¤„ç†å½“å‰controllerä¸­çš„ArithmeticExceptionå’ŒNullPointerExceptionå¼‚å¸¸ï¼Œç¼ºç‚¹å°±æ˜¯åªèƒ½å¤„ç†å•ä¸ªcontrollerçš„å¼‚å¸¸)</p>
<p>@Controller<br>public class ExceptionHandlerController {</p>
<pre><code>@RequestMapping(&quot;/excep&quot;)
public String exceptionMethod(Model model) throws Exception &#123;
    String a=null;
    System.out.println(a.charAt(1));
    int num = 1/0;
    model.addAttribute(&quot;message&quot;, &quot;æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸&quot;);
    return &quot;index&quot;;
&#125;
 
@ExceptionHandler(value = &#123;ArithmeticException.class,NullPointerException.class&#125;)
public String arithmeticExceptionHandle(Model model, Exception e) &#123;
    model.addAttribute(&quot;message&quot;, &quot;@ExceptionHandler&quot; + e.getMessage());
    return &quot;index&quot;;
&#125;
</code></pre>
<p>}<br>2ã€ä½¿ç”¨ @ControllerAdvice + @ExceptionHandler æ³¨è§£å¤„ç†å…¨å±€å¼‚å¸¸(valueåé¢å¯ä»¥å¡«å†™æ•°ç»„)</p>
<p>@ControllerAdvice<br>public class ControllerAdviceException {</p>
<pre><code>@ExceptionHandler(value = &#123;NullPointerException.class&#125;)
public String NullPointerExceptionHandler(Model model, Exception e) &#123;
    model.addAttribute(&quot;message&quot;, &quot;@ControllerAdvice + @ExceptionHandler :&quot; + e.getMessage());
    return &quot;index&quot;;
&#125;
</code></pre>
<p>}<br>3ã€é…ç½® SimpleMappingExceptionResolver ç±»å¤„ç†å¼‚å¸¸ï¼ˆé…ç½®ç±»ï¼‰</p>
<p>@Configuration<br>public class SimpleMappingException {<br>    @Bean<br>    public SimpleMappingExceptionResolver getSimpleMappingExceptionResolver(){</p>
<pre><code>    SimpleMappingExceptionResolver resolver = new SimpleMappingExceptionResolver();
    Properties mappings = new Properties();
    //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¼‚å¸¸å…¨é™å®šåï¼Œç¬¬äºŒä¸ªä¸ºè·³è½¬è§†å›¾åç§°
    mappings.put(&quot;java.lang.NullPointerException&quot;, &quot;index&quot;);
    mappings.put(&quot;java.lang.ArithmeticException&quot;, &quot;index&quot;);
    //è®¾ç½®å¼‚å¸¸ä¸è§†å›¾æ˜ å°„ä¿¡æ¯çš„
    resolver.setExceptionMappings(mappings);
    return resolver;
&#125;
</code></pre>
<p>}<br>4ã€å®ç° HandlerExceptionResolver æ¥å£å¤„ç†å¼‚å¸¸</p>
<p>@Configuration<br>public class HandlerException implements HandlerExceptionResolver {<br>    @Override<br>    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {</p>
<pre><code>    ModelAndView modelAndView = new ModelAndView();
    modelAndView.addObject(&quot;message&quot;, &quot;å®ç°HandlerExceptionResolveræ¥å£&quot;);
 
    //åˆ¤æ–­ä¸åŒå¼‚å¸¸ç±»å‹ï¼Œåšä¸åŒè§†å›¾è·³è½¬
    if(ex instanceof NullPointerException)&#123;
        modelAndView.setViewName(&quot;index&quot;);
    &#125;
    if(ex instanceof ArithmeticException)&#123;
        modelAndView.setViewName(&quot;index&quot;);
    &#125;
    return modelAndView;
&#125;
</code></pre>
<p>}</p>
<h1 id="155ã€å•ç‚¹ç™»å½•"><a href="#155ã€å•ç‚¹ç™»å½•" class="headerlink" title="155ã€å•ç‚¹ç™»å½•"></a>155ã€å•ç‚¹ç™»å½•</h1><p>1ã€æ¦‚å¿µ</p>
<p>å•ç‚¹ç™»å½•SSOï¼Œè¯´çš„æ˜¯åœ¨ä¸€ä¸ªå¤šç³»ç»Ÿå…±å­˜çš„ç¯å¢ƒä¸‹ï¼Œç”¨æˆ·åœ¨ä¸€å¤„ç™»å½•åï¼Œå°±ä¸ç”¨åœ¨å…¶ä»–ç³»ç»Ÿä¸­ç™»å½•ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„ä¸€æ¬¡ç™»å½•èƒ½å¾—åˆ°å…¶ä»–æ‰€æœ‰ç³»ç»Ÿçš„ä¿¡ä»»ã€‚</p>
<p>2ã€å•ç‚¹ç™»å½•çš„è¦ç‚¹</p>
<p>å­˜å‚¨ä¿¡ä»»ï¼›<br>éªŒè¯ä¿¡ä»»ï¼›</p>
<p>3ã€å®ç°å•ç‚¹ç™»å½•çš„ä¸‰ç§æ–¹å¼</p>
<p>ï¼ˆ1ï¼‰ä»¥cookieä½œä¸ºå‡­è¯</p>
<p>æœ€ç®€å•çš„å•ç‚¹ç™»å½•å®ç°æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨cookieä½œä¸ºåª’ä»‹ï¼Œå­˜æ”¾ç”¨æˆ·å‡­è¯ã€‚</p>
<p>ç”¨æˆ·ç™»å½•çˆ¶åº”ç”¨ä¹‹åï¼Œåº”ç”¨è¿”å›ä¸€ä¸ªåŠ å¯†çš„cookieï¼Œå½“ç”¨æˆ·è®¿é—®å­åº”ç”¨çš„æ—¶å€™ï¼Œæºå¸¦ä¸Šè¿™ä¸ªcookieï¼Œæˆæƒåº”ç”¨è§£å¯†cookieè¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡åˆ™ç™»å½•å½“å‰ç”¨æˆ·ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>cookieä¸å®‰å…¨</p>
<p>é€šè¿‡åŠ å¯†å¯ä»¥ä¿è¯å®‰å…¨æ€§ï¼Œä½†å¦‚æœå¯¹æ–¹æŒæ¡äº†è§£å¯†ç®—æ³•å°±å®Œè›‹äº†ã€‚</p>
<p>ä¸èƒ½è·¨åŸŸå®ç°å…ç™»</p>
<p>ï¼ˆ2ï¼‰é€šè¿‡JSONPå®ç°</p>
<p>å¯¹äºè·¨åŸŸé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨JSONPå®ç°ã€‚ç”¨æˆ·åœ¨çˆ¶åº”ç”¨ä¸­ç™»å½•åï¼Œè·ŸsessionåŒ¹é…çš„cookieä¼šå­˜åˆ°å®¢æˆ·ç«¯ä¸­ï¼Œå½“ç”¨æˆ·éœ€è¦ç™»å½•å­åº”ç”¨çš„æ—¶å€™ï¼Œæˆæƒåº”ç”¨è®¿é—®çˆ¶åº”ç”¨æä¾›çš„JSONPæ¥å£ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­å¸¦ä¸Šçˆ¶åº”ç”¨åŸŸåä¸‹çš„cookieï¼Œçˆ¶åº”ç”¨æ¥æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œè¿”å›åŠ å¯†çš„ä¿¡æ¯ï¼Œå­åº”ç”¨é€šè¿‡è§£æè¿”å›æ¥çš„åŠ å¯†ä¿¡æ¯æ¥éªŒè¯ç”¨æˆ·ï¼Œå¦‚æœé€šè¿‡éªŒè¯åˆ™ç™»å½•ç”¨æˆ·ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>è¿™ç§æ–¹æ³•è™½ç„¶èƒ½è§£å†³è·¨åŸŸé—®é¢˜ï¼Œä½†æ˜¯æ²»æ ‡ä¸æ²»æœ¬ï¼Œæ²¡æœ‰è§£å†³cookieå®‰å…¨æ€§çš„é—®é¢˜ã€‚</p>
<p>ï¼ˆ3ï¼‰é€šè¿‡é¡µé¢é‡å®šå‘çš„æ–¹å¼</p>
<p>æœ€åä¸€ç§ä»‹ç»çš„æ–¹å¼ï¼Œæ˜¯é€šè¿‡çˆ¶åº”ç”¨å’Œå­åº”ç”¨æ¥å›é‡å®šå‘è¿›è¡Œé€šä¿¡ï¼Œå®ç°ä¿¡æ¯çš„å®‰å…¨ä¼ é€’ã€‚</p>
<p>çˆ¶åº”ç”¨æä¾›ä¸€ä¸ªGETæ–¹å¼çš„ç™»å½•æ¥å£Aï¼ˆæ­¤æ—¶çš„çˆ¶åº”ç”¨æ¥å£å›ºå®šï¼Œæ”»å‡»è€…æ— æ³•å»ä¼ªé€ ï¼‰ï¼Œç”¨æˆ·é€šè¿‡å­åº”ç”¨é‡å®šå‘è¿æ¥çš„æ–¹å¼è®¿é—®è¿™ä¸ªæ¥å£ï¼Œå¦‚æœç”¨æˆ·è¿˜æ²¡æœ‰ç™»å½•ï¼Œåˆ™è¿”å›ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œç”¨æˆ·è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œå¦‚æœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œåˆ™ç”ŸæˆåŠ å¯†çš„tokenï¼Œå¹¶ä¸”é‡å®šå‘åˆ°å­åº”ç”¨æä¾›çš„éªŒè¯tokençš„æ¥å£Bï¼ˆæ­¤æ—¶çš„å­åº”ç”¨æ¥å£å›ºå®šï¼Œæ”»å‡»è€…æ— æ³•å»ä¼ªé€ ï¼‰ï¼Œé€šè¿‡è§£å¯†å’Œæ ¡éªŒä¹‹åï¼Œå­åº”ç”¨ç™»å½•å½“å‰ç”¨æˆ·ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>è¿™ç§æ–¹å¼è¾ƒå‰é¢çš„ä¸¤ç§æ–¹å¼ï¼Œæ˜¯è§£å†³äº†å®‰å…¨æ€§å’Œè·¨åŸŸçš„é—®é¢˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å‰é¢ä¸¤ç§æ–¹å¼ç®€å•ï¼Œå®‰å…¨ä¸æ–¹ä¾¿ï¼Œæœ¬æ¥å°±æ˜¯çŸ›ç›¾çš„ã€‚</p>
<p>4ã€ä½¿ç”¨ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å‹åº”ç”¨ä¼šæŠŠæˆæƒçš„é€»è¾‘å’Œç”¨æˆ·ä¿¡æ¯çš„ç›¸å…³é€»è¾‘ç‹¬ç«‹æˆä¸€ä¸ªåº”ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ä¸­å¿ƒã€‚ç”¨æˆ·ä¸­å¿ƒä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯å¤„ç†ç”¨æˆ·ä¿¡æ¯çš„ç®¡ç†ä»¥åŠæˆæƒç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚ç¬¬ä¸‰æ–¹åº”ç”¨éœ€è¦ç™»å½•çš„æ—¶å€™ï¼Œåˆ™æŠŠç”¨æˆ·çš„ç™»å½•è¯·æ±‚è½¬å‘ç»™ç”¨æˆ·ä¸­å¿ƒè¿›è¡Œå¤„ç†ï¼Œç”¨æˆ·å¤„ç†å®Œæ¯•åè¿”å›å‡­è¯ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨éªŒè¯å‡­è¯ï¼Œé€šè¿‡åå°±ç™»å½•ç”¨æˆ·ã€‚</p>
<p>5ã€ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰ä¸OAuth2.0ï¼ˆæˆæƒï¼‰çš„åŒºåˆ«ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰</p>
<p>é€šå¸¸å¤„ç†çš„æ˜¯ä¸€ä¸ªå…¬å¸çš„ä¸åŒåº”ç”¨é—´çš„è®¿é—®ç™»å½•é—®é¢˜ï¼Œå¦‚ä¼ä¸šåº”ç”¨æœ‰å¾ˆå¤šå­ç³»ç»Ÿï¼Œåªéœ€ç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼Œå°±å¯ä»¥å®ç°ä¸åŒå­ç³»ç»Ÿé—´çš„è·³è½¬ï¼Œè€Œé¿å…äº†ç™»å½•æ“ä½œï¼›<br>é€šè¿‡cookieã€jsonpã€é‡å®šå‘æ¥å®ç°ï¼›</p>
<p>ï¼ˆ2ï¼‰OAuth2.0ï¼ˆæˆæƒï¼‰</p>
<p>è§£å†³çš„æ˜¯æœåŠ¡æä¾›æ–¹ï¼ˆå¦‚å¾®ä¿¡ï¼‰ç»™ç¬¬ä¸‰æ–¹åº”ç”¨æˆæƒçš„é—®é¢˜ï¼Œç®€ç§°å¾®ä¿¡ç™»å½•ï¼›<br>æ˜¯ä¸€ç§å…·ä½“çš„åè®®ï¼Œåªæ˜¯ä¸ºç”¨æˆ·èµ„æºçš„æˆæƒæä¾›äº†ä¸€ä¸ªå®‰å…¨çš„ã€å¼€æ”¾çš„è€Œåˆç®€æ˜“çš„æ ‡å‡†ï¼ŒOAuth2.0ï¼ˆæˆæƒï¼‰ä¸ºå®¢æˆ·å¼€å‘è€…å¼€å‘webåº”ç”¨ï¼Œæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç§»åŠ¨åº”ç”¨åŠå®¢å…è®¾å¤‡æä¾›ç‰¹å®šçš„æˆæƒæµç¨‹ã€‚</p>
<h1 id="156ã€Spring-Bootæ¯”Springå¤šå“ªäº›æ³¨è§£"><a href="#156ã€Spring-Bootæ¯”Springå¤šå“ªäº›æ³¨è§£" class="headerlink" title="156ã€Spring Bootæ¯”Springå¤šå“ªäº›æ³¨è§£"></a>156ã€Spring Bootæ¯”Springå¤šå“ªäº›æ³¨è§£</h1><p>Spring Bootå¸¸ç”¨æ³¨è§£ï¼ˆç»å¯¹ç»å…¸ï¼‰</p>
<h1 id="157ã€æ‰“åŒ…å’Œéƒ¨ç½²"><a href="#157ã€æ‰“åŒ…å’Œéƒ¨ç½²" class="headerlink" title="157ã€æ‰“åŒ…å’Œéƒ¨ç½²"></a>157ã€æ‰“åŒ…å’Œéƒ¨ç½²</h1><p>Springå’ŒSpring Bootéƒ½æ”¯æŒmavenå’ŒGradleé€šç”¨æ‰“åŒ…ç®¡ç†æŠ€æœ¯ã€‚</p>
<p>Spring Bootç›¸å¯¹Springçš„ä¸€äº›ä¼˜ç‚¹ï¼š</p>
<p>æä¾›åµŒå…¥å¼å®¹å™¨æ”¯æŒï¼›<br>ä½¿ç”¨å‘½ä»¤java -jarç‹¬ç«‹è¿è¡Œjarï¼›<br>éƒ¨ç½²æ—¶å¯ä»¥çµæ´»æŒ‡å®šé…ç½®æ–‡ä»¶ï¼›<br>æœ€è¿‘é¡¹ç›®æ˜¯åˆ†å¸ƒå¼çš„é¡¹ç›®ï¼Œéƒ½æ˜¯é€šè¿‡åˆ†é¡¹ç›®æ‰“åŒ…éƒ¨ç½²ï¼Œç„¶åéƒ¨ç½²åœ¨dockerä¸­è¿è¡Œã€‚</p>
<h1 id="158ã€Spring-Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“"><a href="#158ã€Spring-Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“" class="headerlink" title="158ã€Spring Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“"></a>158ã€Spring Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“</h1><p>å¯ä»¥ä½¿ç”¨druidDataSourceåˆ›å»ºDataSourceï¼Œç„¶åé€šè¿‡jdbcTemplateæ‰§è¡Œsqlã€‚</p>
<h1 id="159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°"><a href="#159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°" class="headerlink" title="159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°"></a>159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°</h1><p>é€šè¿‡ç›‘å¬sessionå¯¹è±¡çš„æ–¹å¼æ¥å®ç°åœ¨çº¿äººæ•°çš„ç»Ÿè®¡å’Œåœ¨çº¿äººä¿¡æ¯å±•ç¤ºï¼Œå¹¶ä¸”è®©è¶…æ—¶çš„è‡ªåŠ¨é”€æ¯ã€‚</p>
<p>å¯¹sessionå¯¹è±¡å®ç°ç›‘å¬ï¼Œé¦–å…ˆå¿…é¡»ç»§æ‰¿HttpSessionListenerç±»ï¼Œè¯¥ç¨‹åºçš„åŸºæœ¬åŸç†å°±æ˜¯å½“æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™å¿…å®šä¼šäº§ç”Ÿä¸€ä¸ªsessionå¯¹è±¡ï¼Œå½“å…³é—­è¯¥é¡µé¢çš„æ—¶å€™å¿…ç„¶ä¼šåˆ é™¤sessionå¯¹è±¡ã€‚æ‰€ä»¥æ¯å½“äº§ç”Ÿä¸€ä¸ªæ–°çš„sessionå¯¹è±¡å°±è®©åœ¨çº¿äººæ•°+1ï¼Œå½“åˆ é™¤ä¸€ä¸ªsessionå¯¹è±¡å°±è®©åœ¨çº¿äººæ•°-1ã€‚</p>
<p>è¿˜è¦ç»§æ‰¿ä¸€ä¸ªHttpSessionAttributeListenerï¼Œæ¥å®ç°å¯¹å…¶å±æ€§çš„ç›‘å¬ã€‚åˆ†åˆ«å®ç°attributeAddedæ–¹æ³•ï¼ŒattributeReplaceæ–¹æ³•ä»¥åŠattributeRemoveæ–¹æ³•ã€‚</p>
<p>sessionCreated&#x2F;&#x2F;æ–°å»ºä¸€ä¸ªä¼šè¯çš„æ—¶å€™è§¦å‘ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å–æœåŠ¡å™¨äº¤äº’æ—¶è§¦å‘ã€‚</p>
<p>sessionDestroyed&#x2F;&#x2F;é”€æ¯ä¼šè¯çš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥è¯´åªæœ‰æŸä¸ªæŒ‰é’®è§¦å‘è¿›è¡Œé”€æ¯ï¼Œæˆ–è€…é…ç½®å®šæ—¶é”€æ¯ã€‚</p>
<p>HttpSessionAttributeListeneræœ‰ä¸‰ä¸ªæ–¹æ³•éœ€è¦å®ç°</p>
<p>attributeAdded&#x2F;&#x2F;åœ¨sessionä¸­æ·»åŠ å¯¹è±¡æ—¶è§¦å‘æ­¤æ“ä½œ ç¬¼ç»Ÿçš„è¯´å°±æ˜¯è°ƒç”¨setAttributeè¿™ä¸ªæ–¹æ³•æ—¶å€™ä¼šè§¦å‘çš„<br>attributeRemoved&#x2F;&#x2F;ä¿®æ”¹ã€åˆ é™¤sessionä¸­æ·»åŠ å¯¹è±¡æ—¶è§¦å‘æ­¤æ“ä½œ  ç¬¼ç»Ÿçš„è¯´å°±æ˜¯è°ƒç”¨ removeAttributeè¿™ä¸ªæ–¹æ³•æ—¶å€™ä¼šè§¦å‘çš„<br>attributeReplaced&#x2F;&#x2F;åœ¨Sessionå±æ€§è¢«é‡æ–°è®¾ç½®æ—¶ã€‚</p>
<h1 id="160ã€easyExcelå¦‚ä½•å®ç°"><a href="#160ã€easyExcelå¦‚ä½•å®ç°" class="headerlink" title="160ã€easyExcelå¦‚ä½•å®ç°"></a>160ã€easyExcelå¦‚ä½•å®ç°</h1><p>å¼‚æ­¥è¯»å–<br>æ–°å»ºä¸€ä¸ª  ExcelModelListener ç›‘å¬ç±»å‡ºæ¥ï¼Œå¹¶ä¸” ç»§æ‰¿ AnalysisEventListener ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">`<span class="keyword">package</span> com.zh.oukele.listener;`</span><br><span class="line"></span><br><span class="line">`<span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;`</span><br><span class="line">`<span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;`</span><br><span class="line">`<span class="keyword">import</span> com.zh.oukele.model.ExcelMode;`</span><br><span class="line"></span><br><span class="line">`<span class="keyword">import</span> java.util.ArrayList;`</span><br><span class="line">`<span class="keyword">import</span> java.util.List;`</span><br><span class="line"></span><br><span class="line">`<span class="comment">/***`</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * `ç›‘å¬å™¨`</span></span><br><span class="line"><span class="comment">   `*/</span>`</span><br><span class="line">   `<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelModelListener</span> <span class="keyword">extends</span> <span class="title class_">AnalysisEventListener</span>&lt;ExcelMode&gt; &#123;`</span><br><span class="line"></span><br><span class="line">   `<span class="comment">/**`</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    * `æ¯éš”5æ¡å­˜å‚¨æ•°æ®åº“ï¼Œå®é™…ä½¿ç”¨ä¸­å¯ä»¥3000æ¡ï¼Œç„¶åæ¸…ç†list ï¼Œæ–¹ä¾¿å†…å­˜å›æ”¶`</span></span><br><span class="line"><span class="comment">      `*/</span>`</span><br><span class="line">        `<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">BATCH_COUNT</span> <span class="operator">=</span> <span class="number">5</span>;`</span><br><span class="line">        `List&lt;ExcelMode&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ExcelMode&gt;();`</span><br><span class="line">        `<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;`</span><br><span class="line">        `<span class="meta">@Override</span>`</span><br><span class="line">        `<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(ExcelMode data, AnalysisContext context)</span> &#123;`</span><br><span class="line">      `System.out.println(<span class="string">&quot;è§£æåˆ°ä¸€æ¡æ•°æ®:&#123; &quot;</span>+ data.toString() +<span class="string">&quot; &#125;&quot;</span>);`</span><br><span class="line">      `list.add(data);`</span><br><span class="line">      `count ++;`</span><br><span class="line">      `<span class="keyword">if</span> (list.size() &gt;= BATCH_COUNT) &#123;`</span><br><span class="line">          `saveData( count );`</span><br><span class="line">          `list.clear();`</span><br><span class="line">      `&#125;`</span><br><span class="line">        `&#125;`</span><br><span class="line"></span><br><span class="line">   `<span class="meta">@Override</span>`</span><br><span class="line">   `<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> &#123;`</span><br><span class="line">       `saveData( count );`</span><br><span class="line">       `System.out.println(<span class="string">&quot;æ‰€æœ‰æ•°æ®è§£æå®Œæˆï¼&quot;</span>);`</span><br><span class="line">       `System.out.println(<span class="string">&quot; count ï¼š&quot;</span> + count);`</span><br><span class="line">   `&#125;`</span><br><span class="line"></span><br><span class="line">   `<span class="comment">/**`</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    * `åŠ ä¸Šå­˜å‚¨æ•°æ®åº“`</span></span><br><span class="line"><span class="comment">      `*/</span>`</span><br><span class="line">        `<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">(<span class="type">int</span> count)</span> &#123;`</span><br><span class="line">      `System.out.println(<span class="string">&quot;&#123; &quot;</span>+ count +<span class="string">&quot; &#125;æ¡æ•°æ®ï¼Œå¼€å§‹å­˜å‚¨æ•°æ®åº“ï¼&quot;</span> + list.size());`</span><br><span class="line">      `System.out.println(<span class="string">&quot;å­˜å‚¨æ•°æ®åº“æˆåŠŸï¼&quot;</span>);`</span><br><span class="line">        `&#125;`</span><br><span class="line"></span><br><span class="line">`&#125;`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="161ã€ä»€ä¹ˆæ˜¯-Swaggerï¼Ÿä½ ç”¨-Spring-Boot-å®ç°äº†å®ƒå—ï¼Ÿ"><a href="#161ã€ä»€ä¹ˆæ˜¯-Swaggerï¼Ÿä½ ç”¨-Spring-Boot-å®ç°äº†å®ƒå—ï¼Ÿ" class="headerlink" title="161ã€ä»€ä¹ˆæ˜¯ Swaggerï¼Ÿä½ ç”¨ Spring Boot å®ç°äº†å®ƒå—ï¼Ÿ"></a>161ã€ä»€ä¹ˆæ˜¯ Swaggerï¼Ÿä½ ç”¨ Spring Boot å®ç°äº†å®ƒå—ï¼Ÿ</h1><p>å½“å®šä¹‰å¥½Swaggeråï¼Œå¯ä»¥è°ƒç”¨æœåŠ¡ç«¯æ¥å£ï¼Œæ¥æŸ¥çœ‹æ¥å£çš„è¿”å›å€¼ï¼ŒéªŒè¯è¿”å›æ•°æ®çš„æ­£ç¡®æ€§ï¼›</p>
<h1 id="162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>1ã€åˆ—ä¸å¯å†åˆ†ï¼›</p>
<p>2ã€æ¯ä¸€è¡Œæ•°æ®åªåšä¸€ä»¶äº‹ï¼Œåªä¸ä¸€åˆ—ç›¸å…³ï¼Œä¸»é”®ï¼›</p>
<p>3ã€æ¯ä¸ªå±æ€§éƒ½ä¸ä¸»é”®æœ‰ç›´æ¥å…³ç³»ï¼Œè€Œä¸æ˜¯é—´æ¥å…³ç³»ï¼›</p>
<p>ä¸‰å¤§èŒƒå¼åªæ˜¯è®¾è®¡æ•°æ®åº“çš„åŸºæœ¬ç†å¿µï¼Œå¯ä»¥å»ºç«‹å†—ä½™è¾ƒå°ã€ç»“æ„åˆç†çš„æ•°æ®åº“ã€‚å¦‚æœæœ‰ç‰¹æ®Šæƒ…ç»“ï¼Œå½“ç„¶è¦ç‰¹æ®Šå¯¹å¾…ï¼Œæ•°æ®åº“è®¾è®¡æœ€é‡è¦çš„æ˜¯çœ‹éœ€æ±‚å’Œæ€§èƒ½ï¼Œéœ€æ±‚&gt;æ€§èƒ½&gt;è¡¨ç»“æ„ã€‚</p>
<p>æ‰€ä»¥ä¸èƒ½ä¸€å‘³çš„è¿½æ±‚ä¸‰èŒƒå¼å»ºç«‹æ•°æ®åº“ã€‚</p>
<h1 id="163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰-7-æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å-2-æ¡æ•°æ®ï¼Œé‡å¯-mysql-æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶-id-æ˜¯å‡ ï¼Ÿ"><a href="#163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰-7-æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å-2-æ¡æ•°æ®ï¼Œé‡å¯-mysql-æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶-id-æ˜¯å‡ ï¼Ÿ" class="headerlink" title="163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰ 7 æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å 2 æ¡æ•°æ®ï¼Œé‡å¯ mysql æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶ id æ˜¯å‡ ï¼Ÿ"></a>163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰ 7 æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å 2 æ¡æ•°æ®ï¼Œé‡å¯ mysql æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶ id æ˜¯å‡ ï¼Ÿ</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„è¡¨ç±»å‹æ˜¯InnoDBã€‚</p>
<p>ä¸é‡å¯MySQLï¼Œå¦‚æœæ–°å¢ä¸€æ¡è®°å½•ï¼Œidæ˜¯8ï¼›<br>é‡å¯ï¼ŒIDæ˜¯6ï¼›å› ä¸ºInnoDBè¡¨åªæŠŠè‡ªå¢ä¸»é”®çš„æœ€å¤§IDè®°å½•åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœé‡å¯ï¼Œå·²åˆ é™¤çš„æœ€å¤§IDä¼šä¸¢å¤±ã€‚<br>å¦‚æœè¡¨ç±»å‹æ˜¯MyISAMï¼Œé‡å¯ä¹‹åï¼Œæœ€å¤§IDä¹Ÿä¸ä¼šä¸¢å¤±ï¼ŒIDæ˜¯8ï¼›</p>
<p>InnoDBå¿…é¡»æœ‰ä¸»é”®ï¼ˆå»ºè®®ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œä¸ç”¨UUIDï¼Œè‡ªå¢ä¸»é”®ç´¢å¼•æŸ¥è¯¢æ•ˆç‡é«˜ï¼‰ã€æ”¯æŒå¤–é”®ã€æ”¯æŒäº‹åŠ¡ã€æ”¯æŒè¡Œçº§é”ã€‚</p>
<p>ç³»ç»Ÿå´©æºƒåï¼ŒMyISAMå¾ˆéš¾æ¢å¤ï¼›</p>
<p>ç»¼åˆè€ƒè™‘ï¼Œä¼˜å…ˆé€‰æ‹©InnoDBï¼ŒMySQLé»˜è®¤ä¹Ÿæ˜¯InnoDBã€‚</p>
<h1 id="164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ"><a href="#164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ"></a>164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ</h1><p>&#x2F;&#x2F;MySQL,,mysql -v<br>select version();<br>&#x2F;&#x2F;Oracle<br>select * from v$version;</p>
<h1 id="165ã€è¯´ä¸€ä¸‹-ACID-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#165ã€è¯´ä¸€ä¸‹-ACID-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="165ã€è¯´ä¸€ä¸‹ ACID æ˜¯ä»€ä¹ˆï¼Ÿ"></a>165ã€è¯´ä¸€ä¸‹ ACID æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ACIDæ˜¯æ•°æ®åº“äº‹åŠ¡æ‰§è¡Œçš„å››å¤§åŸºæœ¬è¦ç´ ï¼ŒåŒ…æ‹¬åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p>
<p>1ã€åŸå­æ€§</p>
<p>æ•´ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¸å…¨éƒ¨ä¸å®Œæˆï¼Œä¸å¯èƒ½åœæ»åœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«roolbackå›æ»šåˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æœªæ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p>
<p>2ã€ä¸€è‡´æ€§</p>
<p>äº‹åŠ¡å¿…é¡»å§‹ç»ˆä¿æŒç³»ç»Ÿå¤„äºä¸€è‡´çš„çŠ¶æ€ï¼Œä¸ç®¡åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´å¹¶å‘äº‹åŠ¡æœ‰å¤šå°‘ã€‚</p>
<p>3ã€éš”ç¦»æ€§</p>
<p>éš”ç¦»çŠ¶æ€æ‰§è¡Œäº‹åŠ¡ï¼Œä½¿ä»–ä»¬å¥½åƒæ˜¯ç³»ç»Ÿåœ¨ç»™å®šæ—¶é—´å†…æ‰§è¡Œçš„å”¯ä¸€æ“ä½œã€‚</p>
<p>å¦‚æœæœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼Œè¿è¡Œåœ¨ç›¸åŒçš„æ—¶é—´å†…ï¼Œæ‰§è¡Œç›¸åŒçš„åŠŸèƒ½ï¼Œäº‹åŠ¡çš„éš”ç¦»æ€§ç¡®ä¿æ¯ä¸€ä¸ªäº‹åŠ¡åœ¨ç³»ç»Ÿä¸­è®¤ä¸ºåªæœ‰è‡ªå·±åœ¨ä½¿ç”¨ç³»ç»Ÿã€‚è¿™ç§å±æ€§ç§°ä¸ºä¸²è¡ŒåŒ–ï¼Œä¸ºäº†é˜²æ­¢äº‹åŠ¡æ“ä½œé—´çš„æ··æ·†ï¼Œå¿…é¡»ä¸²è¡ŒåŒ–æˆ–åºåˆ—åŒ–è¯·æ±‚ï¼Œä½¿å¾—åœ¨åŒä¸€æ—¶é—´ä»…æœ‰ä¸€ä¸ªè¯·æ±‚ç”¨äºåŒä¸€æ•°æ®ã€‚</p>
<p>4ã€æŒä¹…æ€§</p>
<p>ä¸€ä¸ªæˆåŠŸçš„äº‹åŠ¡å°†æ°¸ä¹…çš„æ”¹å˜ç³»ç»Ÿçš„çŠ¶æ€ã€‚</p>
<h1 id="166ã€char-å’Œ-varchar-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#166ã€char-å’Œ-varchar-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="166ã€char å’Œ varchar çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>166ã€char å’Œ varchar çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>charçš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œvarcharçš„é•¿åº¦çš„å¯å˜çš„ï¼›<br>charçš„æ•ˆç‡æ¯”varcharçš„æ•ˆç‡é«˜ï¼›<br>charå ç”¨ç©ºé—´æ¯”varcharå¤§ï¼Œcharåœ¨æŸ¥è¯¢æ—¶éœ€è¦ä½¿ç”¨trimï¼›</p>
<h1 id="167ã€float-å’Œ-double-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#167ã€float-å’Œ-double-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="167ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>167ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>1ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰å†…å­˜ä¸­å æœ‰çš„å­—èŠ‚æ•°ä¸åŒ</p>
<p>å•ç²¾åº¦æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­å æœ‰4ä¸ªå­—èŠ‚ï¼›</p>
<p>åŒç²¾åº¦æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­å æœ‰8ä¸ªå­—èŠ‚ï¼›</p>
<p>ï¼ˆ2ï¼‰æœ‰æ•ˆæ•°å­—ä½æ•°ä¸åŒ</p>
<p>å•ç²¾åº¦æµ®ç‚¹æ•°æœ‰æ•ˆæ•°å­—8ä½ï¼›</p>
<p>åŒç²¾åº¦æµ®ç‚¹æ•°æœ‰æ•ˆæ•°å­—16ä½ï¼›</p>
<p>ï¼ˆ3ï¼‰æ•°å€¼å–å€¼èŒƒå›´ä¸åŒ</p>
<p>å•ç²¾åº¦æµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š-3.40E+38~3.40E+38</p>
<p>åŒç²¾åº¦æµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š-1.79E+308~-1.79E+308</p>
<p>ï¼ˆ4ï¼‰åœ¨ç¨‹åºä¸­å¤„ç†é€Ÿåº¦ä¸åŒ</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼ŒCPUå¤„ç†å•ç²¾åº¦æµ®ç‚¹æ•°çš„é€Ÿåº¦æ¯”åŒç²¾åº¦æµ®ç‚¹æ•°çš„é€Ÿåº¦å¿«</p>
<p>å¦‚æœä¸å£°æ˜ï¼Œé»˜è®¤å°æ•°æ˜¯doubleç±»å‹ï¼Œå¦‚æœæƒ³ç”¨floatï¼Œè¦è¿›è¡Œå¼ºè½¬ï¼›</p>
<p>2ã€ä¾‹å¦‚</p>
<p>float f &#x3D; 1.3ï¼›ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯float f &#x3D; (float)1.3;æˆ–è€…float a &#x3D; 1.3f;ï¼ˆfæˆ–Féƒ½å¯ä»¥ä¸åŒºåˆ†å¤§å°å†™ï¼‰</p>
<p>3ã€æ³¨æ„</p>
<p>floatæ˜¯å…«ä½æœ‰æ•ˆæ•°å­—ï¼Œç¬¬ä¸ƒä½ä¼šå››èˆäº”å…¥ï¼›</p>
<p>4ã€é¢è¯•é¢˜</p>
<p>ï¼ˆ1ï¼‰javaä¸­3*0.1&#x3D;&#x3D;0.3å°†ä¼šè¿”å›ä»€ä¹ˆï¼Ÿtrueè¿˜æ˜¯falseï¼Ÿ</p>
<p>ç­”ï¼šè¿”å›falseï¼Œå› ä¸ºæµ®ç‚¹æ•°ä¸èƒ½å®Œå…¨ç²¾ç¡®çš„è¡¨ç¤ºå‡ºæ¥ï¼Œä¸€èˆ¬ä¼šæŸå¤±ç²¾åº¦ï¼›</p>
<p>ï¼ˆ2ï¼‰javaä¸­float f &#x3D; 3.4;æ˜¯å¦æ­£ç¡®ï¼Ÿ</p>
<p>ç­”ï¼šä¸æ­£ç¡®ã€‚å› ä¸º3.4æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå°†åŒç²¾åº¦èµ‹ç»™å•ç²¾åº¦å±äºå‘ä¸‹è½¬å‹ï¼Œä¼šé€ æˆç²¾åº¦æŸå¤±ï¼Œå› æ­¤éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢float&#x3D;ï¼ˆfloatï¼‰3.4;æˆ–è€…å†™æˆfloat f &#x3D; 3.4f;</p>
<h1 id="168ã€Oracleåˆ†é¡µsql"><a href="#168ã€Oracleåˆ†é¡µsql" class="headerlink" title="168ã€Oracleåˆ†é¡µsql"></a>168ã€Oracleåˆ†é¡µsql</h1><p>#ä¸å¸¦æ’åºçš„<br>SELECT * FROM (<br>SELECT ROWNUM AS rowno, t.* FROM worker t where ROWNUM &lt;&#x3D;20) table_alias<br>WHERE table_alias.rowno &gt; 10;<br>#å¸¦æ’åºçš„<br>SELECT * FROM (<br>SELECT tt.<em>, ROWNUM AS rowno FROM (<br>SELECT t.</em> FROM worker t ORDER BY wkid aSC) tt WHERE ROWNUM &lt;&#x3D; 20) table_alias<br>WHERE table_alias.rowno &gt;&#x3D; 10;</p>
<h1 id="169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§"><a href="#169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§" class="headerlink" title="169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§"></a>169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§</h1><p>1ã€ä¸»é”®çº¦æŸ</p>
<p>ä¸»é”®åˆ—ä¸Šæ²¡æœ‰ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒå€¼ï¼ˆå³é‡å¤å€¼ï¼‰ï¼Œä¸å…è®¸ç©ºï¼ˆNULLï¼‰ï¼›</p>
<p>2ã€å”¯ä¸€æ€§çº¦æŸ</p>
<p>ä¿è¯ä¸€ä¸ªå­—æ®µæˆ–è€…ä¸€ç»„å­—æ®µé‡Œçš„æ•°æ®éƒ½ä¸è¡¨ä¸­å…¶å®ƒè¡Œçš„å¯¹åº”æ•°æ®ä¸åŒã€‚å’Œä¸»é”®çº¦æŸä¸åŒï¼Œå”¯ä¸€æ€§çº¦æŸå…è®¸ä¸ºnullï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€è¡Œï¼›</p>
<p>3ã€å”¯ä¸€æ€§ç´¢å¼•</p>
<p>ä¸å…è®¸å…·æœ‰ç´¢å¼•å€¼ç›¸åŒçš„è¡Œï¼Œä»è€Œç¦æ­¢é‡å¤çš„ç´¢å¼•å’Œé”®å€¼ï¼›</p>
<p>4ã€ä¸‰è€…çš„åŒºåˆ«</p>
<p>çº¦æŸæ˜¯ç”¨æ¥æ£€æŸ¥æ•°æ®çš„æ­£ç¡®æ€§ï¼›<br>ç´¢å¼•æ˜¯ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢çš„ï¼›<br>åˆ›å»ºå”¯ä¸€æ€§çº¦æŸä¼šåˆ›å»ºä¸€ä¸ªçº¦æŸå’Œä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ï¼›<br>åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•åªä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ï¼›<br>ä¸»é”®çº¦æŸå’Œå”¯ä¸€æ€§çº¦æŸéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ã€‚</p>
<h1 id="170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“"><a href="#170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“" class="headerlink" title="170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“"></a>170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“</h1><p>1ã€æ•°æ®åº“è®¾è®¡æœ€èµ·ç è¦å ç”¨è¿™ä¸ªé¡¹ç›®å¼€å‘çš„40%ä»¥ä¸Šçš„æ—¶é—´</p>
<p>2ã€æ•°æ®åº“è®¾è®¡ä¸ä»…ä»…åœç•™åœ¨é¡µé¢demoçš„è¡¨é¢</p>
<p>é¡µé¢å†…å®¹æ‰€éœ€å­—æ®µï¼Œåœ¨æ•°æ®åº“è®¾è®¡ä¸­åªæ˜¯ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰ç³»ç»Ÿè¿è½¬ã€æ¨¡å—äº¤äº’ã€ä¸­è½¬æ•°æ®ã€è¡¨ä¹‹é—´çš„è”ç³»ç­‰ç­‰æ‰€éœ€è¦çš„å­—æ®µï¼Œå› æ­¤æ•°æ®åº“è®¾è®¡ç»å¯¹ä¸æ˜¯ç®€å•çš„åŸºæœ¬æ•°æ®å­˜å‚¨ï¼Œè¿˜æœ‰é€»è¾‘æ•°æ®å­˜å‚¨ã€‚</p>
<p>3ã€æ•°æ®åº“è®¾è®¡å®Œæˆåï¼Œé¡¹ç›®80%çš„è®¾è®¡å¼€å‘éƒ½è¦å­˜åœ¨ä½ çš„è„‘æµ·ä¸­</p>
<p>æ¯ä¸ªå­—æ®µçš„è®¾è®¡éƒ½è¦æœ‰ä»–å­˜åœ¨çš„æ„ä¹‰ï¼Œè¦æ¸…æ¥šçš„çŸ¥é“ç¨‹åºä¸­å¦‚ä½•å»è¿ç”¨è¿™äº›å­—æ®µï¼Œå¤šå¼ è¡¨çš„è”ç³»åœ¨ç¨‹åºä¸­æ˜¯å¦‚ä½•ä½“ç°çš„ã€‚</p>
<p>4ã€æ•°æ®åº“è®¾è®¡æ—¶å°±è¦è€ƒè™‘æ•ˆç‡å’Œä¼˜åŒ–é—®é¢˜</p>
<p>æ•°æ®é‡å¤§çš„è¡¨ç¤ºç²—ç²’åº¦çš„ï¼Œä¼šå†—ä½™ä¸€äº›å¿…è¦å­—æ®µï¼Œè¾¾åˆ°ç”¨æœ€å°‘çš„è¡¨ï¼Œæœ€å¼±çš„è¡¨å…³ç³»å»å­˜å‚¨æµ·é‡çš„æ•°æ®ã€‚å¤§æ•°æ®çš„è¡¨è¦å»ºç«‹ç´¢å¼•ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€‚å¯¹äºå«æœ‰è®¡ç®—ã€æ•°æ®äº¤äº’ã€ç»Ÿè®¡è¿™ç±»éœ€æ±‚æ—¶ï¼Œè¿˜æœ‰è€ƒè™‘æ˜¯å¦æœ‰å¿…è¦é‡‡ç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p>
<p>5ã€æ·»åŠ å¿…è¦çš„å†—ä½™å­—æ®µ</p>
<p>åƒåˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€æ“ä½œç”¨æˆ·IPã€å¤‡æ³¨è¿™äº›å­—æ®µï¼Œåœ¨æ¯å¼ è¡¨ä¸­æœ€å¥½éƒ½æœ‰ï¼Œä¸€äº›å†—ä½™çš„å­—æ®µä¾¿äºæ—¥åç»´æŠ¤ã€åˆ†æã€æ‹“å±•è€Œæ·»åŠ ã€‚</p>
<p>6ã€è®¾è®¡åˆç†çš„è¡¨å…³è” </p>
<p>è‹¥ä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»å¤æ‚ï¼Œå»ºè®®é‡‡ç”¨ç¬¬ä¸‰å¼ æ˜ å°„è¡¨æ¥å…³è”ç»´æŠ¤ä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä»¥é™ä½è¡¨ä¹‹é—´çš„ç›´æ¥è€¦åˆåº¦ã€‚</p>
<p>7ã€è®¾è®¡è¡¨æ—¶ä¸åŠ ä¸»å¤–é”®ç­‰çº¦æŸå…³è”ï¼Œç³»ç»Ÿç¼–ç é˜¶æ®µå®Œæˆåå†æ·»åŠ çº¦æŸæ€§å…³è”</p>
<p>8ã€é€‰æ‹©åˆé€‚çš„ä¸»é”®ç”Ÿæˆç­–ç•¥</p>
<p>æ•°æ®åº“çš„è®¾è®¡éš¾åº¦å…¶å®æ¯”å•çº¯çš„æŠ€æœ¯å®ç°éš¾å¾ˆå¤šï¼Œä»–å……åˆ†ä½“ç°äº†ä¸€ä¸ªäººçš„å…¨å±€è®¾è®¡èƒ½åŠ›å’ŒæŒæ§èƒ½åŠ›ï¼Œæœ€åè¯´ä¸€å¥ï¼Œæ•°æ®åº“è®¾è®¡ï¼Œå¾ˆé‡è¦ï¼Œå¾ˆå¤æ‚ã€‚</p>
<h1 id="171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•"><a href="#171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•" class="headerlink" title="171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•"></a>171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•</h1><p>åŒºåˆ†åº¦ä¸é«˜çš„å­—æ®µä¸é€‚åˆåšç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•é¡µæ˜¯éœ€è¦æœ‰å¼€é”€çš„ï¼Œéœ€è¦å­˜å‚¨çš„ï¼Œä¸è¿‡è¿™ç±»å­—æ®µå¯ä»¥åšè”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h1 id="172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®"><a href="#172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®" class="headerlink" title="172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®"></a>172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®</h1><p>1ã€æŸ¥è¯¢é‡å¤çš„å•ä¸ªå­—æ®µï¼ˆgroup byï¼‰</p>
<p>select é‡å¤å­—æ®µA, count(<em>) from è¡¨ group by é‡å¤å­—æ®µA having count(</em>) &gt; 1<br>2ã€æŸ¥è¯¢é‡å¤çš„å¤šä¸ªå­—æ®µï¼ˆgroup byï¼‰</p>
<p>select é‡å¤å­—æ®µA, é‡å¤å­—æ®µB, count(<em>) from è¡¨ group by é‡å¤å­—æ®µA, é‡å¤å­—æ®µB having count(</em>) &gt; 1</p>
<h1 id="173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"><a href="#173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ" class="headerlink" title="173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"></a>173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h1><p>1ã€é€‰å–é€‚åˆçš„å­—æ®µå±æ€§</p>
<p>ä¸ºäº†è·å–æ›´å¥½çš„æ€§èƒ½ï¼Œå¯ä»¥å°†è¡¨ä¸­çš„å­—æ®µå®½åº¦è®¾å¾—å°½å¯èƒ½å°ã€‚<br>å°½é‡æŠŠå­—æ®µè®¾ç½®æˆnot null<br>æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¸ç”¨å»æ¯”è¾ƒnullå€¼ã€‚<br>å¯¹æŸäº›çœä»½æˆ–è€…æ€§åˆ«å­—æ®µï¼Œå°†ä»–ä»¬å®šä¹‰ä¸ºenumç±»å‹ï¼Œenumç±»å‹è¢«å½“åšæ•°å€¼å‹æ•°æ®æ¥å¤„ç†ï¼Œè€Œæ•°å€¼å‹æ•°æ®è¢«å¤„ç†èµ·æ¥çš„é€Ÿåº¦è¦æ¯”æ–‡æœ¬ç±»å‹å—å¾ˆå¤šã€‚<br>2ã€ä½¿ç”¨joinè¿æ¥ä»£æ›¿å­æŸ¥è¯¢</p>
<p>3ã€ä½¿ç”¨è”åˆunionæ¥ä»£æ›¿æ‰‹åŠ¨åˆ›å»ºçš„ä¸´æ—¶è¡¨</p>
<p>æ³¨æ„ï¼šunionç”¨æ³•ä¸­ï¼Œä¸¤ä¸ªselectè¯­å¥çš„å­—æ®µç±»å‹è¦åŒ¹é…ï¼Œè€Œä¸”å­—æ®µä¸ªæ•°è¦ç›¸åŒã€‚</p>
<p>4ã€äº‹åŠ¡</p>
<p>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p>
<p>å¯ä»¥ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚äº‹åŠ¡ä»¥beginå¼€å§‹ï¼Œcommitå…³é”®å­—ç»“æŸã€‚</p>
<p>å¦‚æœå‡ºé”™ï¼Œrollbackå‘½ä»¤å¯ä»¥å°†æ•°æ®åº“æ¢å¤åˆ°beginå¼€å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<p>äº‹åŠ¡çš„å¦ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯å½“å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ç›¸åŒçš„æ•°æ®æºæ—¶ï¼Œå®ƒå¯ä»¥åˆ©ç”¨é”å®šæ•°æ®åº“çš„æ–¹å¼ä¸ºç”¨æˆ·æä¾›ä¸€ç§å®‰å…¨çš„è®¿é—®æ–¹å¼ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ç”¨æˆ·çš„æ“ä½œä¸è¢«å…¶ä»–çš„ç”¨æˆ·å¹²æ‰°ã€‚</p>
<p>5ã€é”å®šè¡¨</p>
<p>å°½ç®¡äº‹åŠ¡æ˜¯ç»´æŠ¤æ•°æ®åº“å®Œæ•´æ€§çš„ä¸€ä¸ªéå¸¸å¥½çš„æ–¹æ³•ï¼Œä½†å´å› ä¸ºå®ƒçš„ç‹¬å æ€§ï¼Œæœ‰æ—¶ä¼šå½±å“æ•°æ®åº“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§åº”ç”¨ä¸­ã€‚</p>
<p>ç”±äºåœ¨äº‹åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®åº“ä¼šè¢«é”å®šï¼Œå› æ­¤å…¶å®ƒç”¨æˆ·åªèƒ½æš‚æ—¶ç­‰å¾…ç›´åˆ°äº‹åŠ¡ç»“æŸã€‚</p>
<p>æœ‰çš„æ—¶å€™å¯ä»¥ç”¨é”å®šè¡¨çš„æ–¹æ³•æ¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œ</p>
<p>å…±äº«é”ï¼šå…¶å®ƒç”¨æˆ·åªèƒ½çœ‹ï¼Œä¸èƒ½ä¿®æ”¹</p>
<p>lock table person in share modeï¼›</p>
<p>å¯¹äºé€šè¿‡lock table å‘½ä»¤ä¸»åŠ¨æ·»åŠ çš„é”æ¥è¯´ï¼Œå¦‚æœè¦é‡Šæ”¾å®ƒä»¬ï¼Œåªéœ€å‘å‡ºrollbackå‘½ä»¤å³å¯ã€‚</p>
<p>6ã€ä½¿ç”¨å¤–é”®</p>
<p>é”å®šè¡¨çš„æ–¹æ³•å¯ä»¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ï¼Œä½†æ˜¯å®ƒå´ä¸èƒ½ä¿è¯æ•°æ®çš„å…³è”æ€§ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨å¤–é”®ã€‚</p>
<p>7ã€ä½¿ç”¨ç´¢å¼•</p>
<p>ç´¢å¼•æ˜¯æé«˜æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦çš„å¸¸ç”¨æ–¹æ³•ï¼Œå°¤å…¶æ˜¯æŸ¥è¯¢è¯­å¥ä¸­åŒ…å«max()ã€min()ã€order byè¿™äº›å‘½ä»¤çš„æ—¶å€™ï¼Œæ€§èƒ½æé«˜æ›´ä¸ºæ˜¾è‘—ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ç´¢å¼•åº”è¯¥å»ºåœ¨å¸¸ç”¨äºjoinã€whereã€order byçš„å­—æ®µä¸Šã€‚å°½é‡ä¸è¦å¯¹æ•°æ®åº“ä¸­å«æœ‰å¤§é‡é‡å¤çš„å€¼å¾—å­—æ®µå»ºç«‹ç´¢å¼•ã€‚</p>
<p>8ã€ä¼˜åŒ–çš„æŸ¥è¯¢è¯­å¥</p>
<p>åœ¨ç´¢å¼•çš„å­—æ®µä¸Šå°½é‡ä¸è¦ä½¿ç”¨å‡½æ•°è¿›è¡Œæ“ä½œã€‚</p>
<p>å°½é‡ä¸è¦ä½¿ç”¨likeå…³é”®å­—å’Œé€šé…ç¬¦ï¼Œè¿™æ ·åšæ³•å¾ˆç®€å•ï¼Œä½†å´æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ã€‚</p>
<p>é¿å…åœ¨æŸ¥è¯¢ä¸­è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå› ä¸ºç±»å‹è½¬æ¢ä¹Ÿä¼šä½¿ç´¢å¼•å¤±æ•ˆã€‚</p>
<h1 id="174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§"><a href="#174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§" class="headerlink" title="174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§"></a>174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§</h1><p>b-treeç´¢å¼•ï¼Œå¦‚æœä¸å»ºç«‹ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œoracleå°±è‡ªåŠ¨ç»™æ¯ä¸€åˆ—éƒ½åŠ ä¸€ä¸ªB æ ‘ç´¢å¼•;<br>normalï¼šæ™®é€šç´¢å¼•<br>uniqueï¼šå”¯ä¸€ç´¢å¼•<br>bitmapï¼šä½å›¾ç´¢å¼•ï¼Œä½å›¾ç´¢å¼•ç‰¹å®šäºåªæœ‰å‡ ä¸ªæšä¸¾å€¼çš„æƒ…å†µï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µï¼›<br>åŸºäºå‡½æ•°çš„ç´¢å¼•</p>
<h1 id="175ã€mysql-çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#175ã€mysql-çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="175ã€mysql çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>175ã€mysql çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>å†…è¿æ¥,æ˜¾ç¤ºä¸¤ä¸ªè¡¨ä¸­æœ‰è”ç³»çš„æ‰€æœ‰æ•°æ®;<br>å·¦é“¾æ¥,ä»¥å·¦è¡¨ä¸ºå‚ç…§,æ˜¾ç¤ºæ‰€æœ‰æ•°æ®,å³è¡¨ä¸­æ²¡æœ‰åˆ™ä»¥nullæ˜¾ç¤º<br>å³é“¾æ¥,ä»¥å³è¡¨ä¸ºå‚ç…§æ˜¾ç¤ºæ•°æ®ï¼Œ,å·¦è¡¨ä¸­æ²¡æœ‰åˆ™ä»¥nullæ˜¾ç¤º</p>
<h1 id="176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"><a href="#176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"></a>176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h1><p>1ã€è§£å†³å¼‚æ­¥é—®é¢˜</p>
<p>ä¾‹å¦‚ç”¨æˆ·æ³¨å†Œï¼Œå‘é€é‚®ä»¶å’ŒçŸ­ä¿¡åé¦ˆæ³¨å†ŒæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…åé¦ˆã€‚</p>
<p>2ã€æœåŠ¡é—´è§£è€¦</p>
<p>è®¢å•ç³»ç»Ÿå’Œåº“å­˜ç³»ç»Ÿï¼Œä¸­é—´åŠ å…¥RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå½“åº“å­˜ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œè®¢å•ç³»ç»Ÿä¾æ—§èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé™ä½æœåŠ¡é—´è€¦åˆåº¦ã€‚</p>
<p>3ã€ç§’æ€ç³»ç»Ÿ</p>
<p>åˆ©ç”¨RabbitMQçš„æœ€å¤§å€¼ï¼Œå®ç°ç§’æ€ç³»ç»Ÿã€‚</p>
<h1 id="177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ"><a href="#177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ" class="headerlink" title="177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ"></a>177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ</h1><p>1ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿ</p>
<p>å®¢æˆ·ç«¯ã€RabbitMQã€æœåŠ¡ç«¯ã€‚</p>
<p>2ã€æœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰connectionFactoryï¼ˆè¿æ¥ç®¡ç†å™¨ï¼‰</p>
<p>åº”ç”¨ç¨‹åºä¸RabbitMQä¹‹é—´å»ºç«‹è¿æ¥çš„ç®¡ç†å™¨ã€‚</p>
<p>ï¼ˆ2ï¼‰Channelï¼ˆä¿¡é“ï¼‰</p>
<p>æ¶ˆæ¯æ¨é€ä½¿ç”¨çš„ä¿¡é“ã€‚</p>
<p>ï¼ˆ3ï¼‰RoutingKeyï¼ˆè·¯ç”±é”®ï¼‰</p>
<p>ç”¨äºæŠŠç”Ÿäº§è€…çš„æ•°æ®åˆ†é…åˆ°äº¤æ¢æœºä¸Šã€‚</p>
<p>ï¼ˆ4ï¼‰Exchangeï¼ˆäº¤æ¢æœºï¼‰</p>
<p>ç”¨äºæ¥å—å’Œåˆ†é…æ¶ˆæ¯ã€‚</p>
<p>ï¼ˆ5ï¼‰BindKeyï¼ˆç»‘å®šé”®ï¼‰</p>
<p>ç”¨äºæŠŠäº¤æ¢æœºçš„æ¶ˆæ¯ç»‘å®šåˆ°é˜Ÿåˆ—ä¸Š</p>
<p>ï¼ˆ6ï¼‰Queueï¼ˆé˜Ÿåˆ—ï¼‰</p>
<p>ç”¨äºå­˜å‚¨ç”Ÿäº§è€…æ¶ˆæ¯ã€‚</p>
<h1 id="178ã€RabbitMQä¸­-vhost-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#178ã€RabbitMQä¸­-vhost-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="178ã€RabbitMQä¸­ vhost çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>178ã€RabbitMQä¸­ vhost çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>vhostå¯ä»¥ç†è§£ä¸ºminiç‰ˆçš„RabbitMQï¼Œå…¶å†…éƒ¨å‡å«æœ‰ç‹¬ç«‹çš„äº¤æ¢æœºã€ç»‘å®šã€é˜Ÿåˆ—ï¼Œæœ€é‡è¦çš„æ˜¯æ‹¥æœ‰ç‹¬ç«‹çš„æƒé™ç³»ç»Ÿï¼Œå¯ä»¥åšåˆ°vhostèŒƒå›´å†…çš„ç”¨æˆ·æ§åˆ¶ã€‚ä»RabbitMQå…¨å±€è€ƒè™‘ï¼Œä¸åŒçš„åº”ç”¨å¯ä»¥è·‘åœ¨ä¸åŒçš„vhostä¸Šï¼Œä½œä¸ºä¸åŒæƒé™éš”ç¦»çš„æ‰‹æ®µã€‚</p>
<h1 id="179ã€è¯´ä¸€ä¸‹-jvm-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ"><a href="#179ã€è¯´ä¸€ä¸‹-jvm-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ" class="headerlink" title="179ã€è¯´ä¸€ä¸‹ jvm çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ"></a>179ã€è¯´ä¸€ä¸‹ jvm çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ</h1><p>JVMåŒ…æ‹¬ç±»åŠ è½½å­ç³»ç»Ÿã€å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€ç›´æ¥å†…å­˜ã€åƒåœ¾å›æ”¶å™¨ã€æ‰§è¡Œå¼•æ“ã€‚</p>
<p>1ã€ç±»åŠ è½½å­ç³»ç»Ÿ</p>
<p>ç±»åŠ è½½å­ç³»ç»Ÿè´Ÿè´£åŠ è½½classä¿¡æ¯ï¼ŒåŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºæ–¹æ³•åŒºä¸­ã€‚</p>
<p>2ã€ç›´æ¥å†…å­˜</p>
<p>ç›´æ¥å†…å­˜æ˜¯åœ¨Javaå †å¤–çš„ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜ç©ºé—´ã€‚è®¿é—®ç›´æ¥å†…å­˜çš„é€Ÿåº¦ä¼šç”±äºJavaå †ã€‚å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œè¯»å†™é¢‘ç¹çš„åœºåˆå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç›´æ¥å†…å­˜ã€‚</p>
<p>3ã€åƒåœ¾å›æ”¶å™¨</p>
<p>åƒåœ¾å›æ”¶å™¨å¯ä»¥å¯¹å †ã€æ–¹æ³•åŒºã€ç›´æ¥å†…å­˜è¿›è¡Œå›æ”¶ã€‚</p>
<p>4ã€æ‰§è¡Œå¼•æ“</p>
<p>æ‰§è¡Œå¼•æ“è´Ÿè´£æ‰§è¡Œè™šæ‹Ÿæœºçš„å­—èŠ‚ç ï¼Œè™šæ‹Ÿæœºä¼šä½¿ç”¨å³æ—¶ç¼–è¯‘æŠ€æœ¯å°†æ–¹æ³•ç¼–è¯‘æˆæœºå™¨ç åå†æ‰§è¡Œã€‚</p>
<h1 id="180ã€è¯´ä¸€ä¸‹-jvm-è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ"><a href="#180ã€è¯´ä¸€ä¸‹-jvm-è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ" class="headerlink" title="180ã€è¯´ä¸€ä¸‹ jvm è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ"></a>180ã€è¯´ä¸€ä¸‹ jvm è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ</h1><p>è¿è¡Œæ—¶æ•°æ®åŒºåŒ…æ‹¬å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€‚</p>
<p>1ã€å †</p>
<p>å †è§£å†³çš„æ˜¯å¯¹è±¡å®ä¾‹å­˜å‚¨çš„é—®é¢˜ï¼Œåƒåœ¾å›æ”¶å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚</p>
<p>2ã€æ–¹æ³•åŒº</p>
<p>æ–¹æ³•åŒºå¯ä»¥è®¤ä¸ºæ˜¯å †çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ä¿¡æ¯ï¼Œå¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ã€‚</p>
<p>3ã€æ ˆ</p>
<p>æ ˆè§£å†³çš„æ˜¯ç¨‹åºè¿è¡Œçš„é—®é¢˜ï¼Œæ ˆé‡Œé¢å­˜çš„æ˜¯æ ˆå¸§ï¼Œæ ˆå¸§é‡Œé¢å­˜çš„æ˜¯å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</p>
<p>ï¼ˆ1ï¼‰æ ˆå¸§</p>
<p>æ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨åˆ°æ‰§è¡Œçš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p>ï¼ˆ2ï¼‰å±€éƒ¨å˜é‡è¡¨</p>
<p>ç”¨äºä¿å­˜å‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚</p>
<p>ï¼ˆ3ï¼‰æ“ä½œæ•°æ ˆ</p>
<p>æ“ä½œæ•°æ ˆåˆç§°æ“ä½œæ ˆï¼Œå¤§å¤šæ•°æŒ‡ä»¤éƒ½æ˜¯ä»è¿™é‡Œå¼¹å‡ºæ•°æ®ï¼Œæ‰§è¡Œè¿ç®—ï¼Œç„¶åæŠŠç»“æœå‹å›æ“ä½œæ•°æ ˆã€‚</p>
<p>4ã€æœ¬åœ°æ–¹æ³•æ ˆ</p>
<p>ä¸æ ˆåŠŸèƒ½ç›¸åŒï¼Œæœ¬åœ°æ–¹æ³•æ ˆæ‰§è¡Œçš„æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œä¸€ä¸ªJavaè°ƒç”¨éJavaä»£ç çš„æ¥å£ã€‚</p>
<p>5ã€ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰</p>
<p>ç¨‹åºè®¡æ•°å™¨ä¸­å­˜æ”¾çš„æ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œæ•°ã€‚JVMå·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€ä¸ªéœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p>
<h1 id="181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"></a>181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</h1><p>1ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ</p>
<p>ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½æ‰€æœ‰çš„ç±»ï¼Œå…¶ä¸ºæ‰€æœ‰è¢«è½½å…¥å†…å­˜çš„ç±»ç”Ÿæˆä¸€ä¸ªjava.lang.Classå®ä¾‹å¯¹è±¡ã€‚</p>
<p>2ã€ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</p>
<p>JVMæœ‰ä¸‰ç§ç±»åŠ è½½å™¨ï¼š</p>
<p>ï¼ˆ1ï¼‰å¯åŠ¨ç±»åŠ è½½å™¨</p>
<p>è¯¥ç±»æ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œç”¨æ¥åŠ è½½Javaçš„æ ¸å¿ƒç±»ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨çš„å®ç°ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿï¼Œå±äºè™šæ‹Ÿæœºå®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¹¶ä¸ç»§æ‰¿è‡ªjava.lang.classLoaderã€‚</p>
<p>ï¼ˆ2ï¼‰æ‰©å±•ç±»åŠ è½½å™¨</p>
<p>å®ƒçš„çˆ¶ç±»ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨æ˜¯çº¯javaç±»ï¼Œæ˜¯ClassLoaderç±»çš„å­ç±»ï¼Œè´Ÿè´£åŠ è½½JREçš„æ‰©å±•ç›®å½•ã€‚</p>
<p>ï¼ˆ3ï¼‰åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</p>
<p>å®ƒçš„çˆ¶ç±»ä¸ºæ‰©å±•ç±»åŠ è½½å™¨ï¼Œå®ƒä»ç¯å¢ƒå˜é‡classpathæˆ–è€…ç³»ç»Ÿå±æ€§java.lang.pathæ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»ï¼Œå®ƒæ˜¯è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨ã€‚</p>
<h1 id="182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"><a href="#182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ" class="headerlink" title="182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"></a>182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h1><p>å½“ç¨‹åºä¸»åŠ¨ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒJVMä¼šé€šè¿‡åŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–3ä¸ªæ­¥éª¤å¯¹è¯¥ç±»è¿›è¡Œç±»åŠ è½½ã€‚</p>
<p>1ã€åŠ è½½</p>
<p>åŠ è½½æŒ‡çš„æ˜¯å°†ç±»çš„classæ–‡ä»¶è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ªjava.lang.Classå¯¹è±¡ã€‚</p>
<p>ç±»çš„åŠ è½½ç”±ç±»åŠ è½½å™¨å®Œæˆï¼Œç±»åŠ è½½å™¨ç”±JVMæä¾›ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿ClassLoaderåŸºç±»æ¥åˆ›å»ºè‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨å¯ä»¥ä»ä¸åŒæ¥æºåŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œé€šå¸¸æœ‰å¦‚ä¸‹å‡ ç§æ¥æºï¼š</p>
<p>ä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½<br>ä»jaråŒ…åŠ è½½<br>é€šè¿‡ç½‘ç»œåŠ è½½<br>æŠŠä¸€ä¸ªJavaæºæ–‡ä»¶åŠ¨æ€ç¼–è¯‘ï¼Œå¹¶æ‰§è¡ŒåŠ è½½<br>2ã€è¿æ¥</p>
<p>å½“ç±»è¢«åŠ è½½ä¹‹åï¼Œç³»ç»Ÿä¸ºä¹‹ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„Classå¯¹è±¡ï¼Œæ¥ç€è¿›å…¥è¿æ¥é˜¶æ®µï¼Œè¿æ¥é˜¶æ®µè´Ÿè´£å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®åˆå¹¶åˆ°JREä¸­ã€‚</p>
<p>ç±»è¿æ¥åˆå¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>ï¼ˆ1ï¼‰éªŒè¯</p>
<p>æ–‡ä»¶æ ¼å¼éªŒè¯<br>å…ƒæ•°æ®éªŒè¯<br>å­—èŠ‚ç éªŒè¯<br>ç¬¦å·å¼•ç”¨éªŒè¯</p>
<p>ï¼ˆ2ï¼‰å‡†å¤‡</p>
<p>ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹å€¼ã€‚</p>
<p>ï¼ˆ3ï¼‰è§£æ</p>
<p>å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨ã€‚</p>
<p>3ã€åˆå§‹åŒ–</p>
<p>ä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆåˆå§‹å€¼ã€‚</p>
<h1 id="183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>JVMç±»åŠ è½½æœºåˆ¶ä¸»è¦æœ‰ä¸‰ç§ï¼š</p>
<p>1ã€å…¨ç›˜è´Ÿè´£</p>
<p>ç±»åŠ è½½å™¨åŠ è½½æŸä¸ªclassæ—¶ï¼Œè¯¥classæ‰€ä¾èµ–çš„å’Œå¼•ç”¨å…¶å®ƒçš„classä¹Ÿç”±è¯¥ç±»åŠ è½½å™¨è½½å…¥ã€‚</p>
<p>2ã€åŒäº²å§”æ´¾</p>
<p>å…ˆè®©çˆ¶åŠ è½½å™¨åŠ è½½è¯¥classï¼Œçˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶æ‰è€ƒè™‘è‡ªå·±åŠ è½½ã€‚</p>
<p>3ã€ç¼“å­˜æœºåˆ¶</p>
<p>ç¼“å­˜æœºåˆ¶ä¿è¯æ‰€æœ‰åŠ è½½è¿‡çš„classéƒ½ä¼šè¢«ç¼“å­˜ï¼Œå½“ç¨‹åºä¸­éœ€è¦æŸä¸ªclassæ—¶ï¼Œå…ˆä»ç¼“å­˜åŒºä¸­æœç´¢ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰ä¼šè¯»å–è¯¥ç±»å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢æˆclasså¯¹è±¡ï¼Œå­˜å…¥ç¼“å­˜åŒºä¸­ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¿®æ”¹äº†classåï¼Œå¿…é¡»é‡å¯JVMï¼Œç¨‹åºæ‰€åšçš„ä¿®æ”¹æ‰ä¼šç”Ÿæ•ˆçš„åŸå› ã€‚</p>
<h1 id="184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ"><a href="#184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ" class="headerlink" title="184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ"></a>184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ</h1><p>å¦‚æœä¸€ä¸ªç±»æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨æ‰§è¡Œï¼Œå¦‚æœçˆ¶åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚å°†æœ€ç»ˆåˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆçˆ¶åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å‹ã€‚</p>
<p>åŒäº²å§”æ´¾æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</p>
<p>é¿å…é‡å¤åŠ è½½ï¼›<br>è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼Œjavaæ ¸å¿ƒapiä¸­å®šä¹‰ç±»å‹ä¸ä¼šè¢«éšæ„æ›¿æ¢ï¼Œå‡è®¾é€šè¿‡ç½‘ç»œä¼ é€’ä¸€ä¸ªåä¸ºjava.lang.Integerçš„ç±»ï¼Œé€šè¿‡åŒäº²å§”æ´¾æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨åŠ è½½å™¨ï¼Œè€Œå¯åŠ¨åŠ è½½å™¨åœ¨æ ¸å¿ƒJava APIä¸­å‘ç°åŒåçš„ç±»ï¼Œå‘ç°è¯¥ç±»å·²ç»è¢«åŠ è½½ï¼Œå°±ä¸ä¼šé‡æ–°åŠ è½½ç½‘ç»œä¼ é€’çš„Integerç±»ï¼Œè€Œç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„Integer.classï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢æ ¸å¿ƒAPIåº“è¢«éšæ„ç¯¡æ”¹ã€‚</p>
<h1 id="185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ"><a href="#185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ" class="headerlink" title="185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ"></a>185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ</h1><p>1ã€å¼•ç”¨è®¡æ•°ç®—æ³•</p>
<p>ï¼ˆ1ï¼‰åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡</p>
<p>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼›<br>æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œè¢«å¼•ç”¨+1ï¼Œå®Œæˆå¼•ç”¨-1ï¼›<br>ä»»ä½•å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡å®ä¾‹å¯ä»¥è¢«å½“åšåƒåœ¾å›æ”¶ï¼›</p>
<p>ï¼ˆ2ï¼‰ä¼˜ç¼ºç‚¹</p>
<p>ä¼˜ç‚¹ï¼šæ‰§è¡Œæ•ˆç‡é«˜ï¼Œç¨‹åºå—å½±å“è¾ƒå°ï¼›<br>ç¼ºç‚¹ï¼šæ— æ³•æ£€æµ‹å‡ºå¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼›</p>
<p>2ã€å¯è¾¾æ€§åˆ†æç®—æ³•</p>
<p>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨é“¾æ˜¯å¦å¯è¾¾æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ã€‚</p>
<p>å¦‚æœç¨‹åºæ— æ³•å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡è‚¯å®šå¯ä»¥è¢«å›æ”¶ï¼Œè¿™ä¸ªçŠ¶æ€ç§°ä¸ºä¸å¯è¾¾ã€‚</p>
<p>é‚£ä¹ˆä¸å¯è¾¾çŠ¶æ€å¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯GC rootsï¼Œä¹Ÿå°±æ˜¯æ ¹å¯¹è±¡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ— æ³•åˆ°è¾¾æ ¹å¯¹è±¡çš„è·¯å¾„ï¼Œæˆ–è€…è¯´ä»æ ¹å¯¹è±¡æ— æ³•å¼•ç”¨åˆ°è¯¥å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯ä¸å¯è¾¾çš„ã€‚</p>
<p>ä»¥ä¸‹ä¸‰ç§å¯¹è±¡åœ¨JVMä¸­è¢«ç§°ä¸ºGC rootsï¼Œæ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ã€‚</p>
<p>ï¼ˆ1ï¼‰è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§</p>
<p>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼ŒJVMéƒ½ä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”çš„æ ˆå¸§ï¼ˆæ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨ã€è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ï¼‰ï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œï¼Œè¯¥æ ˆå¸§å°±ä»æ ˆä¸­å¼¹å‡ºï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ–¹æ³•ä¸­ä¸´æ—¶åˆ›å»ºçš„ç‹¬äº«å°±ä¸å­˜åœ¨äº†ï¼Œæˆ–è€…è¯´æ²¡æœ‰ä»»ä½•GC rootsæŒ‡å‘è¿™äº›ä¸´æ—¶å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡GCçš„æ—¶å€™ä¾¿ä¼šè¢«å›æ”¶ã€‚</p>
<p>ï¼ˆ2ï¼‰æ–¹æ³•åŒºä¸­çš„é™æ€å±æ€§</p>
<p>é™æ€å±æ€§æ•°æ®ç±»å±æ€§ï¼Œä¸å±äºä»»ä½•å®ä¾‹ï¼Œå› æ­¤è¯¥å±æ€§è‡ªç„¶ä¼šä½œä¸ºGC rootsã€‚è¿™è¦è¿™ä¸ªclassåœ¨ï¼Œè¯¥å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡å°±ä¸€ç›´å­˜åœ¨ï¼Œclassä¹Ÿç”±è¢«å›æ”¶çš„æ—¶å€™ã€‚</p>
<p>classä½•æ—¶ä¼šè¢«å›æ”¶ï¼Ÿ</p>
<p>å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹<br>åŠ è½½è¯¥ç±»çš„classLoaderå·²ç»è¢«å›æ”¶<br>è¯¥ç±»çš„java.lang.classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„ä¿¡æ¯<br>ï¼ˆ3ï¼‰æœ¬åœ°æ–¹æ³•æ ˆå¼•ç”¨çš„å¯¹è±¡</p>
<h1 id="186ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"><a href="#186ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ" class="headerlink" title="186ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"></a>186ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ</h1><p>1ã€å¯¹è±¡æ˜¯å¦å·²æ­»ç®—æ³•</p>
<p>å¼•ç”¨è®¡æ•°å™¨ç®—æ³•<br>å¯è¾¾æ€§åˆ†æç®—æ³•<br>2ã€GCç®—æ³•</p>
<p>ï¼ˆ1ï¼‰æ ‡è®°æ¸…é™¤ç®—æ³•</p>
<p>å¦‚æœå¯¹è±¡è¢«æ ‡è®°åè¿›è¡Œæ¸…é™¤ï¼Œä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜â€“å†…å­˜ç¢ç‰‡åŒ–ã€‚å¦‚æœä¸‹æ¬¡æœ‰æ¯”è¾ƒå¤§çš„å¯¹è±¡å®ä¾‹éœ€è¦åœ¨å †ä¸Šåˆ†é…è¾ƒå¤§çš„å†…å­˜ç©ºé—´æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸å†æ¬¡è§¦å‘åƒåœ¾å›æ”¶ã€‚</p>
<p>ï¼ˆ2ï¼‰å¤åˆ¶ç®—æ³•ï¼ˆJavaå †ä¸­æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼‰</p>
<p>å…ˆæ ‡è®°å¾…å›æ”¶å†…å­˜å’Œä¸ç”¨å›æ”¶å†…å­˜ï¼›<br>å°†ä¸ç”¨å›æ”¶çš„å†…å­˜å¤åˆ¶åˆ°æ–°çš„å†…å­˜åŒºåŸŸï¼›<br>å°±çš„å†…å­˜åŒºåŸŸå°±å¯ä»¥è¢«å…¨éƒ¨å›æ”¶äº†ï¼Œè€Œæ–°çš„å†…å­˜åŒºåŸŸä¹Ÿæ˜¯è¿ç»­çš„ï¼›<br>ç¼ºç‚¹æ˜¯æŸå¤±éƒ¨åˆ†ç³»ç»Ÿå†…å­˜ï¼Œå› ä¸ºè…¾å‡ºéƒ¨åˆ†å†…å­˜è¿›è¡Œå¤åˆ¶ã€‚</p>
<p>ï¼ˆ3ï¼‰æ ‡è®°å‹ç¼©ç®—æ³•ï¼ˆJavaå †ä¸­è€å¹´ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼‰</p>
<p>å¯¹äºæ–°ç”Ÿä»£ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡éƒ½ä¸ä¼šå­˜æ´»ï¼Œæ‰€ä»¥å¤åˆ¶ç®—æ³•è¾ƒé«˜æ•ˆï¼Œä½†å¯¹äºè€å¹´ä»£ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡å¯èƒ½è¦ç»§ç»­å­˜æ´»ï¼Œå¦‚æœæ­¤æ—¶ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œæ•ˆç‡ä¼šé™ä½ã€‚</p>
<p>æ ‡è®°å‹ç¼©ç®—æ³•é¦–å…ˆè¿˜æ˜¯æ ‡è®°ï¼Œå°†ä¸ç”¨å›æ”¶çš„å†…å­˜å¯¹è±¡å‹ç¼©åˆ°å†…å­˜ä¸€ç«¯ï¼Œæ­¤æ—¶å³å¯æ¸…é™¤è¾¹ç•Œå¤„çš„å†…å­˜ï¼Œè¿™æ ·å°±èƒ½é¿å…å¤åˆ¶ç®—æ³•å¸¦æ¥çš„æ•ˆç‡é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½é¿å…å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚</p>
<p>è€å¹´ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ç§°ä¸ºâ€œMajor GCâ€ã€‚</p>
<h1 id="187ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ"><a href="#187ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ" class="headerlink" title="187ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ"></a>187ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ</h1><p>è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ</p>
<h1 id="188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡"><a href="#188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡" class="headerlink" title="188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡"></a>188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡</h1><p>ç±»åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å°±ä¼šè¢«åŠ è½½ï¼Œæ–¹æ³•æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šè¢«åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•å¼•ç”¨äº†ï¼ŒJavaè‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œä¹Ÿå¯ä»¥ç”¨System.gc()å¼€å¯å›æ”¶å™¨ï¼Œä½†æ˜¯å›æ”¶å™¨ä¸ä¸€å®šä¼šé©¬ä¸Šå›æ”¶ã€‚<br>é™æ€å˜é‡åœ¨ç±»è£…è½½çš„æ—¶å€™è¿›è¡Œåˆ›å»ºï¼Œåœ¨æ•´ä¸ªç¨‹åºç»“æŸæ—¶æŒ‰åºé”€æ¯ï¼›<br>å®ä¾‹å˜é‡åœ¨ç±»å®ä¾‹åŒ–å¯¹è±¡æ—¶åˆ›å»ºï¼Œåœ¨å¯¹è±¡é”€æ¯çš„æ—¶å€™é”€æ¯ï¼›<br>å±€éƒ¨å˜é‡åœ¨å±€éƒ¨èŒƒå›´å†…ä½¿ç”¨æ—¶åˆ›å»ºï¼Œè·³å‡ºå±€éƒ¨èŒƒå›´æ—¶é”€æ¯ï¼›</p>
<h1 id="189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>æ–°ç”Ÿä»£å›æ”¶å™¨ï¼šSerialã€ParNewã€Parallel Scavenge</p>
<p>è€å¹´ä»£å›æ”¶å™¨ï¼šSerial Oldã€Parallel Oldã€CMS</p>
<p>æ–°ç”Ÿä»£å›æ”¶å™¨ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•ï¼Œå¤åˆ¶ç®—æ³•æ•ˆç‡è¾ƒé«˜ï¼Œä½†æ˜¯æµªè´¹å†…å­˜ï¼›</p>
<p>è€ç”Ÿä»£å›æ”¶å™¨ä¸€èˆ¬é‡‡ç”¨æ ‡è®°æ¸…æ¥šç®—æ³•ï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„CMSï¼›</p>
<h1 id="190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹-CMS-åƒåœ¾å›æ”¶å™¨ï¼Ÿ"><a href="#190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹-CMS-åƒåœ¾å›æ”¶å™¨ï¼Ÿ" class="headerlink" title="190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹ CMS åƒåœ¾å›æ”¶å™¨ï¼Ÿ"></a>190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹ CMS åƒåœ¾å›æ”¶å™¨ï¼Ÿ</h1><p>CMS åƒåœ¾å›æ”¶å™¨æ˜¯Concurrent Mark Sweepï¼Œæ˜¯ä¸€ç§åŒæ­¥çš„æ ‡è®°-æ¸…é™¤ï¼ŒCMSåˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p>
<p>åˆå§‹æ ‡è®°ï¼Œæ ‡è®°ä¸€ä¸‹GC Rootèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œä¼šè§¦å‘â€œStop The Worldâ€ï¼›<br>å¹¶å‘æ ‡è®°ï¼Œé€šè¿‡GC Roots Tracingåˆ¤æ–­å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ä¸­ï¼›<br>é‡æ–°æ ‡è®°ï¼Œæ ‡è®°æœŸé—´äº§ç”Ÿå¯¹è±¡çš„å†æ¬¡åˆ¤æ–­ï¼Œæ‰§è¡Œæ—¶é—´è¾ƒçŸ­ï¼Œä¼šè§¦å‘â€œStop The Worldâ€ï¼›<br>å¹¶å‘æ¸…é™¤ï¼Œæ¸…é™¤å¯¹è±¡ï¼Œå¯ä»¥å’Œç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿›è¡Œï¼›</p>
<h1 id="191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"><a href="#191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ" class="headerlink" title="191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"></a>191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h1><p>åˆ†ä»£å›æ”¶å™¨åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£å¤§æ¦‚å 1&#x2F;3ï¼Œè€å¹´ä»£å¤§æ¦‚å 2&#x2F;3ï¼›</p>
<p>æ–°ç”Ÿä»£åŒ…æ‹¬Edenã€From Survivorã€To Survivorï¼›</p>
<p>EdenåŒºå’Œä¸¤ä¸ªsurvivoråŒºçš„ çš„ç©ºé—´æ¯”ä¾‹ ä¸º8ï¼š1ï¼š1 ï¼›</p>
<p>åƒåœ¾å›æ”¶å™¨çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<p>æŠŠ Eden + From Survivor å­˜æ´»çš„å¯¹è±¡æ”¾å…¥ To Survivor åŒºï¼›<br>æ¸…ç©º Eden + From Survivor åˆ†åŒºï¼ŒFrom Survivor å’Œ To Survivor åˆ†åŒºäº¤æ¢ï¼›<br>æ¯æ¬¡äº¤æ¢åå­˜æ´»çš„å¯¹è±¡å¹´é¾„+1ï¼Œåˆ°è¾¾15ï¼Œå‡çº§ä¸ºè€å¹´ä»£ï¼Œå¤§å¯¹è±¡ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ï¼›<br>è€å¹´ä»£ä¸­å½“ç©ºé—´åˆ°è¾¾ä¸€å®šå æ¯”ï¼Œä¼šè§¦å‘å…¨å±€å›æ”¶ï¼Œè€å¹´ä»£ä¸€èˆ¬é‡‡å–æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼›</p>
<h1 id="192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ"></a>192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>Redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬stringã€listã€setã€zsetï¼ˆsorted set â€“æœ‰åºé›†åˆï¼‰å’Œhashã€‚è¿™äº›æ•°æ®ç»“æ„éƒ½æ”¯æŒpush&#x2F;popã€add&#x2F;removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒRedisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼ŒRedisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slaveï¼ˆä¸»ä»ï¼‰åŒæ­¥ã€‚</p>
<h1 id="193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</h1><p>Redisæ˜¯åŸºäºå†…å­˜çš„nosqlæ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡æ–°å»ºçº¿ç¨‹çš„å½¢å¼è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¸å½±å“Rediså•çº¿ç¨‹çš„è¯»å†™æ“ä½œ<br>é€šè¿‡listå–æœ€æ–°çš„Næ¡æ•°æ®<br>æ¨¡æ‹Ÿç±»ä¼¼äºtokenè¿™ç§éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´çš„åœºæ™¯<br>å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿ<br>å®šæ—¶å™¨ã€è®¡æ•°å™¨</p>
<h1 id="194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ"><a href="#194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ" class="headerlink" title="194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ"></a>194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ</h1><p>1ã€åŸºäºæœ¬æœºå†…å­˜çš„ç¼“å­˜</p>
<p>å½“è°ƒç”¨apiè®¿é—®æ•°æ®åº“æ—¶ï¼Œå‡å¦‚æ­¤è¿‡ç¨‹éœ€è¦2ç§’ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½è¦è®¿é—®æ•°æ®åº“ï¼Œé‚£å°†å¯¹æœåŠ¡å™¨é€ æˆå·¨å¤§çš„å‹åŠ›ï¼Œå¦‚æœå°†æ­¤sqlçš„æŸ¥è¯¢ç»“æœå­˜åˆ°Redisä¸­ï¼Œå†æ¬¡è¯·æ±‚æ—¶ï¼Œç›´æ¥ä»Redisä¸­å–å¾—ï¼Œè€Œä¸æ˜¯è®¿é—®æ•°æ®åº“ï¼Œæ•ˆç‡å°†å¾—åˆ°å·¨å¤§çš„æå‡ï¼ŒRediså¯ä»¥å®šæ—¶å»æ›´æ–°æ•°æ®ï¼ˆæ¯”å¦‚1åˆ†é’Ÿï¼‰ã€‚</p>
<p>2ã€å¦‚æœç”µè„‘é‡å¯ï¼Œå†™å…¥å†…å­˜çš„æ•°æ®æ˜¯ä¸æ˜¯å°±å¤±æ•ˆäº†å‘¢ï¼Œè¿™æ—¶Redisè¿˜æä¾›äº†æŒä¹…åŒ–çš„åŠŸèƒ½ã€‚</p>
<p>3ã€å“¨å…µï¼ˆSentinelï¼‰å’Œå¤åˆ¶</p>
<p>Sentinelå¯ä»¥ç®¡ç†å¤šä¸ªRedisæœåŠ¡å™¨ï¼Œå®ƒæä¾›äº†ç›‘æ§ã€æé†’ä»¥åŠè‡ªåŠ¨çš„æ•…éšœè½¬ç§»åŠŸèƒ½ï¼›</p>
<p>å¤åˆ¶åˆ™æ˜¯è®©RedisæœåŠ¡å™¨å¯ä»¥é…å¤‡å¤‡ä»½çš„æœåŠ¡å™¨ï¼›</p>
<p>Redisä¹Ÿæ˜¯é€šè¿‡è¿™ä¸¤ä¸ªåŠŸèƒ½ä¿è¯Redisçš„é«˜å¯ç”¨ï¼›</p>
<p>4ã€é›†ç¾¤ï¼ˆClusterï¼‰</p>
<p>å•å°æœåŠ¡å™¨èµ„æºæ€»æ˜¯æœ‰ä¸Šé™çš„ï¼ŒCPUå’ŒIOèµ„æºå¯ä»¥é€šè¿‡ä¸»ä»å¤åˆ¶ï¼Œè¿›è¡Œè¯»å†™åˆ†ç¦»ï¼ŒæŠŠä¸€éƒ¨åˆ†CPUå’ŒIOçš„å‹åŠ›è½¬ç§»åˆ°ä»æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å†…å­˜èµ„æºæ€ä¹ˆåŠï¼Œä¸»ä»æ¨¡å¼åªæ˜¯æ•°æ®çš„å¤‡ä»½ï¼Œå¹¶ä¸èƒ½æ‰©å……å†…å­˜ï¼›</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¨ªå‘æ‰©å±•ï¼Œè®©æ¯å°æœåŠ¡å™¨åªè´Ÿè´£ä¸€éƒ¨åˆ†ä»»åŠ¡ï¼Œç„¶åå°†è¿™äº›æœåŠ¡å™¨æ„æˆä¸€ä¸ªæ•´ä½“ï¼Œå¯¹å¤–ç•Œæ¥è¯´ï¼Œè¿™ä¸€ç»„æœåŠ¡å™¨å°±åƒæ˜¯é›†ç¾¤ä¸€æ ·ã€‚</p>
<p>195ã€Redisæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ<br>å­—ç¬¦ä¸²<br>hash<br>list<br>set<br>zset</p>
<h1 id="196ã€Rediså–å€¼å­˜å€¼é—®é¢˜"><a href="#196ã€Rediså–å€¼å­˜å€¼é—®é¢˜" class="headerlink" title="196ã€Rediså–å€¼å­˜å€¼é—®é¢˜"></a>196ã€Rediså–å€¼å­˜å€¼é—®é¢˜</h1><p>1ã€å…ˆæŠŠRedisçš„è¿æ¥æ± æ‹¿å‡ºæ¥</p>
<p>JedisPool pool &#x3D; new JedisPool(new JedisPoolConfig(),â€127.0.0.1â€);</p>
<p>Jedis jedis &#x3D; pool.getResource();<br>2ã€å­˜å–å€¼</p>
<p>jedis.set(â€œkeyâ€,â€valueâ€);<br>jedis.get(â€œkeyâ€);<br>jedis.del(â€œkeyâ€);<br>&#x2F;&#x2F;ç»™ä¸€ä¸ªkeyå åŠ value<br>jedis.append(â€œkeyâ€,â€value2â€);&#x2F;&#x2F;æ­¤æ—¶keyçš„å€¼å°±æ˜¯value + value2;<br>&#x2F;&#x2F;åŒæ—¶ç»™å¤šä¸ªkeyè¿›è¡Œèµ‹å€¼ï¼š<br>jedis.mset(â€œkey1â€,â€value1â€,â€key2â€,â€value2â€);<br>3ã€å¯¹mapè¿›è¡Œæ“ä½œ</p>
<p>Map&lt;String,String&gt; user &#x3D; new HashMap();<br>user.put(â€œkey1â€,â€value1â€);<br>user.put(â€œkey2â€,â€value2â€);<br>user.put(â€œkey3â€,â€value3â€);<br>&#x2F;&#x2F;å­˜å…¥<br>jedis.hmset(â€œuserâ€,user);<br>&#x2F;&#x2F;å–å‡ºuserä¸­key1<br>List<String> nameMap &#x3D; jedis.hmget(â€œuserâ€,â€key1â€);<br>&#x2F;&#x2F;åˆ é™¤å…¶ä¸­ä¸€ä¸ªé”®å€¼<br>jedis.hdel(â€œuserâ€,â€key2â€);<br>&#x2F;&#x2F;æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé”®<br>jedis.exists(â€œuserâ€);<br>&#x2F;&#x2F;å–å‡ºæ‰€æœ‰çš„Mapä¸­çš„å€¼ï¼š<br>Iterator<String> iter &#x3D; jedis.hkeys(â€œuserâ€).iterator();<br>while(iter.next()){<br>    jedis.hmget(â€œuserâ€,iter.next());<br>}</p>
<h1 id="197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"><a href="#197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ" class="headerlink" title="197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"></a>197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</h1><p>ä»£ç æ›´æ¸…æ™°ï¼Œå¤„ç†é€»è¾‘æ›´ç®€å•ï¼›<br>ä¸ç”¨è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”å’Œé‡Šæ”¾é”çš„æ“ä½œï¼Œæ²¡æœ‰å› ä¸ºå¯èƒ½å‡ºç°æ­»é”è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼›<br>ä¸å­˜åœ¨å¤šçº¿ç¨‹åˆ‡æ¢è€Œæ¶ˆè€—CPUï¼›<br>æ— æ³•å‘æŒ¥å¤šæ ¸CPUçš„ä¼˜åŠ¿ï¼Œä½†å¯ä»¥é‡‡ç”¨å¤šå¼€å‡ ä¸ªRediså®ä¾‹æ¥å®Œå–„ï¼›<br>198ã€RedisçœŸçš„æ˜¯å•çº¿ç¨‹çš„å—ï¼Ÿ<br>Redis6.0ä¹‹å‰æ˜¯å•çº¿ç¨‹çš„ï¼ŒRedis6.0ä¹‹åå¼€å§‹æ”¯æŒå¤šçº¿ç¨‹ï¼›<br>rediså†…éƒ¨ä½¿ç”¨äº†åŸºäºepollçš„å¤šè·¯æœç”¨ï¼Œä¹Ÿå¯ä»¥å¤šéƒ¨ç½²å‡ ä¸ªredisæœåŠ¡å™¨è§£å†³å•çº¿ç¨‹çš„é—®é¢˜ï¼›<br>redisä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆæ˜¯å†…å­˜å’Œç½‘ç»œï¼›<br>å†…å­˜å¥½è¯´ï¼ŒåŠ å†…å­˜æ¡å°±è¡Œäº†ï¼Œè€Œç½‘ç»œæ‰æ˜¯å¤§éº»çƒ¦ï¼Œæ‰€ä»¥redis6å†…å­˜å¥½è¯´ï¼ŒåŠ å†…å­˜æ¡å°±è¡Œäº†ï¼›<br>è€Œç½‘ç»œæ‰æ˜¯å¤§éº»çƒ¦ï¼Œæ‰€ä»¥redis6.0å¼•å…¥äº†å¤šçº¿ç¨‹çš„æ¦‚å¿µï¼Œ<br>redis6.0åœ¨ç½‘ç»œIOå¤„ç†æ–¹é¢å¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œå¦‚ç½‘ç»œæ•°æ®çš„è¯»å†™å’Œåè®®è§£æç­‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œå‘½ä»¤çš„æ ¸å¿ƒæ¨¡å—è¿˜æ˜¯å•çº¿ç¨‹çš„ã€‚</p>
<h1 id="199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"></a>199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ</h1><p>redisæä¾›äº†ä¸¤ç§æŒä¹…åŒ–çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯RDBï¼ˆRedis DataBaseï¼‰å’ŒAOFï¼ˆAppend Only Fileï¼‰ã€‚</p>
<p>RDBï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åœ¨ä¸åŒçš„æ—¶é—´ç‚¹ï¼Œå°†rediså­˜å‚¨çš„æ•°æ®ç”Ÿæˆå¿«ç…§å¹¶å­˜å‚¨åˆ°ç£ç›˜ç­‰ä»‹è´¨ä¸Šï¼›</p>
<p>AOFï¼Œåˆ™æ˜¯æ¢äº†ä¸€ä¸ªè§’åº¦æ¥å®ç°æŒä¹…åŒ–ï¼Œé‚£å°±æ˜¯å°†redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼Œåœ¨ä¸‹æ¬¡redisé‡æ–°å¯åŠ¨æ—¶ï¼Œåªè¦æŠŠè¿™äº›å†™æŒ‡ä»¤ä»å‰åˆ°åå†é‡å¤æ‰§è¡Œä¸€éï¼Œå°±å¯ä»¥å®ç°æ•°æ®æ¢å¤äº†ã€‚</p>
<p>å…¶å®RDBå’ŒAOFä¸¤ç§æ–¹å¼ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœredisé‡å¯çš„è¯ï¼Œåˆ™ä¼šä¼˜å…ˆé‡‡ç”¨AOFæ–¹å¼æ¥è¿›è¡Œæ•°æ®æ¢å¤ï¼Œè¿™æ˜¯å› ä¸ºAOFæ–¹å¼çš„æ•°æ®æ¢å¤å®Œæ•´åº¦æ›´é«˜ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰æ•°æ®æŒä¹…åŒ–çš„éœ€æ±‚ï¼Œä¹Ÿå®Œå…¨å¯ä»¥å…³é—­RDBå’ŒAOFæ–¹å¼ï¼Œè¿™æ ·çš„è¯ï¼Œrediså°†å˜æˆä¸€ä¸ªçº¯å†…å­˜æ•°æ®åº“ï¼Œå°±åƒmemcacheä¸€æ ·ã€‚</p>
<h1 id="200ã€Rediså’Œ-memecache-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#200ã€Rediså’Œ-memecache-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="200ã€Rediså’Œ memecache æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>200ã€Rediså’Œ memecache æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>1ã€Redisç›¸æ¯”memecacheï¼Œæ‹¥æœ‰æ›´å¤šçš„æ•°æ®ç»“æ„å’Œæ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®æ“ä½œã€‚</p>
<p>ï¼ˆ1ï¼‰Redisæ”¯æŒkey-valueï¼Œå¸¸ç”¨çš„æ•°æ®ç±»å‹ä¸»è¦æœ‰Stringã€Hashã€Listã€Setã€Sorted Setã€‚</p>
<p>ï¼ˆ2ï¼‰memecacheåªæ”¯æŒkey-valueã€‚</p>
<p>2ã€å†…å­˜ä½¿ç”¨ç‡å¯¹æ¯”ï¼ŒRedisé‡‡ç”¨hashç»“æ„æ¥åškey-valueå­˜å‚¨ï¼Œç”±äºå…¶ç»„åˆå¼çš„å‹ç¼©ï¼Œå…¶å†…å­˜åˆ©ç”¨ç‡ä¼šé«˜äºmemecacheã€‚</p>
<p>3ã€æ€§èƒ½å¯¹æ¯”ï¼šRedisåªä½¿ç”¨å•æ ¸ï¼Œmemecacheä½¿ç”¨å¤šæ ¸ã€‚</p>
<p>4ã€Redisæ”¯æŒç£ç›˜æŒä¹…åŒ–ï¼Œmemecacheä¸æ”¯æŒã€‚</p>
<p>Rediså¯ä»¥å°†ä¸€äº›å¾ˆä¹…æ²¡ç”¨åˆ°çš„valueé€šè¿‡swapæ–¹æ³•äº¤æ¢åˆ°ç£ç›˜ã€‚</p>
<p>5ã€Redisæ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤ï¼Œmemecacheä¸æ”¯æŒã€‚</p>
<p>201ã€Redisæ”¯æŒçš„ java å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ<br>Redissonã€Jedisã€lettuce ç­‰ç­‰ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ Redissonã€‚</p>
<p>202ã€jedis å’Œ redisson æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ<br>Jedis å’Œ Redisson éƒ½æ˜¯Javaä¸­å¯¹Redisæ“ä½œçš„å°è£…ã€‚Jedis åªæ˜¯ç®€å•çš„å°è£…äº† Redis çš„APIåº“ï¼Œå¯ä»¥çœ‹ä½œæ˜¯Rediså®¢æˆ·ç«¯ï¼Œå®ƒçš„æ–¹æ³•å’ŒRedis çš„å‘½ä»¤å¾ˆç±»ä¼¼ã€‚Redisson ä¸ä»…å°è£…äº† redis ï¼Œè¿˜å°è£…äº†å¯¹æ›´å¤šæ•°æ®ç»“æ„çš„æ”¯æŒï¼Œä»¥åŠé”ç­‰åŠŸèƒ½ï¼Œç›¸æ¯”äºJedis æ›´åŠ å¤§ã€‚ä½†Jedisç›¸æ¯”äºRedisson æ›´åŸç”Ÿä¸€äº›ï¼Œæ›´çµæ´»ã€‚</p>
<h1 id="203ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#203ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="203ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>203ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h1><p>1ã€ç¼“å­˜ç©¿é€</p>
<p>ä¸€èˆ¬çš„ç¼“å­˜ç³»ç»Ÿï¼Œéƒ½æ˜¯æŒ‰ç…§keyå»ç¼“å­˜æŸ¥è¯¢ï¼Œå¦‚æœä¸å­˜åœ¨å¯¹ç”¨çš„valueï¼Œå°±åº”è¯¥å»åç«¯ç³»ç»ŸæŸ¥æ‰¾ï¼ˆæ¯”å¦‚DBæ•°æ®åº“ï¼‰ã€‚ä¸€äº›æ¶æ„çš„è¯·æ±‚ä¼šæ•…æ„æŸ¥è¯¢ä¸å­˜åœ¨çš„keyï¼Œè¯·æ±‚é‡å¾ˆå¤§ï¼Œå°±ä¼šå¯¹åç«¯ç³»ç»Ÿé€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚è¿™å°±å«åšç¼“å­˜ç©¿é€ã€‚</p>
<p>2ã€æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<p>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜æ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹ï¼Œæˆ–è€…è¯¥keyå¯¹åº”çš„æ•°æ®insertä¹‹åæ¸…ç†ç¼“å­˜ã€‚</p>
<p>å¯¹ä¸€å®šä¸å­˜åœ¨çš„keyè¿›è¡Œè¿‡æ»¤ã€‚å¯ä»¥æŠŠæ‰€æœ‰çš„å¯èƒ½å­˜åœ¨çš„keyæ”¾åˆ°ä¸€ä¸ªå¤§çš„Bitmapä¸­ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡è¯¥Bitmapè¿‡æ»¤ã€‚</p>
<p>3ã€ç¼“å­˜é›ªå´©</p>
<p>å½“ç¼“å­˜æœåŠ¡å™¨é‡å¯æˆ–è€…å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æŸä¸€æ—¶é—´æ®µå¤±æ•ˆï¼Œè¿™æ ·åœ¨å¤±æ•ˆçš„æ—¶å€™ï¼Œä¼šç»™åç«¯ç³»ç»Ÿå¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<p>4ã€å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p>åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶å®ƒçº¿ç¨‹ç­‰å¾…ï¼›<br>åšäºŒçº§ç¼“å­˜ï¼›<br>ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´å°½é‡å‡åŒ€ï¼›</p>
<h1 id="204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ"><a href="#204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ"></a>204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ</h1><p>1ã€æ·˜æ±°ç¼“å­˜</p>
<p>æ•°æ®å¦‚æœä¸ºè¾ƒä¸ºå¤æ‚çš„æ•°æ®æ—¶ï¼Œè¿›è¡Œç¼“å­˜çš„æ›´æ–°æ“ä½œå°±ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼Œå› æ­¤ä¸€èˆ¬æ¨èé€‰æ‹©æ·˜æ±°ç¼“å­˜ï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ã€‚</p>
<p>2ã€é€‰æ‹©å…ˆæ·˜æ±°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“</p>
<p>å‡å¦‚å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ·˜æ±°ç¼“å­˜ï¼Œå¦‚æœæ·˜æ±°ç¼“å­˜å¤±è´¥ï¼Œé‚£ä¹ˆåé¢çš„è¯·æ±‚éƒ½ä¼šå¾—åˆ°è„æ•°æ®ï¼Œç›´è‡³ç¼“å­˜è¿‡æœŸã€‚</p>
<p>å‡å¦‚å…ˆæ·˜æ±°ç¼“å­˜å†æ›´æ–°æ•°æ®åº“ï¼Œå¦‚æœæ›´æ–°æ•°æ®åº“å¤±è´¥ï¼Œåªä¼šäº§ç”Ÿä¸€æ¬¡ç¼“å­˜ç©¿é€ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œåè€…å¯¹ä¸šåŠ¡åˆ™æ²¡æœ‰æœ¬è´¨ä¸Šçš„å½±å“ã€‚</p>
<p>3ã€å»¶æ—¶åŒåˆ ç­–ç•¥</p>
<p>å¦‚ä¸‹åœºæ™¯ï¼šåŒæ—¶æœ‰ä¸€ä¸ªè¯·æ±‚Aè¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦ä¸€ä¸ªè¯·æ±‚Bè¿›è¡ŒæŸ¥è¯¢æ“ä½œã€‚</p>
<p>è¯·æ±‚Aè¿›è¡Œå†™æ“ä½œï¼Œåˆ é™¤ç¼“å­˜<br>è¯·æ±‚BæŸ¥è¯¢å‘ç°ç¼“å­˜ä¸å­˜åœ¨<br>è¯·æ±‚Bå»æ•°æ®åº“æŸ¥è¯¢å¾—åˆ°æ—§å€¼<br>è¯·æ±‚Bå°†æ—§å€¼å†™å…¥ç¼“å­˜<br>è¯·æ±‚Aå°†æ–°å€¼å†™å…¥æ•°æ®åº“<br>æ¬¡æ•°ä¾¿å‡ºç°äº†æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚é‡‡ç”¨å»¶æ—¶åŒåˆ ç­–ç•¥å¾—ä»¥è§£å†³ã€‚</p>
<p>public void write(String key,Object data){<br>    redisUtils.del(key);<br>    db.update(data);<br>    Thread.Sleep(100);<br>    redisUtils.del(key);<br>}<br>è¿™ä¹ˆåšï¼Œå¯ä»¥å°†1ç§’å†…æ‰€é€ æˆçš„ç¼“å­˜è„æ•°æ®ï¼Œå†æ¬¡åˆ é™¤ã€‚è¿™ä¸ªæ—¶é—´è®¾å®šå¯æ ¹æ®ä¿„ä¸šåŠ¡åœºæ™¯è¿›è¡Œä¸€ä¸ªè°ƒèŠ‚ã€‚</p>
<p>4ã€æ•°æ®åº“è¯»å†™åˆ†ç¦»çš„åœºæ™¯</p>
<p>ä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªè¯·æ±‚Aè¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦ä¸€ä¸ªè¯·æ±‚Bè¿›è¡ŒæŸ¥è¯¢æ“ä½œã€‚</p>
<p>è¯·æ±‚Aè¿›è¡Œå†™æ“ä½œï¼Œåˆ é™¤ç¼“å­˜<br>è¯·æ±‚Aå°†æ•°æ®å†™å…¥æ•°æ®åº“äº†ï¼Œ<br>è¯·æ±‚BæŸ¥è¯¢ç¼“å­˜å‘ç°ï¼Œç¼“å­˜æ²¡æœ‰å€¼<br>è¯·æ±‚Bå»ä»åº“æŸ¥è¯¢ï¼Œè¿™æ—¶ï¼Œè¿˜æ²¡æœ‰å®Œæˆä¸»ä»åŒæ­¥ï¼Œå› æ­¤æŸ¥è¯¢åˆ°çš„æ˜¯æ—§å€¼<br>è¯·æ±‚Bå°†æ—§å€¼å†™å…¥ç¼“å­˜<br>æ•°æ®åº“å®Œæˆä¸»ä»åŒæ­¥ï¼Œä»åº“å˜ä¸ºæ–°å€¼<br>ä¾æ—§é‡‡ç”¨å»¶æ—¶åŒåˆ ç­–ç•¥è§£å†³æ­¤é—®é¢˜ã€‚</p>
<h1 id="205ã€Redisï¼Œä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#205ã€Redisï¼Œä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="205ã€Redisï¼Œä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>205ã€Redisï¼Œä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h1><p>1ã€ç¼“å­˜ç©¿é€</p>
<p>ä¸€èˆ¬çš„ç¼“å­˜ç³»ç»Ÿï¼Œéƒ½æ˜¯æŒ‰ç…§keyå»ç¼“å­˜æŸ¥è¯¢ï¼Œå¦‚æœä¸å­˜åœ¨å¯¹ç”¨çš„valueï¼Œå°±åº”è¯¥å»åç«¯ç³»ç»ŸæŸ¥æ‰¾ï¼ˆæ¯”å¦‚DBæ•°æ®åº“ï¼‰ã€‚ä¸€äº›æ¶æ„çš„è¯·æ±‚ä¼šæ•…æ„æŸ¥è¯¢ä¸å­˜åœ¨çš„keyï¼Œè¯·æ±‚é‡å¾ˆå¤§ï¼Œå°±ä¼šå¯¹åç«¯ç³»ç»Ÿé€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚è¿™å°±å«åšç¼“å­˜ç©¿é€ã€‚</p>
<p>2ã€æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<p>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜æ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹ï¼Œæˆ–è€…è¯¥keyå¯¹åº”çš„æ•°æ®insertä¹‹åæ¸…ç†ç¼“å­˜ã€‚</p>
<p>å¯¹ä¸€å®šä¸å­˜åœ¨çš„keyè¿›è¡Œè¿‡æ»¤ã€‚å¯ä»¥æŠŠæ‰€æœ‰çš„å¯èƒ½å­˜åœ¨çš„keyæ”¾åˆ°ä¸€ä¸ªå¤§çš„Bitmapä¸­ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡è¯¥Bitmapè¿‡æ»¤ã€‚</p>
<p>3ã€ç¼“å­˜é›ªå´©</p>
<p>å½“ç¼“å­˜æœåŠ¡å™¨é‡å¯æˆ–è€…å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æŸä¸€æ—¶é—´æ®µå¤±æ•ˆï¼Œè¿™æ ·åœ¨å¤±æ•ˆçš„æ—¶å€™ï¼Œä¼šç»™åç«¯ç³»ç»Ÿå¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<p>4ã€å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p>åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶å®ƒçº¿ç¨‹ç­‰å¾…ï¼›<br>åšäºŒçº§ç¼“å­˜ï¼›<br>ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´å°½é‡å‡åŒ€ï¼›<br>206ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ<br>ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é”</p>
<p>rediså‘½ä»¤ï¼šset users 10 nx ex 12   åŸå­æ€§å‘½ä»¤</p>
<p>&#x2F;&#x2F;ä½¿ç”¨uuidï¼Œè§£å†³é”é‡Šæ”¾çš„é—®é¢˜<br>@GetMapping<br>public void testLock() throws InterruptedException {<br>    String uuid &#x3D; UUID.randomUUID().toString();<br>    Boolean b_lock &#x3D; redisTemplate.opsForValue().setIfAbsent(â€œlockâ€, uuid, 10, TimeUnit.SECONDS);<br>    if(b_lock){<br>        Object value &#x3D; redisTemplate.opsForValue().get(â€œnumâ€);<br>        if(StringUtils.isEmpty(value)){<br>            return;<br>        }<br>        int num &#x3D; Integer.parseInt(value + â€œâ€);<br>        redisTemplate.opsForValue().set(â€œnumâ€,++num);<br>        Object lockUUID &#x3D; redisTemplate.opsForValue().get(â€œlockâ€);<br>        if(uuid.equals(lockUUID.toString())){<br>            redisTemplate.delete(â€œlockâ€);<br>        }<br>    }else{<br>        Thread.sleep(100);<br>        testLock();<br>    }<br>}<br>å¤‡æ³¨ï¼šå¯ä»¥é€šè¿‡luaè„šæœ¬ï¼Œä¿è¯åˆ†å¸ƒå¼é”çš„åŸå­æ€§ã€‚</p>
<h1 id="207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ"><a href="#207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ" class="headerlink" title="207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ"></a>207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ</h1><p>Redis åˆ†å¸ƒå¼é”ä¸èƒ½è§£å†³è¶…æ—¶çš„é—®é¢˜ï¼Œåˆ†å¸ƒå¼é”æœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œç¨‹åºçš„æ‰§è¡Œå¦‚æœè¶…å‡ºäº†é”çš„è¶…æ—¶æ—¶é—´å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>Rediså®¹æ˜“äº§ç”Ÿçš„å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>é”æœªè¢«é‡Šæ”¾<br>Bé”è¢«Aé”é‡Šæ”¾äº†<br>æ•°æ®åº“äº‹åŠ¡è¶…æ—¶<br>é”è¿‡æœŸäº†ï¼Œä¸šåŠ¡è¿˜æ²¡æ‰§è¡Œå®Œ<br>Redisä¸»ä»å¤åˆ¶çš„é—®é¢˜</p>
<h1 id="208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ"><a href="#208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ"></a>208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ</h1><p>1ã€ç¼©çŸ­é”®å€¼çš„é•¿åº¦</p>
<p>ç¼©çŸ­å€¼çš„é•¿åº¦æ‰æ˜¯å…³é”®ï¼Œå¦‚æœå€¼æ˜¯ä¸€ä¸ªå¤§çš„ä¸šåŠ¡å¯¹è±¡ï¼Œå¯ä»¥å°†å¯¹è±¡åºåˆ—åŒ–æˆäºŒè¿›åˆ¶æ•°ç»„ï¼›<br>é¦–å…ˆåº”è¯¥åœ¨ä¸šåŠ¡ä¸Šè¿›è¡Œç²¾ç®€ï¼Œå»æ‰ä¸å¿…è¦çš„å±æ€§ï¼Œé¿å…å­˜å‚¨ä¸€äº›æ²¡ç”¨çš„æ•°æ®ï¼›<br>å…¶æ¬¡æ˜¯åºåˆ—åŒ–çš„å·¥å…·é€‰æ‹©ä¸Šï¼Œåº”è¯¥é€‰æ‹©æ›´é«˜æ•ˆçš„åºåˆ—åŒ–å·¥å…·æ¥é™ä½å­—èŠ‚æ•°ç»„å¤§å°ï¼›<br>ä»¥JAVAä¸ºä¾‹ï¼Œå†…ç½®çš„åºåˆ—åŒ–æ–¹å¼æ— è®ºä»é€Ÿåº¦è¿˜æ˜¯å‹ç¼©æ¯”éƒ½ä¸å°½å¦‚äººæ„ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©æ›´é«˜æ•ˆçš„åºåˆ—åŒ–å·¥å…·ï¼Œå¦‚: protostuffï¼Œkryoç­‰<br>2ã€å…±äº«å¯¹è±¡æ± </p>
<p>å¯¹è±¡å…±äº«æ± æŒ‡Rediså†…éƒ¨ç»´æŠ¤[0-9999]çš„æ•´æ•°å¯¹è±¡æ± ã€‚åˆ›å»ºå¤§é‡çš„æ•´æ•°ç±»å‹redisObjectå­˜åœ¨å†…å­˜å¼€é”€ï¼Œæ¯ä¸ªredisObjectå†…éƒ¨ç»“æ„è‡³å°‘å 16å­—èŠ‚ï¼Œç”šè‡³è¶…è¿‡äº†æ•´æ•°è‡ªèº«ç©ºé—´æ¶ˆè€—ã€‚æ‰€ä»¥Rediså†…å­˜ç»´æŠ¤ä¸€ä¸ª[0-9999]çš„æ•´æ•°å¯¹è±¡æ± ï¼Œç”¨äºèŠ‚çº¦å†…å­˜ã€‚ é™¤äº†æ•´æ•°å€¼å¯¹è±¡ï¼Œå…¶ä»–ç±»å‹å¦‚list,hash,set,zsetå†…éƒ¨å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨æ•´æ•°å¯¹è±¡æ± ã€‚å› æ­¤å¼€å‘ä¸­åœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹ï¼Œå°½é‡ä½¿ç”¨æ•´æ•°å¯¹è±¡ä»¥èŠ‚çœå†…å­˜ã€‚</p>
<p>3ã€å­—ç¬¦ä¸²ä¼˜åŒ–</p>
<p>4ã€ç¼–ç ä¼˜åŒ–</p>
<p>5ã€æ§åˆ¶keyçš„æ•°é‡</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">é¢è¯•</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-å¤šçº¿ç¨‹" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/02/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" target="_blank">å¤šçº¿ç¨‹</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/02/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="archive-article-date">
        <time datetime="2022-08-02T11:52:39.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-02</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h1><blockquote>
<ol>
<li><p>è¿›ç¨‹å°±æ˜¯ç³»ç»Ÿæœ€ç»ˆæ­£åœ¨æ‰§è¡Œçš„åº”ç”¨ç¨‹åº.</p>
<blockquote>
<p>æ¯”å¦‚è¿è¡Œä¸€ä¸ªJavaç¨‹åº , å¯åŠ¨æˆ‘ä»¬çš„JVMè¿™ä¸ªè¿›ç¨‹.å®é™…ä¸Šä¹Ÿä¼šè‡ªåŠ¨å¯åŠ¨ä¿©ä¸ªçº¿ç¨‹.</p>
<ul>
<li>mainçº¿ç¨‹ - è´Ÿè´£æ‰§è¡Œmainæ–¹æ³•</li>
<li>GCçº¿ç¨‹ - è´Ÿè´£å›æ”¶åƒåœ¾å¯¹è±¡[æ²¡æœ‰ä»»ä½•å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡]</li>
</ul>
</blockquote>
</li>
<li><p>çº¿ç¨‹æ˜¯è¿è¡Œåœ¨è¿›ç¨‹å†…éƒ¨çš„.å› æ­¤çº¿ç¨‹åˆæ˜¯å¯ä»¥å…±äº«è¿›ç¨‹å†…éƒ¨èµ„æºçš„.</p>
<p>ä½†æ˜¯è¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´çš„èµ„æºæ˜¯ç‹¬ç«‹çš„.</p>
</li>
<li><p>è¿›ç¨‹æ˜¯<strong>ç³»ç»Ÿè¿›è¡Œèµ„æºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½.</strong></p>
</li>
<li><p><strong>çº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„åŸºæœ¬å•ä½</strong> - çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡çš„.</p>
</li>
<li><p>çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å°äºè¿›ç¨‹çš„.ä½†æ˜¯å¦‚æœä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰äº†.é‚£ä¹ˆå¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹ä¸èƒ½æ‰§è¡Œ.</p>
</li>
</ol>
</blockquote>
<h1 id="çº¿ç¨‹çš„å®ç°æ–¹å¼"><a href="#çº¿ç¨‹çš„å®ç°æ–¹å¼" class="headerlink" title="çº¿ç¨‹çš„å®ç°æ–¹å¼"></a>çº¿ç¨‹çš„å®ç°æ–¹å¼</h1><blockquote>
<ol>
<li>å†™ä¸€ä¸ªç±»å»ç»§æ‰¿java.lang.Thread </li>
<li>å†™ä¸€ä¸ªç±»å»å®ç°java.lang.Runnableæ¥å£</li>
<li>å†™ä¸€ä¸ªç±»å»å®ç°java.lang.Callableæ¥å£</li>
</ol>
</blockquote>
<h2 id="æ„é€ "><a href="#æ„é€ " class="headerlink" title="æ„é€ "></a>æ„é€ </h2><blockquote>
<p>public Thread(Runnable target) </p>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><blockquote>
<ol>
<li>public static native Thread currentThread();&#x2F;&#x2F;è¿”å›çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹çš„å¼•ç”¨.</li>
<li>String getName();&#x2F;&#x2F;è¿”å›çº¿ç¨‹çš„åç§°.å¦‚æœä¹ˆæœ‰è®¾ç½®çº¿ç¨‹çš„åç§°.é‚£ä¹ˆç³»ç»Ÿä¼šé»˜è®¤åˆ†é… - Thread-0,Thread-1,â€¦</li>
<li>void setName(String name);&#x2F;&#x2F;æ‰‹åŠ¨è®¾ç½®çº¿ç¨‹çš„åç§°</li>
<li>void start();&#x2F;&#x2F;ç”¨æˆ·æ¥å¯åŠ¨çº¿ç¨‹.æœ¬è´¨ä¸Šå®é™…ä¸Šå°±æ˜¯åœ¨å‘Šè¯‰jvm.æ­¤å¤„æœ‰çº¿ç¨‹è¦æ‰§è¡Œäº†.</li>
<li>void setPriority(int newPriority);&#x2F;&#x2F;è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§.[1,10],æ•°å­—è¶Šå°,ç­‰çº§è¶Šé«˜.</li>
<li>public static native void sleep(long millis);&#x2F;&#x2F;<strong>ç¡millisæ¯«ç§’.è®©å‡ºcpuæ‰§è¡Œæƒé™,ä½†æ˜¯ä¸ä¼šé‡Šæ”¾é”èµ„æº</strong></li>
</ol>
</blockquote>
<h1 id="Threadå’ŒRunnableæ–¹å¼åŒºåˆ«"><a href="#Threadå’ŒRunnableæ–¹å¼åŒºåˆ«" class="headerlink" title="Threadå’ŒRunnableæ–¹å¼åŒºåˆ«"></a>Threadå’ŒRunnableæ–¹å¼åŒºåˆ«</h1><blockquote>
<ol>
<li><p>Threadæ–¹å¼ - å…±äº«ä»£ç ,ä½†æ˜¯ä¸å…±äº«èµ„æº.</p>
<p><code>èƒ½å¦å®ç°å¤šä¸ªçº¿ç¨‹æ¥å…±äº«èµ„æº,æ€ä¹ˆå®ç°? - static</code></p>
</li>
<li><p>Runnableæ–¹å¼ - å…±äº«ä»£ç ,å…±äº«èµ„æº</p>
<p><code>å¦‚ä½•å®ç°ä¸å…±äº«èµ„æº - ç”¨ä¿©ä¸ªä¸åŒçš„æ¥å£çš„å®ç°ç±»å¯¹è±¡ä½œä¸ºThreadçš„æ„é€ </code></p>
<p>2-1. æƒ…å†µä¸€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">8</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">9</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">7</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">7</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">6</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">6</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">5</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">5</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">4</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">4</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">3</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">3</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">2</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">1</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">0</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â‘ Thread-<span class="number">1</span>å’ŒThread-<span class="number">0</span>åŒæ—¶è¿›å…¥åˆ°runä¸­æ‰§è¡Œ,ä¿©è€…éƒ½ä¼šç¡çœ (ä¿©ä¸ªçº¿ç¨‹éƒ½ä¼šè®©å‡ºcpu)</span><br><span class="line">â‘¡Thread-<span class="number">0</span>å…ˆè·å¾—äº†cpu.ç„¶åæ‰§è¡Œ--ticket(ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§åŠ¨ä½œ),ä½†æ˜¯è¿˜æ²¡æœ‰æ¥å¾—åŠè¾“å‡º</span><br><span class="line">  Thread-<span class="number">1</span>ç‡å…ˆ System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ­£åœ¨å–ç¥¨,å‰©ä½™:&quot;</span> + (--ticket));</span><br><span class="line">â‘¢Thread-<span class="number">0</span>å°†å‰©ä½™çš„<span class="number">9</span>è¿›è¡Œè¾“å‡º</span><br></pre></td></tr></table></figure>

<p><code>æƒ…å†µäºŒ</code> - åˆ†æä¸­é—´çš„ä¸ºä»€ä¹ˆå‡ºç°ä¿©æ¬¡5</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">9</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">8</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">7</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">6</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">5</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">5</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">3</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">4</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">2</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">1</span></span><br><span class="line">Thread-<span class="number">0</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">0</span></span><br><span class="line">Thread-<span class="number">1</span>æ­£åœ¨å–ç¥¨,å‰©ä½™:<span class="number">0</span></span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h1 id="JMM"><a href="#JMM" class="headerlink" title="JMM"></a>JMM</h1><blockquote>
<ol>
<li><p>JMM - java memory model - javaå†…å­˜æ¨¡å‹,å¹¶ä¸æ˜¯jvmæ¨¡å‹</p>
</li>
<li><p>JMMè§„å®šæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­˜å‚¨åœ¨ä¸»å­˜ä¸­,å®ä¾‹å˜é‡(éé™æ€å±æ€§)&#x2F;é™æ€å±æ€§,ä½†æ˜¯ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å’Œæ–¹æ³•å‚æ•°</p>
</li>
<li><p>æ¯ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™,æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåœ¨æœ¬åœ°å¼€è¾Ÿä¸€ä¸ªåŒºåŸŸ[çº¿ç¨‹æ ˆ,æ ˆå¸§] - å·¥ä½œå†…å­˜&#x2F;æœ¬åœ°ç¼“å­˜.</p>
</li>
<li><p>çº¿ç¨‹æ˜¯ä¸èƒ½å¤Ÿç›´æ¥å¯¹ä¸»å­˜ä¸­çš„æ•°æ®è¿›è¡Œç›´æ¥çš„æ“ä½œçš„.éœ€è¦å°†ä¸»å­˜ä¸­çš„å˜é‡æ‹‰å–ä¸‹æ¥åˆ°å·¥ä½œå†…å­˜</p>
</li>
<li><p>çº¿ç¨‹ä¹‹é—´æ˜¯éš”ç¦»çš„.ä¸åŒçš„çº¿ç¨‹ä¹‹é—´æ˜¯æ— æ³•ç›´æ¥ä¼ é€’&#x2F;è®¿é—®è¿™ä¸ªè‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„å˜é‡çš„.å¿…é¡»é€šè¿‡ä¸»å­˜</p>
<p>çº¿ç¨‹ä¸­ç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ—¶å€™,å®ƒä¼šå°†æœ¬åœ°å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®åˆ·å›åˆ°ä¸»å­˜.</p>
</li>
</ol>
</blockquote>
<p><img src="D:/è‹å·/dy-corejava-tech/note/imgs/jmm.png"> </p>
<h2 id="åŒæ­¥è§„åˆ™"><a href="#åŒæ­¥è§„åˆ™" class="headerlink" title="åŒæ­¥è§„åˆ™"></a>åŒæ­¥è§„åˆ™</h2><blockquote>
<p>çº¿ç¨‹ä½•æ—¶è¦ä»ä¸»å­˜ä¸­é‡æ–°æ‹‰å˜é‡çš„å‰¯æœ¬</p>
<ol>
<li>çº¿ç¨‹çš„åˆ‡æ¢</li>
<li>è·å–é” - å½“å‰è·å¾—é”çš„èµ„æºçš„çº¿ç¨‹ä¼šå…ˆæ¸…ç©ºæœ¬åœ°ç¼“å­˜.</li>
<li>volatile</li>
<li>cupç©ºé—²çš„æ—¶å€™,æ¯”å¦‚ç¡çœ </li>
<li>ioæ“ä½œ</li>
</ol>
</blockquote>
<h2 id="ç¼“å­˜ä¸€è‡´æ€§"><a href="#ç¼“å­˜ä¸€è‡´æ€§" class="headerlink" title="ç¼“å­˜ä¸€è‡´æ€§"></a>ç¼“å­˜ä¸€è‡´æ€§</h2><blockquote>
<p>ä½•æ—¶å°†æœ¬åœ°å·¥ä½œå†…å­˜åˆ·å›åˆ°ä¸»å­˜</p>
</blockquote>
<blockquote>
<ol>
<li>åœ¨é‡Šæ”¾é”ä¹‹å‰</li>
<li>åŠ é”,ä¼šä»ä¸»å­˜å¼ºåˆ¶æ‹‰å–</li>
<li>åˆ‡æ¢çº¿ç¨‹</li>
<li>ç©ºé—²</li>
<li>volatile</li>
</ol>
</blockquote>
<p><code>demoåœºæ™¯</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">//T1,T2åŒæ—¶æ‰§è¡Œ</span></span><br><span class="line">  <span class="comment">//T1=&gt; å¾ªç¯åˆ°100çš„æ—¶å€™(i++),T2ä¹Ÿåœ¨å¾ªç¯(i++)</span></span><br><span class="line">  <span class="comment">//T1,T2æ˜¯å…±äº«i</span></span><br><span class="line">  <span class="comment">//T1å¾ªç¯100ç»“æŸçš„æ—¶å€™,iæœ¬è´¨ä¸Šå·²ç»åŠ äº†ä¸ä»…ä»…åªæœ‰100æ¬¡äº†.</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">100000</span>; j++) &#123;</span><br><span class="line">    add();</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>æ‰§è¡Œç»“æœä¸€ æœ€ç»ˆçš„æœŸæœ›å€¼iå°äº200000:</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread-<span class="number">0</span>:<span class="number">133955</span>   </span><br><span class="line">Thread-<span class="number">1</span>:<span class="number">161452</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Thread-0å‡ºæ¥çš„ç»“æœä¸ºä»€ä¹ˆä¸æ­£å¥½æ˜¯100000?</p>
<p>Thread-0èµ°å®Œ100000æ¬¡çš„æ—¶å€™,Thread-1åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿåœ¨æ‰§è¡Œå¾ªç¯(i++)</p>
</blockquote>
<blockquote>
<p>Thread-1æœ€ç»ˆçš„æ‰§è¡Œçš„içš„ç»“æœä¸ºä»€ä¹ˆä¸æ˜¯200000?</p>
</blockquote>
<blockquote>
<p><strong>i++ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ - åˆ†æˆä¸‰ä¸ªæ­¥éª¤,ä»»ä½•ä¸€ä¸ªæ­¥éª¤,éƒ½å…è®¸å…¶ä»–çº¿ç¨‹ä»‹å…¥.</strong></p>
<p><strong>â‘  ä»ä¸»å­˜ä¸­æ‹·è´å˜é‡åˆ°æœ¬åœ°å·¥ä½œå†…å­˜</strong></p>
<p><strong>â‘¡ å‹æ ˆ,å¼¹å‡º,iè‡ªå¢1</strong></p>
<p><strong>â‘¢åˆ·å›åˆ°ä¸»å­˜</strong></p>
</blockquote>
<p><code>synchronized</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">100000</span>; j++) &#123;</span><br><span class="line">    add();</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:&quot;</span>+i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿è¯æ˜¯ä¸€ä¸ªåŸå­æ€§åŠ¨ä½œ</span></span><br><span class="line"><span class="comment">//å“ªä¸ªçº¿ç¨‹æŠ¢åˆ°&quot;é”èµ„æº&quot;,å“ªä¸ªçº¿ç¨‹å°±ä¼šè¿›å…¥æ‰§è¡Œ,å…¶ä»–çº¿ç¨‹å°±ä¼šè¿›å…¥åˆ°åŒæ­¥é˜»å¡çŠ¶æ€.</span></span><br><span class="line"><span class="comment">//è¿›å…¥çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åä¼šé‡Šæ”¾é”èµ„æº.  ä½†æ˜¯è¿˜æ˜¯ä¼šç»§ç»­ç«äº‰è¿™æŠŠé”.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//i=0æ‹‰å–,iè‡ªå¢1,åˆ·å›ä¸»å­˜  =&gt; ä¸å¯è¢«å…¶ä»–çº¿ç¨‹ä»‹å…¥.</span></span><br><span class="line"></span><br><span class="line">Thread-<span class="number">0</span>:<span class="number">161937</span></span><br><span class="line">Thread-<span class="number">1</span>:<span class="number">200000</span></span><br></pre></td></tr></table></figure>

<h2 id="Vectorå’ŒArrayList"><a href="#Vectorå’ŒArrayList" class="headerlink" title="Vectorå’ŒArrayList"></a>Vectorå’ŒArrayList</h2><p><code>åœºæ™¯ä¸€</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread[Thread-<span class="number">0</span>,<span class="number">5</span>,main]:<span class="number">40</span>=&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]</span><br><span class="line">Thread[Thread-<span class="number">1</span>,<span class="number">5</span>,main]:<span class="number">40</span>=&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]</span><br></pre></td></tr></table></figure>

<p><code>åœºæ™¯äºŒ</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;Thread-1&quot;</span> java.lang.ArrayIndexOutOfBoundsException: <span class="number">10</span></span><br><span class="line">	at java.util.ArrayList.add(ArrayList.java:<span class="number">459</span>)</span><br><span class="line">	at tech.aistar.day10.safe.ArrayListSafeDemo.run(ArrayListSafeDemo.java:<span class="number">26</span>)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:<span class="number">745</span>)</span><br><span class="line">Thread[Thread-<span class="number">0</span>,<span class="number">5</span>,main]:<span class="number">20</span>=&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>åŸå› åˆ†æä¸€ä¸‹</code></p>
<p>elementData[size++] &#x3D; e;&#x2F;&#x2F;size++ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ</p>
<blockquote>
<p>elementData[size++]&#x3D;e;&#x2F;&#x2F;ä¹Ÿä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ,å®é™…ä¸Šæ˜¯åˆ†æˆäº†</p>
<p><em><strong>elementData[size] &#x3D; e;</strong></em></p>
<p><em><strong>size &#x3D; size+1;&#x2F;&#x2F;ä¹Ÿä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ</strong></em></p>
</blockquote>
<p>size&#x3D;9</p>
<p>Açº¿ç¨‹ - add æ–¹æ³• - size&#x3D;9 - ensureCapacityInternal(size+1)åˆ¤æ–­ä¹‹å,æ²¡æœ‰æ‰©å®¹,æ­£å¥½éœ€è¦10ä¸ªå®¹é‡</p>
<p>Bçº¿ç¨‹ - å’ŒAçº¿ç¨‹æ‰§è¡ŒåŒæ ·çš„æ“ä½œ - sizeä¹Ÿæ˜¯9 - å¹¶æ²¡æœ‰è¿›è¡Œæ‰©å®¹.</p>
<p>Açº¿ç¨‹æ¥ç€æ“ä½œ - size++  &#x3D;&gt; size&#x3D;10 &#x3D;&gt; å°†sizeåˆ·å›åˆ°ä¸»å­˜ä¸­.</p>
<p>çº¿ç¨‹Bæ‹¿åˆ°è¿™ä¸ªæœ€æ–°çš„10,elementData[10] &#x3D;e,ä½†æ˜¯å¯¹äºBçº¿ç¨‹æ€»å…±é•¿åº¦æ‰æ˜¯10,è‚¯å®šå¿…ç„¶ä¸‹æ ‡è¶Šç•Œäº†.</p>
</blockquote>
<p><code>åœºæ™¯ä¸‰ - å…ƒç´ ä¸ºnullå€¼</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;Thread-0&quot;</span> java.lang.ArrayIndexOutOfBoundsException: <span class="number">10</span></span><br><span class="line">	at java.util.ArrayList.add(ArrayList.java:<span class="number">459</span>)</span><br><span class="line">	at tech.aistar.day10.safe.ArrayListSafeDemo.run(ArrayListSafeDemo.java:<span class="number">26</span>)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:<span class="number">745</span>)</span><br><span class="line">Thread[Thread-<span class="number">1</span>,<span class="number">5</span>,main]:<span class="number">23</span>=&gt;[<span class="number">0</span>, <span class="literal">null</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="literal">null</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>]</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">ä¿©æ¬¡æ“ä½œéƒ½æ˜¯èµ‹å€¼åœ¨<span class="number">0</span>è¿™ä¸ªä½ç½®</span><br><span class="line">A-size=<span class="number">0</span>=&gt;elementData[<span class="number">0</span>] = <span class="number">0</span>;   size = size+<span class="number">1</span>; size=<span class="number">1</span></span><br><span class="line">B-size=<span class="number">0</span>=&gt;elementData[<span class="number">0</span>] = <span class="number">0</span>;   size = size+<span class="number">1</span>; size=<span class="number">2</span>   =&gt; æœŸæœ›å®ƒåœ¨<span class="number">1</span>è¿™ä¸ªä½ç½®èµ‹å€¼çš„.å®é™…ä¸Šè¦†ç›–äº†Açº¿ç¨‹<span class="number">0</span>è¿™ä¸ªä½ç½®çš„.ä½†æ˜¯size</span><br><span class="line">ä»ç„¶æ˜¯å‘åç§»åŠ¨çš„.è·³è¿‡äº†<span class="number">1</span>ä¸ªä½ç½®</span><br></pre></td></tr></table></figure>

<h2 id="StringBuilderå’ŒStringBuffer"><a href="#StringBuilderå’ŒStringBuffer" class="headerlink" title="StringBuilderå’ŒStringBuffer"></a>StringBuilderå’ŒStringBuffer</h2><blockquote>
<p>append</p>
</blockquote>
<h1 id="synchronizedä»‹ç»å’Œåº”ç”¨"><a href="#synchronizedä»‹ç»å’Œåº”ç”¨" class="headerlink" title="synchronizedä»‹ç»å’Œåº”ç”¨"></a>synchronizedä»‹ç»å’Œåº”ç”¨</h1><blockquote>
<ul>
<li>å±äºjvmçº§åˆ«çš„é”,ä¸èƒ½è·¨jvmçš„ . æœªæ¥éœ€è¦å†æ¬¡å­¦ä¹ åˆ†å¸ƒå¼é”</li>
<li>éšå¼é”,è‡ªåŠ¨åŠ é”å’Œé‡Šæ”¾é”,å³ä½¿é‡åˆ°å¼‚å¸¸,ä¹Ÿä¼šè‡ªåŠ¨é‡Šæ”¾é”</li>
<li>éå…¬å¹³é”</li>
</ul>
</blockquote>
<blockquote>
<ol>
<li><p>ä¿®é¥°æ™®é€šæ–¹æ³• - â€œå¯¹è±¡é”â€ - ä¸åŒçš„å¯¹è±¡ç«äº‰çš„æ˜¯ä¸åŒçš„â€é”â€.</p>
</li>
<li><p>ä¿®é¥°é™æ€æ–¹æ³• - â€œç±»é”â€ - è¯¥ç±»ä¸‹çš„ä¸åŒçš„å¯¹è±¡ç«äº‰çš„æ˜¯åŒä¸€æŠŠâ€é”â€</p>
</li>
<li><p>ä¿®é¥°ä»£ç å— - åŒæ­¥ä»£ç å— - å…è®¸å‡ºç°å¤šæ¬¡çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(classå®ä¾‹)&#123;</span><br><span class="line">  <span class="comment">//ç±»é”</span></span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">synchronized</span>(<span class="built_in">this</span>)&#123;</span><br><span class="line">  <span class="comment">//å¯¹è±¡é”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="synchronizedåº•å±‚æµ…æ"><a href="#synchronizedåº•å±‚æµ…æ" class="headerlink" title="synchronizedåº•å±‚æµ…æ"></a>synchronizedåº•å±‚æµ…æ</h2><blockquote>
<p>â€œé”â€ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡.å¯¹åº”çš„æ˜¯monitorå¯¹è±¡,è™šæ‹Ÿæœºå°±æ˜¯ç”¨ObjectMonitoræ¥å®ç°çš„[C++].</p>
<p>â€œé”â€è¿˜æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ˜‚è´µçš„å¯¹è±¡,æ¯”è¾ƒå ç”¨ç³»ç»Ÿçš„å†…å­˜.</p>
</blockquote>
<p><code>ä¿®é¥°ä»£ç å—</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">synchronized</span>(<span class="built_in">this</span>)&#123;</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>æŒ‡ä»¤</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: dup</span><br><span class="line">       <span class="number">2</span>: astore_1</span><br><span class="line">       <span class="number">3</span>: monitorenter  <span class="comment">//å¦‚æœå¯¹è±¡è·å–åˆ°&quot;é”èµ„æº&quot;,æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è®¡æ•°å™¨,monitor +1</span></span><br><span class="line">       <span class="number">4</span>: aload_0</span><br><span class="line">       <span class="number">5</span>: dup</span><br><span class="line">       <span class="number">6</span>: getfield      #<span class="number">3</span>                  <span class="comment">// Field i:I</span></span><br><span class="line">       <span class="number">9</span>: iconst_1</span><br><span class="line">      <span class="number">10</span>: iadd</span><br><span class="line">      <span class="number">11</span>: putfield      #<span class="number">3</span>                  <span class="comment">// Field i:I</span></span><br><span class="line">      <span class="number">14</span>: aload_1</span><br><span class="line">      <span class="number">15</span>: monitorexit   <span class="comment">// å¯¹è±¡é‡Šæ”¾é” -1 ,,, å¦‚æœmonitorè®¡æ•°å™¨å¦‚æœä¸º0, å¯¹è±¡ä¸å†æŒæœ‰è¿™æŠŠé”</span></span><br><span class="line">      <span class="number">16</span>: goto          <span class="number">24</span></span><br><span class="line">      <span class="number">19</span>: astore_2</span><br><span class="line">      <span class="number">20</span>: aload_1</span><br><span class="line">      <span class="number">21</span>: monitorexit  <span class="comment">// synchronizedè‡ªåŠ¨é‡Šæ”¾é”èµ„æº - å³ä½¿å‡ºç°å¼‚å¸¸</span></span><br><span class="line">      <span class="number">22</span>: aload_2</span><br><span class="line">      <span class="number">23</span>: athrow</span><br><span class="line">      <span class="number">24</span>: <span class="keyword">return</span></span><br><span class="line">    Exception table:</span><br><span class="line">       from    to  target type</span><br><span class="line">           <span class="number">4</span>    <span class="number">16</span>    <span class="number">19</span>   any</span><br><span class="line">          <span class="number">19</span>    <span class="number">22</span>    <span class="number">19</span>   any</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å››å¤§ç‰¹æ€§"><a href="#å››å¤§ç‰¹æ€§" class="headerlink" title="å››å¤§ç‰¹æ€§"></a>å››å¤§ç‰¹æ€§</h2><blockquote>
<ul>
<li><p>åŸå­æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">   i++;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¯è§æ€§</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŠ é” - æ¸…ç©ºæœ¬åœ°å·¥ä½œå†…å­˜,å¼ºåˆ¶ä»ä¸»å­˜ä¸­æ‹‰å–æœ€æ–°å€¼</span><br><span class="line">é‡Šæ”¾é” - å°†æœ¬åœ°å·¥ä½œå†…å­˜ä¸­çš„æ”¹å˜åˆ·å›åˆ°ä¸»å­˜</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ‰åºæ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æŸä¸ªæ—¶åˆ»,åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åŒæ­¥ä»£ç æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯é‡å…¥æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä¸ªçº¿ç¨‹å¦‚æœå·²ç»ç«äº‰åˆ°<span class="string">&quot;é”èµ„æº&quot;</span>,é‚£ä¹ˆå®ƒæ˜¯å¯ä»¥ç»§ç»­ç«äº‰<span class="string">&quot;é”èµ„æº&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;  <span class="comment">// monitor + 1</span></span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="built_in">this</span>)&#123;  <span class="comment">// monitor + 1</span></span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h1 id="volatileå…³é”®å­—"><a href="#volatileå…³é”®å­—" class="headerlink" title="volatileå…³é”®å­—"></a>volatileå…³é”®å­—</h1><blockquote>
<p>ä¿®é¥°å˜é‡çš„</p>
</blockquote>
<blockquote>
<ul>
<li><p><strong>å¯è§æ€§</strong></p>
<p>ä¸åŒçš„çº¿ç¨‹ä¹‹é—´æ˜¯æ— æ³•è®¿é—®åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡</p>
<p>å¯è§æ€§ - ä¸€æ—¦ä½¿ç”¨äº†volatileæ¥ä¿®é¥°æ™®é€šå˜é‡,é‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡[ä¸»å­˜ - æœ¬åœ°]è¿›è¡Œä¿®æ”¹.é‚£ä¹ˆå°±ä¼šä½¿è¿™ä¸ªæœ€æ–°çš„å˜é‡ç«‹å³åˆ·å›åˆ°ä¸»å­˜,å¹¶ä¸”å¦‚æœå…¶ä»–çº¿ç¨‹æ­£åœ¨ä½¿ç”¨è¿™ä¸ªå˜é‡,é‚£ä¹ˆä¹Ÿä¼šè¿«ä½¿å…¶ä»–çº¿ç¨‹å¼ºåˆ¶ä»è‡ªåŠ©å­˜ä¸­æ‹‰å–è¿™ä¸ªå˜é‡çš„æœ€æ–°å€¼,é¿å…å†æ¬¡ä½¿ç”¨ä¹‹å‰çš„â€è„æ•°æ®â€.</p>
</li>
<li><p>ç¦æ­¢æŒ‡ä»¤é‡æ’</p>
</li>
<li><p>ä¸èƒ½å¤Ÿä¿è¯åŸå­æ€§</p>
</li>
</ul>
</blockquote>
<h1 id="æ€»ç»“synchronizedå’ŒvolatileåŒºåˆ«"><a href="#æ€»ç»“synchronizedå’ŒvolatileåŒºåˆ«" class="headerlink" title="æ€»ç»“synchronizedå’ŒvolatileåŒºåˆ«"></a>æ€»ç»“synchronizedå’ŒvolatileåŒºåˆ«</h1><blockquote>
<ol>
<li>synchronizedå¯ä»¥ä¿è¯åŸå­æ€§å’Œå¯è§æ€§.ä½†æ˜¯volatileåªèƒ½ä¿è¯å¯è§æ€§.</li>
<li>volatile[è½»é‡çº§]ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡,synchronizedä¼šé˜»å¡.</li>
<li>æ€§èƒ½æ–¹é¢volatileä¼˜äºsynchronized</li>
<li>volatileåªèƒ½ä¿®é¥°å˜é‡,ä½†æ˜¯synchronizedä¿®é¥°æ–¹æ³•å’Œä»£ç å—</li>
</ol>
</blockquote>
<h1 id="å¸¸ç”¨çš„æ–¹æ³•"><a href="#å¸¸ç”¨çš„æ–¹æ³•" class="headerlink" title="å¸¸ç”¨çš„æ–¹æ³•"></a>å¸¸ç”¨çš„æ–¹æ³•</h1><blockquote>
<ol>
<li>yield</li>
<li>join</li>
<li>sleep</li>
<li>setDaemon(boolean flag);</li>
<li><strong>wait</strong>å’Œnotify&#x2F;notifyAll</li>
</ol>
</blockquote>
<h2 id="åå°å®ˆæŠ¤çº¿ç¨‹"><a href="#åå°å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="åå°å®ˆæŠ¤çº¿ç¨‹"></a>åå°å®ˆæŠ¤çº¿ç¨‹</h2><blockquote>
<p>void setDaemon(true);&#x2F;&#x2F;å¯åŠ¨ä¹‹å‰è®¾ç½®,è®¾ç½®æˆäº†å®ˆæŠ¤çº¿ç¨‹,GCæœ¬èº«å°±æ˜¯ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹</p>
<p>ç‰¹ç‚¹: ä¸€ä¸ªè¿›ç¨‹æ˜¯å¦ç»“æŸ,æ˜¯ä¸éœ€è¦å…³å¿ƒå®ˆæŠ¤çº¿ç¨‹æ˜¯å¦æ‰§è¡Œç»“æŸçš„.å¦‚æœåå°åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹åœ¨æ‰§è¡Œ.é‚£ä¹ˆæ„å‘³ç€è¿›ç¨‹å¯ä»¥ç»“æŸäº†.</p>
</blockquote>
<h1 id="çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡"><a href="#çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡" class="headerlink" title="çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡"></a>çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡</h1><blockquote>
<p>ä¸å…±äº«ä»£ç ,ä½†æ˜¯å…±äº«èµ„æº.</p>
<p>ä¸´ç•Œèµ„æº - å¤šä¸ªçº¿ç¨‹åŒæ—¶éœ€è¦å¹¶å‘æ“ä½œçš„èµ„æº.</p>
</blockquote>
<blockquote>
<p><strong>wait</strong>å’Œnotify&#x2F;notifyAll</p>
</blockquote>
<blockquote>
<ol>
<li><p><strong>waitæ–¹æ³•ä¸€å®šæ˜¯è¦å‡ºç°åœ¨åŒæ­¥ä»£ç ä¸­çš„.</strong></p>
<p>ä½œç”¨:è®©å‡ºcpu,<strong>å¹¶ä¸”ä¼šé‡Šæ”¾é”èµ„æºçš„</strong>.  å½“å‰çº¿ç¨‹å°±ä¼šè¿›å…¥åˆ°ç­‰å¾…é˜»å¡çŠ¶æ€.  æ­¤çŠ¶æ€ä¸‹çš„çº¿ç¨‹æ˜¯ä¸ä¼šç›´æ¥è¿›å…¥åˆ°å°±ç»ªæ€.å¿…é¡»ç”±å…¶ä»–çº¿ç¨‹æ¥å”¤é†’.</p>
</li>
<li><p>notify - éšæœºå”¤é†’å•ä¸ªç­‰å¾…çš„çº¿ç¨‹.</p>
</li>
<li><p>notifyAll - å”¤é†’æ‰€æœ‰çš„</p>
</li>
</ol>
</blockquote>
<h2 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</h2><blockquote>
<p>æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œçš„é¡ºåº</p>
</blockquote>
<h1 id="joinæ–¹æ³•"><a href="#joinæ–¹æ³•" class="headerlink" title="joinæ–¹æ³•"></a>joinæ–¹æ³•</h1><blockquote>
<p>è®©å‡ºcpuæ‰§è¡Œæƒ,ä½†æ˜¯ä¸ä¼šé‡Šæ”¾é”.</p>
</blockquote>
<h1 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h1><blockquote>
<ol>
<li><p>å†™ä¿©ä¸ªçº¿ç¨‹,ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ‰“å°1~52,å¦å¤–ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ‰“å°A-Z,æ‰“å°çš„é¡ºåºå¿…é¡»æ˜¯12A34B56C â€¦.   5152Z</p>
</li>
<li><p>ç¼–å†™10ä¸ªçº¿ç¨‹,t1-è®¡ç®—[1,10]ä¹‹å’Œ,t2-&gt;[11,20],â€¦.   t10-&gt;[91,100],æœ€åæŠŠ10ä¸ªçº¿ç¨‹çš„è®¡ç®—ç»“æœç›¸åŠ  - result</p>
<p>å»ºè®®Callableæ¥å£</p>
</li>
<li><p>é™„åŠ é¢˜(åŒç¨‹é¢è¯•é¢˜) - ä¸‰ä¸ªçº¿ç¨‹,æ‰“å°æ•°å­—çš„,æ‰“å°å¤§å†™å­—æ¯,æ‰“å°å°å†™å­—æ¯</p>
<p>é¡ºåº - A1aB2bC3c    â€¦..  Z26z</p>
<p>å»ºè®®é¢„ä¹ Lock</p>
</li>
</ol>
</blockquote>
<h1 id="Callableçš„å®ç°æ–¹å¼-ä¸€"><a href="#Callableçš„å®ç°æ–¹å¼-ä¸€" class="headerlink" title="Callableçš„å®ç°æ–¹å¼(ä¸€)"></a>Callableçš„å®ç°æ–¹å¼(ä¸€)</h1><blockquote>
<p>å†™ä¸€ä¸ªç±»å»æ˜¯å®ç°è¿™ä¸ªæ¥å£,å¹¶ä¸”é‡å†™é‡Œé¢çš„callæ–¹æ³•.æœ€å¤§çš„ä½œç”¨:è·å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœ</p>
<p>å®ç°æ–¹å¼:FutureTask[C] é¡¶çº§çš„æ¥å£ Future[I]</p>
<p>FutureTask[C]æ„é€ å™¨</p>
<p>public FutureTask(Callable<V> callable)</p>
<p>FutureTask - get()æ–¹æ³• - è·å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœ</p>
<p>å°†FureTakså¯¹è±¡ä¼ å…¥åˆ°Threadæ„é€ å™¨ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallableDemo</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;Integer&gt; &#123;</span><br><span class="line"> <span class="comment">//callæ–¹æ³•å’Œrunæ–¹æ³•çš„åŒºåˆ«</span></span><br><span class="line"> <span class="comment">//callæ–¹æ³•å¯ä»¥æœ‰è¿”å›å€¼</span></span><br><span class="line"> <span class="comment">//callæ–¹æ³•çš„ç­¾åä¸Šå¯ä»¥æŠ›å‡ºå¼‚å¸¸åˆ—è¡¨</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">     Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CallableDemoTest</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     Callable&lt;Integer&gt; c = <span class="keyword">new</span> <span class="title class_">CallableDemo</span>();</span><br><span class="line">     <span class="comment">//æ„å»ºFutureTaskå¯¹è±¡</span></span><br><span class="line">     FutureTask&lt;Integer&gt; task = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(c);</span><br><span class="line">     <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">     <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task);</span><br><span class="line">     <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">     t.start();</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è·å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">//get()å¯èƒ½å‘ç”Ÿé˜»å¡ - å¿…é¡»è¦æ‹¿åˆ°çº¿ç¨‹æ‰§è¡Œçš„ç»“æœä¹‹å,æ‰ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œ.</span></span><br><span class="line">         <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> task.get();</span><br><span class="line"></span><br><span class="line">         <span class="comment">//mainçº¿ç¨‹</span></span><br><span class="line">         System.out.println(<span class="string">&quot;main-result:&quot;</span>+result);</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="Callableçš„å®ç°æ–¹å¼äºŒ"><a href="#Callableçš„å®ç°æ–¹å¼äºŒ" class="headerlink" title="Callableçš„å®ç°æ–¹å¼äºŒ"></a>Callableçš„å®ç°æ–¹å¼äºŒ</h2><blockquote>
<p>ç»“åˆçº¿ç¨‹æ± </p>
</blockquote>
<h1 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h1><p>##1. sleepå’ŒwaitåŒºåˆ«</p>
<blockquote>
<ul>
<li><p>åŒºåˆ«ä¸€:ä½¿ç”¨é™åˆ¶</p>
<ul>
<li><p>ä½¿ç”¨ sleep æ–¹æ³•å¯ä»¥è®©è®©å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œæ—¶é—´ä¸€åˆ°å½“å‰çº¿ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½ä½¿ç”¨ï¼Œä½†éœ€è¦æ•è· InterruptedException å¼‚å¸¸ã€‚</p>
</li>
<li><p>è€Œä½¿ç”¨ wait æ–¹æ³•åˆ™å¿…é¡»æ”¾åœ¨ synchronized å—é‡Œé¢ï¼ŒåŒæ ·éœ€è¦æ•è· InterruptedException å¼‚å¸¸ï¼Œå¹¶ä¸”éœ€è¦è·å–å¯¹è±¡çš„é”ã€‚</p>
<p>è€Œä¸” wait è¿˜éœ€è¦é¢å¤–çš„æ–¹æ³• notify&#x2F; notifyAll è¿›è¡Œå”¤é†’ï¼Œå®ƒä»¬åŒæ ·éœ€è¦æ”¾åœ¨ synchronized å—é‡Œé¢ï¼Œä¸”è·å–å¯¹è±¡çš„é”ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦æ—¶é—´çš„ wait(long millis) æ–¹æ³•ï¼Œæ—¶é—´ä¸€åˆ°ï¼Œæ— éœ€å…¶ä»–çº¿ç¨‹å”¤é†’ï¼Œä¹Ÿä¼šé‡æ–°ç«äº‰è·å–å¯¹è±¡çš„é”ç»§ç»­æ‰§è¡Œã€‚</p>
</li>
</ul>
</li>
<li><p>åŒºåˆ«äºŒ: ä½¿ç”¨åœºæ™¯</p>
<p>sleep ä¸€èˆ¬ç”¨äºå½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œæˆ–è€…è½®å¾ªæš‚åœæ“ä½œï¼Œwait åˆ™å¤šç”¨äºå¤šçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>
</li>
<li><p>åŒºåˆ«ä¸‰: æ‰€å±ç±»</p>
<p>sleep æ˜¯ Thread ç±»çš„é™æ€æœ¬åœ°æ–¹æ³•ï¼Œwait åˆ™æ˜¯ Object ç±»çš„æœ¬åœ°æ–¹æ³•ã€‚</p>
</li>
<li><p>åŒºåˆ«å››:</p>
<ul>
<li>sleepï¼ˆlong millisï¼‰æ–¹æ³•è°ƒç”¨åä¼šè®©å‡ºcpuï¼Œä½†æ˜¯ä¸ä¼šé‡Šæ”¾é”ï¼Œç­‰åˆ°è®¾ç½®çš„æ—¶é—´åˆ°äº†ï¼Œå°†è‡ªå·±ä¸»åŠ¨å”¤èµ·ï¼Œå‚ä¸cpuçš„ç«äº‰</li>
<li>waitï¼ˆï¼‰æ–¹æ³•ï¼ŒåŒæ ·ä¼šè®©å‡ºcpuï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿä¼šé‡Šæ”¾é”</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="2-joinæ–¹æ³•"><a href="#2-joinæ–¹æ³•" class="headerlink" title="2. joinæ–¹æ³•"></a>2. joinæ–¹æ³•</h2><blockquote>
<p>ä¸€ç§ç‰¹æ®Šçš„waitï¼Œå½“å‰è¿è¡Œçº¿ç¨‹è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„joinæ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œç»“æŸç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢ã€‚ æ³¨æ„è¯¥æ–¹æ³•ä¹Ÿéœ€è¦æ•æ‰å¼‚å¸¸ã€‚</p>
<p>ç­‰å¾…è°ƒç”¨joinæ–¹æ³•çš„çº¿ç¨‹ç»“æŸï¼Œå†ç»§ç»­æ‰§è¡Œã€‚å¦‚ï¼št.join();&#x2F;&#x2F;ä¸»è¦ç”¨äºç­‰å¾…tçº¿ç¨‹è¿è¡Œç»“æŸï¼Œè‹¥æ— æ­¤å¥ï¼Œmainåˆ™ä¼šæ‰§è¡Œå®Œæ¯•ï¼Œå¯¼è‡´ç»“æœä¸å¯é¢„æµ‹ã€‚</p>
</blockquote>
<p>##3. yeildæ–¹æ³•</p>
<blockquote>
<p><strong>è®©å‡ºCPUè°ƒåº¦</strong>ï¼ŒThreadç±»çš„æ–¹æ³•ï¼Œç±»ä¼¼sleepåªæ˜¯<strong>ä¸èƒ½ç”±ç”¨æˆ·æŒ‡å®šæš‚åœå¤šé•¿æ—¶é—´ ï¼Œ</strong>å¹¶ä¸”yield()æ–¹æ³•<strong>åªèƒ½è®©åŒä¼˜å…ˆçº§çš„çº¿ç¨‹</strong>æœ‰æ‰§è¡Œçš„æœºä¼šã€‚ yield()åªæ˜¯ä½¿å½“å‰çº¿ç¨‹é‡æ–°å›åˆ°å¯æ‰§è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥æ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥<strong>åˆ°å¯æ‰§è¡ŒçŠ¶æ€å</strong>é©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚è°ƒç”¨yieldæ–¹æ³•åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå‘Šè¯‰çº¿ç¨‹è°ƒåº¦å™¨æˆ‘çš„å·¥ä½œå·²ç»åšçš„å·®ä¸å¤šäº†ï¼Œå¯ä»¥è®©åˆ«çš„ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ä½¿ç”¨CPUäº†ï¼Œ<strong>æ²¡æœ‰ä»»ä½•æœºåˆ¶ä¿è¯é‡‡çº³</strong>ã€‚</p>
</blockquote>
<h1 id="Lockç®€ä»‹"><a href="#Lockç®€ä»‹" class="headerlink" title="Lockç®€ä»‹"></a>Lockç®€ä»‹</h1><blockquote>
<p>java.util.concurrent.locks.Lock æ˜¯ä¸€ä¸ªç±»ä¼¼äºsynchronized å—çš„<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6&spm=1001.2101.3001.7020">çº¿ç¨‹åŒæ­¥æœºåˆ¶</a>ã€‚ä½†æ˜¯ Lockæ¯” synchronized å—æ›´åŠ çµæ´»ã€‚Lockæ˜¯ä¸ªæ¥å£ï¼Œæœ‰ä¸ªå®ç°ç±»æ˜¯ReentrantLockã€‚</p>
</blockquote>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><blockquote>
<ul>
<li>lockæ˜¯æ¥å£,synchronizedå®ƒæ˜¯ä¸€ä¸ªå…³é”®å­—</li>
<li><strong>locké”æ˜¯ä¸€ä¸ªæ˜¾ç¤º</strong>é”(æ‰‹åŠ¨ç”³è¯·é”,æ‰‹åŠ¨é‡Šæ”¾é”),synchronizedéšå¼é”(è‡ªåŠ¨ç”³è¯·&#x2F;é‡Šæ”¾é”)</li>
<li>lockæ‰‹åŠ¨ç”³è¯·é”**(å¯¹è±¡é”)**</li>
<li><strong>lockæ˜¯é”ä»£ç å—</strong></li>
<li>lockå‡ºç°å¼‚å¸¸çš„æ—¶å€™,æ˜¯ä¸ä¼šä¸»åŠ¨é‡Šæ”¾èµ„æºçš„.</li>
</ul>
</blockquote>
<h2 id="Lockå’ŒsynchronizedåŒºåˆ«"><a href="#Lockå’ŒsynchronizedåŒºåˆ«" class="headerlink" title="Lockå’ŒsynchronizedåŒºåˆ«"></a>Lockå’ŒsynchronizedåŒºåˆ«</h2><blockquote>
<ol>
<li><p><strong>synchronizedæ˜¯å…³é”®å­—ï¼Œæ˜¯JVMå±‚é¢çš„ï¼Œè€ŒLockæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ˜¯JDKæä¾›çš„APIã€‚</strong></p>
</li>
<li><p>å½“ä¸€ä¸ªçº¿ç¨‹è·å–äº†synchronizedé”ï¼Œå…¶ä»–çº¿ç¨‹ä¾¿åªèƒ½ä¸€ç›´ç­‰å¾…ç›´è‡³å æœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”ã€‚å½“å‘ç”Ÿä»¥ä¸‹æƒ…å†µä¹‹ä¸€çº¿ç¨‹æ‰ä¼šé‡Šæ”¾é”ï¼š<br>a.å æœ‰é”çš„çº¿ç¨‹æ‰§è¡Œå®Œäº†è¯¥ä»£ç ï¼Œç„¶åé‡Šæ”¾å¯¹é”çš„å æœ‰ã€‚<br>  ã€€ã€€b.å æœ‰é”çº¿ç¨‹æ‰§è¡Œå‘ç”Ÿå¼‚å¸¸ï¼Œæ­¤æ—¶JVMä¼šè®©çº¿ç¨‹è‡ªåŠ¨é‡Šæ”¾é”ã€‚<br>  ã€€ã€€c.å æœ‰é”çº¿ç¨‹è¿›å…¥ WAITING çŠ¶æ€ä»è€Œé‡Šæ”¾é”ï¼Œä¾‹å¦‚åœ¨è¯¥çº¿ç¨‹ä¸­è°ƒç”¨wait()æ–¹æ³•ç­‰ã€‚<br>ä½†æ˜¯å¦‚æœå æœ‰é”çš„çº¿ç¨‹ç”±äºè¦ç­‰å¾…IOæˆ–è€…å› ä¸ºå…¶ä»–åŸå› ï¼ˆæ¯”å¦‚è°ƒç”¨sleepæ–¹æ³•ï¼‰è€Œä½¿çº¿ç¨‹é˜»å¡äº†ï¼Œä½†æ˜¯åˆæ²¡æœ‰é‡Šæ”¾é”ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±åªèƒ½ä¸€ç›´ç­‰å¾…ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ç§å¯ä»¥ä¸è®©çº¿ç¨‹æ— æœŸé™çš„ç­‰å¾…ä¸‹å»çš„æ–¹æ³•ï¼Œæ¯”å¦‚åªç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼ˆtryLock(long time, TimeUnit unit)æˆ–è€…èƒ½è¢«äººä¸ºä¸­æ–­lockInterrup0tibly()ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦Lockã€‚</p>
</li>
<li><p>å½“å¤šä¸ªçº¿ç¨‹è¯»å†™æ–‡ä»¶æ—¶ï¼Œè¯»æ“ä½œå’Œå†™æ“ä½œä¼šå‘ç”Ÿå†²çªç°è±¡ï¼Œ<strong>å†™æ“ä½œå’Œå†™æ“ä½œä¹Ÿä¼šå‘ç”Ÿå†²çªç°è±¡ï¼Œä½†æ˜¯è¯»æ“ä½œå’Œè¯»æ“ä½œä¸ä¼šå‘ç”Ÿå†²çªç°è±¡</strong>ï¼Œä½†æ˜¯å¦‚æœé‡‡ç”¨synchronizedè¿›è¡ŒåŒæ­¥çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å½“å¤šä¸ªçº¿ç¨‹éƒ½åªæ˜¯è¿›è¡Œè¯»æ“ä½œæ—¶ä¹Ÿåªæœ‰è·å–é”çš„çº¿ç¨‹æ‰èƒ½è¿›è¡Œè¯»æ“ä½œï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…é”é‡Šæ”¾åæ‰èƒ½è¯»ï¼ŒLockåˆ™å¯ä»¥å®ç°å½“å¤šä¸ªçº¿ç¨‹éƒ½åªæ˜¯è¿›è¡Œè¯»æ“ä½œæ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¸ä¼šå‘ç”Ÿå†²çªï¼Œä¾‹å¦‚ï¼šReentrantReadWriteLock()ã€‚</p>
</li>
<li><p>å¯ä»¥é€š<strong>è¿‡Lockå¾—çŸ¥çº¿ç¨‹æœ‰æ²¡æœ‰æˆåŠŸè·å–åˆ°é” (ä¾‹å¦‚ï¼šReentrantLock) ï¼Œä½†è¿™ä¸ªæ˜¯synchronizedæ— æ³•åŠåˆ°çš„</strong>ã€‚</p>
</li>
<li><p>é”å±æ€§ä¸Šçš„åŒºåˆ«ï¼šsynchronizedæ˜¯ä¸å¯ä¸­æ–­é”å’Œéå…¬å¹³é”ï¼ŒReentrantLockå¯ä»¥è¿›è¡Œä¸­æ–­æ“ä½œå¹¶åˆ«å¯ä»¥æ§åˆ¶æ˜¯å¦æ˜¯å…¬å¹³é”ã€‚</p>
</li>
<li><p><strong>synchronizedèƒ½é”ä½æ–¹æ³•å’Œä»£ç å—ï¼Œè€ŒLockåªèƒ½é”ä½ä»£ç å—ã€‚</strong></p>
</li>
<li><p><strong>synchronizedæ— æ³•åˆ¤æ–­é”çš„çŠ¶æ€ï¼Œè€ŒLockå¯ä»¥çŸ¥é“çº¿ç¨‹æœ‰æ²¡æœ‰æ‹¿åˆ°é”ã€‚</strong></p>
</li>
</ol>
</blockquote>
<h1 id="è¯»å†™é”-ReadWriteLock"><a href="#è¯»å†™é”-ReadWriteLock" class="headerlink" title="è¯»å†™é”-ReadWriteLock"></a>è¯»å†™é”-ReadWriteLock</h1><blockquote>
<p><strong>é€‚åˆäºè¯»å¤šå†™å°‘çš„åœºæ™¯,æä¾›é«˜å¹¶å‘çš„æ•ˆç‡</strong></p>
</blockquote>
<blockquote>
<p>å®ç°ç±» - ReentrantReadWriteLock</p>
<p>ä¸šåŠ¡éœ€æ±‚ - åŠ é”å½±å“æ•ˆç‡,<strong>è¯»è¯»æ˜¯å…±äº«çš„,è¯»å†™&#x2F;å†™å†™æ˜¯äº’æ–¥</strong></p>
<p><code>ç‰¹ç‚¹</code></p>
<ol>
<li>è¯»é”æ˜¯<strong>å…±äº«é”</strong>,å†™é”æ˜¯<strong>æ’ä»–é”</strong>,è¯»é”å’Œå†™é”æ˜¯ä¸èƒ½å…±å­˜çš„</li>
<li>è¯»é”ä¸èƒ½å‡çº§ä¸ºå†™é”</li>
<li>å†™é”å¯ä»¥é™çº§ä¸ºè¯»é”</li>
</ol>
</blockquote>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistar.day11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬ç±»ç”¨æ¥æ¼”ç¤º: è¯»å†™é”</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: success</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/8/2 10:50 ä¸Šåˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TableDemo</span> &#123;</span><br><span class="line">    <span class="comment">//ç¼“å­˜,è¯»å†™æ“ä½œçš„éƒ½æ˜¯è¿™ä¸ªæ•°æ®</span></span><br><span class="line">    <span class="comment">//private volatile Map&lt;String,Object&gt; maps = new HashMap&lt;&gt;();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªè¯»å†™é”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReadWriteLock</span> <span class="variable">rwLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–è¯»é”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Lock</span> <span class="variable">rLock</span> <span class="operator">=</span> rwLock.readLock();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å†™é”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Lock</span> <span class="variable">wLock</span> <span class="operator">=</span> rwLock.writeLock();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å†™é” - äº’æ–¥çš„,å†™å†™äº’æ–¥</span></span><br><span class="line">            wLock.lock();</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:å†™çº¿ç¨‹enter!&quot;</span>);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:å†™çº¿ç¨‹leave!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾è¯»é”</span></span><br><span class="line">            wLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//è¯»é” - è¯»è¯»å…±äº«</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rLock.lock();</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:è¯»çº¿ç¨‹enter!&quot;</span>);</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;:è¯»çº¿ç¨‹leave!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//é‡Šæ”¾è¯»é”</span></span><br><span class="line">            rLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">tableDemoTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TableDemo</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableDemo</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»º5ä¸ªè¯»å–çš„çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//new Thread(()-&gt;t.read()).start();</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//å†™çš„çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;t.write()).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é”çš„å‡çº§å’Œé™çº§çš„è§„åˆ™"><a href="#é”çš„å‡çº§å’Œé™çº§çš„è§„åˆ™" class="headerlink" title="é”çš„å‡çº§å’Œé™çº§çš„è§„åˆ™"></a>é”çš„å‡çº§å’Œé™çº§çš„è§„åˆ™</h2><h2 id="é”çš„é™çº§-å†™é”é™çº§æˆè¯»é”"><a href="#é”çš„é™çº§-å†™é”é™çº§æˆè¯»é”" class="headerlink" title="é”çš„é™çº§ - å†™é”é™çº§æˆè¯»é”"></a>é”çš„é™çº§ - å†™é”é™çº§æˆè¯»é”</h2><p><code>ç»“è®º:å†™é”æ²¡æœ‰é‡Šæ”¾ä¹‹å‰,æ˜¯å…è®¸å†åŠ ä¸€ä¸ªè¯»é”çš„</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoteDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸€ä¸ªè¯»å†™é”</span></span><br><span class="line">        <span class="type">ReadWriteLock</span> <span class="variable">rwLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¯»é”</span></span><br><span class="line">        <span class="type">Lock</span> <span class="variable">rLock</span> <span class="operator">=</span> rwLock.readLock();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å†™é”</span></span><br><span class="line">        <span class="type">Lock</span> <span class="variable">wLock</span> <span class="operator">=</span> rwLock.writeLock();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŠ å†™é”</span></span><br><span class="line">        wLock.lock();</span><br><span class="line">        System.out.println(<span class="string">&quot;å†™é”begin working&quot;</span>);</span><br><span class="line">        <span class="comment">//æ²¡æœ‰é‡Šæ”¾å†™é”ä¹‹å‰,åˆç»™è¯»é”åŠ é”</span></span><br><span class="line">        rLock.lock();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯»é”begin working&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">        wLock.unlock();</span><br><span class="line">        rLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ”¯æŒé”çš„å‡çº§"><a href="#æ”¯æŒé”çš„å‡çº§" class="headerlink" title="æ”¯æŒé”çš„å‡çº§"></a>æ”¯æŒé”çš„å‡çº§</h2><blockquote>
<p>ä¸èƒ½å¤Ÿå°†è¯»é”å‡çº§æˆå†™é”</p>
<p>ç»“è®º:è¯»é”å¦‚æœæ²¡æœ‰å¾—åˆ°é‡Šæ”¾,æ˜¯ä¸èƒ½å¤Ÿç»§ç»­åŠ å†™é”çš„.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoteDemo</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="comment">//å®šä¹‰ä¸€ä¸ªè¯»å†™é”</span></span><br><span class="line">     <span class="type">ReadWriteLock</span> <span class="variable">rwLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è·å–è¯»é”</span></span><br><span class="line">     <span class="type">Lock</span> <span class="variable">rLock</span> <span class="operator">=</span> rwLock.readLock();</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è·å–å†™é”</span></span><br><span class="line">     <span class="type">Lock</span> <span class="variable">wLock</span> <span class="operator">=</span> rwLock.writeLock();</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è¯»</span></span><br><span class="line">     rLock.lock();</span><br><span class="line">     System.out.println(<span class="string">&quot;è¯»é”begin working&quot;</span>);</span><br><span class="line"></span><br><span class="line">     <span class="comment">//åœ¨æ²¡æœ‰é‡Šæ”¾è¯»é”ä¹‹å‰,æƒ³è¦ç›´æ¥åŠ ä¸€ä¸ªå†™é”</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//ç»“è®º:è¯»é”å¦‚æœæ²¡æœ‰å¾—åˆ°é‡Šæ”¾,æ˜¯ä¸èƒ½å¤Ÿç»§ç»­åŠ å†™é”çš„.</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//åŠ å†™é”</span></span><br><span class="line">     wLock.lock();</span><br><span class="line">     System.out.println(<span class="string">&quot;å†™é”begin working&quot;</span>);</span><br><span class="line"></span><br><span class="line">     <span class="comment">//é‡Šæ”¾é”</span></span><br><span class="line">     wLock.unlock();</span><br><span class="line">     rLock.unlock();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ä¸ºä»€ä¹ˆè¦é™çº§"><a href="#ä¸ºä»€ä¹ˆè¦é™çº§" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é™çº§"></a>ä¸ºä»€ä¹ˆè¦é™çº§</h2><blockquote>
<p>è·å–å†™é” - é™çº§æˆè¯»é” - é‡Šæ”¾å†™é” - é‡Šæ”¾è¯»é”</p>
<p>æœ€ä¸»è¦çš„ç›®çš„:</p>
<ul>
<li>ä¿è¯æ•°æ®çš„å¯è§æ€§</li>
<li>æé«˜è¾¹å†™è¾¹è¯»çš„æ•ˆç‡</li>
</ul>
<p>T1çº¿ç¨‹ - å®Œæˆä¸šåŠ¡ - è¯»å†™ä¸šåŠ¡ - æ²¡æœ‰é”çš„é™çº§ - ç”³è¯·åˆ°å†™é”(ä¸šåŠ¡æ¯”è¾ƒè€—æ—¶) - å†™é”æ²¡æœ‰é‡Šæ”¾ä¹‹å‰ - å¯¼è‡´å…¶ä»–çº¿ç¨‹é˜»å¡,å…¶ä»–çº¿ç¨‹æ˜¯ä¸èƒ½è¯»å’Œå†™çš„.</p>
</blockquote>
<blockquote>
<p>é”é™çº§ - T1çº¿ç¨‹ - å†™é”[å†™ä¸šåŠ¡] - é™çº§æˆäº†è¯»é” - å…¶ä»–çº¿ç¨‹å…è®¸æ¥è¯»çš„.</p>
</blockquote>
<blockquote>
<p>å¦‚ä½•ä¿è¯æ•°æ®çš„å¯è§æ€§</p>
<p>åœºæ™¯ä¸€:  T1 -&gt; å…ˆç”³è¯·å†™é”,é‡Šæ”¾å†™é”,          													ç”³è¯·è¯»é”,é‡Šæ”¾è¯»é”        &#x3D;&gt; ä¸å…·å¤‡è¿ç»­æ€§,é€ æˆå¤šä¸ªçº¿ç¨‹æ¥ç«äº‰é”èµ„æº</p>
<p>â€‹                                                             T2ä¿®æ”¹data[ç”³è¯·å†™é”,é‡Šæ”¾å†™é”]</p>
<p>å¯¼è‡´T1æ‹¿åˆ°çš„dataå¯èƒ½åœ¨æŸä¸ªæ—¶åˆ»å°±ä¼šå˜æˆè„çš„æ•°æ®[T2ä¿®æ”¹å‰çš„æ•°æ®],ä½†æ˜¯å¹¶ä¸æ˜¯è¯´æ˜T1ä¸€ç›´ä½¿ç”¨çš„æ˜¯T2ä¿®æ”¹ä¹‹å‰çš„æ•°æ®.</p>
<p>å¦‚æœdataä½¿ç”¨äº†volatileä¿®é¥°çš„è¯.T1åé¢è¿˜æ˜¯ä¼šä½¿ç”¨åˆ°æœ€æ–°çš„æ•°æ®.</p>
</blockquote>
<h1 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h1><blockquote>
<p>æœ‰ä¸€ä¸ªæ•°ç»„[1,150000]æ•°æ®.ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ¥ç»Ÿè®¡å‡ºè¿™ä¸ªæ•°ç»„ä¸­æ‰€æœ‰è´¨æ•°çš„ä¸ªæ•°.</p>
</blockquote>
<h1 id="æ­»é”-é¢è¯•é¢˜"><a href="#æ­»é”-é¢è¯•é¢˜" class="headerlink" title="æ­»é” - é¢è¯•é¢˜"></a>æ­»é” - é¢è¯•é¢˜</h1><h2 id="æ­»é”å‘ç”Ÿæ¡ä»¶"><a href="#æ­»é”å‘ç”Ÿæ¡ä»¶" class="headerlink" title="æ­»é”å‘ç”Ÿæ¡ä»¶"></a>æ­»é”å‘ç”Ÿæ¡ä»¶</h2><blockquote>
<p>åœºæ™¯:æ­»é”æ˜¯æŒ‡<strong>ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹</strong>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äº<strong>ç«äº‰èµ„æº</strong>æˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œ<strong>è¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹&#x2F;çº¿ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹&#x2F;çº¿ç¨‹</strong>.</p>
</blockquote>
<blockquote>
<p><code>å“²å­¦å®¶åƒé¥­ - 10ä¸ªäººå›´æˆä¸€æ¡Œ - æ¯ä¸ªäººæ‰‹ä¸Šéƒ½æ‹¥æœ‰1æ ¹ç­·å­ - æ²¡äººè®©å‡ºè‡ªå·±æ‰‹ä¸Šæ‹¥æœ‰çš„è¿™ä¸ªç­·å­ - æ­»é”</code></p>
</blockquote>
<blockquote>
<p><strong>1</strong>ï¼‰<strong>äº’æ–¥æ¡ä»¶ï¼š</strong>æŒ‡è¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡Œæ’å®ƒæ€§ä½¿ç”¨ï¼Œ<strong>å³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºåªç”±ä¸€ä¸ªè¿›ç¨‹å ç”¨</strong>ã€‚å¦‚æœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚èµ„æºï¼Œåˆ™è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æºçš„è¿›ç¨‹ç”¨æ¯•é‡Šæ”¾ã€‚</p>
<p><strong>2</strong>ï¼‰<strong>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</strong>ï¼šæŒ‡è¿›ç¨‹å·²ç»ä¿æŒè‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆ<strong>æå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚</strong>ï¼Œè€Œ<strong>è¯¥èµ„æºå·²è¢«å…¶å®ƒè¿›ç¨‹å æœ‰</strong>ï¼Œæ­¤<strong>æ—¶è¯·æ±‚è¿›ç¨‹é˜»å¡</strong>ï¼Œä½†åˆå¯¹<strong>è‡ªå·±å·²è·å¾—çš„å…¶å®ƒèµ„æºä¿æŒä¸æ”¾</strong>ã€‚</p>
<p><strong>3</strong>ï¼‰<strong>ä¸å‰¥å¤ºæ¡ä»¶ï¼š</strong>æŒ‡è¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œ<strong>åœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚</strong></p>
<p><strong>4</strong>ï¼‰<strong>ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼š</strong>æŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€”â€”èµ„æºçš„ç¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0ï¼ŒP1ï¼ŒP2ï¼ŒÂ·Â·Â·ï¼ŒPn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼›P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²è¢«P0å ç”¨çš„èµ„æºã€‚</p>
</blockquote>
<blockquote>
<p>åªéœ€è¦ç ´åè¿™ä¸ªå››ä¸ªæ¡ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ª,å°±å¯ä»¥æ‰“ç ´æ­»é”.æ­»é”æ˜¯å¯ä»¥é€šè¿‡ç¼–ç¨‹æ¥å°½å¯èƒ½å»é¿å….</p>
</blockquote>
<h2 id="æ­»é”çš„ä»£ç "><a href="#æ­»é”çš„ä»£ç " class="headerlink" title="æ­»é”çš„ä»£ç "></a>æ­»é”çš„ä»£ç </h2><p><code>é™æ€åŸŸå®¹æ˜“å‘ç”Ÿæ­»é”</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeadDemo</span> &#123;</span><br><span class="line">    <span class="comment">//æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ç‹¬ç«‹çš„ä¸€æŠŠé”</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">obj1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();<span class="comment">//ä¸´ç•Œèµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">obj2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();<span class="comment">//ä¸´ç•Œèµ„æº</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="type">DeadDemo</span> <span class="variable">deadDemo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadDemo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (deadDemo.obj1)&#123;<span class="comment">//ä¸åŒçš„å¯¹è±¡æ‹¥æœ‰çš„æ˜¯ç‹¬ç«‹çš„é”</span></span><br><span class="line">            System.out.println(<span class="string">&quot;==11==&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è®©d2çº¿ç¨‹æœ‰è¶³å¤Ÿçš„æ—¶é—´èƒ½å¤Ÿè·å–åˆ°obj2å¯¹è±¡é”</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¦‚æœå¸Œæœ›ç»§ç»­æ‰§è¡Œ,å¿…é¡»è¦å…ˆè·å–åˆ°obj2å¯¹è±¡é”</span></span><br><span class="line">            <span class="keyword">synchronized</span> (deadDemo.obj2)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;==22==&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="type">DeadDemo</span> <span class="variable">deadDemo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeadDemo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (deadDemo.obj2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;==33===&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ä¸ºäº†è®©d1èƒ½å¤Ÿæœ‰è¶³å¤Ÿçš„æ—¶é—´æ‹¿åˆ°obj1å¯¹è±¡é”</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¦‚æœå¸Œæœ›ç»§ç»­æ‰§è¡Œ,å¿…é¡»è¦å…ˆè·å–åˆ°obj1å¯¹è±¡é”</span></span><br><span class="line">            <span class="keyword">synchronized</span> (deadDemo.obj1)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;==44==&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DeadDemoTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">D1</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">D2</span>();</span><br><span class="line"></span><br><span class="line">        d1.start();</span><br><span class="line"></span><br><span class="line">        d2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é¡¹ç›®ä¸­æ˜¯å¦å‡ºç°æ­»é”çš„åœºæ™¯"><a href="#é¡¹ç›®ä¸­æ˜¯å¦å‡ºç°æ­»é”çš„åœºæ™¯" class="headerlink" title="é¡¹ç›®ä¸­æ˜¯å¦å‡ºç°æ­»é”çš„åœºæ™¯"></a>é¡¹ç›®ä¸­æ˜¯å¦å‡ºç°æ­»é”çš„åœºæ™¯</h2><blockquote>
<p>ç”¨Mysqlçš„demoæ¥æ¼”ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drop table tt;</span><br><span class="line">create table tt(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int(7)</span><br><span class="line">);</span><br><span class="line">insert into tt values(1,&#x27;admin&#x27;,18),(2,&#x27;tom&#x27;,20);</span><br></pre></td></tr></table></figure>

<p><code>idä¸»é”®åˆ— - è‡ªåŠ¨ä¼šå°†ä¸»é”®åˆ—è®¾ç½®æˆç´¢å¼•åˆ—</code></p>
<p><code>DQL - select - å…±äº«é”</code></p>
<p><code>DMLæ“ä½œ-update delete insert</code> - è‡ªåŠ¨ä¸Šé” - <strong>æ‚²è§‚é”</strong></p>
<p>è¡¨é”å’Œè¡Œé” - ä»¥updateä¸ºä¾‹ + å¤šäº‹åŠ¡[å¼€å¯ä¿©ä¸ªçª—å£]</p>
</blockquote>
<blockquote>
<p><code>è¡¨é” - æ›´æ–°æ¡ä»¶åˆ— - éç´¢å¼•åˆ—</code></p>
</blockquote>
<blockquote>
<p>T1																								T2</p>
<p>begin;                                                  						 			begin; </p>
<p>â‘ update tt set age&#x3D;30 where name&#x3D;â€™tomâ€™ ;       			â‘¡update tt set age&#x3D;30 where name&#x3D;â€™tomâ€™       -   é˜»å¡</p>
<p>â‘¢commit;                                                                 			 â‘£é¡ºåˆ©æ›´æ–° - T2æ‹¥æœ‰é”</p>
<p>â‘¤update tt set age&#x3D;30 where name&#x3D;â€™adminâ€™;&#x2F;&#x2F;é˜»å¡</p>
</blockquote>
<blockquote>
<p><code>è¡Œé” - idåˆ—ä½œä¸ºæ›´æ–°åˆ— - ç´¢å¼•åˆ—</code></p>
<p>T1																									T2</p>
<p>begin;																							begin;</p>
<p>â‘ update tt set age&#x3D;â€™18â€™ where id&#x3D;2;                                â‘¡update tt set age&#x3D;â€™18â€™ where id&#x3D;1;  &#x2F;&#x2F; ä¸ä¼šé˜»å¡</p>
<p>â€‹																								â‘¢update tt set age&#x3D;â€™18â€™ where id&#x3D;2; &#x2F;&#x2F;ä»ç„¶ä¼šé˜»å¡</p>
<p>â‘£commit;</p>
</blockquote>
<p><code>æ­»é”åœºæ™¯</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">T1-																														T2-</span><br><span class="line">update tt set age=&#x27;18&#x27; where id=2;//row2é”        					 update tt set age=&#x27;18&#x27; where id=1;//row1é”     </span><br><span class="line">update tt set age=&#x27;18&#x27; where id=1;//å‘ç”Ÿé˜»å¡         				 update tt set age=&#x27;18&#x27; where id=2;  //å‘ç”Ÿé˜»å¡ </span><br><span class="line"></span><br><span class="line">public void update()&#123;</span><br><span class="line">	  Thread t1 = new Thread(()-&gt;service.update(1));</span><br><span class="line">	  </span><br><span class="line">	  Thread t2 = new Thread(()-&gt;service.update(2));</span><br><span class="line">	  </span><br><span class="line">	  t1.start();</span><br><span class="line">	  t2.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ€ä¹ˆè§£å†³??? - è°ƒæ•´ä¸šåŠ¡çš„é¡ºåº - å°†éœ€è¦è€ƒè™‘é¡ºåºçš„è¯­å¥æ”¾å…¥åˆ°ä¸€ä¸ªçº¿ç¨‹ä¸­.ä¿è¯çº¿ç¨‹çš„é¡ºåºæ€§æ‰§è¡Œ.</span><br></pre></td></tr></table></figure>



<h1 id="å››ç§çº¿ç¨‹æ± "><a href="#å››ç§çº¿ç¨‹æ± " class="headerlink" title="å››ç§çº¿ç¨‹æ± "></a>å››ç§çº¿ç¨‹æ± </h1><blockquote>
<p>çº¿ç¨‹æ± çš„è¿”å›å€¼ExecutorServiceç®€ä»‹</p>
<p>ExecutorServiceæ˜¯Javaæä¾›çš„ç”¨äº<strong>ç®¡ç†çº¿ç¨‹</strong>æ± çš„ç±»ã€‚è¯¥ç±»çš„ä¸¤ä¸ªä½œç”¨ï¼š<strong>æ§åˆ¶çº¿ç¨‹æ•°é‡</strong>å’Œ<strong>é‡ç”¨çº¿ç¨‹</strong></p>
<ul>
<li><p>Executors.newCacheThreadPool()<strong>ï¼šå¯ç¼“å­˜çº¿ç¨‹æ± </strong>ï¼Œå…ˆæŸ¥çœ‹æ± ä¸­æœ‰æ²¡æœ‰ä»¥å‰å»ºç«‹çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰ï¼Œå°±ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹åŠ å…¥æ± ä¸­ï¼Œç¼“å­˜å‹æ± å­é€šå¸¸ç”¨äºæ‰§è¡Œä¸€äº›ç”Ÿå­˜æœŸå¾ˆçŸ­çš„å¼‚æ­¥å‹ä»»åŠ¡</p>
</li>
<li><p>Executors.newFixedThreadPool(int n)ï¼šåˆ›å»ºä¸€ä¸ª<strong>å¯é‡ç”¨</strong>å›ºå®šä¸ªæ•°çš„çº¿ç¨‹æ± ï¼Œä»¥å…±äº«çš„æ— ç•Œé˜Ÿåˆ—æ–¹å¼æ¥è¿è¡Œè¿™äº›çº¿ç¨‹ã€‚</p>
</li>
<li><p>Executors.newScheduledThreadPool(int n)ï¼šåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ScheduledFuture&lt;?&gt; scheduleAtFixedRate(Runnable command,</span><br><span class="line">                                                  <span class="type">long</span> initialDelay,  <span class="comment">// å»¶æ—¶</span></span><br><span class="line">                                                  <span class="type">long</span> period, <span class="comment">// å‘¨æœŸæ€§æ—¶é—´</span></span><br><span class="line">                                                  TimeUnit unit); <span class="comment">//æ—¶é—´å•ä½</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>Executors.newSingleThreadExecutor()ï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚</p>
</li>
<li><p>newWorkStealingPool(int parallelism)ï¼Œè¿™æ˜¯ä¸€ä¸ªç»å¸¸è¢«äººå¿½ç•¥çš„çº¿ç¨‹æ± ï¼ŒJava 8 æ‰åŠ å…¥è¿™ä¸ªåˆ›å»ºæ–¹æ³•ï¼Œå…¶å†…éƒ¨ä¼šæ„å»ºForkJoinPoolï¼Œåˆ©ç”¨Work-Stealingç®—æ³•ï¼Œå¹¶è¡Œåœ°å¤„ç†ä»»åŠ¡ï¼Œä¸ä¿è¯å¤„ç†é¡ºåºã€‚</p>
</li>
</ul>
</blockquote>
<h2 id="çº¿ç¨‹æ± çš„ä¼˜åŠ¿"><a href="#çº¿ç¨‹æ± çš„ä¼˜åŠ¿" class="headerlink" title="çº¿ç¨‹æ± çš„ä¼˜åŠ¿"></a>çº¿ç¨‹æ± çš„ä¼˜åŠ¿</h2><blockquote>
<ul>
<li>é™ä½èµ„æºçš„èƒ½è€—,é“œé¼“é‡å¤åˆ©ç”¨å·²ç»åˆ›å»ºçš„çº¿ç¨‹æ¥é™ä½çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ—¶é—´æˆæœ¬.</li>
<li>æé«˜å“åº”é€Ÿåº¦.å½“ä»»åŠ¡åˆ°è¾¾çš„æ—¶å€™.ä»»åŠ¡ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹åˆ›å»ºå°±å¯ä»¥è‡ªç«‹å³æ‰§è¡Œ.</li>
<li>ç®¡ç†çº¿ç¨‹.çº¿ç¨‹æ˜¯ç¨€ç¼º&#x2F;æ˜‚è´µèµ„æº,æ¯”è¾ƒæ¶ˆè€—ç³»ç»Ÿèµ„æº.å¦‚æœä¸åŠ ä»¥é™åˆ¶,é™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§.ä½¿ç”¨çº¿ç¨‹æ± æ¥å¯¹çº¿ç¨‹è¿›è¡Œç»Ÿä¸€çš„åˆ†é…,è°ƒä¼˜,ç›‘æ§.</li>
</ul>
</blockquote>
<h2 id="çº¿ç¨‹æ± çš„å‚æ•°çš„æ„ä¹‰"><a href="#çº¿ç¨‹æ± çš„å‚æ•°çš„æ„ä¹‰" class="headerlink" title="çº¿ç¨‹æ± çš„å‚æ•°çš„æ„ä¹‰"></a>çº¿ç¨‹æ± çš„å‚æ•°çš„æ„ä¹‰</h2><blockquote>
<p>åœ¨ä½¿ç”¨çº¿ç¨‹æ± æ—¶ï¼Œä¸ºäº†è·å–æœ€ä½³çš„æ€§èƒ½ï¼Œå¸¸å¸¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šçº¿ç¨‹æ± çš„å‚æ•°ï¼Œ<strong>ThreadPoolExecutor</strong>æ˜¯æœ€å¸¸ç”¨çš„çº¿ç¨‹æ± æ‰§è¡Œå™¨ï¼Œå®ƒæœ‰å››ä¸ªæ„é€ æ–¹æ³•ï¼Œå‚æ•°æœ€å¤šçš„æ„é€ æ–¹æ³•æœ‰7ä¸ªå‚æ•°ï¼Œä¸‹é¢å°†è¯¦ç»†ä»‹ç»è¿™7ä¸ªå‚æ•°çš„å«ä¹‰åŠä½œç”¨.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize,</span></span><br><span class="line"><span class="params">                        <span class="type">int</span> maximumPoolSize,</span></span><br><span class="line"><span class="params">                        <span class="type">long</span> keepAliveTime,</span></span><br><span class="line"><span class="params">                        TimeUnit unit,</span></span><br><span class="line"><span class="params">                        BlockingQueue&lt;Runnable&gt; workQueue,</span></span><br><span class="line"><span class="params">                        ThreadFactory threadFactory,</span></span><br><span class="line"><span class="params">                        RejectedExecutionHandler handler)</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>å‚æ•°è¯¦è§£</code></p>
<ol>
<li><p><strong>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šcorePoolSize</strong></p>
<p><strong>çº¿ç¨‹æ± ä¸­æ´»è·ƒçš„çº¿ç¨‹æ•°ï¼Œå³ä½¿å®ƒä»¬æ˜¯ç©ºé—²</strong>çš„ï¼Œé™¤éè®¾ç½®äº†allowCoreThreadTimeOutä¸ºtrueã€‚allowCoreThreadTimeOutçš„å€¼æ˜¯æ§åˆ¶æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯å¦åœ¨æ²¡æœ‰ä»»åŠ¡æ—¶æ˜¯å¦åœæ­¢æ´»è·ƒçš„çº¿ç¨‹ï¼Œå½“å®ƒçš„å€¼ä¸ºtrueæ—¶ï¼Œåœ¨çº¿ç¨‹æ± æ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹éƒ½ä¼šåœæ­¢</p>
</li>
<li><p><strong>æœ€å¤§çº¿ç¨‹æ•°ï¼šmaximumPoolSize</strong></p>
<p>çº¿ç¨‹æ± æ‰€å…è®¸å­˜åœ¨çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚</p>
</li>
<li><p><strong>å¤šä½™çº¿ç¨‹å­˜æ´»æ—¶é•¿ï¼škeepAliveTime</strong> - newCachedThreadPool() - é»˜è®¤æ˜¯60</p>
<p>çº¿ç¨‹æ± ä¸­é™¤æ ¸å¿ƒçº¿ç¨‹æ•°ä¹‹å¤–çš„çº¿ç¨‹ï¼ˆå¤šä½™çº¿ç¨‹ï¼‰çš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´èŒƒå›´å†…ï¼Œå¤šä½™çº¿ç¨‹æ²¡æœ‰ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œåˆ™å¤šä½™çº¿ç¨‹å°±ä¼šåœæ­¢ã€‚(æ³¨æ„ï¼šå¤šä½™çº¿ç¨‹æ•° &#x3D; æœ€å¤§çº¿ç¨‹æ•° - æ ¸å¿ƒçº¿ç¨‹æ•°).</p>
</li>
<li><p><strong>æ—¶é—´å•ä½ï¼šunit</strong></p>
<p>å¤šä½™çº¿ç¨‹å­˜æ´»æ—¶é—´çš„å•ä½ï¼Œå¯ä»¥æ˜¯åˆ†é’Ÿã€ç§’ã€æ¯«ç§’ç­‰ã€‚</p>
</li>
<li><p><strong>ä»»åŠ¡é˜Ÿåˆ—ï¼šworkQueue</strong></p>
<p>çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä»»åŠ¡ä¼šå…ˆæäº¤åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶åå·¥ä½œçº¿ç¨‹å–å‡ºä»»åŠ¡è¿›è¡Œæ‰§è¡Œï¼Œå½“è¿™ä¸ªé˜Ÿåˆ—æ»¡äº†ï¼Œçº¿ç¨‹æ± å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</p>
</li>
<li><p><strong>çº¿ç¨‹å·¥å‚ï¼šthreadFactory</strong></p>
<p>åˆ›å»ºçº¿ç¨‹æ± çš„å·¥å‚ï¼Œçº¿ç¨‹æ± å°†ä½¿ç”¨è¿™ä¸ªå·¥å‚æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼Œè‡ªå®šä¹‰çº¿ç¨‹å·¥å‚éœ€è¦å®ç°ThreadFactoryæ¥å£ã€‚</p>
</li>
<li><p><strong>æ‹’ç»æ‰§è¡Œå¤„ç†å™¨ï¼ˆä¹Ÿç§°æ‹’ç»ç­–ç•¥ï¼‰ï¼šhandler</strong></p>
<p>å½“çº¿ç¨‹æ± æ— ç©ºé—²çº¿ç¨‹ï¼Œå¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œæ­¤æ—¶å°†çº¿ç¨‹æ± å°†ä½¿ç”¨è¿™ä¸ªå¤„ç†å™¨æ¥å¤„ç†æ–°æäº¤çš„ä»»åŠ¡ã€‚</p>
</li>
</ol>
</blockquote>
</blockquote>
<h2 id="ç†è§£å‚æ•°-é¢è¯•"><a href="#ç†è§£å‚æ•°-é¢è¯•" class="headerlink" title="ç†è§£å‚æ•°-é¢è¯•"></a>ç†è§£å‚æ•°-é¢è¯•</h2><blockquote>
<ul>
<li><p>æœ€å¤§çº¿ç¨‹æ•°maximumPoolSize &#x3D; æ ¸å¿ƒçº¿ç¨‹æ•°(corePoolSize) + <strong>éæ ¸å¿ƒçº¿ç¨‹æ•°</strong></p>
<p><strong>éæ ¸å¿ƒçš„çº¿ç¨‹ä½•æ—¶å¯åŠ¨</strong></p>
<blockquote>
<p>ä»»åŠ¡è¿‡æ¥,corePoolSize(æ ¸å¿ƒçš„æ´»è·ƒçº¿ç¨‹)å…ˆå¯ç”¨,å¦‚æœæ´»è·ƒçš„çº¿ç¨‹æ•°ä¸å¤Ÿç”¨.é‚£ä¹ˆå°±ä¼šå°†è¿™ä¸ªä»»åŠ¡æ”¾å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­.</p>
<p>å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¹Ÿå¡æ»¡äº†.é‚£ä¹ˆéæ ¸å¿ƒçº¿ç¨‹æ‰ä¼šå¯ç”¨.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">corePoolSize=<span class="number">10</span>,maximumPoolSize=<span class="number">20</span>,queueSize=<span class="number">10</span>[ä»»åŠ¡é˜Ÿåˆ— - åªèƒ½å­˜å‚¨<span class="number">10</span>ä¸ªä»»åŠ¡]</span><br><span class="line">  </span><br><span class="line"><span class="number">1.</span> <span class="number">20</span>ä¸ªå¹¶å‘ä»»åŠ¡è¿‡æ¥,å½“å‰çº¿ç¨‹æ± ä¸­ä¼šæœ‰å¤šå°‘ä¸ªæ´»è·ƒçš„çº¿ç¨‹? -&gt; <span class="number">10</span>ä¸ª</span><br><span class="line">   a. å¯ç”¨<span class="number">10</span>ä¸ªæ´»è·ƒçº¿ç¨‹ - æ‰§è¡Œå…¶ä¸­<span class="number">10</span>ä¸ªä»»åŠ¡,è¿˜æœ‰<span class="number">10</span>ä¸ªä»»åŠ¡æ”¾å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­[é˜Ÿåˆ—æ»¡äº†]</span><br><span class="line">      åŸå…ˆçš„æ ¸å¿ƒ<span class="number">10</span>ä¸ªçº¿ç¨‹ä¼šåœ¨æ¥ä¸‹æ¥ç»§ç»­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ‰§è¡Œ.</span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> <span class="number">21</span>ä¸ªå¹¶å‘ä»»åŠ¡è¿‡æ¥,å½“å‰çº¿ç¨‹æ± ä¸­ä¼šæœ‰å¤šå°‘ä¸ªæ´»è·ƒçš„çº¿ç¨‹? -&gt; <span class="number">11</span>ä¸ª</span><br><span class="line">    a. å¯ç”¨<span class="number">10</span>ä¸ªæ´»è·ƒçº¿ç¨‹ - æ‰§è¡Œå…¶ä¸­<span class="number">10</span>ä¸ªä»»åŠ¡,è¿˜æœ‰<span class="number">10</span>ä¸ªä»»åŠ¡æ”¾å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­[é˜Ÿåˆ—æ»¡äº†]</span><br><span class="line">    b. å¤šäº†<span class="number">1</span>ä¸ªä»»åŠ¡.å¯ç”¨äº†éæ ¸å¿ƒçº¿ç¨‹,éœ€è¦åœ¨çº¿ç¨‹æ± ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹</span><br><span class="line">  </span><br><span class="line"><span class="number">3.</span> <span class="number">30</span>ä¸ªå¹¶å‘ä»»åŠ¡è¿‡æ¥,å½“å‰çº¿ç¨‹æ± ä¸­ä¼šæœ‰å¤šå°‘ä¸ªæ´»è·ƒçš„çº¿ç¨‹? -&gt; <span class="number">20</span>ä¸ª</span><br><span class="line">   corePoolSize(<span class="number">10</span>ä¸ª)å’ŒqueueSize(<span class="number">10</span>ä¸ªä»»åŠ¡)éƒ½æ»¡äº† - å¯åŠ¨æ ¸å¿ƒçº¿ç¨‹,å¯åŠ¨äº†<span class="number">10</span>ä¸ª =&gt; æ´»è·ƒçš„çº¿ç¨‹æœ€å¤§åªèƒ½åˆ°è¾¾<span class="number">20</span>ä¸ª</span><br><span class="line">  </span><br><span class="line"><span class="number">4.</span> <span class="number">31</span>ä¸ªå¹¶å‘ä»»åŠ¡è¿‡æ¥,å½“å‰çº¿ç¨‹æ± ä¸­ä¼šæœ‰å¤šå°‘ä¸ªæ´»è·ƒçš„çº¿ç¨‹? -&gt; <span class="number">20</span>ä¸ª</span><br><span class="line">   çº¿ç¨‹æ± æ»¡äº†(<span class="number">20</span>ä¸ª) + ä»»åŠ¡é˜Ÿåˆ—(<span class="number">10</span>) + è¿˜å¤šå‡º<span class="number">1</span>ä¸ª =&gt; è§¦å‘å®ƒçš„æ‹’ç»ç­–ç•¥.</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h2 id="çº¿ç¨‹çš„æ‹’ç»ç­–ç•¥"><a href="#çº¿ç¨‹çš„æ‹’ç»ç­–ç•¥" class="headerlink" title="çº¿ç¨‹çš„æ‹’ç»ç­–ç•¥"></a>çº¿ç¨‹çš„æ‹’ç»ç­–ç•¥</h2><blockquote>
<p>æ‰€è°“æ‹’ç»ç­–ç•¥ï¼Œå°±æ˜¯å½“<strong>çº¿ç¨‹æ± æ»¡äº†</strong>ã€<strong>é˜Ÿåˆ—ä¹Ÿæ»¡äº†</strong>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹ä»»åŠ¡é‡‡å–çš„æªæ–½ã€‚æˆ–è€…ä¸¢å¼ƒã€æˆ–è€…æ‰§è¡Œã€æˆ–è€…å…¶ä»–â€¦</p>
<p>jdkè‡ªå¸¦4ç§æ‹’ç»ç­–ç•¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ã€‚</p>
<ol>
<li><code>CallerRunsPolicy</code> &#x2F;&#x2F; åœ¨è°ƒç”¨è€…çº¿ç¨‹æ‰§è¡Œ - å½“è§¦å‘æ‹’ç»ç­–ç•¥æ—¶ï¼Œåªè¦çº¿ç¨‹æ± æ²¡æœ‰å…³é—­ï¼Œå°±ç”±æäº¤ä»»åŠ¡çš„å½“å‰çº¿ç¨‹å¤„ç†ã€‚</li>
<li><code>AbortPolicy</code> &#x2F;&#x2F; ç›´æ¥æŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸,å¼‚å¸¸å¤„ç†</li>
<li><code>DiscardPolicy</code> &#x2F;&#x2F; ä»»åŠ¡ç›´æ¥ä¸¢å¼ƒï¼Œä¸åšä»»ä½•å¤„ç†</li>
<li><code>DiscardOldestPolicy</code> &#x2F;&#x2F; ä¸¢å¼ƒé˜Ÿåˆ—é‡Œæœ€æ—§çš„é‚£ä¸ªä»»åŠ¡ï¼Œå†å°è¯•æ‰§è¡Œå½“å‰ä»»åŠ¡</li>
</ol>
<p>è¿™å››ç§ç­–ç•¥å„æœ‰ä¼˜åŠ£ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<code>DiscardPolicy</code>ï¼Œä½†æ˜¯è¿™ç§ç­–ç•¥æœ‰ä¸€ä¸ªå¼Šç«¯å°±æ˜¯ä»»åŠ¡æ‰§è¡Œçš„è½¨è¿¹ä¸ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚</p>
</blockquote>
<h1 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ-çŠ¶æ€"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ-çŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ(çŠ¶æ€)"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ(çŠ¶æ€)</h1><p> <img src="D:\PerfLogs\source_posts\imgs\thread_life.png" alt="thread_life"></p>
<blockquote>
<ol>
<li><p>ç¬æ€ - new</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™.  <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T1</span>();</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°±ç»ªæ€ - å¯è¿è¡Œæ€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºä¸­è°ƒç”¨start() - è®©jvmå»è°ƒç”¨runæ–¹æ³•</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œæ€ - æ­£åœ¨è¿è¡Œçš„ç¨‹åº</p>
</li>
<li><p>é˜»å¡æ€</p>
<p>4-1. åŒæ­¥é˜»å¡ - éœ€è¦è·å–åˆ°â€åŒæ­¥é”â€,å¦‚æœæ²¡æœ‰è·å–åˆ°åŒæ­¥é”,åªèƒ½è¿›å…¥åˆ°åŒæ­¥é˜»å¡çš„é˜»å¡é˜Ÿåˆ—ä¸­ç­‰å¾….</p>
<p>4-2. ç­‰å¾…é˜»å¡ - waitæ–¹æ³•,éœ€è¦å…¶ä»–çº¿ç¨‹ç¯å¢ƒ</p>
<p>4-3. å…¶ä»–é˜»å¡(sleep,é”®ç›˜è¾“å…¥,join)</p>
</li>
<li><p>ç»“æŸæ€(æ­»äº¡æ€)</p>
</li>
</ol>
</blockquote>
<h1 id="ä½œä¸š-1"><a href="#ä½œä¸š-1" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h1><blockquote>
<ol>
<li><p>æœ‰ä¸€ä¸ªæ•°ç»„[1,150000]æ•°æ®.ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ¥ç»Ÿè®¡å‡ºè¿™ä¸ªæ•°ç»„ä¸­æ‰€æœ‰è´¨æ•°çš„ä¸ªæ•° - æµ‹è¯•æ—¶é—´.</p>
</li>
<li><p>çº¿ç¨‹çš„é€šä¿¡demo</p>
<p>2-1. æ¯”å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ‰“å°è¡¨è¾¾å¼[1+2,30+30]</p>
<p>2-2. å¦å¤–ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ä»é”®ç›˜è·å–è¾“å…¥.å¹¶ä¸”è¿›è¡Œåˆ¤æ–­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">T1çº¿ç¨‹å‡ºé¢˜: <span class="number">30</span>+<span class="number">50</span></span><br><span class="line">T2çº¿ç¨‹:    <span class="number">80</span></span><br><span class="line">å›ç­”æ­£ç¡®</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">java</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">ç¬”è®°</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/02/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-é¢å‘å¯¹è±¡" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" target="_blank">é¢å‘å¯¹è±¡</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="archive-article-date">
        <time datetime="2022-08-02T11:50:38.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-02</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><blockquote>
<p>OO - Object - Oriented - é¢å‘å¯¹è±¡çš„æ€æƒ³,ç¼–ç¨‹çš„èŒƒå¼,ç¬¦åˆäººç±»æ€ç»´çš„æ€æƒ³.â€ä¸‡ç‰©çš†å¯¹è±¡â€</p>
<p>OOAD - é¢å‘å¯¹è±¡åˆ†æ&amp;è®¾è®¡  OOP - é¢å‘å¯¹è±¡ç¼–ç¨‹</p>
<p>æ ¸å¿ƒæ€æƒ³: </p>
<ol>
<li><p>æ‰¾å‡ºä¸šåŠ¡ä¸­å…³é”®çš„å¯¹è±¡</p>
</li>
<li><p>åˆ†æå¯¹è±¡çš„å±æ€§ - å¯¹è±¡æ‹¥æœ‰ä»€ä¹ˆ,ç‰¹å¾</p>
</li>
<li><p>åˆ†æå¯¹è±¡çš„åŠŸèƒ½ - å¯¹è±¡èƒ½å¹²ä»€ä¹ˆ - æ–¹æ³•</p>
</li>
<li><p>è€ƒè™‘å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»[1:1,1:N - 70%,N:N,è‡ªå…³è”]</p>
<p>N:N - user,role - æƒé™è¡¨,ä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰å¤šä¸ªè§’è‰²,ä¸€ä¸ªè§’è‰²åŒ…å«å¤šä¸ªç”¨æˆ·.ä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸åŒçš„æƒé™.</p>
</li>
<li><p>æœ€åä¸€æ­¥æ‰ä¼šè€ƒè™‘å…·ä½“æ€ä¹ˆå®ç° - äº¤ç»™ä¸åŒçš„å¯¹è±¡ - æ¯ä¸ªå¯¹è±¡å®Œæˆä¸åŒçš„åŠŸèƒ½ - èšåˆåœ¨ä¸€å—å„¿.</p>
</li>
</ol>
</blockquote>
<h2 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h2><blockquote>
<p>å¯¹è±¡å…³ç³»æ˜ å°„ - ä»€ä¹ˆæ˜¯æ˜ å°„?</p>
<p>è¡¨è‚¯å®šæ˜¯dbè¡¨ä¸­ - javaè‚¯å®šæ˜¯ä¸èƒ½ç›´æ¥æ“ä½œç£ç›˜ä¸­çš„æ•°æ®.javaä¸­éœ€è¦é€šè¿‡æŒä¹…å±‚[å’Œdbç›´æ¥äº¤äº’çš„å±‚]æŠ€æœ¯[æ¯”å¦‚JDBC&#x2F;mybatis&#x2F;hibernate&#x2F;springdatajpa&#x2F;mybatis-plus&#x2F;tkmapper]åŠ è½½æ•°æ®åˆ°JVMå†…å­˜.</p>
<p><code>å†…å­˜ä¸­å¦‚ä½•ä¿å­˜æ•°æ®</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ä½¿ç”¨å˜é‡ä¿å­˜ - å®šä¹‰ä¸‰ä¸ªå˜é‡ - å˜é‡åªèƒ½å­˜å‚¨<span class="number">1</span>ä¸ªå€¼ - å¯¼è‡´ä»£ç é‡ä¼šå¾ˆå¤§.</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> æ•°ç»„ - è™½ç„¶å¯ä»¥ä¿å­˜å¤šä¸ªå€¼,ä½†æ˜¯è¿™äº›å¤šä¸ªå€¼å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹.</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> å¯¹è±¡id,name,age =&gt; <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;åˆ˜äºšé£&quot;</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>åˆ˜äºšé£</td>
<td>32</td>
</tr>
<tr>
<td>2</td>
<td>åˆ˜é£é£</td>
<td>32</td>
</tr>
</tbody></table>
</blockquote>
<h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><blockquote>
<p>ç±»æ˜¯ç”¨æ¥æè¿°å¯¹è±¡çš„,<strong>ç±»æ˜¯ç”¨æ¥æ„å»ºå¯¹è±¡çš„è“å›¾æˆ–è€…æ¨¡æ¿</strong>.ç±»æ˜¯æŠ½è±¡çš„æ¦‚å¿µ</p>
<p>å®ä½“ç±»:æè¿°å¯¹è±¡çš„,é‡Œé¢åŒ…å«<code>å±æ€§,æ„é€ ,getter/setter,toString</code>ä»¥åŠhashcode&amp;equals,clone</p>
</blockquote>
<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•:</span><br><span class="line">ä¿®é¥°ç¬¦ æ•°æ®ç±»å‹ å±æ€§å [= åˆå§‹å€¼];</span><br><span class="line"></span><br><span class="line">è®¿é—®ä¿®é¥°ç¬¦:<span class="keyword">private</span> é»˜è®¤çš„ <span class="keyword">protected</span> <span class="keyword">public</span></span><br><span class="line"><span class="keyword">public</span> - å…¬å¼€çš„,ä»»ä½•ä½ç½®éƒ½å¯ä»¥è®¿é—®.</span><br><span class="line">  </span><br><span class="line">å…¶ä»–ä¿®é¥°ç¬¦:<span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">abstract</span> </span><br><span class="line">  </span><br><span class="line">æ•°æ®ç±»å‹ - åŸºæœ¬/å¯¹è±¡</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><blockquote>
<p>ç°å®ä¸­çš„å®ä½“,å¯¹è±¡æ˜¯å…·ä½“çš„.å¯¹è±¡æ˜¯æ•°æ®åœ¨å†…å­˜ä¸­çš„è½½ä½“ - â€œå®¹å™¨â€</p>
</blockquote>
<h2 id="ä¸‰å¤§ç‰¹å¾"><a href="#ä¸‰å¤§ç‰¹å¾" class="headerlink" title="ä¸‰å¤§ç‰¹å¾"></a>ä¸‰å¤§ç‰¹å¾</h2><blockquote>
<ol>
<li><p>å°è£…æ€§[Encapsulation] - ä¿æŠ¤ç±»ä¸­çš„æ•°æ®,ä¸ç›´æ¥æš´éœ²åœ¨å¤–éƒ¨,å¤–ç•Œä¸èƒ½å¤Ÿç›´æ¥æ“ä½œå±æ€§.ä»è€Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§.</p>
<p>å±è”½ä¸€äº›æ— å…³çš„ç±»çš„ç»†èŠ‚.</p>
<p>å¥½å¤„:å®‰å…¨æ€§,å±è”½ä¸€äº›ç»†èŠ‚.</p>
</li>
<li><p>ç»§æ‰¿æ€§</p>
</li>
<li><p>å¤šæ€æ€§</p>
</li>
</ol>
</blockquote>
<h1 id="å¼•ç”¨å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»"><a href="#å¼•ç”¨å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»" class="headerlink" title="å¼•ç”¨å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»"></a>å¼•ç”¨å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»</h1><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a. ä¸€ä¸ªå¼•ç”¨åœ¨æŸä¸ªæ—¶åˆ»,åªèƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡</span><br><span class="line">b. ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸ªæ—¶åˆ»,å¯ä»¥è¢«å¤šä¸ªå¼•ç”¨æŒ‡å‘.</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="æœªåšå°è£…"><a href="#æœªåšå°è£…" class="headerlink" title="æœªåšå°è£…"></a>æœªåšå°è£…</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//å…·ä½“åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user3.username=<span class="string">&quot;admin&quot;</span>;</span><br><span class="line"><span class="comment">//ç›´æ¥è®¿é—®</span></span><br><span class="line">System.out.println(user3.username);</span><br></pre></td></tr></table></figure>

<p><code>å¼Šç«¯1</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹ç±»å†…éƒ¨çš„ä»£ç å¯¼è‡´ä½¿ç”¨çš„åœ°æ–¹éƒ½è¦ä¿®æ”¹.æ¯”å¦‚ä¿®æ”¹å±æ€§åusername</span><br></pre></td></tr></table></figure>

<p><code>å¼Šç«¯2</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æœ‰çš„å±æ€§çš„å€¼æ˜¯éœ€è¦è¿›è¡Œä¸€äº›ç‰¹æ®Šçš„è¿ç®—å¾—åˆ°çš„.</span><br><span class="line">æ¯”å¦‚æ–°ç”¨æˆ·ç™»å½•çš„æ—¶å€™ - å‘ä¸€äº›æ–°äººçš„å¤§ç¤¼åŒ… - ä¼˜æƒ åˆ¸é‡‘é¢-è®¡ç®—æ–¹å¼éå¸¸å¤æ‚.</span><br><span class="line">  </span><br><span class="line"><span class="type">double</span> quan;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼˜æƒ åˆ¸é‡‘é¢-è®¡ç®—æ–¹å¼éå¸¸å¤æ‚ - x</span></span><br><span class="line">user3.quan= x </span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a()   b()   c() =&gt; <span class="string">&quot;èºä¸é’‰çš„å°æ–¹æ³•&quot;</span> =&gt; <span class="keyword">private</span></span><br><span class="line">  </span><br><span class="line"><span class="title function_">add</span><span class="params">()</span> =&gt; æœ€ç»ˆå®Œæˆçš„ä¸€ä¸ªåŠŸèƒ½çš„æ–¹æ³• - éœ€è¦æš´éœ²åœ¨å¤–é¢çš„ - <span class="keyword">public</span></span><br><span class="line">addéœ€è¦è°ƒç”¨a,b,cä¸‰ä¸ªæ–¹æ³•</span><br><span class="line">  </span><br><span class="line">sub() =&gt; è°ƒç”¨b,c,d,eæ–¹æ³• =&gt; <span class="keyword">public</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>å¼Šç«¯3</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ‰çš„å±æ€§è®¾ç½®çš„æ—¶å€™,éœ€è¦è¿›è¡Œå‚æ•°çš„æ ¡éªŒ.</span><br></pre></td></tr></table></figure>



<h1 id="setter-x2F-getter"><a href="#setter-x2F-getter" class="headerlink" title="setter&#x2F;getter"></a>setter&#x2F;getter</h1><blockquote>
<p>å±æ€§ç§æœ‰åŒ–ä¹‹å,éœ€è¦æä¾›setter&#x2F;getteræ¥è®¾ç½®&#x2F;è·å–å±æ€§å€¼</p>
<p>setterå‘½å&#x2F;getterå‘½å</p>
<p>set+å±æ€§[å¤§é©¼å³°å‘½å]  &#x3D;&gt; <strong>å‘½åçš„è§„åˆ™ - éµå®ˆ</strong></p>
<p>spring - applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;customer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tech.aistar.day04.Customer&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">(User user)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<ol>
<li>å…è®¸å¤šæ¬¡èµ‹å€¼</li>
<li>å…è®¸è¿›è¡Œå‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­</li>
</ol>
</blockquote>
<h1 id="æ„é€ constructor"><a href="#æ„é€ constructor" class="headerlink" title="æ„é€ constructor"></a>æ„é€ constructor</h1><blockquote>
<ol>
<li>æ„é€ æ˜¯æ²¡æœ‰è¿”å›ç±»å‹çš„,åç§°å’Œç±»åä¸€æ ·</li>
<li>**æ„é€ æ–¹æ³•æ˜¯å…è®¸é‡è½½çš„,**ä½†æ˜¯ä¸å…è®¸é‡å†™</li>
<li>ç©ºå‚æ„é€ å’Œå¸¦å‚æ„é€ </li>
<li>ä½œç”¨:æ„å»ºå¯¹è±¡æˆ–è€…åœ¨æ„å»ºå¯¹è±¡çš„åŒæ—¶è¿›è¡Œèµ‹å€¼æ“ä½œ,ä½†æ˜¯æœºä¼šåªæœ‰1æ¬¡.</li>
<li>å¥½å¤„:èµ‹å€¼æ¯”è¾ƒæ–¹ä¾¿</li>
<li>æ˜¯å¦å¯ä»¥è¿›è¡Œå‚æ•°æœ‰æ•ˆæ€§åˆ¤æ–­ - 1. å¯ä»¥åœ¨æ„é€ ä½“ä¸­å†™æ ¡éªŒçš„ä»£ç     2. æ„é€ ä½“ä¸­å¯ä»¥è°ƒç”¨setteræ–¹æ³•</li>
</ol>
</blockquote>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><blockquote>
<ol>
<li>å¦‚æœä¸€ä¸ªç±»ä¸­æ²¡æœ‰æä¾›ä»»ä½•æ„é€ ,é‚£ä¹ˆç³»ç»Ÿé»˜è®¤åˆ†é…ä¸€ä¸ªç©ºå‚æ„é€ </li>
<li>ä¸€æ—¦æä¾›ä»»ä½•ä¸€ä¸ªå¸¦å‚æ„é€ ,é‚£ä¹ˆç³»ç»Ÿå°†ä¸ä¼šå†åˆ†é…ä¸€ä¸ªç©ºå‚æ„é€ </li>
</ol>
</blockquote>
<h1 id="thiså…³é”®å­—"><a href="#thiså…³é”®å­—" class="headerlink" title="thiså…³é”®å­—"></a>thiså…³é”®å­—</h1><blockquote>
<ol>
<li>thisä»£è¡¨å½“å‰å¯¹è±¡ - åŒºåˆ†å±æ€§å’Œæ–¹æ³•çš„å½¢å‚åœ¨åŒåçš„åœºæ™¯ä¸‹.é€šè¿‡this.æˆå‘˜æ¥è°ƒç”¨å½“å‰ç±»ä¸­çš„æˆå‘˜</li>
<li>è°ƒç”¨æœ¬ç±»ä¸­çš„å…¶ä»–æ„é€  - å¿…é¡»è¦å‡ºç°åœ¨æ„é€ çš„é¦–è¡Œä½ç½®</li>
</ol>
</blockquote>
<h1 id="toStringæ–¹æ³•"><a href="#toStringæ–¹æ³•" class="headerlink" title="toStringæ–¹æ³•"></a>toStringæ–¹æ³•</h1><blockquote>
<ol>
<li><p>å¦‚æœè‡ªå·±çš„å®ä½“ç±»ä¸­æ²¡æœ‰æä¾›toStringæ–¹æ³•,é‚£ä¹ˆé»˜è®¤å°±ä¼šè°ƒç”¨java.lang.Objectä¸­æä¾›çš„toStringæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> getClass().getName() + <span class="string">&quot;@&quot;</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æ‰“å°çš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€</p>
</li>
<li><p>ä¸ºäº†è®©toStringæ–¹æ³•ç¬¦åˆå®é™…çš„æ‰“å°éœ€æ±‚,å› æ­¤éœ€è¦å®ä½“ç±»ä¸­å»é‡å†™è¿™ä¸ªæ–¹æ³•.</p>
<p>é‡‡å–â€å°±è¿‘åŸåˆ™â€,ä¸€æ—¦é‡å†™äº†,å°±ä¼šæ‰§è¡Œè‡ªå·±çš„toStringæ–¹æ³•.</p>
</li>
<li><p>å¦‚æœç›´æ¥è¾“å‡ºä¸€ä¸ªå¯¹è±¡æ—¶å€™,é»˜è®¤ä¼šè°ƒç”¨toStringæ–¹æ³•-è‡ªåŠ¨è°ƒç”¨</p>
</li>
</ol>
</blockquote>
<h1 id="å¯¹è±¡ä¸å¯¹è±¡å…³ç³»"><a href="#å¯¹è±¡ä¸å¯¹è±¡å…³ç³»" class="headerlink" title="å¯¹è±¡ä¸å¯¹è±¡å…³ç³»"></a>å¯¹è±¡ä¸å¯¹è±¡å…³ç³»</h1><blockquote>
<p>ä¸šåŠ¡ä¸­èƒ½ç”¨å•å‘å…³è”è§£å†³çš„,å°±ä¸è¦ä½¿ç”¨åŒå‘å…³è”</p>
</blockquote>
<h2 id="1-1"><a href="#1-1" class="headerlink" title="1:1"></a>1:1</h2><blockquote>
<p>ä¸€ä¸ªä¸ˆå¤«å¯¹åº”ä¸€ä¸ªå¦»å­,ä¸€ä¸ªå¦»å­å¯¹åº”ä¸€ä¸ªä¸ˆå¤«</p>
</blockquote>
<h3 id="å•å‘å…³è”"><a href="#å•å‘å…³è”" class="headerlink" title="å•å‘å…³è”"></a>å•å‘å…³è”</h3><blockquote>
<p>å…³ç³»åªéœ€è¦ç”±ä¸€æ–¹å»ç»´æŠ¤å³å¯.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Husband</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//private Wife wife;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Wife</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> Husband husband;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŒå‘å…³è”"><a href="#åŒå‘å…³è”" class="headerlink" title="åŒå‘å…³è”"></a>åŒå‘å…³è”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Husband</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> Wife wife;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Wife</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> Husband husband;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>toStringæ–¹æ³•åœ¨æä¾›çš„æ—¶å€™,ä¸è¦æ‰“å°å…³è”çš„å¯¹è±¡</code></p>
<h2 id="1-N"><a href="#1-N" class="headerlink" title="1:N"></a>1:N</h2><p>ä¸€ä¸ªçˆ¶ç±»å¯ä»¥æ‹¥æœ‰å¤šä¸ªå­ç±»,ä¸€ä¸ªå­ç±»åªèƒ½å±äºä¸€ä¸ªçˆ¶ç±»</p>
<h3 id="å•å‘å…³è”-1"><a href="#å•å‘å…³è”-1" class="headerlink" title="å•å‘å…³è”"></a>å•å‘å…³è”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sup</span>&#123;</span><br><span class="line">  <span class="comment">//....</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//private Sub[] subs;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sub</span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> Sup sup;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="N-N"><a href="#N-N" class="headerlink" title="N:N"></a>N:N</h2><blockquote>
<p>ä¸€ä¸ªæ¼”å‘˜å¯ä»¥æ‰®æ¼”å¤šä¸ªè§’è‰²</p>
<p>ä¸€ä¸ªè§’è‰²å¯ä»¥è¢«å¤šä¸ªæ¼”å‘˜æ‰®æ¼”</p>
</blockquote>
<blockquote>
<p>é€šå¸¸æ˜¯éœ€è¦æ‹†åˆ†æˆä¿©ä¸ª1:N</p>
<p>æ¼”å‘˜è¡¨</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>å°èµµ</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>å°åˆ˜</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>å°é£</td>
<td></td>
</tr>
</tbody></table>
<p>è§’è‰²è¡¨</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ç”·ä¸»è§’</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>ç”·é…è§’</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>é¾™å¥—</td>
<td></td>
</tr>
</tbody></table>
<p>æ¼”å‘˜è§’è‰²è¡¨</p>
<table>
<thead>
<tr>
<th>pid</th>
<th>rid</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td></td>
</tr>
</tbody></table>
</blockquote>
<h3 id="åŒå‘å…³è”-1"><a href="#åŒå‘å…³è”-1" class="headerlink" title="åŒå‘å…³è”"></a>åŒå‘å…³è”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Player</span>&#123;</span><br><span class="line">  <span class="comment">//..</span></span><br><span class="line">  <span class="keyword">private</span> PR[] prs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span>&#123;</span><br><span class="line">  <span class="comment">//..</span></span><br><span class="line">  <span class="keyword">private</span> PR[] prs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PR</span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Player player;</span><br><span class="line">   <span class="keyword">private</span> Role role;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨èçš„å…³ç³»çš„ç»´æŠ¤"><a href="#æ¨èçš„å…³ç³»çš„ç»´æŠ¤" class="headerlink" title="æ¨èçš„å…³ç³»çš„ç»´æŠ¤"></a>æ¨èçš„å…³ç³»çš„ç»´æŠ¤</h2><blockquote>
<p>mybatisä¸­æ¨èä½¿ç”¨å¼±å…³ç³»</p>
</blockquote>
<blockquote>
<p>husband(id,name,wife_id);</p>
<p>wife(id,name);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è½¯ä»¶å¼€å‘çš„åŸåˆ™ - é«˜å†…èš,ä½è€¦åˆ</span></span><br><span class="line"><span class="comment">//æ¨¡å—/å¯¹è±¡ä¹‹é—´çš„å…³ç³»è¶Šä½è¶Šå¥½.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Husband</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> wifeId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Wife</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="è‡ªå…³è”"><a href="#è‡ªå…³è”" class="headerlink" title="è‡ªå…³è”"></a>è‡ªå…³è”</h2><p>ä¸Šå¸,ä¸‹å± -&gt; å‘˜å·¥</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>ä¸Šå¸id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Carmen</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>ä¸«ä¸«</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>é£é£</td>
<td>1</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> Emp[] emps;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h1><blockquote>
<ol>
<li><p>å®šä¹‰ä¸€ä¸ªOrdç±»[id,ordNo,price,status,createDate]</p>
<blockquote>
<p>status - è®¢å•çš„çŠ¶æ€</p>
<p><strong>0 - æœªä»˜æ¬¾,æœªè¶…æ—¶</strong></p>
<p>1 - æœªä»˜æ¬¾,å·²è¶…æ—¶</p>
<p>2 - å·²ä»˜æ¬¾</p>
<p>3 - åˆ é™¤</p>
<p>4 - ç”³è¯·é€€æ¬¾ä¸­</p>
<p>5 - é€€æ¬¾æˆåŠŸ</p>
</blockquote>
</li>
<li><p>å¤„ç†ä¸€ä¸‹Customerå’ŒOrdç±»çš„å…³ç³» - å•å‘å…³è”,åªéœ€è¦åœ¨Customerä¸­ç»´æŠ¤Ordå³å¯.</p>
</li>
<li><p>åœ¨Customerç±»ä¸­æ·»åŠ å¦‚ä¸‹å‡ ä¸ªæ–¹æ³• - è‡ªå·±è®¾è®¡,æ–¹æ³•çš„åŠŸèƒ½éœ€è¦å®Œæˆå¦‚ä¸‹:</p>
<p>3-1. å¢åŠ ä¸€ä¸ªè®¢å•ä¿¡æ¯</p>
<p>3-2. æ ¹æ®è®¢å•å·åˆ é™¤</p>
<p>3-3. æŸ¥æ‰¾å·²ç»åˆ é™¤çš„è®¢å•</p>
</li>
</ol>
</blockquote>
<h1 id="ä¸šåŠ¡ç±»"><a href="#ä¸šåŠ¡ç±»" class="headerlink" title="ä¸šåŠ¡ç±»"></a>ä¸šåŠ¡ç±»</h1><blockquote>
<p>ä¸šåŠ¡ç±»ä¸“é—¨å­˜æ”¾ä¸šåŠ¡æ–¹æ³• - æ“ä½œå®ä½“ç±»ä¸­çš„æ•°æ®</p>
<p>å®ä½“ç±»çš„èŒè´£åœ¨äºä¿å­˜æ•°æ®</p>
<p>å»ºè®®:ä¸šåŠ¡æ–¹æ³•åº”è¯¥è¦å•ç‹¬æŠ½ç¦»å‡ºå» -&gt; ä¸šåŠ¡ç±»ä¸­ -&gt; è®¾è®¡ä¸€ä¸ªCustomerBiz.java</p>
<p>ä¸šåŠ¡ç±»å’Œå®ä½“ç±»éœ€è¦åˆ†å¼€.</p>
</blockquote>
<h1 id="ç»§æ‰¿-Inheritance"><a href="#ç»§æ‰¿-Inheritance" class="headerlink" title="ç»§æ‰¿-Inheritance"></a>ç»§æ‰¿-Inheritance</h1><blockquote>
<ul>
<li><p>ä½¿ç”¨å…³é”®å­—extends</p>
</li>
<li><p>javaä¸­çš„ç±»ä»…ä»…æ”¯æŒå•ç»§æ‰¿[é¿å…å‡ºç°ç½‘çŠ¶ç»“æ„,ä¿è¯ç±»çš„å±‚æ¬¡æ€§],ä½†æ˜¯javaä¸­çš„æ¥å£æ˜¯æ”¯æŒå¤šç»§æ‰¿çš„.</p>
<p>ä¸€ä¸ªå­ç±»åªèƒ½æ‹¥æœ‰ä¸€ä¸ªç›´æ¥çš„çˆ¶ç±». ä¸€ä¸ªçˆ¶ç±»å¯ä»¥æ‹¥æœ‰å¤šä¸ªå­ç±».</p>
</li>
<li><p>å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰æ˜ç¡®è¡¨ç¤ºå®ƒç»§æ‰¿çš„çˆ¶ç±»,é‚£ä¹ˆè¿™ä¸ªç±»å°†ä¼šé»˜è®¤ç»§æ‰¿java.lang.Object</p>
</li>
<li><p>å­ç±»å¯ä»¥å…±äº«&#x2F;è®¿é—®&#x2F;ä½¿ç”¨ çˆ¶ç±»ä¸­æ‰€æœ‰çš„éç§æœ‰çš„æˆå‘˜.</p>
</li>
<li><p>ä»€ä¹ˆåœ°æ–¹å…è®¸ä½¿ç”¨ç»§æ‰¿? - ä¸èƒ½ä¸ºäº†ä»£ç çš„å¤ç”¨è€Œä¹±ç”¨ç»§æ‰¿ - æ»¡è¶³ B is A  ,  B extends A</p>
</li>
<li><p>æŠŠå¤šä¸ªç±»çš„å…±æ€§æŠ½ç¦»å‡ºæ¥,æ”¾åœ¨çˆ¶ç±»ä¸­.å­ç±»ä¸­æ˜¯å…è®¸å‡ºç°ä¸ªæ€§çš„æˆå‘˜.</p>
</li>
<li><p><strong>çˆ¶ç±»çš„æ„é€ æ–¹æ³•æ˜¯ä¸èƒ½å¤Ÿè¢«å­ç±»ç»§æ‰¿</strong></p>
</li>
<li><p>å­ç±»æ˜¯æ‹“å±•çˆ¶ç±»çš„åŠŸèƒ½</p>
</li>
</ul>
</blockquote>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><blockquote>
<p><strong>æä¾›äº†ä»£ç çš„å¤ç”¨æ€§.æ–¹ä¾¿ç¨‹åºçš„æ‹“å±•</strong></p>
<p><strong>ç¬¦åˆè½¯ä»¶å¼€å‘è®¾è®¡åŸåˆ™ - å¼€é—­åŸåˆ™ - å¯¹å†…ç¦æ­¢ä¿®æ”¹,å¯¹å¤–å…è®¸æ‹“å±•</strong></p>
<p>RootV1 - åŠŸèƒ½1 ,åŠŸèƒ½2</p>
<p>RootV2 extends RootV1   åŠŸèƒ½3</p>
</blockquote>
<h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><blockquote>
<ol>
<li><p>ä¿®æ”¹äº†çˆ¶ç±»,å¯èƒ½ä¼šå½±å“å­ç±»åŠŸèƒ½çš„ä½¿ç”¨</p>
</li>
<li><p>ç»§æ‰¿åŠ å¼ºäº†ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆæ€§ - è¿èƒŒäº†è½¯ä»¶å¼€å‘è®¾è®¡çš„åŸåˆ™ - é«˜å†…èš,ä½è€¦åˆ</p>
<p>é«˜å†…èš - å•ä¸ªæ¨¡å—ç‹¬ç«‹å®Œæˆä¸šåŠ¡çš„èƒ½åŠ›æ¯”è¾ƒå¼º</p>
<p>ä½è€¦åˆ - æ¨¡å—ä¹‹é—´çš„å…³ç³»æ¯”è¾ƒå¼±</p>
</li>
</ol>
</blockquote>
<h1 id="superå…³é”®å­—"><a href="#superå…³é”®å­—" class="headerlink" title="superå…³é”®å­—"></a>superå…³é”®å­—</h1><blockquote>
<p>thiså’ŒsuperåŒºåˆ«</p>
</blockquote>
<blockquote>
<ol>
<li><p>å¦‚æœå­ç±»æ„é€ ä¸­æ²¡æœ‰å‡ºç°ä»»ä½•çš„superè¯­å¥çš„è¯,é‚£ä¹ˆç³»ç»Ÿä¼šé»˜è®¤åˆ†é…ä¸€ä¸ªsuper() - çˆ¶ç±»æ„é€ .</p>
<p>å¿…é¡»å‡ºç°åœ¨é¦–è¡Œ</p>
</li>
<li><p>å½“å­ç±»å’Œçˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜çš„æ—¶å€™ &#x3D; &gt; super.æˆå‘˜,æ¥å¼ºåˆ¶è°ƒç”¨çˆ¶ç±»ä¸­çš„æˆå‘˜</p>
</li>
</ol>
</blockquote>
<h1 id="è®¿é—®ä¿®é¥°ç¬¦"><a href="#è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦"></a>è®¿é—®ä¿®é¥°ç¬¦</h1><table>
<thead>
<tr>
<th></th>
<th></th>
<th>æ‰€æœ‰</th>
<th>å­ç±»</th>
<th>åŒåŒ…</th>
<th>æœ¬ç±»</th>
</tr>
</thead>
<tbody><tr>
<td>public</td>
<td>å…¬å…±çš„</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>protected</td>
<td>å—ä¿æŠ¤çš„</td>
<td>Ã—</td>
<td>âˆš</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>é»˜è®¤çš„</td>
<td>ä¸å†™</td>
<td>Ã—</td>
<td>Ã—</td>
<td>âˆš</td>
<td>âˆš</td>
</tr>
<tr>
<td>private</td>
<td>ç§æœ‰çš„</td>
<td>Ã—</td>
<td>Ã—</td>
<td>Ã—</td>
<td>âˆš</td>
</tr>
</tbody></table>
<h1 id="é‡å†™ç‰¹ç‚¹"><a href="#é‡å†™ç‰¹ç‚¹" class="headerlink" title="é‡å†™ç‰¹ç‚¹"></a>é‡å†™ç‰¹ç‚¹</h1><blockquote>
<p>è§£ç­”é¢˜ - é‡å†™å’Œé‡è½½çš„åŒºåˆ«</p>
</blockquote>
<blockquote>
<ol>
<li><p>å‘ç”Ÿçš„å‰æ - å¿…é¡»è¦æœ‰ç»§æ‰¿</p>
</li>
<li><p>é‡æ„ - é«˜åº¦ä¿æŒä¸€è‡´[ä¿®é¥°ç¬¦,è¿”å›ç±»å‹,æ–¹æ³•å,æ–¹æ³•çš„å‚æ•°åˆ—è¡¨,æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨]</p>
</li>
<li><p><strong>é‡å†™çš„æ–¹æ³•çš„åç§°ä»¥åŠå‚æ•°åˆ—è¡¨å¿…é¡»è¦ä¸€è‡´.</strong></p>
</li>
<li><p>ä¿®é¥°ç¬¦ - å­ç±»çš„ä¿®é¥°ç¬¦è®¿é—®æƒé™ä¸èƒ½ä½äºçˆ¶ç±»çš„è®¿é—®æƒé™</p>
<p>è®¿é—®ä¿®é¥°ç¬¦ç”±é«˜åˆ°ä½public&gt;protected&gt;é»˜è®¤çš„&gt;private</p>
</li>
<li><p>å­ç±»é‡å†™çš„æ–¹æ³•çš„è¿”å›ç±»å‹å¯ä»¥å’Œçˆ¶ç±»çš„æ–¹æ³•çš„è¿”å›ç±»å‹ä¸€è‡´,ä¹Ÿå¯ä»¥æ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›ç±»å‹çš„å­ç±».</p>
</li>
<li><p>å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨å’Œçˆ¶ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ä¸€è‡´,æˆ–è€…æ˜¯çˆ¶ç±»æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ç±»çš„å­ç±».</p>
</li>
</ol>
</blockquote>
<blockquote>
<p>å­ç±»ä¸€æ—¦é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•,è¿è¡Œçš„æ—¶å€™,å°±ä¼šæ‰§è¡Œå­ç±»é‡å†™ä¹‹åçš„æ–¹æ³•.</p>
</blockquote>
<h1 id="finalå…³é”®å­—"><a href="#finalå…³é”®å­—" class="headerlink" title="finalå…³é”®å­—"></a>finalå…³é”®å­—</h1><blockquote>
<p>ä¸å¯ä¿®æ”¹çš„.</p>
</blockquote>
<blockquote>
<ol>
<li><p>finalä¿®é¥°å±€éƒ¨å˜é‡[æ–¹æ³•ä½“ä¸­çš„å˜é‡,åŒ…æ‹¬å½¢å‚]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">final</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">final</span> <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//ä¸èƒ½è®¿é—®b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>finalä¿®é¥° å±æ€§[å…¨å±€å˜é‡] - å¸¸é‡å±æ€§ - ä¸å¯å˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DAY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸staticç»“åˆä¸€èµ·ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DAY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><code>åº”ç”¨åœºæ™¯</code> - æé«˜å­—é¢é‡çš„å¯è¯»æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="comment">//int result = a * 9; // </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>finalä¿®é¥°çš„ç±» - ä¸å¯è¢«ç»§æ‰¿</p>
</li>
<li><p>finalä¿®é¥°çš„æ–¹æ³• - ä¸å¯è¢«é‡å†™</p>
</li>
</ol>
</blockquote>
<h1 id="å¤šæ€-Polymorphism"><a href="#å¤šæ€-Polymorphism" class="headerlink" title="å¤šæ€ - Polymorphism"></a>å¤šæ€ - Polymorphism</h1><blockquote>
<p>å®šä¹‰:<strong>åŒä¸€ä¸ªè¡Œä¸ºå…·æœ‰å¤šä¸ªä¸åŒè¡¨ç°å½¢å¼æˆ–å½¢æ€çš„èƒ½åŠ›</strong></p>
<p><strong>åŒä¸€ä¸ªåŠ¨ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡,ä¼šæœ‰ä¸åŒçš„è§£é‡Š,äº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœ.</strong></p>
<p>å¤šæ€çš„åº”ç”¨ - é¢å‘çˆ¶ç±»ç¼–ç¨‹&#x2F;é¢å‘æ¥å£ç¼–ç¨‹</p>
<ol>
<li><p>å¯¹è±¡çš„ç¼–è¯‘æ—¶ç±»å‹å†™æˆçˆ¶ç±»,å¯¹è±¡çš„è¿è¡Œæ—¶ç±»å‹å†™æˆå­ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ç¼–è¯‘æ—¶ç±»å‹ å¯¹è±¡å = <span class="keyword">new</span> è¿è¡Œæ—¶ç±»å‹();</span><br><span class="line">çˆ¶ç±» å¯¹è±¡ = <span class="keyword">new</span> å­ç±»();</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ç¼–è¯‘æ—¶ç±»å‹å†³å®šäº†å¯¹è±¡çš„è®¿é—®èƒ½åŠ› - å¯¹è±¡åªèƒ½è®¿é—®åˆ°ç¼–è¯‘æ—¶ç±»å‹å®šä¹‰çš„æˆå‘˜</span><br><span class="line"><span class="number">2.</span> è¿è¡Œæ—¶ç±»å‹å†³å®šäº†å¯¹è±¡çš„è¡Œä¸ºèƒ½åŠ› - çœŸæ­£æ‰§è¡Œçš„æ˜¯è¿è¡Œæ—¶ç±»å‹ä¸­é‡å†™ä¹‹åçš„æ–¹æ³•.</span><br><span class="line"></span><br><span class="line"><span class="type">Animal</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">dog.spark();</span><br><span class="line"></span><br><span class="line"><span class="type">Animal</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">cat.spark();</span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆæœ‰çš„æ–¹æ³•æ˜æ˜éœ€è¦è¢«å­ç±»è¿›è¡Œé‡å†™,è¿˜éœ€è¦åœ¨çˆ¶ç±»ä¸­å®šä¹‰å¥½???</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–¹æ³•çš„è¿”å›ç±»å‹å†™æˆçˆ¶ç±»,æ–¹æ³•çš„æ‰§è¡Œç»“æœå†™æˆå­ç±»</p>
</li>
<li><p>æ–¹æ³•çš„å‚æ•°ç±»å‹å†™æˆçˆ¶ç±»,å¯ä»¥ä¼ å…¥è¿™ä¸ªçˆ¶ç±»çš„ä»»ä½•ä¸€ä¸ªå­ç±»å¯¹è±¡</p>
</li>
</ol>
</blockquote>
<h2 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><blockquote>
<p>Shape - å½¢çŠ¶ - çˆ¶ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">area</span><span class="params">()</span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">girth</span><span class="params">()</span>&#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ä¸ªå­ç±» - <strong>Rect</strong>(len,width),Circle(radius),<strong>Square</strong></p>
<p>é‡å†™çˆ¶ç±»ä¸­çš„ä¿©ä¸ªæ–¹æ³•.</p>
<p>ShapeTest &#x3D;&gt; å®šä¹‰ä¸€ä¸ªShapeæ•°ç»„,åˆ†åˆ«æ‰“å°å‘¨é•¿å’Œé¢ç§¯</p>
</blockquote>
<h1 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h1><blockquote>
<p>è¿›è¡Œç±»å‹çš„æ£€æµ‹.</p>
<p>å¦‚æœé‡åˆ°çˆ¶ç±»éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æˆå­ç±»ä¹‹å‰,å»ºè®®å…ˆè¿›è¡Œç±»å‹çš„åˆ¤æ–­,å¦åˆ™ä¼šæŠ›å‡ºjava.lang.ClassCastExceptionç±»å‹è½¬æ¢å¤±è´¥å¼‚å¸¸.</p>
</blockquote>
<h1 id="å…³äºstaticå…³é”®å­—"><a href="#å…³äºstaticå…³é”®å­—" class="headerlink" title="å…³äºstaticå…³é”®å­—"></a>å…³äºstaticå…³é”®å­—</h1><blockquote>
<p>staticä¿®é¥°çš„æˆå‘˜åˆå§‹åŒ–çš„æ—¶æœºæ˜¯åœ¨jvmåŠ è½½ç±»è¿›å†…å­˜çš„æ—¶å€™,å¹¶ä¸”æœºä¼šåªæœ‰ä¸€æ¬¡,å®ƒåœ¨å†…å­˜ä¸­çš„å®ä¾‹åªæœ‰1ä¸ª.</p>
</blockquote>
<blockquote>
<ol>
<li><p>çˆ¶ç±»ä¸­å¦‚æœæœ‰ä¸ªæ–¹æ³•è¢«staticä¿®é¥°äº†,é‚£ä¹ˆä»£è¡¨è¿™ä¸ªæ–¹æ³•ä¸å…è®¸è¢«å­ç±»é‡å†™.è‚¯å®šæ˜¯æ²¡æœ‰å¤šæ€çš„.</p>
</li>
<li><p>staticä¿®é¥°çš„æˆå‘˜[å±æ€§&#x2F;æ–¹æ³•] - å±äºç±»æ‹¥æœ‰çš„ - é™æ€çš„å±æ€§å˜é‡ - ç±»å˜é‡,å¹¶ä¸”æ˜¯å¯¹è±¡å…±äº«çš„.</p>
</li>
<li><p>staticä½œä¸ºé™æ€å¯¼å…¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.Calendar.*;<span class="comment">//å¯¼å…¥æ‰€æœ‰çš„é™æ€çš„å¸¸é‡å±æ€§</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é™æ€å†…éƒ¨ç±»</p>
</li>
<li><p>é™æ€ä»£ç å—</p>
</li>
</ol>
</blockquote>
<h2 id="jvmåŠ è½½ç±»è¿›å†…å­˜çš„æ´»åŠ¨çš„é¡ºåº"><a href="#jvmåŠ è½½ç±»è¿›å†…å­˜çš„æ´»åŠ¨çš„é¡ºåº" class="headerlink" title="jvmåŠ è½½ç±»è¿›å†…å­˜çš„æ´»åŠ¨çš„é¡ºåº"></a>jvmåŠ è½½ç±»è¿›å†…å­˜çš„æ´»åŠ¨çš„é¡ºåº</h2><blockquote>
<ol>
<li><p>å¯¹æ‰€æœ‰çš„é™æ€çš„å±æ€§åˆ†é…ç©ºé—´ä»¥åŠåˆå§‹åŒ–</p>
</li>
<li><p>å¯¹æ‰€æœ‰çš„é™æ€çš„æ–¹æ³•åˆ†é…ç©ºé—´ä»¥åŠåˆå§‹åŒ–</p>
</li>
<li><p>è°ƒç”¨é™æ€ä»£ç å—</p>
</li>
<li><p>å¦‚æœé‡åˆ°åˆ›å»ºå¯¹è±¡</p>
<p>4-1. ç»™æ‰€æœ‰çš„éé™æ€çš„å±æ€§åˆ†é…ç©ºé—´ä»¥åŠåˆå§‹åŒ–</p>
<p>4-2. ç»™æ‰€æœ‰çš„éé™æ€çš„æ–¹æ³•åˆ†é…ç©ºé—´ä»¥åŠåˆå§‹åŒ–</p>
<p>4-3. è°ƒç”¨æ™®é€šä»£ç å— - å»ºè®®ç§»æ¤åˆ°æ„é€ å—ä¸­,å°½é‡ä¸è¦å»å†™æ™®é€šä»£ç å—</p>
<p>4-4. è°ƒç”¨æ„é€ å—</p>
</li>
</ol>
</blockquote>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.</span> ä»¥ä¸‹ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼Ÿ</span><br><span class="line">  </span><br><span class="line">æ„é€ å— æ„é€ å— é™æ€å— æ„é€ å—</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">B</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">B</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é™æ€å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">B</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="å•ä¾‹è®¾è®¡æ¨¡å¼"></a>å•ä¾‹è®¾è®¡æ¨¡å¼</h1><blockquote>
<p>ä¿è¯æŸä¸ªç±»åœ¨æ•´ä¸ªåº”ç”¨ä¸­çš„å®ä¾‹æ°¸è¿œåªæœ‰1ä¸ª.</p>
<p>è¿™ç§ç±»é€šå¸¸æ˜¯â€é‡é‡çº§çš„ç±»â€ - æ„å»ºè¿™ä¸ªç±»çš„æ˜¯å®ä¾‹æ¯”è¾ƒè´¹æ—¶é—´,åŒæ—¶è¿™ä¸ªç±»çš„å®ä¾‹æœ¬èº«æ¯”è¾ƒå å†…å­˜ -æ„å»ºå®ƒå’Œé”€æ¯å®ƒçš„æˆæœ¬æ¯”è¾ƒé«˜.</p>
<p>æ¯”å¦‚å¼€å‘ä¸­é‡åˆ°çš„è¿æ¥æ± </p>
</blockquote>
<h2 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h2><blockquote>
<p>å¤šçº¿ç¨‹æ˜¯å®‰å…¨çš„ - ç±»åŠ è½½çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„è¿‡ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve)</span><br><span class="line">     <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">        ....</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>æœ€ç»ˆåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å°†Sinleton01è¿™ä¸ªç±»åŠ è½½åˆ°å†…å­˜,åªä¼šåŠ è½½ä¸€æ¬¡</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton01</span> &#123;</span><br><span class="line"> <span class="comment">//2. æä¾›æœ¬ç±»çš„å”¯ä¸€çš„å®ä¾‹ä½œä¸ºå®ƒçš„é™æ€å±æ€§</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton01</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton01</span>();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//1. ç§æœ‰åŒ–æ„é€  - ä¸ºäº†ä¸è®©å¤–ç•Œå»new</span></span><br><span class="line"> <span class="keyword">private</span> <span class="title function_">Singleton01</span><span class="params">()</span>&#123;</span><br><span class="line">     System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•...&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//3. æä¾›ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•æ¥è¿”å›è¿™ä¸ªç±»çš„å”¯ä¸€å®ä¾‹</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> Singleton01 <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> instance;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton01Test</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="type">Singleton01</span> <span class="variable">s1</span> <span class="operator">=</span> Singleton01.getInstance();</span><br><span class="line">     <span class="type">Singleton01</span> <span class="variable">s2</span> <span class="operator">=</span> Singleton01.getInstance();</span><br><span class="line">     System.out.println(s1 == s2);<span class="comment">//true</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h2><blockquote>
<p>å¤šçº¿ç¨‹ä¸å®‰å…¨çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistar.design.singleton;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬ç±»ç”¨æ¥æ¼”ç¤º: æ‡’æ±‰æ¨¡å¼ - å¤šçº¿ç¨‹ä¸å®‰å…¨çš„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: success</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/22 3:40 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton02</span> &#123;</span><br><span class="line">    <span class="comment">//2. æä¾›æœ¬ç±»çš„å”¯ä¸€çš„å®ä¾‹ä½œä¸ºå®ƒçš„é™æ€å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton02 instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. ç§æœ‰åŒ–æ„é€  - ä¸ºäº†ä¸è®©å¤–ç•Œå»new</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–çš„ä¸šåŠ¡...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. æä¾›ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•æ¥è¿”å›è¿™ä¸ªç±»çš„å”¯ä¸€å®ä¾‹</span></span><br><span class="line">    <span class="comment">//T1,T2çº¿ç¨‹åŒæ—¶è¿›å…¥åˆ°getInstance()æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//åŒæ—¶åˆ¤æ–­å‡ºinstanceä¸ºnull,éƒ½ä¼šæ‰§è¡Œinstance=new Singleton02()</span></span><br><span class="line">    <span class="comment">//å¤šçº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton02 <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance==<span class="literal">null</span>?instance=<span class="keyword">new</span> <span class="title class_">Singleton02</span>():instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Singleton02</span> <span class="variable">s1</span> <span class="operator">=</span> Singleton02.getInstance();</span><br><span class="line">        <span class="type">Singleton02</span> <span class="variable">s2</span> <span class="operator">=</span> Singleton02.getInstance();</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="åŒé‡æ£€æµ‹é”"><a href="#åŒé‡æ£€æµ‹é”" class="headerlink" title="åŒé‡æ£€æµ‹é”"></a>åŒé‡æ£€æµ‹é”</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistar.design.singleton;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬ç±»ç”¨æ¥æ¼”ç¤º: åŒé‡é”æ£€æµ‹ - ä¸ºäº†è§£å†³æ‡’æ±‰æ¨¡å¼åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä¸å®‰å…¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: success</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/22 3:45 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton03</span> &#123;</span><br><span class="line">    <span class="comment">//2. æä¾›æœ¬ç±»çš„å”¯ä¸€çš„å®ä¾‹ä½œä¸ºå®ƒçš„é™æ€å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton03 instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. ç§æœ‰åŒ–æ„é€  - ä¸ºäº†ä¸è®©å¤–ç•Œå»new</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton03</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–çš„ä¸šåŠ¡...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. æä¾›ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•æ¥è¿”å›è¿™ä¸ªç±»çš„å”¯ä¸€å®ä¾‹</span></span><br><span class="line">    <span class="comment">//ä¸å»ºè®®è¿™æ ·å†™çš„åŸå› .è‹¥å¹²ä¸ªçº¿ç¨‹åŒæ—¶åœ¨è°ƒç”¨getInstanceæ–¹æ³•</span></span><br><span class="line">    <span class="comment">//T1 - getInstanceæ–¹æ³• - å‡è®¾ç«äº‰&quot;é”èµ„æº&quot; - å¯¹è±¡ - ç”³è¯·åˆ°äº†,æ‰ä¼šè¿›å»æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//T1æ‰§è¡Œå®Œç»“æŸ,è‡ªåŠ¨é‡Šæ”¾é”èµ„æº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//T2... Tn ä¼šç»§ç»­äº‰æŠ¢getInstance - &gt; &quot;é”&quot;</span></span><br><span class="line">    <span class="comment">//å¯¼è‡´åé¢çš„çº¿ç¨‹é¢‘ç¹å»ç”³è¯·é” - &quot;é‡é‡çº§çš„å¯¹è±¡ - æ¯”è¾ƒæ¶ˆè€—èµ„æº&quot;</span></span><br><span class="line">    <span class="comment">//public synchronized static Singleton03 getInstance()&#123;</span></span><br><span class="line">    <span class="comment">//    return instance==null?instance=new Singleton03():instance;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton03 <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é˜²æ­¢åé¢çš„çº¿ç¨‹å†å»é¢‘ç¹ç«äº‰&quot;é”&quot;</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span>==instance)&#123;<span class="comment">//T1,T2 = &gt; null</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton03.class)&#123;<span class="comment">//T2åœ¨ç­‰å¾…</span></span><br><span class="line">                <span class="comment">//åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ - åŒæ­¥ä»£ç å—</span></span><br><span class="line">                <span class="comment">//T1è¿›å…¥äº†...</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="literal">null</span>==instance)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton03</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é˜²æ­¢jvmæŒ‡ä»¤é‡æ’"><a href="#é˜²æ­¢jvmæŒ‡ä»¤é‡æ’" class="headerlink" title="é˜²æ­¢jvmæŒ‡ä»¤é‡æ’"></a>é˜²æ­¢jvmæŒ‡ä»¤é‡æ’</h2><blockquote>
<p>ä½¿ç”¨volatileå…³é”®å­—</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistar.design.singleton;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬ç±»ç”¨æ¥æ¼”ç¤º: åŒé‡é”æ£€æµ‹ - ä¸ºäº†è§£å†³æ‡’æ±‰æ¨¡å¼åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ä¸å®‰å…¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: success</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/22 3:45 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton04</span> &#123;</span><br><span class="line">    <span class="comment">//2. æä¾›æœ¬ç±»çš„å”¯ä¸€çš„å®ä¾‹ä½œä¸ºå®ƒçš„é™æ€å±æ€§</span></span><br><span class="line">    <span class="comment">//volatile - ç¦æ­¢JVMçš„æŒ‡ä»¤é‡æ’ - ä¼˜åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ²¡æœ‰è¿›è¡ŒJVMæŒ‡ä»¤é‡æ’</span></span><br><span class="line">    <span class="comment">//User user = new User();</span></span><br><span class="line">    <span class="comment">//â‘ ç”³è¯·ç©ºé—´</span></span><br><span class="line">    <span class="comment">//â‘¡åˆå§‹åŒ–å¯¹è±¡ - è°ƒç”¨æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//â‘¢å°†å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™user</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç»è¿‡JVMçš„æŒ‡ä»¤é‡æ’ä¹‹åçš„é¡ºåº,å®é™…ä¸ŠçœŸæ­£çš„é¡ºåº</span></span><br><span class="line">    <span class="comment">//â‘ ç”³è¯·ç©ºé—´ - åœ°å€å·²ç»å‡ºæ¥äº†</span></span><br><span class="line">    <span class="comment">//â‘¡å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™user</span></span><br><span class="line">    <span class="comment">//â‘¢åˆå§‹åŒ–å¯¹è±¡ - è°ƒç”¨æ„é€ æ–¹æ³•(æ¶ˆè€—æ—¶é—´)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton04 instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. ç§æœ‰åŒ–æ„é€  - ä¸ºäº†ä¸è®©å¤–ç•Œå»new</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton04</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–çš„ä¸šåŠ¡...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton04 <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é˜²æ­¢åé¢çš„çº¿ç¨‹å†å»é¢‘ç¹ç«äº‰&quot;é”&quot;</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span>==instance)&#123;<span class="comment">//T1,T2 = &gt; null</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton04.class)&#123;<span class="comment">//T2åœ¨ç­‰å¾…</span></span><br><span class="line">                <span class="comment">//åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ - åŒæ­¥ä»£ç å—</span></span><br><span class="line">                <span class="comment">//T1è¿›å…¥äº†...</span></span><br><span class="line">                <span class="keyword">if</span>(<span class="literal">null</span>==instance)&#123;</span><br><span class="line">                    <span class="comment">//â‘ ç”³è¯·ç©ºé—´ - å†…å­˜åœ°å€å‡ºæ¥äº†</span></span><br><span class="line">                    <span class="comment">//â‘¡instance = å¯¹è±¡çš„å†…å­˜åœ°å€ =&gt; instanceå·²ç»ä¸ä¸ºnull</span></span><br><span class="line">                    <span class="comment">//â‘¢æ…¢æ…¢è°ƒç”¨æ„é€ ,æ„é€ å®Œæ¯•ä¹‹å,å¯¹è±¡æ˜¯å®Œæ•´çš„åˆæ³•çš„å¯¹è±¡.</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton04</span>();</span><br><span class="line">                    <span class="comment">//T1è™½ç„¶å¯¹instanceèµ‹å€¼æˆåŠŸ,ä½†æ˜¯æ­¤æ—¶instanceæŒ‡å‘çš„æ˜¯ä¸€ä¸ªä¸å®Œæ•´çš„å¯¹è±¡</span></span><br><span class="line">                    <span class="comment">//æ…¢æ‚ æ‚ è¿‡æ¥çš„çº¿ç¨‹å¼€å§‹è‡ªè¡Œinstance==nullçš„åˆ¤æ–­,ä¸ºfalse,å…¶ä½™çº¿ç¨‹ç›´æ¥æ‹¿åˆ°instance</span></span><br><span class="line">                    <span class="comment">//å…¶ä½™çº¿ç¨‹å»ä½¿ç”¨äº†ä¸€ä¸ªinstanceæŒ‡å‘çš„é‚£ä¸ªä¸å®Œæ•´çš„å¯¹è±¡ - å‘ç”Ÿä¸€äº›ä¸å¯æ§çš„ç»“æœ</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¦‚ä½•ç ´åå•ä¾‹"><a href="#å¦‚ä½•ç ´åå•ä¾‹" class="headerlink" title="å¦‚ä½•ç ´åå•ä¾‹"></a>å¦‚ä½•ç ´åå•ä¾‹</h2><blockquote>
<ol>
<li>åºåˆ—åŒ–å¯ä»¥ç ´åå•ä¾‹</li>
<li>åå°„å¯ä»¥ç ´å</li>
</ol>
</blockquote>
<h2 id="æšä¸¾ç±»å‹å¯ä»¥é˜²æ­¢ç ´åå•ä¾‹"><a href="#æšä¸¾ç±»å‹å¯ä»¥é˜²æ­¢ç ´åå•ä¾‹" class="headerlink" title="æšä¸¾ç±»å‹å¯ä»¥é˜²æ­¢ç ´åå•ä¾‹"></a>æšä¸¾ç±»å‹å¯ä»¥é˜²æ­¢ç ´åå•ä¾‹</h2><blockquote>
<ol>
<li>å¤šçº¿ç¨‹å®‰å…¨ - å±äºé¥¿æ±‰æ¨¡å¼</li>
<li>åšåˆ°é˜²æ­¢ç ´åå•ä¾‹</li>
</ol>
</blockquote>
<h1 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h1><blockquote>
<ol>
<li><p>ä½¿ç”¨abstractä¿®é¥°çš„ç±»ä»£è¡¨æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,æŠ½è±¡ç±»æœ¬èº«æ˜¯ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–çš„.</p>
</li>
<li><p>æŠ½è±¡ç±»å¤©ç”Ÿå°±æ˜¯ç”¨æ¥è¢«ç»§æ‰¿çš„</p>
</li>
<li><p>åªæœ‰æŠ½è±¡ç±»&#x2F;æ¥å£æ‰æœ‰èµ„æ ¼å»å®šä¹‰æŠ½è±¡æ–¹æ³•(abstractä¿®é¥°çš„æ–¹æ³•)</p>
</li>
<li><p>ä¸€ä¸ªæ™®é€šç±»å¦‚æœç»§æ‰¿äº†ä¸€ä¸ªæŠ½è±¡çˆ¶ç±».é‚£ä¹ˆè¿™ä¸ªæ™®é€šç±»å¿…é¡»è¦é‡å†™è¿™ä¸ªæŠ½è±¡çˆ¶ç±»ä¸­æä¾›çš„æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•.</p>
<p>é™¤éè¿™ä¸ªæ™®é€šç±»æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡å­ç±».</p>
</li>
<li><p>æŠ½è±¡ç±»ä¸­å…è®¸å­˜åœ¨æ„é€ </p>
</li>
<li><p>æŠ½è±¡ç±»ä¸­å…è®¸æ™®é€šå±æ€§å’Œæ™®é€šæ–¹æ³•</p>
</li>
<li><p>æŠ½è±¡çˆ¶ç±»ä¹Ÿæ˜¯å…è®¸æ‹¥æœ‰å¤šä¸ªå­ç±»çš„.</p>
</li>
</ol>
</blockquote>
<h1 id="ä¸èƒ½ä¸€èµ·ä½¿ç”¨çš„ä¿®é¥°ç¬¦"><a href="#ä¸èƒ½ä¸€èµ·ä½¿ç”¨çš„ä¿®é¥°ç¬¦" class="headerlink" title="ä¸èƒ½ä¸€èµ·ä½¿ç”¨çš„ä¿®é¥°ç¬¦"></a>ä¸èƒ½ä¸€èµ·ä½¿ç”¨çš„ä¿®é¥°ç¬¦</h1><blockquote>
<ol>
<li><p>private å’Œ abstract</p>
</li>
<li><p>static å’Œ abstract</p>
<blockquote>
<p>staticä¿®é¥°çš„æ–¹æ³•ä¸å…·å¤‡å¤šæ€ - å¹¶ä¸”ä¸èƒ½å¤Ÿè¢«é‡å†™.</p>
<p>abstractå°±æ˜¯ä¸ºäº†å¤šæ€,å°±æ˜¯ä¸ºäº†è¢«å­ç±»é‡å†™</p>
</blockquote>
</li>
<li><p>final å’Œ abstract</p>
<blockquote>
<p>finalä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿</p>
<p>finalä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™.</p>
</blockquote>
</li>
</ol>
</blockquote>
<h1 id="æŠ½è±¡ç±»åº”ç”¨-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"><a href="#æŠ½è±¡ç±»åº”ç”¨-æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼" class="headerlink" title="æŠ½è±¡ç±»åº”ç”¨ - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼"></a>æŠ½è±¡ç±»åº”ç”¨ - æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼</h1><blockquote>
<p>æœ‰äº›ä¸šåŠ¡æ˜¯æœ‰ä¸€äº›ä¸»è¦çš„å›ºå®šçš„æ‰§è¡Œçš„ä¸šåŠ¡æµç¨‹,è¿™äº›ä¸šåŠ¡çš„é¡ºåºæ˜¯å›ºå®šçš„.å…¶ä¸­éƒ¨åˆ†ä¸šåŠ¡æ˜¯å…¬å…±çš„.éƒ¨åˆ†ä¸šåŠ¡çš„å…·ä½“çš„å®ç°çš„ç»†èŠ‚æ˜¯éœ€è¦äº¤ç»™å­ç±»å»å®ç°.æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼äº†.æ¯”å¦‚jdbcå…­å¤§ç¼–ç¨‹æ­¥éª¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.jdbc.cj.mysql.Driver&quot;</span>);<span class="comment">//1.åŠ è½½é©±åŠ¨</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/æ•°æ®å?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC&quot;</span>;</span><br><span class="line"><span class="comment">//2. è·å–è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(username,password,url);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»†èŠ‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where id=?&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. åˆ›å»ºé¢„ç¼–è¯‘è¯­å¥å¯¹è±¡</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pst</span> <span class="operator">=</span> conn.preparedStatment(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å‚æ•°</span></span><br><span class="line">pst.setInt(<span class="number">1</span>,id);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. è·å–ç»“æœé›†</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pst.executeQuery();</span><br><span class="line"></span><br><span class="line"><span class="comment">//5. å¤„ç†ç»“æœé›†</span></span><br><span class="line"><span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line"><span class="comment">//newå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°è£…å¯¹è±¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//6. é‡Šæ”¾èµ„æº</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h1><blockquote>
<p>CLI(Command Line Interface)å’ŒGUI(Graphical User Interface)</p>
</blockquote>
<blockquote>
<p>å±è”½åº•å±‚,æ˜¯ä¸€ç§å¥‘çº¦.ä¹Ÿæ˜¯ä¸€ç§è§„èŒƒ.</p>
<p>æ¥å£åœ°å€ &#x3D;&gt; è¿”å›ä¸€äº›æ•°æ® - jsonæ•°æ®</p>
<p>å¤©æ°”çš„æ•°æ® - æ°”è±¡å±€æä¾›çš„</p>
<p>QQ - é’‰é’‰ - å¾®ä¿¡ -&gt; å¤©æ°”(æ°”è±¡å±€æä¾›çš„æ¥å£)</p>
</blockquote>
<blockquote>
<ol>
<li><p>ä½¿ç”¨interfaceå…³é”®å­—</p>
</li>
<li><p>æ¥å£ä¸­ä¸èƒ½å®šä¹‰æ„é€ å‡½æ•° - å’ŒæŠ½è±¡ç±»çš„ä¸»è¦çš„åŒºåˆ« - éƒ½ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–</p>
</li>
<li><p>æ¥å£ç¼–è¯‘ä¹‹åä¹Ÿæ˜¯ä¸€ä¸ª.classæ–‡ä»¶</p>
</li>
<li><p>æ¥å£æ˜¯æ”¯æŒå¤šç»§æ‰¿çš„,ä¸€ä¸ªæ¥å£æ˜¯å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£çš„</p>
</li>
<li><p>ç±»å’Œæ¥å£çš„å…³ç³» - å®ç°implements</p>
</li>
<li><p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£,å¹¶ä¸”ä¸€ä¸ªæ¥å£å¯ä»¥æ‹¥æœ‰å¤šä¸ªå®ç°ç±»</p>
</li>
<li><p>ä¸€ä¸ªç±»å®ç°æŸä¸ªæ¥å£çš„æ—¶å€™,éœ€è¦å®ç°å®ç°æ¥å£ä¸­æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•</p>
<p>é™¤éè¿™ä¸ªç±»æ˜¯æŠ½è±¡ç±».</p>
</li>
<li><p>æ¥å£ä¸­çš„å˜é‡åªèƒ½æ˜¯å…¬å…±çš„é™æ€çš„å¸¸é‡å±æ€§</p>
</li>
<li><p>æ¥å£ä¸­çš„æ–¹æ³•åªèƒ½æ˜¯å…¬å…±çš„æŠ½è±¡çš„æ–¹æ³• - jdk8.0ä¹‹å‰</p>
<p>jdk8.0åŠå…¶ä»¥å,æ¥å£ä¸­å¯ä»¥é€šè¿‡defaultå…³é”®å­—å®šä¹‰æ™®é€šæ–¹æ³•</p>
<p>ä¹Ÿæ˜¯å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•çš„.</p>
</li>
<li><p>æ¥å£çš„å‘½åä¸€èˆ¬æ¨èä½¿ç”¨Iå¼€å¤´æˆ–è€…ableç»“å°¾.</p>
</li>
</ol>
</blockquote>
<h2 id="æ¥å£çš„åˆ†ç±»"><a href="#æ¥å£çš„åˆ†ç±»" class="headerlink" title="æ¥å£çš„åˆ†ç±»"></a>æ¥å£çš„åˆ†ç±»</h2><blockquote>
<ol>
<li><p>å¸¸é‡æ¥å£ - è¯¥æ¥å£ä¸­åªåŒ…å«å¸¸é‡</p>
<p>ç®¡ç†åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰çš„å¸¸é‡ - jdk5.0å¼€å§‹è¢«enumç±»å‹å–ä»£äº†.</p>
</li>
<li><p>ä¸šåŠ¡æ¥å£ - åªåŒ…å«ä¸šåŠ¡æ–¹æ³•çš„æ¥å£</p>
</li>
<li><p>æ ‡è®°æ¥å£ - ä»€ä¹ˆéƒ½æ²¡æœ‰,ç”¨æ¥è¿›è¡Œç±»å‹åˆ¤æ–­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>jdk8.0æä¾›çš„å‡½æ•°å¼æ¥å£ - åªèƒ½åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³• - @FunctionalInterface</p>
</li>
</ol>
</blockquote>
<h2 id="é¢å‘æ¥å£ç¼–ç¨‹"><a href="#é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="é¢å‘æ¥å£ç¼–ç¨‹"></a>é¢å‘æ¥å£ç¼–ç¨‹</h2><blockquote>
<ol>
<li>å¯¹è±¡çš„ç¼–è¯‘æ—¶ç±»å‹å†™æˆæ¥å£,å¯¹è±¡çš„è¿è¡Œæ—¶ç±»å‹å†™æˆè¿™ä¸ªæ¥å£çš„å®ç°ç±»</li>
<li>æ–¹æ³•çš„å‚æ•°ç±»å‹å†™æˆæ¥å£,å¯ä»¥ä¼ å…¥è¿™ä¸ªæ¥å£çš„ä»»æ„ä¸€ä¸ªå®ç°ç±»å¯¹è±¡</li>
<li>æ–¹æ³•çš„è¿”å›ç±»å‹å†™æˆæ¥å£,æ–¹æ³•çš„æ‰§è¡Œç»“æœå¯ä»¥è¿”å›è¿™ä¸ªæ¥å£çš„ä»»æ„ä¸€ä¸ªå®ç°ç±»å¯¹è±¡.</li>
</ol>
</blockquote>
<h1 id="ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼"><a href="#ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼"></a>ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼</h1><blockquote>
<p>å°†åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡çš„åˆ›å»ºäº¤ç»™å·¥å‚å»å®Œæˆ</p>
<p>ç›®çš„:å°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡çš„ä½¿ç”¨è¿›è¡Œä¸€ä¸ªè§£è€¦åˆ</p>
<p>ä¼ ç»Ÿçš„æ–¹å¼:ä½¿ç”¨&#x2F;åˆ›å»ºå¯¹è±¡ - User user &#x3D; new User();&#x2F;&#x2F;ä¸»åŠ¨å¯»æ‰¾.</p>
</blockquote>
<blockquote>
<p>ä¸å±äº23ç§è®¾è®¡æ¨¡å¼.</p>
</blockquote>
<h2 id="ç¬¬ä¸€ä¸ªç‰ˆæœ¬"><a href="#ç¬¬ä¸€ä¸ªç‰ˆæœ¬" class="headerlink" title="ç¬¬ä¸€ä¸ªç‰ˆæœ¬"></a>ç¬¬ä¸€ä¸ªç‰ˆæœ¬</h2><blockquote>
<p>é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‚æ•°,è¿”å›æŸä¸ªç±»å‹(ç±»&#x2F;æ¥å£)çš„å…·ä½“çš„å®ä¾‹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹æ³•çš„è¿”å›ç±»å‹å†™æˆæ¥å£,æ–¹æ³•çš„æ‰§è¡Œç»“æœå¯ä»¥è¿”å›è¿™ä¸ªæ¥å£çš„ä»»æ„ä¸€ä¸ªå®ç°ç±»å¯¹è±¡.</span></span><br><span class="line">    <span class="comment">//é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‚æ•°,è¿”å›æŸä¸ªç±»å‹(ç±»/æ¥å£)çš„å…·ä½“çš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">getInstance</span><span class="params">(String type)</span>&#123;</span><br><span class="line">        <span class="type">Sender</span> <span class="variable">sender</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;QQ&quot;</span>:</span><br><span class="line">                sender = <span class="keyword">new</span> <span class="title class_">QQSender</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;WX&quot;</span>:</span><br><span class="line">                sender = <span class="keyword">new</span> <span class="title class_">WXSender</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬äºŒä¸ªç‰ˆæœ¬-ç¬”è¯•"><a href="#ç¬¬äºŒä¸ªç‰ˆæœ¬-ç¬”è¯•" class="headerlink" title="ç¬¬äºŒä¸ªç‰ˆæœ¬ - ç¬”è¯•"></a>ç¬¬äºŒä¸ªç‰ˆæœ¬ - ç¬”è¯•</h2><blockquote>
<p>åŸºäºç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å•å…ƒæµ‹è¯•ä¸­,ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå­—é¢é‡.å¯è¯»æ€§æ¯”è¾ƒå·®,å¯èƒ½ä¼ å…¥é”™è¯¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Sender</span> <span class="variable">qq</span> <span class="operator">=</span> SimpleFactory.getInstance(<span class="string">&quot;QQ&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//å®šä¹‰è‹¥å¹²ä¸ªå…¬å¼€çš„é™æ€çš„å¸¸é‡å±æ€§</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QQ</span> <span class="operator">=</span> <span class="string">&quot;QQ&quot;</span>;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">WX</span> <span class="operator">=</span> <span class="string">&quot;WX&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">//æ–¹æ³•çš„è¿”å›ç±»å‹å†™æˆæ¥å£,æ–¹æ³•çš„æ‰§è¡Œç»“æœå¯ä»¥è¿”å›è¿™ä¸ªæ¥å£çš„ä»»æ„ä¸€ä¸ªå®ç°ç±»å¯¹è±¡.</span></span><br><span class="line"> <span class="comment">//é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‚æ•°,è¿”å›æŸä¸ªç±»å‹(ç±»/æ¥å£)çš„å…·ä½“çš„å®ä¾‹</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">getInstance</span><span class="params">(String type)</span>&#123;</span><br><span class="line">     <span class="type">Sender</span> <span class="variable">sender</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">         <span class="keyword">case</span> QQ:</span><br><span class="line">             sender = <span class="keyword">new</span> <span class="title class_">QQSender</span>();</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> WX:</span><br><span class="line">             sender = <span class="keyword">new</span> <span class="title class_">WXSender</span>();</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> sender;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ç¼ºç‚¹:å¦‚æœäº§å“æ¯”è¾ƒå¤š,æˆ–è€…åæœŸæ–°å¢äº†ä¸€äº›æ–°çš„äº§å“.ä¿®æ”¹å·¥å‚ç±».å¢åŠ case</p>
</blockquote>
<h2 id="ç¬¬ä¸‰ä¸ªç‰ˆæœ¬-å¤šæ–¹æ³•ç®€å•å·¥å‚"><a href="#ç¬¬ä¸‰ä¸ªç‰ˆæœ¬-å¤šæ–¹æ³•ç®€å•å·¥å‚" class="headerlink" title="ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ - å¤šæ–¹æ³•ç®€å•å·¥å‚"></a>ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ - å¤šæ–¹æ³•ç®€å•å·¥å‚</h2><blockquote>
<p>ä¸€ä¸ªäº§å“å¯¹è±¡å¯¹åº”ä¸€ä¸ªå·¥å‚æ–¹æ³•</p>
</blockquote>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> Sender <span class="title function_">createQQSender</span><span class="params">()</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">QQSender</span>();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> Sender <span class="title function_">createWXSender</span><span class="params">()</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WXSender</span>();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ç¬¬å››ä¸ªç‰ˆæœ¬-é™æ€æ–¹æ³•ç®€å•å·¥å‚"><a href="#ç¬¬å››ä¸ªç‰ˆæœ¬-é™æ€æ–¹æ³•ç®€å•å·¥å‚" class="headerlink" title="ç¬¬å››ä¸ªç‰ˆæœ¬ - é™æ€æ–¹æ³•ç®€å•å·¥å‚"></a>ç¬¬å››ä¸ªç‰ˆæœ¬ - é™æ€æ–¹æ³•ç®€å•å·¥å‚</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">createQQSender</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">QQSender</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">createWXSender</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WXSender</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“ä¼˜ç¼ºç‚¹"><a href="#æ€»ç»“ä¼˜ç¼ºç‚¹" class="headerlink" title="æ€»ç»“ä¼˜ç¼ºç‚¹"></a>æ€»ç»“ä¼˜ç¼ºç‚¹</h2><blockquote>
<ol>
<li>ä¼˜ç‚¹ - ç®€å•,ç»“æ„æ˜äº†</li>
<li>ç¼ºç‚¹ - å¦‚æœéœ€è¦æ–°å¢ä¸€ä¸ªäº§å“,éœ€è¦ä¿®æ”¹å·¥å‚ç±».å¯¹äºå·¥å‚ç±»è¿èƒŒäº†è½¯ä»¶çš„å¼€é—­åŸåˆ™.</li>
</ol>
</blockquote>
<h1 id="å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼"></a>å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</h1><blockquote>
<p>åŸåˆ™:åˆ¶å®šä¸€ä¸ªå·¥å‚çš„æ¥å£.æ¯ä¸ªå·¥å‚è´Ÿè´£ç”Ÿäº§ä¸åŒçš„äº§å“.æ–°å¢ä¸€ä¸ªäº§å“,åªéœ€è¦æ–°å¢ä¸€ä¸ªå·¥å‚çš„å®ç°ç±»å³å¯.ä¸éœ€è¦å¯¹æŸä¸ªå·¥å‚è¿›è¡Œç›´æ¥çš„ä¿®æ”¹.</p>
<p>ç¼ºç‚¹:äº§ç”Ÿå¤§é‡çš„å·¥å‚å®ç°ç±».ä¸å¤ªå¥½ç»´æŠ¤.</p>
</blockquote>
<h1 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h1><blockquote>
<p>è§£å†³â€äº§å“æ—â€çš„ä¸šåŠ¡é—®é¢˜.</p>
<p>ç›®çš„:å¯¹å¤–æä¾›ä¸€ä¸ªæ–¹å¼,å®¢æˆ·ç«¯å¿…é¡»è¦äº†è§£å…·ä½“ç»†èŠ‚,å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªäº§å“.</p>
</blockquote>
<h1 id="åå°„å·¥å‚"><a href="#åå°„å·¥å‚" class="headerlink" title="åå°„å·¥å‚"></a>åå°„å·¥å‚</h1><blockquote>
<p>æ¡†æ¶ä¸­ä½¿ç”¨çš„ä¸€ç§æ–¹å¼</p>
</blockquote>
<h1 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h1><blockquote>
<ol>
<li><p><strong>å¼€é—­åŸåˆ™ - å¯¹å¤–å…è®¸æ‹“å±•,å¯¹å†…ç¦æ­¢ä¿®æ”¹.</strong></p>
</li>
<li><p>å•ä¸€èŒè´£åŸåˆ™ - ä¸€ä¸ªç±»&#x2F;æ¥å£ä¸è¦å®Œæˆå¤šä¸ªä¸šåŠ¡.ä¸è¦è®©ä¸€ä¸ªç±»&#x2F;æ¥å£å¤ªâ€é‡é‡â€</p>
</li>
<li><p><strong>ä¾èµ–å€’ç½®åŸåˆ™ - ç”±ç»´æŠ¤å…·ä½“åˆ°ç»´æŠ¤æŠ½è±¡</strong></p>
</li>
<li><p>æ¥å£éš”ç¦»åŸåˆ™ - å¦‚æœæŸä¸ªå®ç°ç±»æ²¡æœ‰å¿…è¦å®ç°è¯¥æ¥å£ä¸­çš„æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•.æœ‰å¿…è¦æ‹†åˆ†æ¥å£.</p>
</li>
<li><p><strong>è¿ªç±³ç‰¹åŸåˆ™ - æœ€å°‘çŸ¥é“åŸåˆ™.  ä¸€ä¸ªç±»ç›´æ¥â€çŸ¥é“â€å¦å¤–ä¸€ä¸ªç±»,è¶Šå°‘è¶Šå¥½.</strong></p>
</li>
<li><p>é‡Œæ°æ›¿æ¢åŸåˆ™ - èƒ½å¤Ÿç”¨çˆ¶ç±»çš„åœ°æ–¹,å¿…ç„¶ä½¿ç”¨å­ç±».å»ºè®®å­ç±»ä¸è¦å»é‡å†™çˆ¶ç±»çš„æ–¹æ³•.å­ç±»ä¸è¦éšæ„</p>
<p>å»ç ´åçˆ¶ç±»å®šä¹‰å¥½çš„ç»“æ„.</p>
</li>
<li><p>åˆæˆå¤ç”¨åŸåˆ™ - ç”±äºç»§æ‰¿å¸¦æ¥ä»£ç çš„ä¾µå…¥æ€§.é¼“åŠ±ä½¿ç”¨åˆæˆå¤ç”¨åŸåˆ™æ¥æ›¿ä»£ç»§æ‰¿çš„å†™æ³•.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">åŸå…ˆä½¿ç”¨ç»§æ‰¿ - æé«˜ä»£ç çš„å¤ç”¨æ€§.</span><br><span class="line">   </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RootV1</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//åŠŸèƒ½1...  ä¼šèµ°</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">//æœºå™¨äººäºŒä»£ - å»¶ç»­æœºå™¨äººä¸€ä»£çš„åŠŸèƒ½,èƒ½å¤Ÿæ‰©å±•æ–°çš„åŠŸèƒ½</span></span><br><span class="line">   </span><br><span class="line"><span class="comment">//èšåˆ - æ•´ä½“å’Œéƒ¨åˆ† - å¼ºåº¦å¼±,æ¯”å¦‚ è®¡ç®—æœº(æ•´ä½“)-å±€éƒ¨éƒ¨åˆ†(é¼ æ ‡,é”®ç›˜,cpu,ä¸»æ¿)</span></span><br><span class="line"><span class="comment">//ç»„åˆ - æ•´ä½“å’Œéƒ¨åˆ† - å¼ºåº¦å¼º,æ•´ä½“å’Œéƒ¨åˆ†ä¸èƒ½åˆ†å‰² - äºº(æ•´ä½“) - å±€éƒ¨(èƒ³è†Š,å¤§è…¿)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RootV2</span>&#123;</span><br><span class="line">   <span class="keyword">private</span> RootV1 rootV1;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">RootV2</span><span class="params">()</span>&#123;</span><br><span class="line">     <span class="built_in">this</span>.rootV1 = <span class="keyword">new</span> <span class="title class_">RootV1</span>(); <span class="comment">// ç»„åˆ</span></span><br><span class="line">     <span class="comment">//èšåˆ - å¸¦å‚æ„é€ </span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123; <span class="comment">// èµ°,è·‘</span></span><br><span class="line">     <span class="built_in">this</span>.rootV1.run(); <span class="comment">// å®ç°äº†ä»£ç çš„å¤ç”¨,åŠŸèƒ½çš„æ‹“å±•.</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">//ç‰ˆæœ¬å‡çº§ - ä¼šè·‘çš„ä¸šåŠ¡</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h1 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼</h1><blockquote>
<p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</p>
<p>è¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°ç±»ï¼Œç”¨æ¥åŒ…è£…åŸæœ‰çš„ç±»ï¼Œå¹¶åœ¨ä¿æŒç±»æ–¹æ³•ç­¾åå®Œæ•´æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 id="IOæµåº”ç”¨"><a href="#IOæµåº”ç”¨" class="headerlink" title="IOæµåº”ç”¨"></a>IOæµåº”ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.io.InputStream =&gt; æŠ½è±¡ç±»</span><br><span class="line">java.io.FileInputStream =&gt; å­ç±» - èŠ‚ç‚¹æµ</span><br><span class="line">java.io.BufferedInputStream =&gt; å­ç±» - åŒ…è£…æµ</span><br><span class="line">  </span><br><span class="line"><span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src/tech/aistar/day07/xx.txt&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><code>åŒ…è£…æµ-è¿‡æ»¤æµ-æ„å»ºæ–¹å¼åˆ©ç”¨åˆ°äº†è£…é¥°å™¨æ€æƒ³</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åŸºç¡€æµ,èŠ‚ç‚¹æµ -&gt; FileInputStream =&gt; è¿™ä¸ªæµæ‰å…·å¤‡çœŸæ­£çš„æ–‡ä»¶è¯»å†™çš„èƒ½åŠ›.</span><br><span class="line">  </span><br><span class="line">åˆ©ç”¨è£…é¥°å™¨çš„æ€æƒ³æ¥æ„å»ºåŠŸèƒ½æ›´åŠ å¼ºå¤§çš„æµ - å¸¦ç¼“å­˜åŠŸèƒ½çš„æµ</span><br><span class="line">å¿…é¡»è¦ä»¥èŠ‚ç‚¹æµä½œä¸ºåŸºç¡€æ¥æ„å»ºå…¶ä»–æµ.</span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;è·¯å¾„&quot;</span>));</span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;è·¯å¾„&quot;</span>));</span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;è·¯å¾„&quot;</span>)));</span><br></pre></td></tr></table></figure>

<h1 id="java-lang-Object"><a href="#java-lang-Object" class="headerlink" title="java.lang.Object"></a>java.lang.Object</h1><blockquote>
<p>å®ƒæ˜¯æ‰€æœ‰çš„ç±»çš„è¶…ç±»,æ ¹ç±».ä¸€ä¸ªç±»å¦‚æœä¹ˆæœ‰æ˜ç¡®æŒ‡å®šçˆ¶ç±»,é»˜è®¤éƒ½æ˜¯ç»§æ‰¿å®ƒ.</p>
<ol>
<li><p>String toString();&#x2F;&#x2F;é»˜è®¤æ‰“å°å†…å­˜åœ°å€.å®é™…å¯¹è±¡éœ€è¦é‡å†™å®ƒæ¥æ»¡è¶³å®é™…çš„æ‰“å°éœ€æ±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> getClass().getName() + <span class="string">&quot;@&quot;</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>boolean equals(boolean flag);&#x2F;&#x2F;æ¯”è¾ƒä¿©ä¸ªå¯¹è±¡.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li><p>int hashCode();&#x2F;&#x2F;å¯¹è±¡çš„å“ˆå¸Œå€¼ - å†…å­˜åœ°å€ç›¸å…³çš„</p>
</li>
<li><p>protected Object clone();&#x2F;&#x2F;é»˜è®¤æ˜¯æµ…å…‹éš†</p>
</li>
<li><p>public final native Class&lt;?&gt; getClass();&#x2F;&#x2F;è·å–å¯¹è±¡çš„classå®ä¾‹,Classå®ä¾‹åœ¨JVMä¸­æ°¸è¿œåªæœ‰ä¸€ä¸ª.</p>
<p>class ç±»çš„å…¨é™å®šå,Classç±»æ˜¯åå°„æŠ€æœ¯çš„æ ¸å¿ƒç±».</p>
</li>
<li><p>protected void finalize() throws Throwable { };&#x2F;&#x2F;GCå‡†å¤‡å›æ”¶ä¸€ä¸ªåƒåœ¾å¯¹è±¡ä¹‹å‰,ä¼šå…ˆå»è°ƒç”¨finalize() </p>
<p>finalå’Œfinallyä»¥åŠfinalizeä¸‰è€…ä¹‹é—´çš„åŒºåˆ«!</p>
</li>
<li><p>waitæ–¹æ³•notify&#x2F;notifyAll() - å…³äºåŒæ­¥æ–¹æ³• - ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</p>
</li>
</ol>
</blockquote>
<h2 id="é‡å†™equalsæ–¹æ³•"><a href="#é‡å†™equalsæ–¹æ³•" class="headerlink" title="é‡å†™equalsæ–¹æ³•"></a>é‡å†™equalsæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é‡å†™æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">  <span class="comment">//b1.equals(null);</span></span><br><span class="line">  <span class="comment">//1. éç©ºæ€§</span></span><br><span class="line">  <span class="keyword">if</span>(obj == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//b1.equals(b1);</span></span><br><span class="line">  <span class="comment">//2. è‡ªåæ€§</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">this</span> == obj)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è‡ªå®šä¹‰æ¯”è¾ƒå“ªäº›å±æ€§</span></span><br><span class="line">  <span class="comment">//æŸäº›å±æ€§ä¸€è‡´çš„æ—¶å€™,æœŸæœ›equalsæ¯”è¾ƒè¿”å›true</span></span><br><span class="line">  <span class="comment">//3. ç±»å‹ä¸€è‡´æ€§çš„åˆ¤æ–­</span></span><br><span class="line">  <span class="comment">//b1.equals(s1);</span></span><br><span class="line">  <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> Book)&#123;</span><br><span class="line">    <span class="comment">//é€šå¸¸æƒ…å†µæ˜¯ä½¿ç”¨idæˆ–è€…ç¼–å·</span></span><br><span class="line">    <span class="comment">//idå¦‚æœä¸€æ ·,å°±å¸Œæœ›è¿”å›true</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">b</span> <span class="operator">=</span> (Book) obj;</span><br><span class="line">    <span class="comment">//return id == b.getId();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//idå’Œå›¾ä¹¦åç§°ä¸€è‡´,è¿”å›true</span></span><br><span class="line">    <span class="comment">//java.lang.String =&gt; é‡å†™äº†equals</span></span><br><span class="line">    <span class="keyword">return</span> id==b.getId() &amp;&amp; bookName.equals(b.bookName);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//if(getClass()==obj.getClass())&#123;</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">//&#125;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å½“ä¸”ä»…å½“<strong>bookçš„idä»¥åŠbookInfoçš„id</strong>ä¸€è‡´çš„æ—¶å€™æ‰è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ - equalsè¿”å›true.</p>
</blockquote>
<h2 id="é‡å†™hashCodeæ–¹æ³•"><a href="#é‡å†™hashCodeæ–¹æ³•" class="headerlink" title="é‡å†™hashCodeæ–¹æ³•"></a>é‡å†™hashCodeæ–¹æ³•</h2><blockquote>
<ol>
<li><p>equalsæ–¹æ³•é€šå¸¸å’ŒhashCodeæ–¹æ³•æ˜¯æˆå¯¹å‡ºç°çš„.</p>
</li>
<li><p>hashCodeä½œç”¨æé«˜æ€§èƒ½ - ä¸éœ€è¦é¢‘ç¹å»è°ƒç”¨equalsæ–¹æ³•,å¯ä»¥å…ˆé€šè¿‡hashCodeæ–¹æ³•å…ˆè¿‡æ»¤ä¸€é.</p>
<p>equalsæ–¹æ³•ä¸­æ¯”è¾ƒçš„æ˜¯å±æ€§ - æ¯”è¾ƒçš„æ€§èƒ½æ˜¯æ¯”è¾ƒä½.</p>
</li>
<li><p>åŸºäºè´¨æ•°31æ¥è¿›è¡Œè®¡ç®—çš„ -&gt; å®éªŒ - äº§ç”Ÿå“ˆå¸Œå†²çªæ¦‚ç‡æœ€å°‘çš„.</p>
</li>
<li><p>Set[I]é›†åˆæœ‰ä¸€ä¸ªå®ç°ç±»HashSet[C] - æ— åºä¸å¯é‡å¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tech.aistar.day07;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ¬ç±»ç”¨æ¥æ¼”ç¤º: ç†è§£hashCodeçš„ä¸€ä¸ªä½œç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: success</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/26 10:02 ä¸Šåˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ— åºä¸å¯é‡å¤</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">1</span>,<span class="string">&quot;çº¢æ¥¼æ¢¦&quot;</span>,<span class="number">100.0d</span>);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">2</span>,<span class="string">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span>,<span class="number">50.0d</span>);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">b3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">3</span>,<span class="string">&quot;james&quot;</span>,<span class="number">80.0d</span>);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">b4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">3</span>,<span class="string">&quot;james&quot;</span>,<span class="number">90.0d</span>);</span><br><span class="line">   </span><br><span class="line">        Set&lt;Book&gt; sets = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">   </span><br><span class="line">        <span class="comment">//åŸç†:</span></span><br><span class="line">        <span class="comment">//1. å°†ä¸€ä¸ªå¯¹è±¡åŠ å…¥åˆ°å®¹å™¨ä¹‹å‰,å…ˆå»è°ƒç”¨è¯¥å¯¹è±¡çš„hashCodeæ–¹æ³• -&gt; å¾—åˆ°å“ˆå¸Œå€¼</span></span><br><span class="line">        <span class="comment">//2. å¦‚æœè¿™ä¸ªå“ˆå¸Œå€¼æ›¾ç»æœ¨æœ‰å‡ºç°è¿‡,è¯´æ˜å®¹å™¨ä¸­çš„è¿™å—åœ°å€æ²¡æœ‰è¢«å…¶ä»–å¯¹è±¡å ç”¨,å°±å¯ä»¥ç›´æ¥æ”¾å…¥</span></span><br><span class="line">        <span class="comment">//3. å¦‚æœè¿™ä¸ªå“ˆå¸Œå€¼æ›¾ç»å‡ºç°è¿‡ - äº§ç”Ÿäº†å“ˆå¸Œç¢°æ’(å“ˆå¸Œå†²çª),æ­¤æ—¶è¿˜ä¸èƒ½è¯´æ˜å“ˆå¸Œå†²çªçš„ä¿©ä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//4. ç»§ç»­è°ƒç”¨equalsæ–¹æ³•.å¦‚æœè¿”å›true,æ‰è¯´æ˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡,åˆ™æ‹’ç»æ·»åŠ å…¥åˆ°å®¹å™¨</span></span><br><span class="line">        sets.add(b1);</span><br><span class="line">        sets.add(b2);</span><br><span class="line">        sets.add(b3);</span><br><span class="line">        sets.add(b4);</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">for</span> (Book b : sets) &#123;</span><br><span class="line">            System.out.println(b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="é‡å†™cloneæ–¹æ³•"><a href="#é‡å†™cloneæ–¹æ³•" class="headerlink" title="é‡å†™cloneæ–¹æ³•"></a>é‡å†™cloneæ–¹æ³•</h2><blockquote>
<p>éœ€è¦è¢«å…‹éš†çš„å¯¹è±¡éœ€è¦ä½¿ç”¨java.lang.Cloneableæ ‡è®°æ¥å£,å¦åˆ™è°ƒç”¨cloneæ–¹æ³•çš„æ—¶å€™æŠ›å‡ºjava.lang.CloneNotSupportedException</p>
</blockquote>
<blockquote>
<ol>
<li><p>æµ…å…‹éš† - æµ…æ‹·è´ - æµ…å±‚å¤åˆ¶ - Objectä¸­çš„é»˜è®¤çš„cloneå°±æ˜¯æµ…å…‹éš†,ä¾ç„¶æ˜¯éœ€è¦é‡å†™çš„.</p>
<p>å› ä¸ºobjectä¸­ä½¿ç”¨protectedä¿®é¥°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ç‰¹ç‚¹</code></p>
<ul>
<li>åŸºæœ¬ç±»å‹&#x2F;String&#x2F;Date - ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å…‹éš†å¯¹è±¡çš„å±æ€§å€¼</li>
<li>å¯¹è±¡ç±»å‹ - ä¿®æ”¹,æ˜¯ä¼šå¯¹å‰¯æœ¬å¯¹è±¡äº§ç”Ÿå½±å“çš„</li>
</ul>
</li>
<li><p>æ·±æ‹·è´</p>
<p><code>ç‰¹ç‚¹ - å‰¯æœ¬å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡,ä¿®æ”¹åŸæ¥å¯¹è±¡çš„å±æ€§å€¼,æ˜¯ä¸ä¼šå¯¹å‰¯æœ¬å¯¹è±¡é€ æˆä»»ä½•çš„å½±å“</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">  <span class="comment">//é‡æ–°å»newä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="type">Book</span> <span class="variable">copy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä¸€ä¸ªä¸€ä¸ªè®¾ç½®</span></span><br><span class="line">  copy.setId(id);</span><br><span class="line">  copy.setBookName(bookName);</span><br><span class="line">  copy.setPrice(price);</span><br><span class="line"></span><br><span class="line">  <span class="type">BookInfo</span> <span class="variable">info</span> <span class="operator">=</span> bookInfo;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­infoæ˜¯å¦ä¸ºnull</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="literal">null</span>!=info)&#123;</span><br><span class="line">    <span class="type">BookInfo</span> <span class="variable">newInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BookInfo</span>();</span><br><span class="line">    newInfo.setId(info.getId());</span><br><span class="line">    newInfo.setAuthor(info.getAuthor());</span><br><span class="line">    copy.setBookInfo(newInfo);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœªæ¥çš„åº”ç”¨ - Springæ¡†æ¶ä¸­æä¾›çš„BeanUtilsä¸­çš„copy</p>
</li>
<li><p>javaä¸­çš„å¯¹è±¡ç»†åˆ† - pojo,vo,bo,do,dto</p>
</li>
</ol>
</blockquote>
<h1 id="å­—ç¬¦ä¸²å¤„ç†ç±»"><a href="#å­—ç¬¦ä¸²å¤„ç†ç±»" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†ç±»"></a>å­—ç¬¦ä¸²å¤„ç†ç±»</h1><blockquote>
<ol>
<li>java.lang.String - ä¸å¯å˜çš„å­—ç¬¦ä¸².çº¿ç¨‹å®‰å…¨çš„.</li>
<li>java.lang.StringBuilder - å¯å˜çš„å­—ç¬¦ä¸²,çº¿ç¨‹ä¸å®‰å…¨çš„</li>
<li>java.lang.StringBuffer - å¯å˜çš„å­—ç¬¦ä¸²,çº¿ç¨‹å®‰å…¨çš„</li>
</ol>
</blockquote>
<h1 id="java-lang-String"><a href="#java-lang-String" class="headerlink" title="java.lang.String"></a>java.lang.String</h1><p><code>ä¸å¯å˜æ€§</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">char</span>[] value;<span class="comment">//</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¯”è¾ƒStringçš„æ‹¼æ¥æ€§èƒ½"><a href="#æ¯”è¾ƒStringçš„æ‹¼æ¥æ€§èƒ½" class="headerlink" title="æ¯”è¾ƒStringçš„æ‹¼æ¥æ€§èƒ½"></a>æ¯”è¾ƒStringçš„æ‹¼æ¥æ€§èƒ½</h2><blockquote>
<p>Stringçš„æ‹¼æ¥(+)çš„æ€§èƒ½è¿œè¿œä½äºStringBuilderçš„append</p>
<p><code>åŸå›  </code>-</p>
<p>æ¯æ¬¡éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ - åªè¦é‡åˆ°+,åˆ›å»ºä¸€ä¸ªæ–°çš„StringBuilderå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringDemo</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">     <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;good&quot;</span>;<span class="comment">//new String(&quot;good&quot;);</span></span><br><span class="line">     s+=<span class="string">&quot; ok&quot;</span>; <span class="comment">//1. new StringBuilder  2. è°ƒç”¨appendæ–¹æ³•   3. StringBuilder=&gt;String</span></span><br><span class="line">     s+=<span class="string">&quot; java&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>æŸ¥çœ‹æŒ‡ä»¤</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admindeMacBook-Pro:Desktop admin$ javac StringDemo.java </span><br><span class="line">admindeMacBook-Pro:Desktop admin$ javap -c StringDemo</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ldc - ä¸²æ± çš„åˆ›å»ºæ–¹å¼</span><br><span class="line">dup - å †</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line"> Code:</span><br><span class="line">    <span class="number">0</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String good</span></span><br><span class="line">    <span class="number">2</span>: astore_1</span><br><span class="line">    <span class="number">3</span>: <span class="keyword">new</span>           #<span class="number">3</span>                  <span class="comment">// class java/lang/StringBuilder</span></span><br><span class="line">    <span class="number">6</span>: dup</span><br><span class="line">    <span class="number">7</span>: invokespecial #<span class="number">4</span>                  <span class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="number">10</span>: aload_1</span><br><span class="line">   <span class="number">11</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">   <span class="number">14</span>: ldc           #<span class="number">6</span>                  <span class="comment">// String  ok</span></span><br><span class="line">   <span class="number">16</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">   <span class="number">19</span>: invokevirtual #<span class="number">7</span>                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span><br><span class="line">   <span class="number">22</span>: astore_1</span><br><span class="line">   <span class="number">23</span>: <span class="keyword">new</span>           #<span class="number">3</span>                  <span class="comment">// class java/lang/StringBuilder</span></span><br><span class="line">   <span class="number">26</span>: dup</span><br><span class="line">   <span class="number">27</span>: invokespecial #<span class="number">4</span>                  <span class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">   <span class="number">30</span>: aload_1</span><br><span class="line">   <span class="number">31</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">   <span class="number">34</span>: ldc           #<span class="number">8</span>                  <span class="comment">// String  java</span></span><br><span class="line">   <span class="number">36</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">   <span class="number">39</span>: invokevirtual #<span class="number">7</span>                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span><br><span class="line">   <span class="number">42</span>: astore_1</span><br><span class="line">   <span class="number">43</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="å­—ç¬¦ä¸²çš„æ„å»ºæ–¹å¼"><a href="#å­—ç¬¦ä¸²çš„æ„å»ºæ–¹å¼" class="headerlink" title="å­—ç¬¦ä¸²çš„æ„å»ºæ–¹å¼"></a>å­—ç¬¦ä¸²çš„æ„å»ºæ–¹å¼</h2><blockquote>
<ol>
<li><p>é€šè¿‡ä¸²æ± [å­—ç¬¦ä¸²å¸¸é‡æ± ]çš„æ–¹å¼è¿›è¡Œæ„å»º</p>
<p>å­—ç¬¦ä¸²å¸¸é‡æ± åœ¨å †ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨å¸¸é‡æ± ä¸­å¼€è¾Ÿä¸€ä¸ªç©ºé—´,æ”¾å…¥ä¸€ä¸ªå¸¸é‡&quot;good&quot;</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;good&quot;</span>;</span><br><span class="line"><span class="comment">//ä¼˜å…ˆä»å¸¸é‡æ± ä¸­å»æ‰¾æ˜¯å¦å­˜åœ¨&quot;good&quot;çš„å­—ç¬¦ä¸²,å¦‚æœå­˜åœ¨,ç›´æ¥å¼•ç”¨.</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;good&quot;</span>;</span><br><span class="line">System.out.println(str1 == str2);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡newå…³é”®å­—æ¥æ„å»º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;good&quot;</span>);<span class="comment">// åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡?  1ä¸ªæˆ–è€…2ä¸ª</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">new</span>å…³é”®åœ¨åœ¨å †é‡Œé¢è‚¯å®šä¼šåˆ›å»ºä¸€ä¸ª<span class="string">&quot;good&quot;</span>å¯¹è±¡</span><br><span class="line"><span class="number">2.</span> å¦‚æœå¸¸é‡æ± ä¸­ä¸å­˜åœ¨<span class="string">&quot;good&quot;</span>å¯¹è±¡,ä¹Ÿä¼šåœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ª.å¦‚æœå­˜åœ¨,ä¸éœ€è¦å†åˆ›å»ºäº†.</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²çš„æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²çš„æ¯”è¾ƒ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s7</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span> + <span class="string">&quot;b&quot;</span>;<span class="comment">//éƒ½æ˜¯å¸¸é‡,ç›´æ¥æŠŠå®ƒç»„åˆä¸€ä¸ªæ•´ä½“&quot;ab&quot;,ç›´æ¥æ”¾å…¥åˆ°å¸¸é‡æ± </span></span><br><span class="line"><span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;ab&quot;</span>;<span class="comment">//&quot;ab&quot;åœ¨å¸¸é‡æ± å·²ç»å­˜åœ¨äº†,ç›´æ¥å¼•ç”¨</span></span><br><span class="line">System.out.println(s6 == s7);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p><code>æŸ¥çœ‹æŒ‡ä»¤</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String ab</span></span><br><span class="line">       <span class="number">2</span>: astore_1</span><br><span class="line">       <span class="number">3</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String ab</span></span><br><span class="line">       <span class="number">5</span>: astore_2</span><br><span class="line">       <span class="number">6</span>: getstatic     #<span class="number">3</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">       <span class="number">9</span>: aload_2</span><br><span class="line">      <span class="number">10</span>: aload_1</span><br><span class="line">      <span class="number">11</span>: if_acmpne     <span class="number">18</span></span><br><span class="line">      <span class="number">14</span>: iconst_1</span><br><span class="line">      <span class="number">15</span>: goto          <span class="number">19</span></span><br><span class="line">      <span class="number">18</span>: iconst_0</span><br><span class="line">      <span class="number">19</span>: invokevirtual #<span class="number">4</span>                  <span class="comment">// Method java/io/PrintStream.println:(Z)V</span></span><br><span class="line">      <span class="number">22</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> s4 + <span class="string">&quot;b&quot;</span>;<span class="comment">//new StringBuilder().append(&quot;a&quot;).append(&quot;b&quot;).toString();</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">System.out.println(s6 == s5);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p><code>æŸ¥çœ‹æŒ‡ä»¤</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String a</span></span><br><span class="line">       <span class="number">2</span>: astore_1</span><br><span class="line">       <span class="number">3</span>: <span class="keyword">new</span>           #<span class="number">3</span>                  <span class="comment">// class java/lang/StringBuilder</span></span><br><span class="line">       <span class="number">6</span>: dup</span><br><span class="line">       <span class="number">7</span>: invokespecial #<span class="number">4</span>                  <span class="comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">      <span class="number">10</span>: aload_1</span><br><span class="line">      <span class="number">11</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">      <span class="number">14</span>: ldc           #<span class="number">6</span>                  <span class="comment">// String b</span></span><br><span class="line">      <span class="number">16</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span></span><br><span class="line">      <span class="number">19</span>: invokevirtual #<span class="number">7</span>                  <span class="comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span></span><br><span class="line">      <span class="number">22</span>: astore_2</span><br><span class="line">      <span class="number">23</span>: ldc           #<span class="number">8</span>                  <span class="comment">// String ab</span></span><br><span class="line">      <span class="number">25</span>: astore_3</span><br><span class="line">      <span class="number">26</span>: getstatic     #<span class="number">9</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">29</span>: aload_3</span><br><span class="line">      <span class="number">30</span>: aload_2</span><br><span class="line">      <span class="number">31</span>: if_acmpne     <span class="number">38</span></span><br><span class="line">      <span class="number">34</span>: iconst_1</span><br><span class="line">      <span class="number">35</span>: goto          <span class="number">39</span></span><br><span class="line">      <span class="number">38</span>: iconst_0</span><br><span class="line">      <span class="number">39</span>: invokevirtual #<span class="number">10</span>                 <span class="comment">// Method java/io/PrintStream.println:(Z)V</span></span><br><span class="line">      <span class="number">42</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> s4 + <span class="string">&quot;b&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">System.out.println(s6 == s5);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p><code>æŸ¥çœ‹æŒ‡ä»¤</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String ab</span></span><br><span class="line">       <span class="number">2</span>: astore_2</span><br><span class="line">       <span class="number">3</span>: ldc           #<span class="number">2</span>                  <span class="comment">// String ab</span></span><br><span class="line">       <span class="number">5</span>: astore_3</span><br><span class="line">       <span class="number">6</span>: getstatic     #<span class="number">3</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">       <span class="number">9</span>: aload_3</span><br><span class="line">      <span class="number">10</span>: aload_2</span><br><span class="line">      <span class="number">11</span>: if_acmpne     <span class="number">18</span></span><br><span class="line">      <span class="number">14</span>: iconst_1</span><br><span class="line">      <span class="number">15</span>: goto          <span class="number">19</span></span><br><span class="line">      <span class="number">18</span>: iconst_0</span><br><span class="line">      <span class="number">19</span>: invokevirtual #<span class="number">4</span>                  <span class="comment">// Method java/io/PrintStream.println:(Z)V</span></span><br><span class="line">      <span class="number">22</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="ç¬¦å·"></a>ç¬¦å·</h2><blockquote>
<ol>
<li>[a-z] - aåˆ°zå°å†™å­—æ¯ä¸­çš„ä»»æ„ä¸€ä¸ª</li>
<li>[0-9] æˆ–è€… \d</li>
<li>[A-Z]</li>
<li>[a-zA-Z0-9_] æˆ–è€… \w</li>
<li>\s ä»£è¡¨ ç©ºç™½å­—ç¬¦ä¸²</li>
<li>. ä»£è¡¨ä»»æ„å­—ç¬¦</li>
</ol>
</blockquote>
<h2 id="é‡è¯"><a href="#é‡è¯" class="headerlink" title="é‡è¯"></a>é‡è¯</h2><blockquote>
<p>[a-z]{m} - æ­£å¥½å‡ºç°mæ¬¡</p>
<p>[a-z]{m,} - è‡³å°‘å‡ºç°mæ¬¡</p>
<p>[a-z]{m,n} - å‡ºç°çš„æ¬¡æ•°çš„èŒƒå›´å¯ä»¥æ˜¯[m,n]</p>
<p>[a-z]*  è‡³å°‘0æ¬¡,å¯æ— å¯ä»¥å‡ºç°å¤šæ¬¡</p>
<p>[a-z]+ è‡³å°‘å‡ºç°1æ¬¡,ä¸€æ¬¡æˆ–è€…å¤šæ¬¡</p>
<p>[a-z]?  0æ¬¡æˆ–è€…1æ¬¡</p>
</blockquote>
<h1 id="java-lang-StringBuilder"><a href="#java-lang-StringBuilder" class="headerlink" title="java.lang.StringBuilder"></a>java.lang.StringBuilder</h1><blockquote>
<p>å¯å˜çš„å­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>[] value;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="æ„é€ "><a href="#æ„é€ " class="headerlink" title="æ„é€ "></a>æ„é€ </h2><blockquote>
<ol>
<li>StringBuilider();</li>
<li>StringBuilder(String str);</li>
</ol>
</blockquote>
<h1 id="java-lang-Number"><a href="#java-lang-Number" class="headerlink" title="java.lang.Number"></a>java.lang.Number</h1><blockquote>
<p>æ‰€æœ‰çš„åŸºæœ¬æ•°æ®ç±»å‹[æ•°å­—ç±»å‹]çš„é¡¶çº§çš„æŠ½è±¡çš„çˆ¶ç±»</p>
<p>byte-Byte,short-Short.int-Integer,long-Long,double-Double,float-Float</p>
<p>char-Character boolean-Boolean</p>
</blockquote>
<blockquote>
<p>æŠ½è±¡æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">intValue</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="java-lang-Integer"><a href="#java-lang-Integer" class="headerlink" title="java.lang.Integer"></a>java.lang.Integer</h1><blockquote>
<ol>
<li>å±äºintç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹</li>
<li>é»˜è®¤å€¼æ˜¯null</li>
<li>intç±»å‹å’ŒIntegerç±»å‹åŒºåˆ«?</li>
</ol>
</blockquote>
<h2 id="æ„é€ -1"><a href="#æ„é€ -1" class="headerlink" title="æ„é€ "></a>æ„é€ </h2><blockquote>
<ol>
<li><p>Integer(int i);&#x2F;&#x2F; åŸºæœ¬æ•°æ®ç±»å‹è½¬æˆåŒ…è£…ç±»å‹</p>
</li>
<li><p>Integer(String s);&#x2F;&#x2F;ä¼ å…¥çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯æ•°å­—æ ¼å¼çš„.   String&#x3D;&gt;Integer</p>
<p>å¦åˆ™æŠ›å‡ºjava.lang.NumberFormatException</p>
</li>
</ol>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><blockquote>
<ol>
<li>int intValue();&#x2F;&#x2F; Integerå¯¹è±¡è½¬æˆintç±»å‹</li>
<li>static Integer valueOf(int i);&#x2F;&#x2F;intç±»å‹è½¬æ¢Integerç±»å‹</li>
<li>int parseInt(String s);&#x2F;&#x2F;String-&gt;int</li>
</ol>
</blockquote>
<h2 id="ç ”ç©¶ä¸€ä¸‹valueOf"><a href="#ç ”ç©¶ä¸€ä¸‹valueOf" class="headerlink" title="ç ”ç©¶ä¸€ä¸‹valueOf"></a>ç ”ç©¶ä¸€ä¸‹valueOf</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">valueOf</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)<span class="comment">//[-128,127]</span></span><br><span class="line">    <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>é™æ€å†…éƒ¨ç±» - Integeråº•å±‚çš„ç¼“å­˜æœºåˆ¶</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntegerCache</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> -<span class="number">128</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> high;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];<span class="comment">// ç¼“å­˜æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// high value may be configured by property</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">integerCacheHighPropValue</span> <span class="operator">=</span></span><br><span class="line">      sun.misc.VM.getSavedProperty(<span class="string">&quot;java.lang.Integer.IntegerCache.high&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (integerCacheHighPropValue != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> parseInt(integerCacheHighPropValue);</span><br><span class="line">        i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">        <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">        h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">        <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    high = h;</span><br><span class="line"></span><br><span class="line">    cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[(high - low) + <span class="number">1</span>]; <span class="comment">// æ€»å…±256ä¸ª</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;<span class="comment">//-128</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">      cache[k] = <span class="keyword">new</span> <span class="title class_">Integer</span>(j++);<span class="comment">// é¢„å…ˆå­˜æ”¾äº†[-128,127]åˆ°ç¼“å†²åŒºä¸­</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">    <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æ€»ç»“ä¸€ä¸‹ç±»å‹çš„è½¬æ¢"><a href="#æ€»ç»“ä¸€ä¸‹ç±»å‹çš„è½¬æ¢" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ç±»å‹çš„è½¬æ¢"></a>æ€»ç»“ä¸€ä¸‹ç±»å‹çš„è½¬æ¢</h1><blockquote>
<ol>
<li>intè½¬æ¢æˆInteger<ul>
<li>Integer(int n);</li>
<li>Integeræä¾›static int valueOf(int i);</li>
<li>è‡ªåŠ¨å°ç®± &#x3D;&gt; Integer.valueOf</li>
</ul>
</li>
<li>Integerè½¬æ¢æˆintç±»å‹<ul>
<li>int intValue()</li>
<li>è‡ªåŠ¨è§£ç®±&#x2F;æ‹†ç®±</li>
</ul>
</li>
<li>Stringè½¬æˆint<ul>
<li>Integeræä¾›çš„static int parseInt(String s);</li>
</ul>
</li>
<li>intè½¬æˆString<ul>
<li>Stringç±»ä¸­æä¾›çš„static String valueOf(int i);</li>
</ul>
</li>
<li>Stringç±»å‹è½¬æˆInteger<ul>
<li>Integer(String s);</li>
<li>Integeræä¾›çš„static Integer valueOf(String s);</li>
</ul>
</li>
<li>Integerè½¬æˆString<ul>
<li>Stringæä¾›çš„static String valueOf(Object obj);</li>
</ul>
</li>
<li>Stringè½¬æˆStringBuilder<ul>
<li>StringBuilder(String str);</li>
</ul>
</li>
<li>StringBuilderè½¬æˆString<ul>
<li>StringBuilderæä¾›çš„String toString();</li>
<li>Stringæä¾›çš„static String valueOf(Object obj);</li>
</ul>
</li>
</ol>
</blockquote>
<h1 id="ä½œä¸š1"><a href="#ä½œä¸š1" class="headerlink" title="ä½œä¸š1"></a>ä½œä¸š1</h1><blockquote>
<p><img src="D:\è‹å·\dy-corejava-tech\note\imgs\code.png"> </p>
</blockquote>
<h1 id="ä½œä¸š2"><a href="#ä½œä¸š2" class="headerlink" title="ä½œä¸š2"></a>ä½œä¸š2</h1><blockquote>
<p>æ‰¾æœ€é•¿é•¿åº¦å…¬ä¸²</p>
</blockquote>
<h1 id="ä½œä¸š3"><a href="#ä½œä¸š3" class="headerlink" title="ä½œä¸š3"></a>ä½œä¸š3</h1><blockquote>
<p>ç¦æ­¢ä½¿ç”¨replaceç›¸å…³æ–¹æ³• </p>
<p>é€’å½’ç®—æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">delByStr</span><span class="params">(String oldStr,String target)</span>&#123;<span class="comment">//ä»oldstræŠŠtargetå­—ç¬¦ä¸²å…¨éƒ¨åˆ é™¤</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="ä½œä¸š4"><a href="#ä½œä¸š4" class="headerlink" title="ä½œä¸š4"></a>ä½œä¸š4</h1><blockquote>
<p>Stringå’ŒStringBuilderå¸¸ç”¨æ–¹æ³•</p>
</blockquote>
<h1 id="java-math-Decimal"><a href="#java-math-Decimal" class="headerlink" title="java.math.Decimal"></a>java.math.Decimal</h1><blockquote>
<p>æä¾›æ‰§è¡Œä»»æ„ç²¾åº¦æ•´æ•°è¿ç®—ï¼ˆ <code>BigInteger</code> ï¼‰å’Œä»»æ„ç²¾åº¦åè¿›åˆ¶è¿ç®—ï¼ˆ <code>BigDecimal</code> ï¼‰çš„ç±»ã€‚</p>
</blockquote>
<h2 id="æ„é€ -2"><a href="#æ„é€ -2" class="headerlink" title="æ„é€ "></a>æ„é€ </h2><blockquote>
<ol>
<li>BigDecimal(String val)</li>
<li>BigDecimal(double val)</li>
</ol>
</blockquote>
<h2 id="å¸¸ç”¨æ–¹æ³•-1"><a href="#å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><blockquote>
<ol>
<li><p>BigDecimal	add(BigDecimal augend)<br>è¿”å› BigDecimal ï¼Œå…¶å€¼æ˜¯ (this + augend) ï¼Œå…¶æ ‡ä¸º max(this.scale(), augend.scale()) ã€‚</p>
</li>
<li><p>BigDecimal	divide(BigDecimal divisor)<br>è¿”å›BigDecimal ï¼Œå…¶å€¼ä¸º(this &#x2F; divisor) ï¼Œä¼˜å…ˆçº§ä¸º(this.scale() - divisor.scale()) ; å¦‚æœä¸èƒ½è¡¨ç¤ºç¡®åˆ‡çš„å•†ï¼ˆå› ä¸ºå®ƒå…·æœ‰éç»ˆæ­¢çš„åè¿›åˆ¶æ‰©å±•ï¼‰ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªArithmeticException ã€‚</p>
</li>
<li><p>BigDecimal	subtract(BigDecimal subtrahend)<br>è¿”å› BigDecimal ï¼Œå…¶å€¼æ˜¯ (this - subtrahend) ï¼Œå…¶æ ‡ä¸º max(this.scale(), subtrahend.scale()) ã€‚</p>
</li>
<li><p>BigDecimal	multiply(BigDecimal multiplicand)<br>è¿”å› BigDecimal ï¼Œå…¶å€¼æ˜¯ (this Ã— multiplicand)ï¼Œå…¶æ ‡ä¸º (this.scale() + multiplicand.scale()) ã€‚</p>
</li>
</ol>
</blockquote>
<h1 id="ç»ƒä¹ å­—ç¬¦ä¸²"><a href="#ç»ƒä¹ å­—ç¬¦ä¸²" class="headerlink" title="ç»ƒä¹ å­—ç¬¦ä¸²"></a>ç»ƒä¹ å­—ç¬¦ä¸²</h1><blockquote>
<ol>
<li><p>è›‡å½¢å‘½åè‡ªåŠ¨è½¬æ¢æˆå°é©¼å³°</p>
<p>stu_age &#x3D;&gt; stuAgeÂ </p>
</li>
<li><p>ä¸è¦è¶…è¿‡5ä½</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥<span class="number">123</span></span><br><span class="line">è¾“å‡º:å£¹ä½°è´°æ‹¾å</span><br><span class="line">   </span><br><span class="line">è¾“å…¥<span class="number">10005.03</span></span><br><span class="line">è¾“å‡º:å£¹è¬é›¶ä¼åœ†</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h1 id="æšä¸¾ç±»å‹"><a href="#æšä¸¾ç±»å‹" class="headerlink" title="æšä¸¾ç±»å‹"></a>æšä¸¾ç±»å‹</h1><blockquote>
<p>åœ¨jdk5.xå¼€å§‹ä½¿ç”¨æšä¸¾ç±»å‹æ¥æ›¿ä»£å¸¸é‡æ¥å£çš„ä½¿ç”¨ - ç®¡ç†æ•´ä¸ªåº”ç”¨ä¸­çš„å¸¸é‡.</p>
<p>æä¾›å¯è¯»æ€§</p>
</blockquote>
<blockquote>
<ol>
<li>å…³é”®å­—enumæ¥å®šä¹‰æšä¸¾ç±»å‹,ç¼–è¯‘ä¹‹åä¹Ÿæ˜¯ä¸€ä¸ªæšä¸¾å¸¸é‡</li>
<li>è‡ªå®šä¹‰çš„æšä¸¾ç±»å‹é»˜è®¤éƒ½æ˜¯ä¼šç»§æ‰¿java.lang.Enum&lt;E extends Enum<E>&gt;  æŠ½è±¡ç±»</li>
<li>æšä¸¾ç±»å‹ä¸­å¯ä»¥æä¾›æ™®é€šå±æ€§å’Œæ™®é€šæ–¹æ³•</li>
<li>ä¸èƒ½æœ‰public,protectedæ„é€ ,åªèƒ½ä½¿ç”¨privateä»¥åŠé»˜è®¤</li>
<li>æšä¸¾ç±»å‹ä¸èƒ½å¤Ÿåœ¨å¤–éƒ¨new</li>
<li>æ¯ä¸ªæšä¸¾å¸¸é‡éƒ½æ˜¯ä»£è¡¨è¿™ä¸ªæšä¸¾ç±»å‹çš„å”¯ä¸€å®ä¾‹</li>
<li>å…è®¸æä¾›æŠ½è±¡æ–¹æ³•,ä½†æ˜¯æšä¸¾å¸¸é‡å¿…é¡»è¦å®ç°è¿™ä¸ªæŠ½è±¡æ–¹æ³•.</li>
</ol>
</blockquote>
<h2 id="æšä¸¾ç±»å‹å•ä¾‹"><a href="#æšä¸¾ç±»å‹å•ä¾‹" class="headerlink" title="æšä¸¾ç±»å‹å•ä¾‹"></a>æšä¸¾ç±»å‹å•ä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>














    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">java</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">ç¬”è®°</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/02/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-javaé›†åˆç±»" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/08/02/java%E9%9B%86%E5%90%88%E7%B1%BB/" target="_blank">javaé›†åˆç±»ã€æ³›å‹</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/08/02/java%E9%9B%86%E5%90%88%E7%B1%BB/" class="archive-article-date">
        <time datetime="2022-08-02T11:47:07.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-08-02</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="é›†åˆæ¡†æ¶"><a href="#é›†åˆæ¡†æ¶" class="headerlink" title="é›†åˆæ¡†æ¶"></a>é›†åˆæ¡†æ¶</h1><blockquote>
<p>å°±æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„â€å®¹å™¨â€,ç”¨æ¥å­˜å‚¨æ•°æ®.å®é™…å¼€å‘ä¸­ç”¨æ¥æ›¿ä»£æ•°ç»„çš„ä½¿ç”¨</p>
<p>ä¸åŒçš„é›†åˆæ¡†æ¶åº•å±‚ä½¿ç”¨åˆ°çš„æ•°æ®ç»“æ„ä¸ä¸€æ ·.</p>
</blockquote>
<blockquote>
<p>apiåŒ…:java.util</p>
<ol>
<li><p>Collection[I]</p>
<ul>
<li><p>List[I]  - æœ‰åº,å¯é‡å¤</p>
<ul>
<li><p>ArrayList[C] - â€œåº•å±‚å°±æ˜¯åŠ¨æ€æ•°ç»„ - å†…å­˜ä¸­æ˜¯è¿ç»­çš„,æœ‰åºçš„ - ä¾¿äºä½¿ç”¨ä¸‹æ ‡æ¥è®¿é—®å…ƒç´ .ä½†æ˜¯å¢åˆ æ•ˆç‡ç•¥ä½â€</p>
</li>
<li><p>LinkedList[C] - â€œåº•å±‚æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨,è®¿é—®æ¯”ArrayListæ…¢,ä½†æ˜¯å¢åˆ æ•ˆç‡é«˜â€</p>
<p>é€‚åˆè§£å†³æ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡ - è´ªåƒè›‡</p>
</li>
<li><p>Vector[C] - çº¿ç¨‹å®‰å…¨çš„,ä½¿ç”¨æ–¹å¼å’ŒArrayListä¸€è‡´.</p>
</li>
</ul>
</li>
<li><p>Set[I] - æ— åº,ä¸å¯é‡å¤</p>
<ul>
<li><p>HashSet[C] - â€œåº•å±‚ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•,åº•å±‚å°±æ˜¯HashMapâ€</p>
</li>
<li><p>SortedSet[I]</p>
<ul>
<li><p>TreeSet[C] - â€œå¯ä»¥ä½¿ç”¨å¯æ¯”è¾ƒæ¥å£æˆ–è€…æ¯”è¾ƒå™¨æ¥å£æ¥å®ç°æ’åºçš„åŠŸèƒ½,ä½†æ˜¯ä»ç„¶æ˜¯ä¸å¯é‡å¤çš„â€</p>
<p>â€œåº•å±‚æ˜¯TreeMapâ€</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Map[I] - é‡‡ç”¨key-valueé”®å€¼å¯¹å½¢å¼æ¥å­˜å‚¨æ•°æ®</p>
<ul>
<li>HashMap[C] - é’ˆå¯¹keyæ— åºä¸å¯é‡å¤</li>
<li>Hashtable[C]<ul>
<li>Properties[C] - .propertieså±æ€§æ–‡ä»¶åœ¨å†…å­˜ä¸­æ˜ å°„çš„é‚£ä¸ªå¯¹è±¡</li>
</ul>
</li>
</ul>
</li>
</ol>
</blockquote>
<h1 id="è¿­ä»£å™¨Iterator"><a href="#è¿­ä»£å™¨Iterator" class="headerlink" title="è¿­ä»£å™¨Iterator"></a>è¿­ä»£å™¨Iterator</h1><blockquote>
<p>ä½œç”¨ - ä¸ºäº†è®¿é—®ä¸åŒæ•°æ®ç»“æ„çš„é›†åˆ,æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼.</p>
</blockquote>
<p><code>ArrayList</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Itr</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line">        <span class="type">int</span> cursor;       <span class="comment">// index of next element to return</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">// index of last element returned; -1 if no such</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            checkForComodification();<span class="comment">//æ£€æµ‹expectedModCount == modCount;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            <span class="comment">//é›†åˆå­˜å‚¨çš„æ•°æ®</span></span><br><span class="line">            Object[] elementData = ArrayList.<span class="built_in">this</span>.elementData;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            cursor = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> (E) elementData[lastRet = i]; <span class="comment">// æ•°ç»„å¯¹è±¡[ä¸‹æ ‡]</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>LinkedList</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Index of element to be returned by subsequent call to next.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">cursor</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Index of element returned by most recent call to next or</span></span><br><span class="line"><span class="comment">         * previous.  Reset to -1 if this element is deleted by a call</span></span><br><span class="line"><span class="comment">         * to remove.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The modCount value that the iterator believes that the backing</span></span><br><span class="line"><span class="comment">         * List should have.  If this expectation is violated, the iterator</span></span><br><span class="line"><span class="comment">         * has detected concurrent modification.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            checkForComodification();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">                <span class="type">E</span> <span class="variable">next</span> <span class="operator">=</span> get(i);</span><br><span class="line">                lastRet = i;</span><br><span class="line">                cursor = i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> next;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException e) &#123;</span><br><span class="line">                checkForComodification();</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ArrayListç»ƒä¹ "><a href="#ArrayListç»ƒä¹ " class="headerlink" title="ArrayListç»ƒä¹ "></a>ArrayListç»ƒä¹ </h1><blockquote>
<p>é›†åˆä¸­æ·»åŠ Nä¸ªå›¾ä¹¦å¯¹è±¡,å°†å›¾ä¹¦ååŒ…å«javaçš„å›¾ä¹¦å…¨éƒ¨åˆ é™¤!</p>
</blockquote>
<h1 id="ArrayListæ‰©å®¹æœºåˆ¶"><a href="#ArrayListæ‰©å®¹æœºåˆ¶" class="headerlink" title="ArrayListæ‰©å®¹æœºåˆ¶"></a>ArrayListæ‰©å®¹æœºåˆ¶</h1><blockquote>
<ul>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨addæ–¹æ³•çš„æ—¶å€™,æ‰ä¼šåˆå§‹åŒ–æ•°ç»„elementData</li>
<li>é»˜è®¤çš„æ•°ç»„çš„é•¿åº¦æ˜¯10ä¸ª</li>
<li>æ‰©å®¹çš„å€æ•°æ˜¯1.5å€</li>
</ul>
</blockquote>
<h1 id="ArrayListå’ŒVectoråŒºåˆ«"><a href="#ArrayListå’ŒVectoråŒºåˆ«" class="headerlink" title="ArrayListå’ŒVectoråŒºåˆ«"></a>ArrayListå’ŒVectoråŒºåˆ«</h1><blockquote>
<p>è¦æƒ³å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å…ˆæŠŠå„ç§éƒ½è®²ç‰¹æ€§ï¼Œç„¶åå†ä»åº•å±‚å­˜å‚¨ç»“æ„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé»˜è®¤å¤§å°ï¼Œæ‰©å®¹æœºåˆ¶ï¼Œè¿­ä»£å™¨ï¼Œå¢åˆ æ”¹æŸ¥æ•ˆç‡è¿™å‡ ä¸ªæ–¹å‘å…¥æ‰‹ã€‚</p>
<ul>
<li><p>åº•å±‚å­˜å‚¨æ•°æ®ç»“æ„ - <strong>æœ¬è´¨ä¸Šéƒ½æ˜¯æ•°ç»„</strong>,Vectoræ˜¯ä½¿ç”¨é˜Ÿåˆ—[å…ˆè¿›å…ˆå‡º]æ¥å­˜å‚¨æ•°æ®,ä½†æ˜¯æœ¬è´¨ä»ç„¶æ˜¯æ•°ç»„.</p>
</li>
<li><p>çº¿ç¨‹å®‰å…¨æ€§ - å‰è€…æ˜¯çº¿ç¨‹ä¸å®‰å…¨,åè€…æ˜¯çº¿ç¨‹å®‰å…¨</p>
</li>
<li><p>é»˜è®¤å¤§å° - ä¿©è€…éƒ½æ˜¯é•¿åº¦ä¸º10</p>
</li>
<li><p>æ‰©å®¹æœºåˆ¶ - å‰è€…æ˜¯1.5å€,åè€…é»˜è®¤æ˜¯æ‰©å®¹2å€,å¯ä»¥æ‰©å®¹ç³»æ•°å¯ä»¥è®¾ç½®çš„.</p>
</li>
<li><p><code>ArrayList</code>å’Œ<code>Vector</code>æ£€ç´¢å…ƒç´ ï¼Œç”±äºæ˜¯æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯<code>O(1)</code>ï¼Œåœ¨é›†åˆçš„å°¾éƒ¨æ’å…¥æˆ–è€…åˆ é™¤æ˜¯<code>O(1)</code>ï¼Œä½†æ˜¯å…¶ä»–çš„åœ°æ–¹å¢åŠ ï¼Œåˆ é™¤ï¼Œéƒ½æ˜¯<code>O(n)</code>ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†æ•°ç»„å…ƒç´ çš„ç§»åŠ¨</p>
<p><code>ArrayListçš„åˆ é™¤å’Œæ’å…¥çš„æ•ˆç‡ä¸€å®šä¼šæ¯”LinkedListä½å—?</code> - ä¸ä¸€å®š,çœ‹æ˜¯å¦æ“ä½œçš„æ˜¯é›†åˆçš„å°¾éƒ¨</p>
</li>
</ul>
</blockquote>
<h1 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h1><blockquote>
<p>jdk8.0ç”¨åˆ°çš„æ˜¯åŒå‘é“¾è¡¨ç»“æ„</p>
<p>é“¾è¡¨è‚¯å®šä¼šæ¯”æ•°ç»„å ç”¨æ›´å¤šçš„å†…å­˜</p>
</blockquote>
<blockquote>
<p>é˜”ä»¥æ¨¡æ‹Ÿæ ˆåˆ—å’Œé˜Ÿåˆ—çš„ä¸šåŠ¡</p>
</blockquote>
<blockquote>
<p>å•å‘é“¾è¡¨ç»“æ„ - å¿…é¡»ä»å¤´èŠ‚ç‚¹å¼€å§‹</p>
<p>element - çœŸå®çš„æ•°æ®</p>
<p>next - ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€</p>
</blockquote>
<blockquote>
<p>  <img src="D:\PerfLogs\source_posts\imgs\link01.png" alt="link01"></p>
</blockquote>
<blockquote>
<p>å•å‘å¾ªç¯ç»“æ„</p>
</blockquote>
<blockquote>
<p><img src="D:\PerfLogs\source_posts\imgs\link02.png" alt="link02"></p>
<p><img src="D:\PerfLogs\source_posts\imgs\link03.png" alt="link03"></p>
</blockquote>
<blockquote>
<p>  <img src="D:\PerfLogs\source_posts\imgs\link04.png" alt="link04"></p>
</blockquote>
<h2 id="get-int-index-åº•å±‚"><a href="#get-int-index-åº•å±‚" class="headerlink" title="get(int index)åº•å±‚"></a>get(int index)åº•å±‚</h2><blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">checkElementIndex(index);</span><br><span class="line"><span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>å†…éƒ¨ç±»</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">E item;</span><br><span class="line">Node&lt;E&gt; next;</span><br><span class="line">Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line"> <span class="built_in">this</span>.item = element;</span><br><span class="line"> <span class="built_in">this</span>.next = next;</span><br><span class="line"> <span class="built_in">this</span>.prev = prev;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>æ ¸å¿ƒæ–¹æ³•node(index)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line"><span class="comment">// index=2</span></span><br><span class="line"><span class="comment">// 1 2 3 4 5 6 = size = 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123; <span class="comment">// å¦‚æœåœ¨ä¸­é—´ä½ç½®çš„å·¦è¾¹</span></span><br><span class="line"> Node&lt;E&gt; x = first; <span class="comment">// å¤´èŠ‚ç‚¹å¼€å§‹éå†</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">   x = x.next;</span><br><span class="line"> <span class="keyword">return</span> x;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// ä»å°¾éƒ¨</span></span><br><span class="line"> Node&lt;E&gt; x = last;</span><br><span class="line"> <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">   x = x.prev;</span><br><span class="line"> <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="remove-int-index-åº•å±‚"><a href="#remove-int-index-åº•å±‚" class="headerlink" title="remove(int index)åº•å±‚"></a>remove(int index)åº•å±‚</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">  checkElementIndex(index);</span><br><span class="line">  <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>unlink(node(index));</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> &#123; <span class="comment">// x-å³å°†åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// assert x != null;</span></span><br><span class="line">  <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; next = x.next; <span class="comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev; <span class="comment">//ä¸Šä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123; <span class="comment">// åˆ¤æ–­xæ˜¯å¦ä¸ºå¤´èŠ‚ç‚¹</span></span><br><span class="line">    first = next; <span class="comment">// åŸæ¥ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå¤´èŠ‚ç‚¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    prev.next = next; <span class="comment">//åŸæ¥ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªåœ°å€åº”è¯¥æŒ‡å‘åŸæ¥è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    x.prev = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123; <span class="comment">// åˆ¤æ–­xæ˜¯å¦ä¸ºå°¾èŠ‚ç‚¹</span></span><br><span class="line">    last = prev; <span class="comment">// å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹è®¾ç½®æˆå°¾ç»“ç‚¹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    next.prev = prev;</span><br><span class="line">    x.next = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  x.item = <span class="literal">null</span>;<span class="comment">//gc</span></span><br><span class="line">  size--; <span class="comment">// é›†åˆçš„é•¿åº¦</span></span><br><span class="line">  modCount++; <span class="comment">// å¹¶å‘ä¿®æ”¹</span></span><br><span class="line">  <span class="keyword">return</span> element;<span class="comment">//è¿”å›åˆšåˆšåˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h1><blockquote>
<ol>
<li><p>æ‹¬å·åŒ¹é…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">()</span><br><span class="line">[]</span><br><span class="line">&#123;&#125;</span><br><span class="line">()[]&#123;&#125;</span><br><span class="line">([&#123;&#125;])</span><br><span class="line">[()]&#123;&#125;</span><br></pre></td></tr></table></figure>


<p>(]<br>([)]{}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">arr = ( [ &#123; &#125; ] )</span><br><span class="line"></span><br><span class="line">æ°¸è¿œå°†ç¬¬ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆé¡¶ push</span><br><span class="line">ä»arrçš„ç¬¬<span class="number">2</span>ä¸ªä½ç½®å¼€å§‹éå†</span><br><span class="line">iä¸‹æ ‡å¯¹åº”çš„å…ƒç´ ,å’Œæ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒgetFast();</span><br><span class="line">ä¸åŒ¹é… - ç»§ç»­å‹å…¥æ ˆé¡¶</span><br><span class="line">åŒ¹é… - å¼¹å‡ºæ ˆé¡¶</span><br><span class="line">é›†åˆæ˜¯å¦ä¸ºç©º isEmpty();</span><br><span class="line"></span><br><span class="line">( [ ) ] &#123; &#125;</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line">)</span><br><span class="line">[</span><br><span class="line">(</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Purcase</span>&#123; <span class="comment">//è´­ä¹°ç±»</span></span><br><span class="line">	<span class="keyword">private</span> String brand; <span class="comment">//å“ç‰Œ</span></span><br><span class="line">	<span class="keyword">private</span> String name; <span class="comment">//äº§å“å</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">double</span> cost; <span class="comment">// è´¹ç”¨</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ„é€ ,getter/setter,toString...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;Purcase&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å®æ´&quot;</span>,<span class="string">&quot;æ´—æ‰‹ç²‰&quot;</span>,<span class="number">18.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;è”åˆåˆ©å&quot;</span>,<span class="string">&quot;è‚¥çš‚&quot;</span>,<span class="number">4.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å®æ´&quot;</span>,<span class="string">&quot;ç‰™è†&quot;</span>,<span class="number">32.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å®æ´&quot;</span>,<span class="string">&quot;æ¯›å·¾&quot;</span>,<span class="number">14.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;æ´åˆ©&quot;</span>,<span class="string">&quot;æ´—é¢å¥¶&quot;</span>,<span class="number">26.0</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å¥½è¿ª&quot;</span>,<span class="string">&quot;æ´—å‘æ°´&quot;</span>,<span class="number">27.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p7</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å¤šèŠ¬&quot;</span>,<span class="string">&quot;æ²æµ´éœ²&quot;</span>,<span class="number">38.5</span>);</span><br><span class="line"><span class="type">Purcase</span> <span class="variable">p8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Purcase</span>(<span class="string">&quot;å®æ´&quot;</span>,<span class="string">&quot;æ´—æ´ç²¾&quot;</span>,<span class="number">3.4</span>);</span><br><span class="line"></span><br><span class="line">list.add(p1);</span><br><span class="line">list.add(p2);</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">è¦æ±‚:å†™ä¸€ä¸ªç¨‹åº,æ‰“å°å‡ºå„å“ç‰Œæ‰€èŠ±è´¹çš„æ€»è´¹ç”¨â‘ .</span><br><span class="line">[å¯é€‰,æ’å¥½åºåå†æ‰“å°è¾“å‡º,æŒ‰èŠ±è´¹æ€»è´¹ç”¨çš„é™åºæ’åºâ‘¡]</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>map &#x3D;&gt; ç»Ÿè®¡æ¯ä¸ªéšæœºæ•°å‡ºç°çš„æ¬¡æ•°.      15ä¸ªéšæœºæ•°     1~5</p>
<p>â€œpython java 123 15901121 dfdfd  fdfdâ€</p>
</blockquote>
<h1 id="è´ªåƒè›‡çš„å®ç°æ­¥éª¤"><a href="#è´ªåƒè›‡çš„å®ç°æ­¥éª¤" class="headerlink" title="è´ªåƒè›‡çš„å®ç°æ­¥éª¤"></a>è´ªåƒè›‡çš„å®ç°æ­¥éª¤</h1><blockquote>
<ol>
<li><p>è¾“å‡ºä¸€ä¸ªä¸»ç•Œé¢</p>
<p>è›‡èº«(LinkedList-&gt;å­˜å‚¨äº†Nä¸ªNode) - é•¿åº¦,è›‡å¤´,æ–¹å‘</p>
<p><strong>éšæœºç”Ÿæˆnä¸ªé£Ÿç‰©</strong> - ä½¿ç”¨HashSetæ¥è¿›è¡Œå­˜å‚¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* * * * * * * * * * *</span><br><span class="line">* <span class="number">0</span></span><br><span class="line">*   # # # </span><br><span class="line">*     <span class="number">0</span>      <span class="number">0</span></span><br><span class="line">*</span><br><span class="line">*</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡Node(int x,int y);</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªç±»SnakeGame</p>
<p>3-1. åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»Snake - ç»´æŠ¤ä¸€ä¸ªLinkedList</p>
<p>3-2. Set<Node> foods &#x3D; new HashSet&lt;&gt;();&#x2F;&#x2F;å­˜æ”¾é£Ÿç‰©</p>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li><p>èµ°ä¸€æ­¥ç®—æ³•	</p>
<p>4-1. æ²¡æœ‰åƒåˆ°é£Ÿç‰©</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ç¡®å®šæ–°çš„æ–¹å‘ - w a s d</span><br><span class="line"><span class="number">2.</span> æ–°çš„åæ ‡Node(i,j)</span><br><span class="line"><span class="number">3.</span> addFirst - å°†æ–°çš„åæ ‡æ”¾å…¥åˆ°è›‡å¤´</span><br><span class="line"><span class="number">4.</span> åˆ¤æ–­æ–°çš„åæ ‡æ˜¯å¦å±äºfoods,å¦‚æœä¸å±äºremoveLast();<span class="comment">//åˆ é™¤æœ€åå°¾èŠ‚ç‚¹</span></span><br></pre></td></tr></table></figure>

<p>4-2. åƒåˆ°é£Ÿç‰©</p>
</li>
</ol>
</blockquote>
<h1 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h1><blockquote>
<p>HashSetå’ŒHashMap &#x3D;&gt; å­˜æ”¾æ•°æ®çš„æ€§èƒ½ - HashMapæ›´é«˜ - HashSetå¯èƒ½æ˜¯è®¡ç®—æ•´ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Book&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> &#123;</span><br><span class="line">  map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">set.add(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//seté›†åˆçš„valueå°±æ˜¯mapé›†åˆçš„key</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><blockquote>
<p>çº¿ç¨‹ä¸å®‰å…¨çš„.</p>
</blockquote>
<blockquote>
<p>ç”¨åˆ°çš„æ•°æ®ç»“æ„</p>
<p>jdk8.0-å¼€å§‹<strong>æ¡¶æ•°ç»„ + å•å‘é“¾è¡¨ + çº¢é»‘æ ‘</strong></p>
<p><code>æ¡¶ - å“ˆå¸Œæ¡¶</code></p>
</blockquote>
<h2 id="putåº•å±‚æºç å‰–æ"><a href="#putåº•å±‚æºç å‰–æ" class="headerlink" title="putåº•å±‚æºç å‰–æ"></a>putåº•å±‚æºç å‰–æ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;Integer,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å®¹å› å­ - é¢„æ‰©å®¹</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//putæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é’ˆå¯¹keè¿›è¡Œä¸€ä¸ªhashç®—æ³• - æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">  <span class="type">int</span> h;</span><br><span class="line">  <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);<span class="comment">// è®©å“ˆå¸Œå€¼å’Œé«˜16ä½è¿›è¡Œå¼‚æˆ–è¿ç®—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">                   <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">  		  <span class="comment">//â‘ è¿›æ¥tableå’Œtabéƒ½æ˜¯null</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            <span class="comment">//â‘ å°±ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œ n = 16  tabåˆå§‹åŒ–å®Œæ¯•</span></span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">  			<span class="comment">//â‘ hash - keyçš„æ‰°åŠ¨å‡½æ•°å¾—åˆ°å“ˆå¸Œå€¼</span></span><br><span class="line">  			<span class="comment">//(n - 1) &amp; hash =&gt; 1. ä¸‹æ ‡è‚¯å®šä¸ä¼šè¶Šç•Œ  2. å‡å°‘å“ˆå¸Œå†²çª</span></span><br><span class="line">  	    <span class="comment">//p = tab[å“ˆå¸Œä½ç½®]è‚¯å®šæ˜¯null</span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">            <span class="comment">//â‘ å¯¹è¿™ä¸ªä½ç½®è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">            <span class="comment">//å•å‘é“¾è¡¨</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="literal">null</span>);<span class="comment">//æœ€åä¸€ä¸ªå‚æ•°æ˜¯next</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="comment">//p - å“ˆå¸Œå†²çªçš„ä½ç½®ä¸Šçš„Node</span></span><br><span class="line">            <span class="comment">//æ¯”è¾ƒnodeå¯¹è±¡çš„hashå€¼</span></span><br><span class="line">          </span><br><span class="line">             <span class="comment">//ä¿©ä¸ªç¡®å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p;<span class="comment">//e = pæ˜¯æ—§çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//OO - ä¸åŒå¯¹è±¡çš„hashCodeå€¼,ä¸ä¸€å®š </span></span><br><span class="line">                <span class="comment">// å“ˆå¸Œç¢°æ’äº†,ä½†æ˜¯å¹¶ä¸æ˜¯ä¿©ä¸ªç›¸åŒçš„å¯¹è±¡</span></span><br><span class="line">               <span class="comment">//b. ç›¸åŒå¯¹è±¡equalsè‚¯å®šè¿”å›true</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="comment">//æŠŠå“ˆå¸Œå†²çªä½ç½®ä¸Šçš„æ—§èŠ‚ç‚¹pçš„nextæŒ‚è½½ä¸€ä¸ªæ–°çš„e</span></span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;<span class="comment">//â‘ è‚¯å®šä¸ºç©º</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                        <span class="comment">//å½“é“¾è¡¨é•¿åº¦å¼€å§‹&gt;=8çš„æ—¶å€™,å•å‘é“¾è¡¨ç»“æ„å°±ä¼šè½¬æ¢æˆçº¢é»‘æ ‘</span></span><br><span class="line">                        <span class="comment">//åˆ é™¤æ“ä½œ - å¦‚æœèŠ‚ç‚¹ä¸ªæ•°å°äºç­‰äº6çš„æ—¶å€™,å¼€å§‹è½¬æˆé“¾è¡¨ç»“æ„</span></span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//é“¾è¡¨çš„èŠ‚ç‚¹å¯èƒ½å’Œæ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªç›¸åŒå¯¹è±¡</span></span><br><span class="line">                </span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;<span class="comment">//å°±æ˜¯æ—§çš„èŠ‚ç‚¹çš„value</span></span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                    e.value = value;<span class="comment">//æ–°çš„valueèµ‹å€¼ç»™æ—§èŠ‚ç‚¹çš„value</span></span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">  			</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>æ‰©å®¹resize()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">  <span class="comment">//ç¬¬ä¸€æ¬¡è¿›æ¥oldTabå°±æ˜¯null</span></span><br><span class="line">  Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">  <span class="comment">//oldCap æ—§å®¹é‡ = 0</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">  <span class="comment">//oldThr = 0</span></span><br><span class="line">  <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//æ–°çš„å®¹é‡,æ–°çš„æ‰©å®¹å› å­</span></span><br><span class="line">  <span class="type">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">      threshold = Integer.MAX_VALUE;</span><br><span class="line">      <span class="keyword">return</span> oldTab;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">             oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">      newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">    newCap = oldThr;</span><br><span class="line">  <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">    <span class="comment">//newCap = 16</span></span><br><span class="line">    newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">    <span class="comment">//newThr = 16*0.75f  =&gt; æ‰©å®¹çš„ä¸´ç•Œå€¼</span></span><br><span class="line">    newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">    newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">              (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//threshold = 16*0.75f</span></span><br><span class="line">  threshold = newThr;</span><br><span class="line">  <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class="line">  <span class="comment">//newTab é•¿åº¦å°±æ˜¯16</span></span><br><span class="line">  Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">  table = newTab;</span><br><span class="line">  <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">      Node&lt;K,V&gt; e;</span><br><span class="line">      <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) &#123;</span><br><span class="line">        oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">          newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">          ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">          Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">          Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">          Node&lt;K,V&gt; next;</span><br><span class="line">          <span class="keyword">do</span> &#123;</span><br><span class="line">            next = e.next;</span><br><span class="line">            <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                loHead = e;</span><br><span class="line">              <span class="keyword">else</span></span><br><span class="line">                loTail.next = e;</span><br><span class="line">              loTail = e;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                hiHead = e;</span><br><span class="line">              <span class="keyword">else</span></span><br><span class="line">                hiTail.next = e;</span><br><span class="line">              hiTail = e;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">          <span class="keyword">if</span> (loTail != <span class="literal">null</span>) &#123;</span><br><span class="line">            loTail.next = <span class="literal">null</span>;</span><br><span class="line">            newTab[j] = loHead;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) &#123;</span><br><span class="line">            hiTail.next = <span class="literal">null</span>;</span><br><span class="line">            newTab[j + oldCap] = hiHead;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="putè¿‡ç¨‹"><a href="#putè¿‡ç¨‹" class="headerlink" title="putè¿‡ç¨‹"></a>putè¿‡ç¨‹</h2><p><img src="D:\è‹å·\dy-corejava-tech\note\imgs\put.png"> </p>
<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><blockquote>
<ol>
<li>é€šè¿‡æ¯”è¾ƒå™¨æ¥å£java.util.Comparator<T></li>
<li>é€šè¿‡java.lang.Comparable[I]</li>
</ol>
</blockquote>
<h1 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h1><blockquote>
<ol>
<li><p>Listå’ŒSetåŒºåˆ«</p>
<blockquote>
<p><strong>ï¼ˆ1ï¼‰é‡å¤å¯¹è±¡</strong></p>
<p>listæ–¹æ³•å¯ä»¥å…è®¸é‡å¤çš„å¯¹è±¡ï¼Œè€Œsetæ–¹æ³•ä¸å…è®¸é‡å¤å¯¹è±¡</p>
<p><strong>ï¼ˆ2ï¼‰nullå…ƒç´ </strong></p>
<p>listå¯ä»¥æ’å…¥å¤šä¸ªnullå…ƒç´ ï¼Œè€Œsetåªå…è®¸æ’å…¥ä¸€ä¸ªnullå…ƒç´ </p>
<p><strong>ï¼ˆ3ï¼‰å®¹å™¨æ˜¯å¦æœ‰åº</strong></p>
<p>listæ˜¯ä¸€ä¸ªæœ‰åºçš„å®¹å™¨ï¼Œä¿æŒäº†æ¯ä¸ªå…ƒç´ çš„æ’å…¥é¡ºåºã€‚å³è¾“å‡ºé¡ºåºå°±æ˜¯è¾“å…¥é¡ºåºï¼Œè€Œsetæ–¹æ³•æ˜¯æ— åºå®¹å™¨ï¼Œæ— æ³•ä¿è¯æ¯ä¸ªå…ƒç´ çš„å­˜å‚¨é¡ºåºï¼ŒTreeSeté€šè¿‡ Comparator æˆ–è€… Comparable ç»´æŠ¤äº†ä¸€ä¸ªæ’åºé¡ºåº</p>
<p><img src="https://img.php.cn/upload/article/000/000/028/5c73a10d2ca05552.jpg" alt="img"></p>
<p><strong>ï¼ˆ4ï¼‰å¸¸ç”¨çš„å®ç°ç±»</strong></p>
<p>listæ–¹æ³•å¸¸ç”¨çš„å®ç°ç±»æœ‰ArrayListã€LinkedList å’Œ Vectorã€‚å…¶ä¸­ArrayList æœ€ä¸ºæµè¡Œï¼Œå®ƒæä¾›äº†ä½¿ç”¨ç´¢å¼•çš„éšæ„è®¿é—®ï¼Œè€ŒLinkedList åˆ™å¯¹äºç»å¸¸éœ€è¦ä» List ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ çš„åœºåˆæ›´ä¸ºåˆé€‚ï¼ŒVector è¡¨ç¤ºåº•å±‚æ•°ç»„ï¼Œçº¿ç¨‹å®‰å…¨</p>
<p>Setæ–¹æ³•ä¸­æœ€æµè¡Œçš„å‡ ä¸ªå®ç°ç±»æ˜¯ HashSetã€LinkedHashSet ä»¥åŠ TreeSetã€‚æœ€æµè¡Œçš„æ˜¯åŸºäº HashMapå®ç°çš„ HashSetï¼›TreeSet è¿˜å®ç°äº† SortedSet æ¥å£ï¼Œå› æ­¤ TreeSet æ˜¯ä¸€ä¸ªæ ¹æ®å…¶ compare() å’ŒcompareTo() çš„å®šä¹‰è¿›è¡Œæ’åºçš„æœ‰åºå®¹å™¨</p>
<p><img src="https://img.php.cn/upload/article/000/000/028/5c73a0a188a67166.jpg" alt="img"></p>
</blockquote>
</li>
<li><p>ArrayListå’ŒLinkedListåŒºåˆ«</p>
<blockquote>
<p>arraylistå’Œlinkedlistçš„åŒºåˆ«æ˜¯ï¼šæ•°æ®ç»“æ„ä¸åŒï¼Œæ•ˆç‡ä¸åŒï¼Œè‡ªç”±æ€§ä¸åŒï¼Œä¸»è¦æ§ä»¶å¼€é”€ä¸åŒã€‚</p>
<p>ä¸¤è€…å¯¹æ¯”ï¼š</p>
<p>1ã€æ•°æ®ç»“æ„ä¸åŒ</p>
<p>ArrayListæ˜¯Array(åŠ¨æ€æ•°ç»„)çš„æ•°æ®ç»“æ„ï¼ŒLinkedListæ˜¯Link(é“¾è¡¨)åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚</p>
<p>2ã€ç©ºé—´çµæ´»æ€§<br>ArrayListå…¶å®æœ€å¥½éœ€è¦æŒ‡å®šåˆå§‹å®¹é‡çš„ï¼ˆå½“ç„¶æœ‰äº›ç¨‹åºå‘˜ä¸ºäº†å·æ‡’ï¼Œæ ¹æœ¬ä¸ä¼šå»åˆå§‹åŒ–ï¼Œè¿™å…¶å®å¯¹äºä»£ç è´¨é‡ä½çš„é¡¹ç›®è€Œè¨€æ˜¯æ— å…³ç´§è¦çš„ï¼‰ã€Š1.å…¶å®åœ¨ä»£ç è§„èŒƒé‡Œï¼Œéƒ½è¦æ‰‹åŠ¨è®¾ç½®ï¼Œåªæ˜¯æˆ‘ä»¬ç”¨é»˜è®¤è€Œå·²ï¼Œå¦‚æœå…¬å¸ç”¨ä¸€äº›ä»£ç è§„èŒƒçš„å·¥å…·æ¥åšä»£ç è´¨é‡ï¼Œä¼šè¦æ±‚å†™ä¸Šçš„ 2.å¦‚æœåªæ˜¯äº§å“è¾¾åˆ°ä¸€å®šçš„é‡ï¼Œåˆå§‹å®¹é‡è¿˜æ˜¯æœ‰å¥½å¤„çš„ã€‹<br>LinkedListæ˜¯æ¯”ArrayListçµæ´»çš„ï¼Œæ˜¯æ ¹æœ¬ä¸éœ€è¦æŒ‡å®šåˆå§‹å®¹é‡çš„</p>
<p>3ã€ä»çº¿ç¨‹å®‰å…¨æ€§æ¥è®²ï¼šArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œè€ŒLinkedListæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>4ã€æ•ˆç‡ä¸åŒ<br>å½“éšæœºè®¿é—®Listï¼ˆgetå’Œsetæ“ä½œï¼‰æ—¶ï¼ŒArrayListæ¯”LinkedListçš„æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºLinkedListæ˜¯çº¿æ€§çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦ç§»åŠ¨æŒ‡é’ˆä»å‰å¾€åä¾æ¬¡æŸ¥æ‰¾ã€‚ArrayListå¯¹äºæ•°æ®æŸ¥è¯¢éå¸¸å¿«ï¼Œä½†æ˜¯æ’å…¥ä¸åˆ é™¤å…ƒç´ æ¯”è¾ƒæ…¢ï¼›<br>å½“å¯¹æ•°æ®è¿›è¡Œå¢åŠ å’Œåˆ é™¤çš„æ“ä½œ(addå’Œremoveæ“ä½œ)æ—¶ï¼ŒLinkedListæ˜¯æ°å¥½ç›¸åçš„ï¼Œå®ƒçš„æŸ¥è¯¢é€Ÿåº¦éå¸¸æ…¢ï¼Œä½†æ˜¯æ’å…¥ä¸åˆ é™¤å…ƒç´ çš„é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>5ã€ä¸»è¦æ§ä»¶å¼€é”€ä¸åŒ</p>
<p>ArrayListä¸»è¦æ§ä»¶å¼€é”€åœ¨äºéœ€è¦åœ¨lListåˆ—è¡¨é¢„ç•™ä¸€å®šç©ºé—´ï¼›è€ŒLinkListä¸»è¦æ§ä»¶å¼€é”€åœ¨äºéœ€è¦å­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯ä»¥åŠèŠ‚ç‚¹æŒ‡é’ˆã€‚</p>
<p>å…¶ä»–</p>
<p>ArrayListæ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒLinkedListåŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚</p>
<p>å¯¹äºéšæœºè®¿é—®getå’Œsetï¼ŒArrayListè§‰å¾—ä¼˜äºLinkedListï¼Œå› ä¸ºLinkedListè¦ç§»åŠ¨æŒ‡é’ˆã€‚</p>
<p>å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œaddå’Œremoveï¼ŒLinedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸ºArrayListè¦ç§»åŠ¨æ•°æ®ã€‚</p>
<p>ArrayListï¼šå†…éƒ¨ä½¿ç”¨æ•°ç»„çš„å½¢å¼å®ç°äº†å­˜å‚¨ï¼Œå®ç°äº†RandomAccessæ¥å£ï¼Œåˆ©ç”¨æ•°ç»„çš„ä¸‹é¢è¿›è¡Œå…ƒç´ çš„è®¿é—®ï¼Œå› æ­¤å¯¹å…ƒç´ çš„éšæœºè®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>å› ä¸ºæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ArrayListåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæœ‰åˆå§‹å¤§å°10ï¼Œæ’å…¥æ–°å…ƒç´ çš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œæ‰©å®¹çš„æ­¥é•¿æ˜¯0.5å€åŸå®¹é‡ï¼Œæ‰©å®¹æ–¹å¼æ˜¯åˆ©ç”¨æ•°ç»„çš„å¤åˆ¶ï¼Œå› æ­¤æœ‰ä¸€å®šçš„å¼€é”€ï¼›</p>
<p>å¦å¤–ï¼ŒArrayListåœ¨è¿›è¡Œå…ƒç´ æ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦ç§»åŠ¨æ’å…¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ ï¼Œä½ç½®è¶Šé å‰ï¼Œéœ€è¦ä½ç§»çš„å…ƒç´ è¶Šå¤šï¼Œå¼€é”€è¶Šå¤§ï¼Œç›¸åï¼Œæ’å…¥ä½ç½®è¶Šé åçš„è¯ï¼Œå¼€é”€å°±è¶Šå°äº†ï¼Œå¦‚æœåœ¨æœ€åé¢è¿›è¡Œæ’å…¥ï¼Œé‚£å°±ä¸éœ€è¦è¿›è¡Œä½ç§»ã€‚</p>
<p>LinkedListï¼šå†…éƒ¨ä½¿ç”¨åŒå‘é“¾è¡¨çš„ç»“æ„å®ç°å­˜å‚¨ï¼ŒLinkedListæœ‰ä¸€ä¸ªå†…éƒ¨ç±»ä½œä¸ºå­˜æ”¾å…ƒç´ çš„å•å…ƒï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªå±æ€§ï¼Œç”¨æ¥å­˜æ”¾å…ƒç´ æœ¬èº«ä»¥åŠå‰å2ä¸ªå•å…ƒçš„å¼•ç”¨ï¼Œå¦å¤–LinkedListå†…éƒ¨è¿˜æœ‰ä¸€ä¸ªheaderå±æ€§ï¼Œç”¨æ¥æ ‡è¯†èµ·å§‹ä½ç½®ï¼ŒLinkedListçš„ç¬¬ä¸€ä¸ªå•å…ƒå’Œæœ€åä¸€ä¸ªå•å…ƒéƒ½ä¼šæŒ‡å‘headerï¼Œå› æ­¤å½¢æˆäº†ä¸€ä¸ªåŒå‘çš„é“¾è¡¨ç»“æ„ã€‚</p>
<p>LinkedListæ˜¯é‡‡ç”¨åŒå‘é“¾è¡¨å®ç°çš„ã€‚æ‰€ä»¥å®ƒä¹Ÿå…·æœ‰é“¾è¡¨çš„ç‰¹ç‚¹ï¼Œæ¯ä¸€ä¸ªå…ƒç´ ï¼ˆç»“ç‚¹ï¼‰çš„åœ°å€ä¸è¿ç»­ï¼Œé€šè¿‡å¼•ç”¨æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³æ’å…¥å’Œåˆ é™¤æ•ˆç‡è¾ƒé«˜ï¼Œåªéœ€è¦å¸¸æ•°æ—¶é—´ï¼Œè€Œgetå’Œsetåˆ™è¾ƒä¸ºä½æ•ˆã€‚</p>
<p>LinkedListçš„æ–¹æ³•å’Œä½¿ç”¨å’ŒArrayListå¤§è‡´ç›¸åŒï¼Œç”±äºLinkedListæ˜¯é“¾è¡¨å®ç°çš„ï¼Œæ‰€ä»¥é¢å¤–æä¾›äº†åœ¨å¤´éƒ¨å’Œå°¾éƒ¨æ·»åŠ &#x2F;åˆ é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰ArrayListæ‰©å®¹çš„é—®é¢˜äº†ã€‚å¦å¤–ï¼ŒArrayListå’ŒLinkedListéƒ½å¯ä»¥å®ç°æ ˆã€é˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„ï¼Œä½†LinkedListæœ¬èº«å®ç°äº†é˜Ÿåˆ—çš„æ¥å£ï¼Œæ‰€ä»¥æ›´æ¨èç”¨LinkedListæ¥å®ç°é˜Ÿåˆ—å’Œæ ˆã€‚</p>
</blockquote>
</li>
<li><p>ArrayListå’ŒVectoråŒºåˆ«</p>
<blockquote>
<h3 id="1-ArrayList-æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒVector-æ˜¯çº¿ç¨‹å®‰å…¨çš„"><a href="#1-ArrayList-æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒVector-æ˜¯çº¿ç¨‹å®‰å…¨çš„" class="headerlink" title="1. ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒVector æ˜¯çº¿ç¨‹å®‰å…¨çš„"></a>1. ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒVector æ˜¯çº¿ç¨‹å®‰å…¨çš„</h3><ul>
<li><code>Vector</code> ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ã€‚å¯ä»¥æœ‰ä¸¤ä¸ªçº¿ç¨‹å®‰å…¨çš„è®¿é—®ä¸€ä¸ª <code>Vector</code> å¯¹è±¡ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹è®¿é—® <code>Vector</code> çš„è¯ä¼šåœ¨åŒæ­¥æ“ä½œä¸Šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚</li>
<li><code>ArrayList</code> æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¸éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨æ€§çš„æ—¶å€™æ¨èä½¿ç”¨ <code>ArrayList</code>ï¼Œå¦‚æœæƒ³è¦åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨ <code>ArrayList</code> å¯ä»¥é€šè¿‡ <code>Collections.synchronizedList(new ArrayList())</code> æˆ– <code>new CopyOnWriteArrayList</code> çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ <code>ArrayList</code> é›†åˆ</li>
</ul>
<h3 id="2-ArrayList-ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶æ˜¯åœ¨è°ƒç”¨-add-æ–¹æ³•æ—¶å¯¹-ArrayList-çš„é»˜è®¤å®¹é‡è¿›è¡Œåˆå§‹åŒ–çš„ï¼ŒVector-åœ¨è°ƒç”¨æ„é€ å™¨æ—¶å°±å¯¹å®¹é‡è¿›è¡Œäº†åˆå§‹åŒ–"><a href="#2-ArrayList-ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶æ˜¯åœ¨è°ƒç”¨-add-æ–¹æ³•æ—¶å¯¹-ArrayList-çš„é»˜è®¤å®¹é‡è¿›è¡Œåˆå§‹åŒ–çš„ï¼ŒVector-åœ¨è°ƒç”¨æ„é€ å™¨æ—¶å°±å¯¹å®¹é‡è¿›è¡Œäº†åˆå§‹åŒ–" class="headerlink" title="2. ArrayList ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶æ˜¯åœ¨è°ƒç”¨ add() æ–¹æ³•æ—¶å¯¹ ArrayList çš„é»˜è®¤å®¹é‡è¿›è¡Œåˆå§‹åŒ–çš„ï¼ŒVector åœ¨è°ƒç”¨æ„é€ å™¨æ—¶å°±å¯¹å®¹é‡è¿›è¡Œäº†åˆå§‹åŒ–"></a>2. ArrayList ä½¿ç”¨é»˜è®¤æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶æ˜¯åœ¨è°ƒç”¨ <code>add()</code> æ–¹æ³•æ—¶å¯¹ ArrayList çš„é»˜è®¤å®¹é‡è¿›è¡Œåˆå§‹åŒ–çš„ï¼ŒVector åœ¨è°ƒç”¨æ„é€ å™¨æ—¶å°±å¯¹å®¹é‡è¿›è¡Œäº†åˆå§‹åŒ–</h3><blockquote>
<p>é¦–å…ˆå¯¹æ¯” ArrayList å’Œ Vector çš„æ— å‚æ„é€ å‡½æ•°</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ArrayList çš„æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// é»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡æ•°ç»„ private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span></span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vector æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨çš„ Vector æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// initialCapacity ä¸º 10ï¼ŒcapacityIncrement æ²¡ä¼ å…¥é»˜è®¤ä¸º 0 </span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">int</span> capacityIncrement)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å¯¹è±¡æ•°ç»„å¤§å°ï¼Œå¯¹è±¡æ•°ç»„å¤§å°ä¸º</span></span><br><span class="line">    <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    <span class="built_in">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å†çœ‹çœ‹ ArrayList å’Œ Vector æ·»åŠ æ“ä½œ add() çš„æºç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ArrayList çš„æ·»åŠ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ArrayList åœ¨æ‰§è¡Œ add() æ–¹æ³•æ—¶æ‰å°†å¯¹è±¡æ•°ç»„è¿›è¡Œèµ‹å€¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculateCapacity</span><span class="params">(Object[] elementData, <span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vector çš„æ·»åŠ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">    elementData[elementCount++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-ArrayList-å­˜å‚¨æ•°æ®çš„-Object-æ•°ç»„ä½¿ç”¨äº†-transient-å…³é”®å­—ï¼ŒVector-çš„-Object-æ•°ç»„æ²¡æœ‰"><a href="#3-ArrayList-å­˜å‚¨æ•°æ®çš„-Object-æ•°ç»„ä½¿ç”¨äº†-transient-å…³é”®å­—ï¼ŒVector-çš„-Object-æ•°ç»„æ²¡æœ‰" class="headerlink" title="3. ArrayList å­˜å‚¨æ•°æ®çš„ Object æ•°ç»„ä½¿ç”¨äº† transient å…³é”®å­—ï¼ŒVector çš„ Object æ•°ç»„æ²¡æœ‰"></a>3. ArrayList å­˜å‚¨æ•°æ®çš„ Object æ•°ç»„ä½¿ç”¨äº† <code>transient</code> å…³é”®å­—ï¼ŒVector çš„ Object æ•°ç»„æ²¡æœ‰</h3><p><code>transient</code> è§£é‡Šï¼š</p>
<blockquote>
<p><code>transient</code>ï¼šJava è¯­è¨€çš„å…³é”®å­—ï¼Œå˜é‡ä¿®é¥°ç¬¦ï¼Œå¦‚æœç”¨ <code>transient</code> å£°æ˜ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå½“å¯¹è±¡å­˜å‚¨æ—¶ï¼Œå®ƒçš„å€¼ä¸éœ€è¦ç»´æŒã€‚è¿™é‡Œçš„å¯¹è±¡å­˜å‚¨æ˜¯æŒ‡ï¼ŒJava çš„ serialization æä¾›çš„ä¸€ç§æŒä¹…åŒ–å¯¹è±¡å®ä¾‹çš„æœºåˆ¶ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«åºåˆ—åŒ–çš„æ—¶å€™ï¼Œ<code>transient</code> å‹å˜é‡çš„å€¼ä¸åŒ…æ‹¬åœ¨åºåˆ—åŒ–çš„è¡¨ç¤ºä¸­ï¼Œç„¶è€Œé <code>transient</code> å‹çš„å˜é‡æ˜¯è¢«åŒ…æ‹¬è¿›å»çš„ã€‚ä½¿ç”¨æƒ…å†µæ˜¯ï¼šå½“æŒä¹…åŒ–å¯¹è±¡æ—¶ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡æ•°æ®æˆå‘˜ï¼Œæˆ‘ä»¬ä¸æƒ³ç”¨ serialization æœºåˆ¶æ¥ä¿å­˜å®ƒã€‚ä¸ºäº†åœ¨ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„ä¸€ä¸ªåŸŸä¸Šå…³é—­ serializationï¼Œå¯ä»¥åœ¨è¿™ä¸ªåŸŸå‰åŠ ä¸Šå…³é”®å­— <code>transient</code>ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ç®€å•çš„è¯´ï¼Œå°±æ˜¯è¢« <code>transient</code> ä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™å…¶å€¼ä¼šè¢«å¿½ç•¥ï¼Œåœ¨è¢«ååºåˆ—åŒ–åï¼Œ <code>transient</code> å˜é‡çš„å€¼è¢«è®¾ä¸ºåˆå§‹å€¼ï¼Œ å¦‚ <code>int</code> å‹çš„æ˜¯ 0ï¼Œå¯¹è±¡å‹çš„æ˜¯ <code>null</code>ã€‚</strong></p>
</blockquote>
<h3 id="4-ArrayList-å’Œ-Vector-çš„æ‰©å®¹æœºåˆ¶ä¸åŒ"><a href="#4-ArrayList-å’Œ-Vector-çš„æ‰©å®¹æœºåˆ¶ä¸åŒ" class="headerlink" title="4. ArrayList å’Œ Vector çš„æ‰©å®¹æœºåˆ¶ä¸åŒ"></a>4. ArrayList å’Œ Vector çš„æ‰©å®¹æœºåˆ¶ä¸åŒ</h3><blockquote>
<p>ArrayList æ‰©å®¹æºä»£ç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">// åœ¨åŸæ•°ç»„çš„åŸºç¡€ä¸Š æ‰©å®¹ 1.5 å€</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// æ‰©å®¹åçš„æ•°ç»„ä¸èƒ½æ»¡è¶³æœ€å°éœ€æ±‚å®¹é‡ æ•°ç»„æ‰©å®¹ä¸ºæœ€å°éœ€æ±‚å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">// æ•°ç»„æ‰©å®¹åå¤§äº æœ€å¤§æ•°ç»„é•¿åº¦ å°†æ•°ç»„æœ€å¤§é•¿åº¦è®¾ç½®ä¸º Integer çš„æœ€å¤§å€¼ï¼Œ2^31-1</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// å°†æ•°ç»„è¿›è¡Œå¤åˆ¶æ‰©å®¹</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Vector æ‰©å®¹æºä»£ç </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰å®¹å™¨çš„é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">// è‹¥å®¹å™¨å¢é‡å¤§äº 0 åˆ™ æ‰©å®¹ ï¼ˆå®¹å™¨å¢é‡ + åŸå®¹å™¨é•¿åº¦ï¼‰ å½“æˆ‘ä»¬ä¸é€šè¿‡æ„é€ å™¨æŒ‡å®š capacityIncrement æ—¶é»˜è®¤å®¹å™¨å¢é‡ä¸º 0ã€‚å®¹å™¨å¢é‡ä¸å¤§äº 0 æ—¶æŒ‰ 2 å€å®¹å™¨å¤§å°æ‰©å®¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                     capacityIncrement : oldCapacity);</span><br><span class="line">    <span class="comment">// å®¹å™¨æ‰©å®¹åä»ä¸æ»¡è¶³éœ€æ±‚ï¼Œæ‰©å®¹ä¸ºæœ€å°éœ€æ±‚å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">// å®¹å™¨æ‰©å®¹åå¤§äº æœ€å¤§æ•°ç»„é•¿åº¦æ—¶ ä¸ ArrayList æ“ä½œç›¸åŒ</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// å°†æ•°ç»„è¿›è¡Œå¤åˆ¶æ‰©å®¹</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>HashSetå’ŒHashMapåŒºåˆ«</p>
<blockquote>
<table>
<thead>
<tr>
<th>HashMap*</th>
<th><em>HashSet</em></th>
</tr>
</thead>
<tbody><tr>
<td>HashMapå®ç°äº†Mapæ¥å£</td>
<td>HashSetå®ç°äº†Setæ¥å£</td>
</tr>
<tr>
<td>HashMapå‚¨å­˜ é”®å€¼å¯¹</td>
<td>HashSetä»…ä»…å­˜å‚¨ å¯¹è±¡</td>
</tr>
<tr>
<td>ä½¿ç”¨put()æ–¹æ³•å°†å…ƒç´ æ”¾å…¥mapä¸­</td>
<td>ä½¿ç”¨add()æ–¹æ³•å°†å…ƒç´ æ”¾å…¥setä¸­</td>
</tr>
<tr>
<td>HashMapä¸­ä½¿ç”¨é”®å¯¹è±¡æ¥è®¡ç®—hashcodeå€¼</td>
<td>HashSetä½¿ç”¨æˆå‘˜å¯¹è±¡æ¥è®¡ç®—hashcodeå€¼ã€‚å¯¹äºä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æ¥è¯´ï¼Œå®ƒä»¬çš„hashcode å€¼å¯èƒ½ç›¸åŒï¼Œä½¿ç”¨ equals()æ–¹æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œå¯ä»¥å­˜å…¥HashSetï¼›å¦‚æœç›¸ç­‰ï¼Œä¸èƒ½å­˜å…¥HashSet</td>
</tr>
<tr>
<td>HashMapæ¯”è¾ƒå¿«ï¼Œå› ä¸ºæ˜¯ä½¿ç”¨ å”¯ä¸€çš„é”® æ¥è·å–å¯¹è±¡</td>
<td>HashSetè¾ƒHashMapæ¥è¯´æ¯”è¾ƒæ…¢</td>
</tr>
<tr>
<td><strong>Mapä¸­ä¸å…è®¸é‡å¤çš„é”®ã€‚HashMapä¸èƒ½ä¿å­˜å­˜å…¥å¯¹è±¡çš„æ’åˆ—æ¬¡åºã€‚HashMapå…è®¸é”®å’Œå€¼ä¸ºnull</strong></td>
<td><strong>HashSetä¸­ ä¸å…è®¸æœ‰é‡å¤çš„å€¼</strong></td>
</tr>
</tbody></table>
</blockquote>
</li>
<li><p>TreeSetå’ŒTreeMapåŒºåˆ«</p>
<blockquote>
<p>ç›¸åŒç‚¹ï¼š<br>1ã€éƒ½æ˜¯æœ‰åºé›†åˆ<br>2ã€TreeMapæ˜¯TreeSetçš„åº•å±‚ç»“æ„<br>3ã€è¿è¡Œé€Ÿåº¦éƒ½æ¯”hashæ…¢</p>
<p>åŒºåˆ«ï¼š<br>1ã€TreeSetåªå­˜å‚¨ä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒTreeMapå­˜å‚¨ä¸¤ä¸ªå¯¹è±¡Keyå’ŒValueï¼ˆä»…ä»…keyå¯¹è±¡æœ‰åºï¼‰<br>2ã€TreeSetä¸­ä¸èƒ½æœ‰é‡å¤å¯¹è±¡ï¼Œè€ŒTreeMapä¸­å¯ä»¥å­˜åœ¨<br>3ã€TreeMapçš„åº•å±‚é‡‡ç”¨çº¢é»‘æ ‘çš„å®ç°ï¼Œå®Œæˆæ•°æ®æœ‰åºçš„æ’å…¥ï¼Œæ’åºã€‚</p>
</blockquote>
</li>
<li><p>HashMapå’ŒHashtable[çº¿ç¨‹å®‰å…¨]åŒºåˆ«</p>
<blockquote>
<blockquote>
<p><em><strong>*çº¿ç¨‹å®‰å…¨*</strong></em></p>
</blockquote>
<p>ä¸¤è€…æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºHashtableæ˜¯çº¿ç¨‹å®‰å…¨ï¼Œè€ŒHashMapåˆ™éçº¿ç¨‹å®‰å…¨ã€‚Hashtableçš„å®ç°æ–¹æ³•é‡Œé¢éƒ½æ·»åŠ äº†synchronizedå…³é”®å­—æ¥ç¡®ä¿çº¿ç¨‹åŒæ­¥ï¼Œå› æ­¤ç›¸å¯¹è€Œè¨€HashMapæ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨æ—¶è‹¥æ— ç‰¹æ®Šéœ€æ±‚å»ºè®®ä½¿ç”¨HashMapï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è‹¥ä½¿ç”¨HashMapéœ€è¦ä½¿ç”¨Collections.synchronizedMap()æ–¹æ³•æ¥è·å–ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„é›†åˆï¼ˆCollections.synchronizedMap()å®ç°åŸç†æ˜¯Collectionså®šä¹‰äº†ä¸€ä¸ªSynchronizedMapçš„å†…éƒ¨ç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†Mapæ¥å£ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ä½¿ç”¨synchronizedæ¥ä¿è¯çº¿ç¨‹åŒæ­¥,å½“ç„¶äº†å®é™…ä¸Šæ“ä½œçš„è¿˜æ˜¯æˆ‘ä»¬ä¼ å…¥çš„HashMapå®ä¾‹ï¼Œç®€å•çš„è¯´å°±æ˜¯Collections.synchronizedMap()æ–¹æ³•å¸®æˆ‘ä»¬åœ¨æ“ä½œHashMapæ—¶è‡ªåŠ¨æ·»åŠ äº†synchronizedæ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼Œç±»ä¼¼çš„å…¶å®ƒCollections.synchronizedXXæ–¹æ³•ä¹Ÿæ˜¯ç±»ä¼¼åŸç†ã€‚</p>
<blockquote>
<p>â€‹                                          <em><strong>*NULLå€¼*</strong></em></p>
</blockquote>
<p>HashMapå¯ä»¥ä½¿ç”¨nullä½œä¸ºkeyï¼Œä¸è¿‡å»ºè®®è¿˜æ˜¯å°½é‡é¿å…è¿™æ ·ä½¿ç”¨ã€‚HashMapä»¥nullä½œä¸ºkeyæ—¶ï¼Œæ€»æ˜¯å­˜å‚¨åœ¨tableæ•°ç»„çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚å½“get()æ–¹æ³•è¿”å›null å€¼æ—¶ï¼Œæ—¢å¯ä»¥è¡¨ç¤ºHashMap ä¸­æ²¡æœ‰è¯¥é”®ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯¥é”®æ‰€å¯¹åº”çš„å€¼ä¸ºnullã€‚å› æ­¤ï¼Œåœ¨HashMap ä¸­ä¸èƒ½ç”¨get()æ–¹æ³•æ¥åˆ¤æ–­HashMap ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ï¼Œè€Œåº”è¯¥ç”¨containsKey()æ–¹æ³•æ¥åˆ¤æ–­ã€‚è€ŒHashtableåˆ™ä¸å…è®¸nullä½œä¸ºkeyã€‚</p>
<blockquote>
<p>â€‹                                          <em><strong>*ç»§æ‰¿å…³ç³»*</strong></em></p>
</blockquote>
<p>HashMapç»§æ‰¿äº†AbstractMapï¼ŒHashTableç»§æ‰¿DictionaryæŠ½è±¡ç±»ï¼Œä¸¤è€…å‡å®ç°Mapæ¥å£ã€‚</p>
<blockquote>
<p>â€‹                                          <em><strong>*å®¹é‡åˆå§‹å€¼*</strong></em></p>
</blockquote>
<p>HashMapçš„åˆå§‹å®¹é‡ä¸º16ï¼ŒHashtableåˆå§‹å®¹é‡ä¸º11ï¼Œä¸¤è€…çš„å¡«å……å› å­é»˜è®¤éƒ½æ˜¯0.75ã€‚</p>
<blockquote>
<p>â€‹                                           <strong>æ‰©å®¹æ–¹å¼</strong></p>
</blockquote>
<p>HashMapæ‰©å®¹æ—¶æ˜¯å½“å‰å®¹é‡ç¿»å€å³:capacity<em>2ï¼ŒHashtableæ‰©å®¹æ—¶æ˜¯å®¹é‡ç¿»å€+1å³:capacity</em>2+1ã€‚</p>
<blockquote>
<p>â€‹                                            <em><strong>*åº•å±‚ç»“æ„*</strong></em></p>
</blockquote>
<p>HashMapå’ŒHashtableçš„åº•å±‚å®ç°éƒ½æ˜¯æ•°ç»„+é“¾è¡¨ç»“æ„å®ç°ã€‚</p>
<blockquote>
<p>â€‹                                            <strong>å“ˆå¸Œç®—æ³•</strong></p>
</blockquote>
<p>Hashtableè®¡ç®—hashæ˜¯ç›´æ¥ä½¿ç”¨keyçš„hashcodeå¯¹tableæ•°ç»„çš„é•¿åº¦ç›´æ¥è¿›è¡Œå–æ¨¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> key.hashCode();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br></pre></td></tr></table></figure>

<p>HashMapè®¡ç®—hashå¯¹keyçš„hashcodeè¿›è¡Œäº†äºŒæ¬¡hashï¼Œä»¥è·å¾—æ›´å¥½çš„æ•£åˆ—å€¼ï¼Œç„¶åå¯¹tableæ•°ç»„é•¿åº¦å–æ‘¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">int</span> h)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexFor</span><span class="params">(<span class="type">int</span> h, <span class="type">int</span> length)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Collectionå’ŒCollections[é›†åˆå·¥å…·ç±»]åŒºåˆ«</p>
<blockquote>
<p>é›†åˆæ¡†æ¶çš„å·¥å…·ç±»ã€‚<br>Collections:é›†åˆæ¡†æ¶çš„å·¥å…·ç±»ã€‚é‡Œé¢å®šä¹‰çš„éƒ½æ˜¯é™æ€æ–¹æ³•ã€‚</p>
<p>Collectionså’ŒCollectionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>Collectionæ˜¯é›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªé¡¶å±‚æ¥å£ï¼Œå®ƒé‡Œé¢å®šä¹‰äº†å•åˆ—é›†åˆçš„å…±æ€§æ–¹æ³•ã€‚<br>å®ƒæœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å­æ¥å£ï¼Œ<br>Listï¼šå¯¹å…ƒç´ éƒ½æœ‰å®šä¹‰ç´¢å¼•ã€‚æœ‰åºçš„ã€‚å¯ä»¥é‡å¤å…ƒç´ ã€‚<br>Setï¼šä¸å¯ä»¥é‡å¤å…ƒç´ ã€‚æ— åºã€‚</p>
<p>Collectionsæ˜¯é›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªå·¥å…·ç±»ã€‚è¯¥ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯é™æ€çš„<br>æä¾›çš„æ–¹æ³•ä¸­æœ‰å¯ä»¥å¯¹listé›†åˆè¿›è¡Œæ’åºï¼ŒäºŒåˆ†æŸ¥æ‰¾ç­‰æ–¹æ³•ã€‚<br>é€šå¸¸å¸¸ç”¨çš„é›†åˆéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å› ä¸ºè¦æé«˜æ•ˆç‡ã€‚<br>å¦‚æœå¤šçº¿ç¨‹æ“ä½œè¿™äº›é›†åˆæ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥å·¥å…·ç±»ä¸­çš„åŒæ­¥æ–¹æ³•ï¼Œå°†çº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆï¼Œè½¬æ¢æˆå®‰å…¨çš„ã€‚</p>
</blockquote>
</li>
</ol>
</blockquote>
<h1 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h1><blockquote>
<ol>
<li><p>åˆ©ç”¨é€šè¿‡java.lang.Comparable[I]</p>
<p>å¯¹è±¡å»å®ç°è¿™ä¸ªæ¥å£,å¹¶ä¸”é‡å†™comparaToæ–¹æ³•</p>
</li>
<li><p>åˆ©ç”¨æ„é€ å™¨ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨æ¥å£  &#x3D;&gt; æ›´åŠ çµæ´»ä¸€ç‚¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> E&gt; comparator)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(comparator));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h1 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h1><h2 id="æ³›å‹ç¬¦å·"><a href="#æ³›å‹ç¬¦å·" class="headerlink" title="æ³›å‹ç¬¦å·"></a>æ³›å‹ç¬¦å·</h2><blockquote>
<p>? </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;?&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="literal">null</span>);<span class="comment">//åªèƒ½æ·»åŠ null</span></span><br></pre></td></tr></table></figure>

<p>K,V - é”®,å€¼</p>
<p>T - ç±»å‹</p>
<p>E - å…ƒç´ </p>
</blockquote>
<h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><blockquote>
<ol>
<li><p>æ³›å‹ç±»</p>
</li>
<li><p>æ³›å‹æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">find</span><span class="params">(T t)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;find:&quot;</span>+t);</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; T <span class="title function_">get</span><span class="params">(T t)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;find:&quot;</span>+t);</span><br><span class="line">  <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">find2</span><span class="params">(T t)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;find:&quot;</span>+t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<h2 id="æ³›å‹å¥½å¤„"><a href="#æ³›å‹å¥½å¤„" class="headerlink" title="æ³›å‹å¥½å¤„"></a>æ³›å‹å¥½å¤„</h2><blockquote>
<p>1ã€ç±»å‹å®‰å…¨</p>
<p>æ³›å‹çš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜Javaç¨‹åºçš„ç±»å‹å®‰å…¨ã€‚é€šè¿‡çŸ¥é“ä½¿ç”¨æ³›å‹å®šä¹‰çš„å˜é‡çš„ç±»å‹é™åˆ¶ï¼Œç¼–è¯‘å™¨å¯ä»¥åœ¨éå¸¸é«˜çš„å±‚æ¬¡ä¸ŠéªŒè¯ç±»å‹å‡è®¾ã€‚æ²¡æœ‰æ³›å‹ï¼Œè¿™äº›å‡è®¾å°±åªå­˜åœ¨äºç³»ç»Ÿå¼€å‘äººå‘˜çš„å¤´è„‘ä¸­ã€‚</p>
<p>é€šè¿‡åœ¨å˜é‡å£°æ˜ä¸­æ•è·è¿™ä¸€é™„åŠ çš„ç±»å‹ä¿¡æ¯ï¼Œæ³›å‹å…è®¸ç¼–è¯‘å™¨å®æ–½è¿™äº›é™„åŠ çš„ç±»å‹çº¦æŸã€‚ç±»å‹é”™è¯¯å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«æ•è·äº†ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶å½“ä½œClassCastExceptionå±•ç¤ºå‡ºæ¥ã€‚å°†ç±»å‹æ£€æŸ¥ä»è¿è¡Œæ—¶æŒªåˆ°ç¼–è¯‘æ—¶æœ‰åŠ©äºJavaå¼€å‘äººå‘˜æ›´æ—©ã€æ›´å®¹æ˜“åœ°æ‰¾åˆ°é”™è¯¯ï¼Œå¹¶å¯æé«˜ç¨‹åºçš„å¯é æ€§ã€‚</p>
<p>2ã€æ¶ˆé™¤å¼ºåˆ¶ç±»å‹è½¬æ¢</p>
<p>æ³›å‹çš„ä¸€ä¸ªé™„å¸¦å¥½å¤„æ˜¯ï¼Œæ¶ˆé™¤æºä»£ç ä¸­çš„è®¸å¤šå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ å¯è¯»ï¼Œå¹¶ä¸”å‡å°‘äº†å‡ºé”™æœºä¼šã€‚å°½ç®¡å‡å°‘å¼ºåˆ¶ç±»å‹è½¬æ¢å¯ä»¥æé«˜ä½¿ç”¨æ³›å‹ç±»çš„ä»£ç çš„ç´¯èµç¨‹åº¦ï¼Œä½†æ˜¯å£°æ˜æ³›å‹å˜é‡æ—¶å´ä¼šå¸¦æ¥ç›¸åº”çš„ç´¯èµç¨‹åº¦ã€‚åœ¨ç®€å•çš„ç¨‹åºä¸­ä½¿ç”¨ä¸€æ¬¡æ³›å‹å˜é‡ä¸ä¼šé™ä½ä»£ç ç´¯èµç¨‹åº¦ã€‚ä½†æ˜¯å¯¹äºå¤šæ¬¡ä½¿ç”¨æ³›å‹å˜é‡çš„å¤§å‹ç¨‹åºæ¥è¯´ï¼Œåˆ™å¯ä»¥ç´¯ç§¯èµ·æ¥é™ä½ç´¯èµç¨‹åº¦ã€‚æ‰€ä»¥æ³›å‹æ¶ˆé™¤äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹åï¼Œä¼šä½¿å¾—ä»£ç åŠ æ¸…æ™°å’Œç­’æ´ã€‚</p>
<p>3ã€æ›´é«˜çš„è¿è¡Œæ•ˆç‡</p>
<p>åœ¨éæ³›å‹ç¼–ç¨‹ä¸­ï¼Œå°†ç­’å•ç±»å‹ä½œä¸ºObjectä¼ é€’æ—¶ä¼šå¼•èµ·Boxingï¼ˆè£…ç®±ï¼‰å’ŒUnboxingï¼ˆæ‹†ç®±ï¼‰æ“ä½œï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½æ˜¯å…·æœ‰å¾ˆå¤§å¼€é”€çš„ã€‚å¼•å…¥æ³›å‹åï¼Œå°±ä¸å¿…è¿›è¡ŒBoxingå’ŒUnboxingæ“ä½œäº†ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜ï¼Œç‰¹åˆ«åœ¨å¯¹é›†åˆæ“ä½œéå¸¸é¢‘ç¹çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç‰¹ç‚¹å¸¦æ¥çš„æ€§èƒ½æå‡æ›´åŠ æ˜æ˜¾ã€‚</p>
<p>4ã€æ½œåœ¨çš„æ€§èƒ½æ”¶ç›Š</p>
<p>æ³›å‹ä¸ºè¾ƒå¤§çš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚åœ¨æ³›å‹çš„åˆå§‹å®ç°ä¸­ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ²¡æœ‰æ³›å‹çš„è¯ï¼ŒJavaç³»ç»Ÿå¼€å‘äººå‘˜ä¼šæŒ‡å®šè¿™äº›å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰æ’å…¥ç”Ÿæˆçš„å­—èŠ‚ç ä¸­ã€‚ä½†æ˜¯æ›´å¤šç±»å‹ä¿¡æ¯å¯ç”¨äºç¼–è¯‘å™¨è¿™ä¸€äº‹å®ï¼Œä¸ºæœªæ¥ç‰ˆæœ¬çš„JVMçš„ä¼˜åŒ–å¸¦æ¥å¯èƒ½ã€‚</p>
</blockquote>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Overridde</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(Student s)</span>&#123;</span><br><span class="line">  <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> HibernateUtil.getSession();</span><br><span class="line"></span><br><span class="line">  <span class="type">Transaction</span> <span class="variable">tx</span> <span class="operator">=</span> session.beginTransaction();</span><br><span class="line"></span><br><span class="line">  tx.save(s);</span><br><span class="line"></span><br><span class="line">  tx.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Overridde</span></span><br><span class="line"><span class="keyword">public</span> Student <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>&#123;</span><br><span class="line">  <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> HibernateUtil.getSession();</span><br><span class="line"></span><br><span class="line">  <span class="type">Transaction</span> <span class="variable">tx</span> <span class="operator">=</span> session.beginTransaction();</span><br><span class="line"></span><br><span class="line">  <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> session.get(Student.class,id);</span><br><span class="line"></span><br><span class="line">  tx.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸šåŠ¡æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ITeacherDao</span>&#123;</span><br><span class="line">    Teacher <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">  </span><br><span class="line">    List&lt;Teacher&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(Teacher t)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸šåŠ¡æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span>&#123;</span><br><span class="line">    Student <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">  </span><br><span class="line">    List&lt;Student&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(Student s)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è€ƒè™‘æŠ½ç¦»å‡ºé¡¶çº§çš„æ¥å£å‡ºæ¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBaseDao</span>&lt;T&gt; &#123;</span><br><span class="line">    T <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    </span><br><span class="line">    List&lt;T&gt; <span class="title function_">loadAll</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="title function_">save</span><span class="params">(T t)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡¶çº§æ¥å£çš„å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDaoImpl</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">IBaseDao</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">loadAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">save</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        <span class="comment">//å…·ä½“çš„å®ç°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶å®šä¸šåŠ¡æ¥å£ç‰¹æœ‰çš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> <span class="keyword">extends</span> <span class="title class_">IBaseDao</span>&lt;Student&gt;&#123;  </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDaoImpl</span> <span class="keyword">extends</span> <span class="title class_">BaseDaoImpl</span>&lt;Student&gt; <span class="keyword">implements</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="æŒ‡å®šä¸Šé™å’Œä¸‹é™"><a href="#æŒ‡å®šä¸Šé™å’Œä¸‹é™" class="headerlink" title="æŒ‡å®šä¸Šé™å’Œä¸‹é™"></a>æŒ‡å®šä¸Šé™å’Œä¸‹é™</h2><blockquote>
<ol>
<li><p>æŒ‡å®šä¸‹é™</p>
<p>æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„çˆ¶ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? <span class="built_in">super</span> E</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŒ‡å®šä¸Šé™</p>
<p>æ³›å‹å‚æ•°å¯ä»¥æ˜¯E,ä¹Ÿå¯ä»¥æ˜¯Eçš„å­ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? <span class="keyword">extends</span> <span class="title class_">E</span></span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<blockquote>
<p>æ³›å‹æ˜¯æ²¡æœ‰å¤šæ€çš„.</p>
</blockquote>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">java</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/08/02/java%E9%9B%86%E5%90%88%E7%B1%BB/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
    <article id="post-LRU" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/DorwoningFish.github.io/2022/07/31/LRU/" target="_blank">LRU</a>
  
    </h1>
  


  
  
<a href="/DorwoningFish.github.io/2022/07/31/LRU/" class="archive-article-date">
        <time datetime="2022-07-31T14:28:12.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-07-31</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h1><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>LRUç®—æ³•å’ŒLFUç®—æ³•æ˜¯å±äº<strong>é¡µé¢ç½®æ¢</strong>çš„ä¸€ç§ç®—æ³•ï¼Œæˆ–è€…æ›´é€šä¿—çš„è¯´ï¼Œå°±æ˜¯<strong>ç¼“å­˜å¦‚ä½•æ·˜æ±°</strong>çš„ä¸€ç§ç­–ç•¥ã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸åœ¨<a target="_blank" rel="noopener" href="https://www.isolves.com/it/rj/ps/">è®¾è®¡</a>ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™ï¼Œç”±äºæ•°æ®åº“çš„è¯»å–é€Ÿåº¦è¿œå°äº<a target="_blank" rel="noopener" href="https://www.isolves.com/it/yj/nc/">å†…å­˜</a>çš„è¯»å–é€Ÿåº¦ï¼Œæ‰€ä»¥ä¸ºäº†åŠ å¿«è¯»å–é€Ÿåº¦ï¼Œä¼šå°†ä¸€éƒ¨åˆ†æ•°æ®æ”¾åˆ°å†…å­˜ä¸­ï¼Œç§°ä¸º<strong>ç¼“å­˜</strong>ã€‚</p>
<p>ä½†æ˜¯<strong>å†…å­˜å®¹é‡æ˜¯æœ‰é™</strong>çš„ï¼Œå½“ä½ è¦ç¼“å­˜çš„æ•°æ®è¶…å‡ºå®¹é‡ï¼Œå°±å¾—æœ‰éƒ¨åˆ†æ•°æ®åˆ é™¤ï¼Œè¿™æ—¶å€™<strong>å“ªäº›æ•°æ®åˆ é™¤ï¼Œå“ªäº›æ•°æ®ä¿ç•™</strong>ï¼Œå°±æ˜¯LRUç®—æ³•å’ŒLFUç®—æ³•è¦å¹²çš„äº‹ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯LRUç®—æ³•"><a href="#ä»€ä¹ˆæ˜¯LRUç®—æ³•" class="headerlink" title="ä»€ä¹ˆæ˜¯LRUç®—æ³•"></a>ä»€ä¹ˆæ˜¯LRUç®—æ³•</h1><p>LRUç®—æ³•ï¼Œå…¨ç§°Least recently usedï¼Œå³<strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>ã€‚LRUç®—æ³•çš„æ€æƒ³æ˜¯å¦‚æœæ•°æ®<strong>æœ€è¿‘</strong>è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„æ¦‚ç‡ä¹Ÿä¼šå¾ˆé«˜ã€‚</p>
<p>æ ¹æ®è¿™ä¸ªæ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ï¼Œå®ç°LRUç®—æ³•è‚¯å®šä¼šç”¨åˆ°<strong>åˆ—è¡¨&#x2F;é“¾è¡¨</strong>ï¼Œç›®çš„æ˜¯<strong>ä¿è¯æœ‰åº</strong>ï¼›è¿˜æœ‰ä¸€ä¸ªæ˜¯ç”¨åˆ°å“ˆå¸Œè¡¨ï¼Œè¿™æ˜¯å› ä¸ºç¼“å­˜ç»å¸¸æ˜¯key-valueé”®å€¼å¯¹çš„å½¢å¼ã€‚</p>
<p>æ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯ä½¿ç”¨åˆ—è¡¨+å“ˆå¸Œè¡¨ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æŸ¥è¯¢å’Œæ’å…¥çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(n)ï¼Œè¿˜æœ‰ä¸€ç§åšæ³•æ˜¯ä½¿ç”¨åŒå‘é“¾è¡¨+å“ˆå¸Œè¡¨ï¼ŒæŸ¥è¯¢å’Œæ’å…¥çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œä½†æ˜¯è€—è´¹çš„ç©ºé—´èµ„æºæ¯”è¾ƒå¤šã€‚</p>
<h1 id="åˆ—è¡¨-å“ˆå¸Œè¡¨çš„å®ç°"><a href="#åˆ—è¡¨-å“ˆå¸Œè¡¨çš„å®ç°" class="headerlink" title="åˆ—è¡¨+å“ˆå¸Œè¡¨çš„å®ç°"></a>åˆ—è¡¨+å“ˆå¸Œè¡¨çš„å®ç°</h1><p><img src="https://www.isolves.com/d/file/p/2020/11-04/17ab0871e4f4efb99378611ca4950e06.jpg" alt="ç¼“å­˜æ·˜æ±°ç®—æ³•LRUå’ŒLFU"></p>
<p>å¦‚ä¸Šå›¾ï¼Œå‡è®¾æˆ‘ä»¬ä½¿ç”¨<strong>å¤´æ’æ³•</strong>ï¼Œå³æœ€è¿‘è®¿é—®çš„å…ƒç´ æ”¾åœ¨æœ€å‰é¢ï¼Œæœ€æ™šçš„å…ƒç´ æ”¾åœ¨æœ€åé¢ï¼Œåˆ™å®ç°LRUç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.åˆå§‹åŒ–ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œå¦‚ä¸Šå›¾ï¼Œå…¶å®¹å™¨ä¸º5ã€‚</li>
<li>2.å½“æ‰§è¡ŒæŸ¥æ‰¾ï¼ˆGETï¼‰æ“ä½œæ—¶ï¼Œéœ€è¦éå†æ•´ä¸ªåˆ—è¡¨ï¼Œæ‰¾åˆ°keyç›¸åŒçš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)</li>
<li>3.å½“æ‰§è¡Œæ’å…¥ï¼ˆPUTï¼‰æ“ä½œæ—¶ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š</li>
<li>3.1 <strong>éå†</strong>åˆ—è¡¨ï¼Œå¦‚æœå…ƒç´ çš„keyå­˜åœ¨ï¼Œ<strong>æ›´æ–°</strong>valueçš„å€¼ï¼Œå¹¶æŠŠè¿™ä¸ªå…ƒç´ æ”¾åˆ°åˆ—è¡¨çš„<strong>æœ€å‰é¢</strong>ï¼Œä»è€Œä¿è¯æœ€åé¢çš„å…ƒç´ æ˜¯æœ€æ™šè®¿é—®çš„ã€‚</li>
<li>3.2 éå†åˆ—è¡¨ï¼Œå¦‚æœå…ƒç´ çš„keyä¸å­˜åœ¨ï¼Œä¸”åˆ—è¡¨çš„å®¹é‡æœªæ»¡ï¼Œåˆ™æŠŠè¿™ä¸ªå…ƒç´ æ”¾åˆ°åˆ—è¡¨çš„æœ€å‰é¢</li>
<li>3.3 éå†åˆ—è¡¨ï¼Œå¦‚æœå…ƒç´ çš„keyä¸å­˜åœ¨ï¼Œä¸”åˆ—è¡¨çš„å®¹é‡å·²æ»¡ï¼Œåˆ é™¤æœ€åçš„å…ƒç´ ï¼Œå¹¶æŠŠæ–°å…ƒç´ æ”¾åˆ°æœ€å‰é¢</li>
</ul>
<h1 id="åŒå‘é“¾è¡¨-å“ˆå¸Œè¡¨çš„å®ç°"><a href="#åŒå‘é“¾è¡¨-å“ˆå¸Œè¡¨çš„å®ç°" class="headerlink" title="åŒå‘é“¾è¡¨+å“ˆå¸Œè¡¨çš„å®ç°"></a>åŒå‘é“¾è¡¨+å“ˆå¸Œè¡¨çš„å®ç°</h1><p>è¿™åº”è¯¥æ˜¯é¢è¯•æ¯”è¾ƒå¸¸è€ƒçš„ç‚¹ï¼Œé¢è¯•å®˜å¯èƒ½ä¼šé—®ä½ ï¼Œå¦‚æœå®ç°ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸ºO(1)çš„LRUç¼“å­˜ï¼Ÿ</p>
<p>è¿™ç§å®ç°çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.isolves.com/d/file/p/2020/11-04/6ddb864e98b5a996932319225d1973c8.jpg" alt="ç¼“å­˜æ·˜æ±°ç®—æ³•LRUå’ŒLFU"></p>
<p>ä¸Šè¿°LRUCacheçš„må…¶å®å°±æ˜¯ä¸Šå›¾å·¦è¾¹çš„HashMapï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>
<p>å¦‚æœæ²¡æœ‰è¿™ä¸ªmï¼Œåˆ™æŸ¥æ‰¾å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦éå†åŒå‘é“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>
<p>è€Œä½¿ç”¨åŒå‘é“¾è¡¨çš„åŸå› ä¸»è¦æ˜¯ä¸ºäº†å®ç°èŠ‚ç‚¹æ’å…¥&#x2F;åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>
<p>é‚£ä½¿ç”¨å•é“¾è¡¨ä¸è¡Œå—ï¼Ÿ</p>
<p><img src="https://www.isolves.com/d/file/p/2020/11-04/349d00130e19aa40b4f3b0b6e542369f.jpg" alt="ç¼“å­˜æ·˜æ±°ç®—æ³•LRUå’ŒLFU"></p>
<p>å¦‚ä¸Šï¼Œä½¿ç”¨å•é“¾è¡¨çš„è¯ï¼Œå¯ä»¥å®ç°å¤´éƒ¨å¿«é€Ÿæ’å…¥æ–°èŠ‚ç‚¹ï¼Œå°¾éƒ¨å¿«é€Ÿåˆ é™¤æ—§èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</p>
<p>ä½†æ˜¯å¯¹äº<strong>ä¸­é—´èŠ‚ç‚¹</strong>ï¼Œæ¯”å¦‚æˆ‘éœ€è¦èŠ‚ç‚¹1çš„å€¼ç”±2æ›´æ–°ä¸º4ï¼Œè¿™æ—¶å€™é™¤äº†æ›´æ–°å€¼ï¼Œè¿˜éœ€è¦å°†å…¶ç§»åŠ¨åˆ°æœ€å‰é¢ï¼Œè€Œå¯¹äºå•é“¾è¡¨ï¼Œå®ƒåªçŸ¥é“ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œ<strong>å¹¶ä¸çŸ¥é“ä¸Šä¸€ä¸ªå…ƒç´ </strong>ï¼Œä¸ºäº†å¾—åˆ°ä¸Šä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå¿…é¡»éå†ä¸€æ¬¡é“¾è¡¨æ‰çŸ¥é“ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨åŒå‘é“¾è¡¨çš„åŸå› ã€‚</p>
<h3 id="ä¸€ã€LRU-ç®—æ³•è®¾è®¡"><a href="#ä¸€ã€LRU-ç®—æ³•è®¾è®¡" class="headerlink" title="ä¸€ã€LRU ç®—æ³•è®¾è®¡"></a>ä¸€ã€LRU ç®—æ³•è®¾è®¡</h3><p>åˆ†æä¸Šé¢çš„æ“ä½œè¿‡ç¨‹ï¼Œè¦è®© <code>put</code> å’Œ <code>get</code> æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡º <code>cache</code> è¿™ä¸ªæ•°æ®ç»“æ„å¿…è¦çš„æ¡ä»¶ï¼š</p>
<p>1ã€æ˜¾ç„¶ <code>cache</code> ä¸­çš„å…ƒç´ å¿…é¡»æœ‰æ—¶åºï¼Œä»¥åŒºåˆ†æœ€è¿‘ä½¿ç”¨çš„å’Œä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œå½“å®¹é‡æ»¡äº†ä¹‹åè¦åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„é‚£ä¸ªå…ƒç´ è…¾ä½ç½®ã€‚</p>
<p>2ã€æˆ‘ä»¬è¦åœ¨ <code>cache</code> ä¸­å¿«é€Ÿæ‰¾æŸä¸ª <code>key</code> æ˜¯å¦å·²å­˜åœ¨å¹¶å¾—åˆ°å¯¹åº”çš„ <code>val</code>ï¼›</p>
<p>3ã€æ¯æ¬¡è®¿é—® <code>cache</code> ä¸­çš„æŸä¸ª <code>key</code>ï¼Œéœ€è¦å°†è¿™ä¸ªå…ƒç´ å˜ä¸ºæœ€è¿‘ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>cache</code> è¦æ”¯æŒåœ¨ä»»æ„ä½ç½®å¿«é€Ÿæ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚</p>
<p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ•°æ®ç»“æ„åŒæ—¶ç¬¦åˆä¸Šè¿°æ¡ä»¶å‘¢ï¼Ÿå“ˆå¸Œè¡¨æŸ¥æ‰¾å¿«ï¼Œä½†æ˜¯æ•°æ®æ— å›ºå®šé¡ºåºï¼›é“¾è¡¨æœ‰é¡ºåºä¹‹åˆ†ï¼Œæ’å…¥åˆ é™¤å¿«ï¼Œä½†æ˜¯æŸ¥æ‰¾æ…¢ã€‚æ‰€ä»¥ç»“åˆä¸€ä¸‹ï¼Œå½¢æˆä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼šå“ˆå¸Œé“¾è¡¨ <code>LinkedHashMap</code>ã€‚</p>
<p>LRU ç¼“å­˜ç®—æ³•çš„æ ¸å¿ƒæ•°æ®ç»“æ„å°±æ˜¯å“ˆå¸Œé“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨å’Œå“ˆå¸Œè¡¨çš„ç»“åˆä½“ã€‚è¿™ä¸ªæ•°æ®ç»“æ„é•¿è¿™æ ·ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://labuladong.gitee.io/algo/images/LRU%E7%AE%97%E6%B3%95/4.jpg"><img src="https://labuladong.gitee.io/algo/images/LRU%e7%ae%97%e6%b3%95/4.jpg" alt="img"></a></p>
<p>å€ŸåŠ©è¿™ä¸ªç»“æ„ï¼Œæˆ‘ä»¬æ¥é€ä¸€åˆ†æä¸Šé¢çš„ 3 ä¸ªæ¡ä»¶ï¼š</p>
<p>1ã€å¦‚æœæˆ‘ä»¬æ¯æ¬¡é»˜è®¤ä»é“¾è¡¨å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼Œé‚£ä¹ˆæ˜¾ç„¶è¶Šé å°¾éƒ¨çš„å…ƒç´ å°±æ˜¯æœ€è¿‘ä½¿ç”¨çš„ï¼Œè¶Šé å¤´éƒ¨çš„å…ƒç´ å°±æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„ã€‚</p>
<p>2ã€å¯¹äºæŸä¸€ä¸ª <code>key</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨å¿«é€Ÿå®šä½åˆ°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œä»è€Œå–å¾—å¯¹åº” <code>val</code>ã€‚</p>
<p>3ã€é“¾è¡¨æ˜¾ç„¶æ˜¯æ”¯æŒåœ¨ä»»æ„ä½ç½®å¿«é€Ÿæ’å…¥å’Œåˆ é™¤çš„ï¼Œæ”¹æ”¹æŒ‡é’ˆå°±è¡Œã€‚åªä¸è¿‡ä¼ ç»Ÿçš„é“¾è¡¨æ— æ³•æŒ‰ç…§ç´¢å¼•å¿«é€Ÿè®¿é—®æŸä¸€ä¸ªä½ç½®çš„å…ƒç´ ï¼Œè€Œè¿™é‡Œå€ŸåŠ©å“ˆå¸Œè¡¨ï¼Œå¯ä»¥é€šè¿‡ <code>key</code> å¿«é€Ÿæ˜ å°„åˆ°ä»»æ„ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œæ’å…¥å’Œåˆ é™¤ã€‚</p>
<p><strong>ä¹Ÿè®¸è¯»è€…ä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¦æ˜¯åŒå‘é“¾è¡¨ï¼Œå•é“¾è¡¨è¡Œä¸è¡Œï¼Ÿå¦å¤–ï¼Œæ—¢ç„¶å“ˆå¸Œè¡¨ä¸­å·²ç»å­˜äº† <code>key</code>ï¼Œä¸ºä»€ä¹ˆé“¾è¡¨ä¸­è¿˜è¦å­˜ <code>key</code> å’Œ <code>val</code> å‘¢ï¼Œåªå­˜ <code>val</code> ä¸å°±è¡Œäº†</strong>ï¼Ÿ</p>
<p>æƒ³çš„æ—¶å€™éƒ½æ˜¯é—®é¢˜ï¼Œåªæœ‰åšçš„æ—¶å€™æ‰æœ‰ç­”æ¡ˆã€‚è¿™æ ·è®¾è®¡çš„åŸå› ï¼Œå¿…é¡»ç­‰æˆ‘ä»¬äº²è‡ªå®ç° LRU ç®—æ³•ä¹‹åæ‰èƒ½ç†è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å§‹çœ‹ä»£ç å§ï½</p>
<h3 id="äºŒã€ä»£ç å®ç°"><a href="#äºŒã€ä»£ç å®ç°" class="headerlink" title="äºŒã€ä»£ç å®ç°"></a>äºŒã€ä»£ç å®ç°</h3><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰å†…ç½®çš„å“ˆå¸Œé“¾è¡¨æˆ–è€…ç±»ä¼¼ LRU åŠŸèƒ½çš„åº“å‡½æ•°ï¼Œä½†æ˜¯ä¸ºäº†å¸®å¤§å®¶ç†è§£ç®—æ³•çš„ç»†èŠ‚ï¼Œæˆ‘ä»¬å…ˆè‡ªå·±é€ è½®å­å®ç°ä¸€é LRU ç®—æ³•ï¼Œç„¶åå†ä½¿ç”¨ Java å†…ç½®çš„ <code>LinkedHashMap</code> æ¥å®ç°ä¸€éã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠåŒé“¾è¡¨çš„èŠ‚ç‚¹ç±»å†™å‡ºæ¥ï¼Œä¸ºäº†ç®€åŒ–ï¼Œ<code>key</code> å’Œ <code>val</code> éƒ½è®¤ä¸ºæ˜¯ int ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> key, val;</span><br><span class="line">    <span class="keyword">public</span> Node next, prev;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> v)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = k;</span><br><span class="line">        <span class="built_in">this</span>.val = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¾é æˆ‘ä»¬çš„ <code>Node</code> ç±»å‹æ„å»ºä¸€ä¸ªåŒé“¾è¡¨ï¼Œå®ç°å‡ ä¸ª LRU ç®—æ³•å¿…é¡»çš„ APIï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DoubleList</span> &#123;  </span><br><span class="line">    <span class="comment">// å¤´å°¾è™šèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node head, tail;  </span><br><span class="line">    <span class="comment">// é“¾è¡¨å…ƒç´ æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DoubleList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–åŒå‘é“¾è¡¨çš„æ•°æ®</span></span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹ xï¼Œæ—¶é—´ O(1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(Node x)</span> &#123;</span><br><span class="line">        x.prev = tail.prev;</span><br><span class="line">        x.next = tail;</span><br><span class="line">        tail.prev.next = x;</span><br><span class="line">        tail.prev = x;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤é“¾è¡¨ä¸­çš„ x èŠ‚ç‚¹ï¼ˆx ä¸€å®šå­˜åœ¨ï¼‰</span></span><br><span class="line">    <span class="comment">// ç”±äºæ˜¯åŒé“¾è¡¨ä¸”ç»™çš„æ˜¯ç›®æ ‡ Node èŠ‚ç‚¹ï¼Œæ—¶é—´ O(1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Node x)</span> &#123;</span><br><span class="line">        x.prev.next = x.next;</span><br><span class="line">        x.next.prev = x.prev;</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ é™¤é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›è¯¥èŠ‚ç‚¹ï¼Œæ—¶é—´ O(1)</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head.next == tail)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">first</span> <span class="operator">=</span> head.next;</span><br><span class="line">        remove(first);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›é“¾è¡¨é•¿åº¦ï¼Œæ—¶é—´ O(1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123; <span class="keyword">return</span> size; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°è¿™é‡Œå°±èƒ½å›ç­”åˆšæ‰ã€Œä¸ºä»€ä¹ˆå¿…é¡»è¦ç”¨åŒå‘é“¾è¡¨ã€çš„é—®é¢˜äº†ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åˆ é™¤æ“ä½œã€‚åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ä¸å…‰è¦å¾—åˆ°è¯¥èŠ‚ç‚¹æœ¬èº«çš„æŒ‡é’ˆï¼Œä¹Ÿéœ€è¦æ“ä½œå…¶å‰é©±èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè€ŒåŒå‘é“¾è¡¨æ‰èƒ½æ”¯æŒç›´æ¥æŸ¥æ‰¾å‰é©±ï¼Œä¿è¯æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ O(1)ã€‚</p>
<p><strong>æ³¨æ„æˆ‘ä»¬å®ç°çš„åŒé“¾è¡¨ API åªèƒ½ä»å°¾éƒ¨æ’å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´é å°¾éƒ¨çš„æ•°æ®æ˜¯æœ€è¿‘ä½¿ç”¨çš„ï¼Œé å¤´éƒ¨çš„æ•°æ®æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„</strong>ã€‚</p>
<p>æœ‰äº†åŒå‘é“¾è¡¨çš„å®ç°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ LRU ç®—æ³•ä¸­æŠŠå®ƒå’Œå“ˆå¸Œè¡¨ç»“åˆèµ·æ¥å³å¯ï¼Œå…ˆæ­å‡ºä»£ç æ¡†æ¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="comment">// key -&gt; Node(key, val)</span></span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Integer, Node&gt; map;</span><br><span class="line">    <span class="comment">// Node(k1, v1) &lt;-&gt; Node(k2, v2)...</span></span><br><span class="line">    <span class="keyword">private</span> DoubleList cache;</span><br><span class="line">    <span class="comment">// æœ€å¤§å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> cap;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cap = capacity;</span><br><span class="line">        map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        cache = <span class="keyword">new</span> <span class="title class_">DoubleList</span>();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å…ˆä¸æ…Œå»å®ç° LRU ç®—æ³•çš„ <code>get</code> å’Œ <code>put</code> æ–¹æ³•ã€‚ç”±äºæˆ‘ä»¬è¦åŒæ—¶ç»´æŠ¤ä¸€ä¸ªåŒé“¾è¡¨ <code>cache</code> å’Œä¸€ä¸ªå“ˆå¸Œè¡¨ <code>map</code>ï¼Œå¾ˆå®¹æ˜“æ¼æ‰ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¯´åˆ é™¤æŸä¸ª <code>key</code> æ—¶ï¼Œåœ¨ <code>cache</code> ä¸­åˆ é™¤äº†å¯¹åº”çš„ <code>Node</code>ï¼Œä½†æ˜¯å´å¿˜è®°åœ¨ <code>map</code> ä¸­åˆ é™¤ <code>key</code>ã€‚</p>
<p><strong>è§£å†³è¿™ç§é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•æ˜¯ï¼šåœ¨è¿™ä¸¤ç§æ•°æ®ç»“æ„ä¹‹ä¸Šæä¾›ä¸€å±‚æŠ½è±¡ API</strong>ã€‚</p>
<p>è¯´çš„æœ‰ç‚¹ç„å¹»ï¼Œå®é™…ä¸Šå¾ˆç®€å•ï¼Œå°±æ˜¯å°½é‡è®© LRU çš„ä¸»æ–¹æ³• <code>get</code> å’Œ <code>put</code> é¿å…ç›´æ¥æ“ä½œ <code>map</code> å’Œ <code>cache</code> çš„ç»†èŠ‚ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå®ç°ä¸‹é¢å‡ ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å°†æŸä¸ª key æå‡ä¸ºæœ€è¿‘ä½¿ç”¨çš„ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">makeRecently</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">x</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">    <span class="comment">// å…ˆä»é“¾è¡¨ä¸­åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    cache.remove(x);</span><br><span class="line">    <span class="comment">// é‡æ–°æ’åˆ°é˜Ÿå°¾</span></span><br><span class="line">    cache.addLast(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ·»åŠ æœ€è¿‘ä½¿ç”¨çš„å…ƒç´  */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addRecently</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">x</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, val);</span><br><span class="line">    <span class="comment">// é“¾è¡¨å°¾éƒ¨å°±æ˜¯æœ€è¿‘ä½¿ç”¨çš„å…ƒç´ </span></span><br><span class="line">    cache.addLast(x);</span><br><span class="line">    <span class="comment">// åˆ«å¿˜äº†åœ¨ map ä¸­æ·»åŠ  key çš„æ˜ å°„</span></span><br><span class="line">    map.put(key, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ é™¤æŸä¸€ä¸ª key */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">deleteKey</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">x</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">    <span class="comment">// ä»é“¾è¡¨ä¸­åˆ é™¤</span></span><br><span class="line">    cache.remove(x);</span><br><span class="line">    <span class="comment">// ä» map ä¸­åˆ é™¤</span></span><br><span class="line">    map.remove(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´  */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">removeLeastRecently</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// é“¾è¡¨å¤´éƒ¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">deletedNode</span> <span class="operator">=</span> cache.removeFirst();</span><br><span class="line">    <span class="comment">// åŒæ—¶åˆ«å¿˜äº†ä» map ä¸­åˆ é™¤å®ƒçš„ key</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">deletedKey</span> <span class="operator">=</span> deletedNode.key;</span><br><span class="line">    map.remove(deletedKey);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°±èƒ½å›ç­”ä¹‹å‰çš„é—®ç­”é¢˜ã€Œä¸ºä»€ä¹ˆè¦åœ¨é“¾è¡¨ä¸­åŒæ—¶å­˜å‚¨ key å’Œ valï¼Œè€Œä¸æ˜¯åªå­˜å‚¨ valã€ï¼Œæ³¨æ„ <code>removeLeastRecently</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ <code>deletedNode</code> å¾—åˆ° <code>deletedKey</code>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¼“å­˜å®¹é‡å·²æ»¡ï¼Œæˆ‘ä»¬ä¸ä»…ä»…è¦åˆ é™¤æœ€åä¸€ä¸ª <code>Node</code> èŠ‚ç‚¹ï¼Œè¿˜è¦æŠŠ <code>map</code> ä¸­æ˜ å°„åˆ°è¯¥èŠ‚ç‚¹çš„ <code>key</code> åŒæ—¶åˆ é™¤ï¼Œè€Œè¿™ä¸ª <code>key</code> åªèƒ½ç”± <code>Node</code> å¾—åˆ°ã€‚å¦‚æœ <code>Node</code> ç»“æ„ä¸­åªå­˜å‚¨ <code>val</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•å¾—çŸ¥ <code>key</code> æ˜¯ä»€ä¹ˆï¼Œå°±æ— æ³•åˆ é™¤ <code>map</code> ä¸­çš„é”®ï¼Œé€ æˆé”™è¯¯ã€‚</p>
<p>ä¸Šè¿°æ–¹æ³•å°±æ˜¯ç®€å•çš„æ“ä½œå°è£…ï¼Œè°ƒç”¨è¿™äº›å‡½æ•°å¯ä»¥é¿å…ç›´æ¥æ“ä½œ <code>cache</code> é“¾è¡¨å’Œ <code>map</code> å“ˆå¸Œè¡¨ï¼Œä¸‹é¢æˆ‘å…ˆæ¥å®ç° LRU ç®—æ³•çš„ <code>get</code> æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!map.containsKey(key)) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†è¯¥æ•°æ®æå‡ä¸ºæœ€è¿‘ä½¿ç”¨çš„</span></span><br><span class="line">    makeRecently(key);</span><br><span class="line">    <span class="keyword">return</span> map.get(key).val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>put</code> æ–¹æ³•ç¨å¾®å¤æ‚ä¸€äº›ï¼Œæˆ‘ä»¬å…ˆæ¥ç”»ä¸ªå›¾ææ¸…æ¥šå®ƒçš„é€»è¾‘ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://labuladong.gitee.io/algo/images/LRU%E7%AE%97%E6%B3%95/put.jpg"><img src="https://labuladong.gitee.io/algo/images/LRU%e7%ae%97%e6%b3%95/put.jpg" alt="img"></a></p>
<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ¾å†™å‡º <code>put</code> æ–¹æ³•çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ—§çš„æ•°æ®</span></span><br><span class="line">        deleteKey(key);</span><br><span class="line">        <span class="comment">// æ–°æ’å…¥çš„æ•°æ®ä¸ºæœ€è¿‘ä½¿ç”¨çš„æ•°æ®</span></span><br><span class="line">        addRecently(key, val);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (cap == cache.size()) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´ </span></span><br><span class="line">        removeLeastRecently();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ ä¸ºæœ€è¿‘ä½¿ç”¨çš„å…ƒç´ </span></span><br><span class="line">    addRecently(key, val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»å®Œå…¨æŒæ¡ LRU ç®—æ³•çš„åŸç†å’Œå®ç°äº†ï¼Œæˆ‘ä»¬æœ€åç”¨ Java çš„å†…ç½®ç±»å‹ <code>LinkedHashMap</code> æ¥å®ç° LRU ç®—æ³•ï¼Œé€»è¾‘å’Œä¹‹å‰å®Œå…¨ä¸€è‡´ï¼Œæˆ‘å°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="type">int</span> cap;</span><br><span class="line">    LinkedHashMap&lt;Integer, Integer&gt; cache = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123; </span><br><span class="line">        <span class="built_in">this</span>.cap = capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!cache.containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°† key å˜ä¸ºæœ€è¿‘ä½¿ç”¨</span></span><br><span class="line">        makeRecently(key);</span><br><span class="line">        <span class="keyword">return</span> cache.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cache.containsKey(key)) &#123;</span><br><span class="line">            <span class="comment">// ä¿®æ”¹ key çš„å€¼</span></span><br><span class="line">            cache.put(key, val);</span><br><span class="line">            <span class="comment">// å°† key å˜ä¸ºæœ€è¿‘ä½¿ç”¨</span></span><br><span class="line">            makeRecently(key);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (cache.size() &gt;= <span class="built_in">this</span>.cap) &#123;</span><br><span class="line">            <span class="comment">// é“¾è¡¨å¤´éƒ¨å°±æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„ key</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">oldestKey</span> <span class="operator">=</span> cache.keySet().iterator().next();</span><br><span class="line">            cache.remove(oldestKey);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†æ–°çš„ key æ·»åŠ é“¾è¡¨å°¾éƒ¨</span></span><br><span class="line">        cache.put(key, val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">makeRecently</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> cache.get(key);</span><br><span class="line">        <span class="comment">// åˆ é™¤ keyï¼Œé‡æ–°æ’å…¥åˆ°é˜Ÿå°¾</span></span><br><span class="line">        cache.remove(key);</span><br><span class="line">        cache.put(key, val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">ç®—æ³•</a>
        		</li>
      		
		</ul>
	</div>

    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/DorwoningFish.github.io/2022/07/31/LRU/">å±•å¼€å…¨æ–‡ >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/DorwoningFish.github.io/page/2/">2</a><a class="extend next" rel="next" href="/DorwoningFish.github.io/page/2/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018-2022 <a href="https://drowningfish123.github.io/DorwoningFish.github.io/DorwoningFish.github.io/" target="_blank">Drowning Fish</a>
    	</div>
      	<div class="footer-right">
			
			
      		GitHub:<a href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">hexo-theme-yilia-plus</a> by Litten
      	</div>
    </div>
  </div>
  
  
	<script src="/DorwoningFish.github.io/lib/busuanzi.pure.js"></script>
	
  
  
	
	<span id="busuanzi_container_site_pv" style="display:none">
		æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡	
	        <span class="post-meta-divider" >|</span>
	</span>
  	<span id="busuanzi_container_site_uv" style='display:none'>
  		æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
  	</span>
  
</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/DorwoningFish.github.io/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(208),t.exports=r(205)},function(t,n,r){var d=r(3),y=r(46),g=r(26),b=r(27),x=r(47),m="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[m],v=f?y:y[n]||(y[n]={}),p=v[m]||(v[m]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?x(o,d):s&&"function"==typeof o?x(Function.call,o):o,h&&b(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(118)("wks"),i=r(79),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(49),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(174),o=r(53),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(24);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(22),i=r(60),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(96),i=r(34);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(40)("wks"),i=r(25),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(51);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(18);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=!0},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(11),i=r(75);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(26),c=r(30),f=r(79)("src"),e=r(219),i="toString",a=(""+e).split(i);r(46).inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[f]||e.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(51),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(65),i=r(35);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(117),i=r(75),o=r(33),u=r(53),c=r(30),f=r(174),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(30),i=r(17),o=r(154)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(116),i=r(51);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(9),o=r(16)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(25);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(19),i=r(6),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(23)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(18);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(19),o=r(23),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(16)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n,r){var o=r(21);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var x=r(47),m=r(116),S=r(17),w=r(8),e=r(138);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,b=t||e;return function(t,n,r){for(var e,i,o=S(t),u=m(o),c=x(n,r,3),f=w(u.length),a=0,s=h?b(t,f):v?b(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(46),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var d=r(6),y=r(19),g=r(93),b=r(13),x=r(9),m="prototype",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,f=t&S.S,a=t&S.P,s=t&S.B,l=t&S.W,h=c?y:y[n]||(y[n]={}),v=h[m],p=c?d:f?d[n]:(d[n]||{})[m];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&x(h,e)||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[m]=e[m],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&v&&!v[e]&&b(v,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(34);t.exports=function(t){return Object(e(t))}},function(t,n,r){var o=r(196),e=r(1),i=r(118)("metadata"),u=i.store||(i.store=new(r(200))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(10)){var g=r(68),b=r(3),x=r(4),m=r(1),S=r(132),e=r(159),h=r(47),w=r(70),i=r(75),_=r(26),o=r(76),u=r(49),O=r(8),E=r(194),c=r(78),f=r(53),a=r(30),M=r(81),P=r(5),v=r(17),p=r(145),j=r(72),F=r(32),A=r(73).f,d=r(161),s=r(79),l=r(7),y=r(50),I=r(120),L=r(119),N=r(162),T=r(82),k=r(125),R=r(77),C=r(137),D=r(166),G=r(11),W=r(31),U=G.f,V=W.f,B=b.RangeError,q=b.TypeError,z=b.Uint8Array,K="ArrayBuffer",H="Shared"+K,J="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=I(!0),ut=I(!1),ct=N.values,ft=N.keys,at=N.entries,st=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,vt=Y.join,pt=Y.sort,dt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,bt=l("iterator"),xt=l("toStringTag"),mt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return It(L(t,t[St]),n)}),Pt=x(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[$].set&&x(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},It=function(t,n){if(!(P(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(n)},Lt=function(t,n){return Nt(L(t,t[St]),n)},Nt=function(t,n){for(var r=0,e=n.length,i=It(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=It(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=It(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&x(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Lt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(L(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Lt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),m(m.S+m.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),x(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Kt=o({},Gt);o(Kt,Vt),_(Kt,bt,Vt.values),o(Kt,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),Tt(Kt,"buffer","b"),Tt(Kt,"byteOffset","o"),Tt(Kt,"byteLength","l"),Tt(Kt,"length","e"),U(Kt,xt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=b[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[$],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==K||c==H))return _t in n?Nt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if(s<(o=O(e)*l)+a)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[$]=j(Kt),_(a,"constructor",v)):x(function(){v(1)})&&x(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==K||i==H?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Nt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[$]=a,g||(a.constructor=v));var s=a[bt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,mt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[xt]==h:xt in a)||U(a,xt,{get:function(){return h}}),f[h]=v,m(m.G+m.W+m.F*(v!=c),f),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),m(m.P,h,Gt),R(h),m(m.P+m.F*jt,h,{set:Ut}),m(m.P+m.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),m(m.P+m.F*x(function(){new v(1).slice()}),h,{slice:Wt}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!x(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),T[h]=d?s:y,g||d||_(a,bt,y)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(18),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(20)(function(){return 7!=Object.defineProperty(r(59)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var x=r(23),m=r(54),S=r(66),w=r(13),_=r(36),O=r(98),E=r(38),M=r(104),P=r(16)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n,e){var i=e(22),o=e(101),u=e(35),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(59)("iframe"),r=u.length;for(n.style.display="none",e(95).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(65),i=r(35).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(9),c=r(15),f=r(92)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(26)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=!1},function(t,n,r){var e=r(79)("meta"),i=r(5),o=r(30),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(47),v=r(177),p=r(145),d=r(2),y=r(8),g=r(161),b={},x={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===b||f===x)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===b||f===x)return f}).BREAK=b,n.RETURN=x},function(t,n,e){var i=e(2),o=e(183),u=e(141),c=e(154)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(140)("iframe"),r=u.length;for(n.style.display="none",e(143).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(185),i=r(141).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(185),i=r(141);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(27);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(49),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(30),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(51),c=r(4),f=r(157),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"â€‹Â…"!="â€‹Â…"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){t.exports={default:r(88),__esModule:!0}},function(t,n,r){t.exports={default:r(89),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(86)),o=e(r(85)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(111),r(109),r(112),r(113),t.exports=r(19).Symbol},function(t,n,r){r(110),r(114),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(15),a=r(107),s=r(106);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var o=r(90);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var c=r(29),f=r(64),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(58);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(58);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(62),i=r(24),o=r(38),u={};r(13)(u,r(16)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(25)("meta"),i=r(18),o=r(9),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(20)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(14),c=r(22),f=r(29);t.exports=r(12)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(24),o=r(15),u=r(42),c=r(9),f=r(60),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(15),i=r(63).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(9),i=r(55),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(34);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(91),i=r(99),o=r(36),u=r(15);t.exports=r(61)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(105)(!0);r(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(6),u=r(9),i=r(12),o=r(54),c=r(66),f=r(100).KEY,a=r(20),s=r(40),l=r(38),h=r(25),v=r(16),p=r(44),d=r(43),y=r(94),g=r(97),b=r(22),x=r(18),m=r(55),S=r(15),w=r(42),_=r(24),O=r(62),E=r(103),M=r(102),P=r(64),j=r(14),F=r(29),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(63).f=E.f=tt,r(37).f=Q,P.f=nt,i&&!r(23)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(13)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(108);for(var e=r(6),i=r(13),o=r(36),u=r(16)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(46),i=r(3),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(68)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var i=r(2),o=r(21),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){var f=r(33),a=r(8),s=r(78);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),b=r(1),x=r(27),m=r(76),S=r(69),w=r(71),_=r(70),O=r(5),E=r(4),M=r(125),P=r(83),j=r(144);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];x(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),m(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,b(b.G+b.W+b.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";r(197);var s=r(27),l=r(26),h=r(4),v=r(51),p=r(7),d=r(152),y=p("species"),g=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),b=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(r,t,n){var e=p(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=""[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](""),!t}):void 0;if(!o||!i||"replace"===r&&!g||"split"===r&&!b){var u=/./[e],c=n(v,e,""[r],function(t,n,r,e,i){return n.exec===d?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),f=c[0],a=c[1];s(String.prototype,r,f),l(RegExp.prototype,e,2==t?function(t,n){return a.call(t,this,n)}:function(t){return a.call(t,this)})}}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(68)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var i=r(81),o=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var e=r.call(t,n);if("object"!=typeof e)throw new TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,n)}},function(t,n,r){"use strict";var e=r(1),u=r(21),c=r(47),f=r(71);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var f=r(49),a=r(51);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){for(var e,i=r(3),o=r(26),u=r(79),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n,r){var e=r(3).navigator;t.exports=e&&e.userAgent||""},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,i=r(87),l=(e=i)&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var e=r(131)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){"use strict";var c=r(17),f=r(78),a=r(8);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(215);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(11),i=r(75);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(153).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(82),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(72),i=r(75),o=r(83),u={};r(26)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var x=r(68),m=r(1),S=r(27),w=r(26),_=r(82),O=r(146),E=r(83),M=r(32),P=r(7)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(158).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!a||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){f.call(c,t)};else{var o=!0,u=document.createTextNode("");new a(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(21);t.exports.f=function(t){return new e(t)}},function(t,n,r){"use strict";var e,i,u=r(115),c=RegExp.prototype.exec,f=String.prototype.replace,o=c,a="lastIndex",s=(e=/a/,i=/b*/g,c.call(e,"a"),c.call(i,"a"),0!==e[a]||0!==i[a]),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var n,r,e,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",u.call(o))),s&&(n=o[a]),e=c.call(o,t),s&&e&&(o[a]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&f.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=o},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(47)(Function.call,i(31).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(118)("keys"),i=r(79);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(124),i=r(51);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(49),o=r(51);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r Â áš€á â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(47),c=r(175),f=r(143),a=r(140),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},b="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},m=function(t){x.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(x,t,1))}:d&&d.now?e=function(t){d.now(u(x,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=b in a("script")?function(t){f.appendChild(a("script"))[b]=function(){f.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[I],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[H])throw R(L);var o=t[K]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[H])throw R(L);for(var c=t[K]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(10),y=r(68),g=r(132),b=r(26),x=r(76),m=r(4),S=r(70),w=r(49),_=r(8),O=r(194),E=r(73).f,M=r(11).f,P=r(137),j=r(83),F="ArrayBuffer",A="DataView",I="prototype",L="Wrong index!",N=p[F],T=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=N,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",K=d?"_b":"buffer",H=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!m(function(){N(1)})||!m(function(){new N(-1)})||m(function(){return new N,new N(1.5),new N(NaN),N.name!=F})){for(var $,Y=(N=function(t){return S(this,N),new D(O(t))})[I]=D[I],X=E(D),Q=0;X.length>Q;)($=X[Q++])in N||b(N,$,D[$]);y||(Y.constructor=N)}var Z=new T(new N(2)),tt=T[I].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||x(T[I],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else N=function(t){S(this,N,F);var n=O(t);this._b=P.call(new Array(n),0),this[H]=n},T=function(t,n,r){S(this,T,A),S(t,N,A);var e=t[H],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[K]=t,this[J]=i,this[H]=r},d&&(l(N,q,"_l"),l(T,"buffer","_b"),l(T,q,"_l"),l(T,z,"_o")),x(T[I],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(N,F),j(T,A),b(T[I],g.VIEW,!0),n[F]=N,n[A]=T},function(t,n,r){var e=r(3),i=r(46),o=r(68),u=r(195),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(81),i=r(7)("iterator"),o=r(82);t.exports=r(46).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(67),i=r(178),o=r(82),u=r(33);t.exports=r(147)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(78),l=r(8);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(71);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(21),l=r(17),h=r(116),v=r(8);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(21),u=r(5),c=r(175),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(11).f,c=r(72),f=r(76),a=r(47),s=r(70),l=r(71),e=r(147),i=r(178),o=r(77),h=r(10),v=r(69).fastKey,p=r(80),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(81),i=r(167);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(76),c=r(69).getWeak,i=r(2),f=r(5),a=r(70),s=r(71),e=r(50),l=r(30),h=r(80),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(123),d=r(5),y=r(8),g=r(47),b=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[b])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(140)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(149),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:f<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(10),v=r(74),p=r(127),d=r(117),y=r(17),g=r(116),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=d.f;i<e;)for(var c,f=g(arguments[i++]),a=o?v(f).concat(o(f)):v(f),s=a.length,l=0;l<s;)c=a[l++],h&&!u.call(f,c)||(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(11),c=r(2),f=r(74);t.exports=r(10)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(33),i=r(73).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(30),c=r(33),f=r(120)(!1),a=r(154)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(10),a=r(74),s=r(33),l=r(117).f;t.exports=function(c){return function(t){for(var n,r=s(t),e=a(r),i=e.length,o=0,u=[];o<i;)n=e[o++],f&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(73),i=r(127),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(84).trim;t.exports=1/e(r(157)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(84).trim,o=r(157),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(151);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var s=r(8),l=r(156),h=r(51);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(49),i=r(8);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(152);r(1)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(115)})},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(3),i=r(50)(0),u=r(27),c=r(69),f=r(182),a=r(172),s=r(5),l=r(80),h=r(80),v=!e.ActiveXObject&&"ActiveXObject"in e,p="WeakMap",d=c.getWeak,y=Object.isExtensible,g=a.ufstore,b=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},x={get:function(t){if(s(t)){var n=d(t);return!0===n?g(l(this,p)).get(t):n?n[this._i]:void 0}},set:function(t,n){return a.def(l(this,p),t,n)}},m=t.exports=r(121)(p,b,x,a,!0,!0);h&&v&&(f((o=a.getConstructor(b,p)).prototype,x),c.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(163)),a=e((e(r(164)),r(414))),u=e(r(134)),c=e(r(204)),s=r(135);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(413),r(209),r(211),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(L,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[b];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",m=g.toStringTag||"@@toStringTag",S="object"==typeof L,w=t.regeneratorRuntime;if(w)S&&(L.exports=w);else{(w=t.regeneratorRuntime=S?L.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[b]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,b)&&(j=A);var I=n.prototype=h.prototype=Object.create(j);r.prototype=I.constructor=n,n.constructor=r,n[m]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,m in t||(t[m]="GeneratorFunction")),t.prototype=Object.create(I),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[x]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(I),I[m]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,function(t,n,r){r(221),t.exports=r(46).RegExp.escape},,,,function(t,n,r){var e=r(5),i=r(123),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&(null===(n=n[o])&&(n=void 0))),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(53);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(74),f=r(127),a=r(117);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){t.exports=r(118)("native-function-to-string",Function.toString)},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n,r){var e=r(1),i=r(220)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(166)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(50)(4);e(e.P+e.F*!r(48)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(137)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(50)(2);e(e.P+e.F*!r(48)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(0),o=r(48)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(47),e=r(1),v=r(17),p=r(177),d=r(145),y=r(8),g=r(139),b=r(161);e(e.S+e.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=b(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(120)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(48)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(123)})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=[].join;e(e.P+e.F*(r(116)!=Object||!r(48)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=r(49),u=r(8),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(48)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(1);e(e.P+e.F*!r(48)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(139);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(143),a=r(45),s=r(78),l=r(8),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(3);e(e.P+e.F*!r(48)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(21),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(48)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(77)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(216);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(26)(i,e,r(217))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(27)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(169)})},function(t,n,r){"use strict";var e=r(5),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(10)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(180),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(149);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(148);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(179)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):0<r?i+=(e=r/c)*e:i+=r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(180)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(149)})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(30),o=r(45),u=r(144),s=r(53),c=r(4),f=r(73).f,a=r(31).f,l=r(11).f,h=r(84).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(72)(y))==v,b="trim"in String.prototype,x=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=b?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(x(n)),r,p):x(n)};for(var m,S=r(10)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,m=S[w])&&!i(p,m)&&l(p,m,a(d,m));(p.prototype=y).constructor=p,r(27)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(176),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(188);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(49),s=r(165),l=r(156),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*y(2,69,1))-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return f=0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(165),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(182)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(72)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(183)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(33),i=r(31).f;r(52)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(52)("getOwnPropertyNames",function(){return r(184).f})},function(t,n,r){var e=r(17),i=r(32);r(52)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(52)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(52)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(52)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(192)})},function(t,n,r){var e=r(17),i=r(74);r(52)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(153).set})},function(t,n,r){"use strict";var e=r(81),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(27)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(188);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(68),f=r(3),a=r(47),s=r(81),l=r(1),h=r(5),v=r(21),p=r(70),d=r(71),y=r(119),g=r(158).set,b=r(150)(),x=r(151),m=r(190),S=r(133),w=r(191),_="Promise",O=f.TypeError,E=f.process,M=E&&E.versions,P=M&&M.v8||"",j=f[_],F="process"==s(E),A=function(){},I=i=x.f,L=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;b(function(){for(var f=s._v,a=1==s._s,t=0,n=function(t){var n,r,e,i=a?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(a||(2==s._h&&C(s),s._h=1),!0===i?n=f:(c&&c.enter(),n=i(f),c&&(c.exit(),e=!0)),n===t.promise?u(O("Promise-chain cycle")):(r=N(n))?r.call(n,o,u):o(n)):u(f)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&k(s)})}},k=function(o){g.call(f,function(){var t,n,r,e=o._v,i=R(o);if(i&&(t=m(function(){F?E.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=F||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){g.call(f,function(){var t;F?E.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},G=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw O("Promise can't be resolved itself");(r=N(t))?b(function(){var n={_w:e,_d:!1};try{r.call(t,a(G,n,1),a(D,n,1))}catch(t){D.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){D.call({_w:e,_d:!1},t)}}};L||(j=function(t){p(this,j,_,"_h"),v(t),e.call(this);try{t(a(G,this,1),a(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(76)(j.prototype,{then:function(t,n){var r=I(y(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(G,t,1),this.reject=a(D,t,1)},x.f=I=function(t){return t===j||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!L,{Promise:j}),r(83)(j,_),r(77)(_),u=r(46)[_],l(l.S+l.F*!L,_,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!L),_,{resolve:function(t){return w(c&&this===u?j:this,t)}}),l(l.S+l.F*!(L&&r(125)(function(t){j.all(t).catch(A)})),_,{all:function(t){var u=this,n=I(u),c=n.resolve,f=n.reject,r=m(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=m(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(21),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(72),f=r(21),a=r(2),s=r(5),i=r(4),l=r(169),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(53);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(146)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(31),c=r(32),f=r(30),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(187)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(153);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(11),a=r(31),s=r(32),l=r(30),e=r(1),h=r(75),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}if(l(c,"value")){if(!1===c.writable||!p(u))return!1;if(i=a.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=e,f.f(u,r,i)}else f.f(u,r,h(0,e));return!0}return void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(144),i=r(11).f,u=r(73).f,c=r(124),f=r(115),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},y=u(s),g=0;y.length>g;)d(y[g++]);(l.constructor=a).prototype=l,r(27)(e,"RegExp",a)}r(77)("RegExp")},function(t,n,r){"use strict";var l=r(2),h=r(8),v=r(136),p=r(128);r(122)("match",1,function(e,i,a,s){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(a,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return p(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=p(r,e));){var f=String(i[0]);""===(u[c]=f)&&(r.lastIndex=v(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},function(t,n,r){"use strict";var O=r(2),e=r(17),E=r(8),M=r(49),P=r(136),j=r(128),F=Math.max,A=Math.min,h=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(122)("replace",2,function(i,o,S,w){function _(o,u,c,f,a,t){var s=c+o.length,l=f.length,n=p;return void 0!==a&&(a=e(a),n=v),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return o;case"`":return u.slice(0,c);case"'":return u.slice(s);case"<":r=a[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===f[i-1]?n.charAt(1):f[i-1]+n.charAt(1):t}r=f[e-1]}return void 0===r?"":r})}return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=O(t),i=String(this),o="function"==typeof n;o||(n=String(n));var u,c=e.global;if(c){var f=e.unicode;e.lastIndex=0}for(var a=[];;){var s=j(e,i);if(null===s)break;if(a.push(s),!c)break;""===String(s[0])&&(e.lastIndex=P(i,E(e.lastIndex),f))}for(var l="",h=0,v=0;v<a.length;v++){s=a[v];for(var p=String(s[0]),d=F(A(M(s.index),i.length),0),y=[],g=1;g<s.length;g++)y.push(void 0===(u=s[g])?u:String(u));var b=s.groups;if(o){var x=[p].concat(y,d,i);void 0!==b&&x.push(b);var m=String(n.apply(void 0,x))}else m=_(p,i,d,y,b,n);h<=d&&(l+=i.slice(h,d)+m,h=d+p.length)}return l+i.slice(h)}]})},function(t,n,r){"use strict";var f=r(2),a=r(192),s=r(128);r(122)("search",1,function(e,i,u,c){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=f(t),e=String(this),i=r.lastIndex;a(i,0)||(r.lastIndex=0);var o=s(r,e);return a(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,n,r){"use strict";var l=r(124),x=r(2),m=r(119),S=r(136),w=r(8),_=r(128),h=r(152),e=r(4),O=Math.min,v=[].push,u="split",p="length",d="lastIndex",E=4294967295,M=!e(function(){RegExp(E,"y")});r(122)("split",2,function(i,o,y,g){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[p]||2!="ab"[u](/(?:ab)*/)[p]||4!="."[u](/(.?)(.?)/)[p]||1<"."[u](/()()/)[p]||""[u](/.?/)[p]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,a=void 0===n?E:n>>>0,s=new RegExp(t.source,c+"g");(e=h.call(s,r))&&!(f<(i=s[d])&&(u.push(r.slice(f,e.index)),1<e[p]&&e.index<r[p]&&v.apply(u,e.slice(1)),o=e[0][p],f=i,u[p]>=a));)s[d]===e.index&&s[d]++;return f===r[p]?!o&&s.test("")||u.push(""):u.push(r.slice(f)),u[p]>a?u.slice(0,a):u}:"0"[u](void 0,0)[p]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=g(b,t,this,n,b!==y);if(r.done)return r.value;var e=x(t),i=String(this),o=m(e,RegExp),u=e.unicode,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(M?"y":"g"),f=new o(M?e:"^(?:"+e.source+")",c),a=void 0===n?E:n>>>0;if(0===a)return[];if(0===i.length)return null===_(f,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){f.lastIndex=M?l:0;var v,p=_(f,M?i:i.slice(l));if(null===p||(v=O(w(f.lastIndex+(M?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===a)return h;for(var d=1;d<=p.length-1;d++)if(h.push(p[d]),h.length===a)return h;l=s=v}}return h.push(i.slice(s)),h}]})},function(t,n,r){"use strict";r(198);var e=r(2),i=r(115),o=r(10),u="toString",c=/./[u],f=function(t){r(27)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(28)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(8),c=r(155),f="endsWith",a=""[f];e(e.P+e.F*r(142)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(28)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(28)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(78),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(155);e(e.P+e.F*r(142)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(131)(!0);r(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(28)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(33),c=r(8);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(156)})},function(t,n,r){"use strict";r(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(8),o=r(155),u="startsWith",c=""[u];e(e.P+e.F*r(142)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(84)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(30),i=r(10),o=r(1),c=r(27),f=r(69).KEY,a=r(4),s=r(118),l=r(83),h=r(79),v=r(7),p=r(195),d=r(160),y=r(218),g=r(123),b=r(2),x=r(5),m=r(17),S=r(33),w=r(53),_=r(75),O=r(72),E=r(184),M=r(31),P=r(127),j=r(11),F=r(74),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(73).f=E.f=tt,r(117).f=Q,P.f=nt,i&&!r(68)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(26)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(132),o=r(159),a=r(2),s=r(78),l=r(8),u=r(5),c=r(3).ArrayBuffer,h=r(119),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(77)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(132).ABV,{DataView:r(159).DataView})},function(t,n,r){r(57)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(172),i=r(80);r(121)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(21),f=r(138);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(67)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(49),f=r(138);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(67)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(120)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)("includes")},function(t,n,r){var e=r(1),i=r(150)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(129)("Map")},function(t,n,r){r(130)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(171)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(181),u=r(179);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(181)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(186)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(187),a=r(33),s=r(31),l=r(139);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(186)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(46),i=r(150)(),c=r(7)("observable"),f=r(21),a=r(2),s=r(70),l=r(76),h=r(26),v=r(71),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},x=function(t,n){a(t),this._c=void 0,this._o=t,t=new m(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};x.prototype=l({},{unsubscribe:function(){b(this)}});var m=function(t){this._s=t};m.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=new Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(77)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(3),u=r(119),c=r(191);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(151),o=r(190);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(56),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(56),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(199),u=r(167),e=r(56),i=r(2),c=r(32),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(21),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(129)("Set")},function(t,n,r){r(130)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(171)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(51),o=r(8),u=r(124),c=r(115),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(146)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(84)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(84)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(160)("asyncIterator")},function(t,n,r){r(160)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(129)("WeakMap")},function(t,n,r){r(130)("WeakMap")},function(t,n,r){r(129)("WeakSet")},function(t,n,r){r(130)("WeakSet")},function(t,n,r){for(var e=r(162),i=r(74),o=r(27),u=r(3),c=r(26),f=r(82),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],b=v[g],x=u[g],m=x&&x.prototype;if(m&&(m[s]||c(m,s,h),m[l]||c(m,l,g),f[g]=h,b))for(y in e)m[y]||o(m,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(158);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(133),u=[].slice,c=/MSIE .\./.test(o),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(341),r(280),r(282),r(281),r(284),r(286),r(291),r(285),r(283),r(293),r(292),r(288),r(289),r(287),r(279),r(290),r(294),r(295),r(247),r(249),r(248),r(297),r(296),r(267),r(277),r(278),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(328),r(333),r(340),r(331),r(323),r(324),r(329),r(334),r(336),r(319),r(320),r(321),r(322),r(325),r(326),r(327),r(330),r(332),r(335),r(337),r(338),r(339),r(242),r(244),r(243),r(246),r(245),r(231),r(229),r(235),r(232),r(238),r(240),r(228),r(234),r(225),r(239),r(223),r(237),r(236),r(230),r(233),r(222),r(224),r(227),r(226),r(241),r(162),r(313),r(197),r(318),r(198),r(314),r(315),r(316),r(317),r(298),r(196),r(199),r(200),r(353),r(342),r(343),r(348),r(351),r(352),r(346),r(349),r(347),r(350),r(344),r(345),r(299),r(300),r(301),r(302),r(303),r(306),r(304),r(305),r(307),r(308),r(309),r(310),r(312),r(311),r(356),r(354),r(355),r(397),r(400),r(399),r(401),r(402),r(398),r(403),r(404),r(378),r(381),r(377),r(375),r(376),r(379),r(380),r(362),r(396),r(361),r(395),r(407),r(409),r(360),r(394),r(406),r(408),r(359),r(405),r(358),r(363),r(364),r(365),r(366),r(367),r(369),r(368),r(370),r(371),r(372),r(374),r(373),r(383),r(384),r(385),r(386),r(388),r(387),r(390),r(389),r(391),r(392),r(393),r(357),r(382),r(412),r(411),r(410),t.exports=r(46)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/DorwoningFish.github.io/./main.a5fda8.js"></script><script>!function(){var e,t;e="/DorwoningFish.github.io/slider.27463f.js",t=document.createElement("script"),document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}()</script>



<!--  -->

<script>
  /* æ ‡ç­¾é¡µæ ‡é¢˜åˆ‡æ¢ */
  var originTitle = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      document.title = "(ã¤ã‚§âŠ‚) æˆ‘è—å¥½äº†å“¦~ " + originTitle;
      clearTimeout(titleTime);
    } else {
      document.title = "(*Â´âˆ‡ï½€*) è¢«ä½ å‘ç°å•¦~ " + originTitle;
      titleTime = setTimeout(function () {
        document.title = originTitle;
      }, 2000);
    }
  });
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">æ‰€æœ‰æ–‡ç« </a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">å‹é“¾</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">å…³äºæˆ‘</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">JVM</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">ç®—æ³•</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">é—®é¢˜è®°å½•</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">java</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">ç¬”è®°</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">é¢è¯•</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">MySQL</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br/>1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yilia-plusæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/> npm i hexo-generator-json-content --save<br/><br/>
            3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://zhousiwei.gitee.io/ibooks/" target="_blank" 
                class="search-title" title="è®°å½•å·¥ä½œå’Œå­¦ä¹ è¿‡ç¨‹ä¸­çš„ç¬”è®°ï¼šJavaã€å‰ç«¯å¼€å‘ã€Hexoåšå®¢ã€èšåˆæ”¯ä»˜ã€Linuxç¬”è®°ã€ElasticSearchã€ELKæ—¥å¿—åˆ†æ">
                
                  <img src="https://zhousiwei.gitee.io/ibooks/favicon.ico">
                
                æŠ€æœ¯ç¬”è®°
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/JoeyBling" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                GitHub
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://gitee.com/zhousiwei" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                ç äº‘
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://www.jianshu.com/u/02cbf31a043a" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                ç®€ä¹¦
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://blog.csdn.net/qq_30930805" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                CSDN
              </a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
        
          
  	  		<div class="aboutme-wrap" id="aboutme">ä¸»è¦æ¶‰åŠæŠ€æœ¯ï¼š<br>Javaåç«¯å¼€å‘ã€æ¨èç®—æ³•ã€<br>å…¬ä¼—å·å¼€å‘ã€å¼€æºçˆ±å¥½è€…ã€Linux<br><br>è”ç³»QQ:2830450774<br><br>å¾ˆæƒ­æ„§<br><br>åªåšäº†ä¸€ç‚¹å¾®å°çš„å·¥ä½œ<br>è°¢è°¢å¤§å®¶</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>

  
  
<script type="text/javascript" src="/DorwoningFish.github.io/plugins/activate-power-mode/activate-power-mode.js"></script>
<script>
  POWERMODE.colorful = true; // make power mode colorful
  POWERMODE.shake = false; // turn off shake
  document.body.addEventListener('input', POWERMODE);
</script>

  
  <!-- <script async type="text/javascript" size="90" alpha="0.2" zIndex="0" src="/DorwoningFish.github.io/plugins/ribbon.js/ribbon.min.js"></script> -->
  
  
    <script type="text/javascript" src="/DorwoningFish.github.io/plugins/live2d-widget.js/L2Dwidget.min.js"></script>
<script type="text/javascript">
  /**
   * å®Œæ•´é…ç½®è¯·å‚è€ƒï¼šhttps://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init
   */
  var pluginModelPath = "assets/", // æ¨¡å‹çš„æ–‡ä»¶è·¯å¾„ï¼Œæ— éœ€æ›´æ”¹
    pluginRootPath = "/DorwoningFish.github.io/live2d_models/"; // æ’ä»¶çš„è·¯å¾„ï¼Œæ— éœ€æ›´æ”¹
  //ç‰¹å®šçš„æ¨¡å‹jsonæ–‡ä»¶åç§°
  var modelPathJson = {
    "epsilon2_1": "Epsilon2.1",
    "gf": "Gantzert_Felixander",
    "haru/01": "haru01",
    "haru/02": "haru02",
    "nietzsche": "nietzche"
  }

  
    var modelName = "hibiki";
  

  var modelJsonPath = "";
  if (modelPathJson[modelName]) {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelPathJson[modelName] +
      ".model.json";
  } else {
    modelJsonPath = pluginRootPath + modelName + "/" + pluginModelPath + modelName + ".model.json";
  }
  L2Dwidget.init({
    model: {
      jsonPath: modelJsonPath
    },
    display: {
       position: "right", 
       width: 145, 
       height: 315, 
       hOffset: 50, 
      
    },
    mobile: {
       show: false, 
       scale: 0.6 
    },
    react: {
       opacity: 0.8 
    }
  })

</script>

  
  
  <script type="text/javascript" src="/DorwoningFish.github.io/lib/snow.js"></script>
  <script type="text/javascript" src="/DorwoningFish.github.io/lib/jquery-2.1.4.min.js"></script>
  <script>
    snow.down();
    $(window).resize(function() {
      $("canvas").css("z-index","500").remove();
      snow.down();
    });
  </script>
  
<script src="/DorwoningFish.github.io/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
